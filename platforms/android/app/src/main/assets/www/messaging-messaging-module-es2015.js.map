{"version":3,"sources":["./src/app/messaging/messaging.page.html","./src/app/messaging/messaging.module.ts","./src/app/messaging/messaging.page.scss","./src/app/messaging/messaging.page.ts"],"names":[],"mappings":"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","file":"messaging-messaging-module-es2015.js","sourcesContent":["module.exports = \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>messaging</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\n  <div id=\\\"chattingWith\\\">{{ name }} {{ sname }}</div> \\n\\n\\n  <div id=\\\"chatsContainer\\\" >\\n    <div id=\\\"messageBox\\\" *ngFor='let message of ( chatsRef$ | async)'>\\n        <span id=\\\"sentByMe\\\" *ngIf='message.sender == this_username'>{{ message.sender }}</span>\\n        <p id=\\\"messageSentByMe\\\" *ngIf='message.sender == this_username'>{{message.message }}</p>\\n\\n      <span id=\\\"notSentByMe\\\" *ngIf='message.sender != this_username'>{{ message.sender }}</span>\\n      <p id=\\\"messageNotSentByMe\\\" *ngIf='message.sender != this_username'>{{message.message }}</p>\\n    </div>\\n  </div>\\n\\n  <div id=\\\"messageInput\\\">\\n    <input id=\\\"message\\\" type=\\\"text\\\" placeholder=\\\"Message...\\\">\\n    <ion-icon name=\\\"send\\\" id=\\\"sendIcon\\\" (click)=\\\"sendMessage()\\\"></ion-icon>\\n  </div>\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { MessagingPage } from './messaging.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: MessagingPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [MessagingPage]\n})\nexport class MessagingPageModule {}\n","module.exports = \"div#chattingWith {\\n  width: 100%;\\n  height: 52px;\\n  background: #f7f7f7;\\n  color: gray;\\n  font-size: 15px;\\n  font-weight: bold;\\n  padding-left: 15px;\\n  padding-top: 15px;\\n}\\n\\nion-icon#sendIcon {\\n  float: right;\\n  margin-right: 15px;\\n  font-size: 36px;\\n  color: #000000;\\n  margin-top: 10px;\\n}\\n\\nspan#sentByMe {\\n  font-size: 12px;\\n  color: gray;\\n  float: right;\\n  width: 100%;\\n  text-align: right;\\n  padding-right: 15px;\\n}\\n\\n#messageSentByMe {\\n  width: auto;\\n  float: right;\\n  text-align: right;\\n  margin-right: 15px;\\n  background: orange;\\n  color: white;\\n  padding: 5px;\\n  border-radius: 5px;\\n  margin: 3px 15px 22px;\\n}\\n\\nspan#notSentByMe {\\n  font-size: 12px;\\n  color: gray;\\n  float: left;\\n  width: 100%;\\n  text-align: left;\\n  padding-left: 15px;\\n}\\n\\n#messageNotSentByMe {\\n  width: auto;\\n  float: left;\\n  text-align: left;\\n  margin-right: 15px;\\n  background: black;\\n  color: white;\\n  padding: 5px;\\n  border-radius: 5px;\\n  margin: 3px 15px 22px;\\n}\\n\\ndiv#messageBox {\\n  width: 100%;\\n  height: auto;\\n  float: left;\\n  margin-top: 10px;\\n}\\n\\ndiv#chatsContainer {\\n  width: 100%;\\n  float: left;\\n  padding-bottom: 100px;\\n  height: 75%;\\n  overflow: scroll;\\n}\\n\\n#messageInput {\\n  bottom: 0px;\\n  position: fixed;\\n  margin-bottom: 56px;\\n  width: 100%;\\n  background: white;\\n  height: 71px;\\n}\\n\\ninput#message {\\n  width: 75%;\\n  margin-left: 15px;\\n  height: 61px;\\n  border: 1px solid rgba(128, 128, 128, 0.14);\\n  border-radius: 15px;\\n  padding-left: 10px;\\n  outline: none;\\n}\\n\\ninput#message input {\\n  float: left;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hcHBsZS9EZXNrdG9wL1VwbG9hZGVkL1VwbG9hZGVkL3NyYy9hcHAvbWVzc2FnaW5nL21lc3NhZ2luZy5wYWdlLnNjc3MiLCJzcmMvYXBwL21lc3NhZ2luZy9tZXNzYWdpbmcucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFFO0VBQ0UsV0FBQTtFQUNBLFlBQUE7RUFDQSxtQkFBQTtFQUNBLFdBQUE7RUFDQSxlQUFBO0VBQ0EsaUJBQUE7RUFDQSxrQkFBQTtFQUNBLGlCQUFBO0FDQ0o7O0FER0E7RUFDRSxZQUFBO0VBQ0Esa0JBQUE7RUFDQSxlQUFBO0VBQ0EsY0FBQTtFQUNBLGdCQUFBO0FDQUY7O0FER0E7RUFDRSxlQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFDQSxXQUFBO0VBQ0EsaUJBQUE7RUFDQSxtQkFBQTtBQ0FGOztBREdBO0VBQ0UsV0FBQTtFQUNBLFlBQUE7RUFDQSxpQkFBQTtFQUNBLGtCQUFBO0VBQ0Esa0JBQUE7RUFDQSxZQUFBO0VBQ0EsWUFBQTtFQUNBLGtCQUFBO0VBQ0EscUJBQUE7QUNBRjs7QURJQTtFQUNFLGVBQUE7RUFDQSxXQUFBO0VBQ0EsV0FBQTtFQUNBLFdBQUE7RUFDQSxnQkFBQTtFQUNBLGtCQUFBO0FDREY7O0FESUE7RUFDRSxXQUFBO0VBQ0EsV0FBQTtFQUNBLGdCQUFBO0VBQ0Esa0JBQUE7RUFDQSxpQkFBQTtFQUNBLFlBQUE7RUFDQSxZQUFBO0VBQ0Esa0JBQUE7RUFDQSxxQkFBQTtBQ0RGOztBRElBO0VBQ0UsV0FBQTtFQUNBLFlBQUE7RUFDQSxXQUFBO0VBQ0EsZ0JBQUE7QUNERjs7QURJQTtFQUNFLFdBQUE7RUFDQSxXQUFBO0VBQ0EscUJBQUE7RUFDQSxXQUFBO0VBQ0EsZ0JBQUE7QUNERjs7QURJQTtFQUNFLFdBQUE7RUFDQSxlQUFBO0VBQ0EsbUJBQUE7RUFDQSxXQUFBO0VBQ0EsaUJBQUE7RUFDQSxZQUFBO0FDREY7O0FESUE7RUFDRSxVQUFBO0VBQ0EsaUJBQUE7RUFDQSxZQUFBO0VBQ0EsMkNBQUE7RUFDQSxtQkFBQTtFQUNBLGtCQUFBO0VBQ0EsYUFBQTtBQ0RGOztBREdFO0VBQ0UsV0FBQTtBQ0RKIiwiZmlsZSI6InNyYy9hcHAvbWVzc2FnaW5nL21lc3NhZ2luZy5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIgIGRpdiNjaGF0dGluZ1dpdGgge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogNTJweDtcbiAgICBiYWNrZ3JvdW5kOiAjZjdmN2Y3O1xuICAgIGNvbG9yOiBncmF5O1xuICAgIGZvbnQtc2l6ZTogMTVweDtcbiAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICBwYWRkaW5nLWxlZnQ6IDE1cHg7XG4gICAgcGFkZGluZy10b3A6IDE1cHg7XG59XG5cblxuaW9uLWljb24jc2VuZEljb24ge1xuICBmbG9hdDogcmlnaHQ7XG4gIG1hcmdpbi1yaWdodDogMTVweDtcbiAgZm9udC1zaXplOiAzNnB4O1xuICBjb2xvcjogIzAwMDAwMDtcbiAgbWFyZ2luLXRvcDogMTBweDtcbn1cblxuc3BhbiNzZW50QnlNZSB7XG4gIGZvbnQtc2l6ZTogMTJweDtcbiAgY29sb3I6IGdyYXk7XG4gIGZsb2F0OiByaWdodDtcbiAgd2lkdGg6IDEwMCU7XG4gIHRleHQtYWxpZ246IHJpZ2h0O1xuICBwYWRkaW5nLXJpZ2h0OiAxNXB4O1xufVxuXG4jbWVzc2FnZVNlbnRCeU1le1xuICB3aWR0aDogYXV0bztcbiAgZmxvYXQ6IHJpZ2h0O1xuICB0ZXh0LWFsaWduOiByaWdodDtcbiAgbWFyZ2luLXJpZ2h0OiAxNXB4O1xuICBiYWNrZ3JvdW5kOiBvcmFuZ2U7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgcGFkZGluZzogNXB4O1xuICBib3JkZXItcmFkaXVzOiA1cHg7XG4gIG1hcmdpbjogM3B4IDE1cHggMjJweDtcbn1cblxuXG5zcGFuI25vdFNlbnRCeU1lIHtcbiAgZm9udC1zaXplOiAxMnB4O1xuICBjb2xvcjogZ3JheTtcbiAgZmxvYXQ6IGxlZnQ7XG4gIHdpZHRoOiAxMDAlO1xuICB0ZXh0LWFsaWduOiBsZWZ0O1xuICBwYWRkaW5nLWxlZnQ6IDE1cHg7XG59XG5cbiNtZXNzYWdlTm90U2VudEJ5TWV7XG4gIHdpZHRoOiBhdXRvO1xuICBmbG9hdDogbGVmdDtcbiAgdGV4dC1hbGlnbjogbGVmdDtcbiAgbWFyZ2luLXJpZ2h0OiAxNXB4O1xuICBiYWNrZ3JvdW5kOiBibGFjaztcbiAgY29sb3I6IHdoaXRlO1xuICBwYWRkaW5nOiA1cHg7XG4gIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgbWFyZ2luOiAzcHggMTVweCAyMnB4O1xufVxuXG5kaXYjbWVzc2FnZUJveCB7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IGF1dG87XG4gIGZsb2F0OiBsZWZ0O1xuICBtYXJnaW4tdG9wOiAxMHB4O1xufVxuXG5kaXYjY2hhdHNDb250YWluZXIge1xuICB3aWR0aDogMTAwJTtcbiAgZmxvYXQ6IGxlZnQ7XG4gIHBhZGRpbmctYm90dG9tOiAxMDBweDtcbiAgaGVpZ2h0OiA3NSU7XG4gIG92ZXJmbG93OiBzY3JvbGw7XG59XG5cbiNtZXNzYWdlSW5wdXR7XG4gIGJvdHRvbTogMHB4O1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIG1hcmdpbi1ib3R0b206IDU2cHg7XG4gIHdpZHRoOiAxMDAlO1xuICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgaGVpZ2h0OiA3MXB4O1xufVxuXG5pbnB1dCNtZXNzYWdlIHtcbiAgd2lkdGg6IDc1JTtcbiAgbWFyZ2luLWxlZnQ6IDE1cHg7XG4gIGhlaWdodDogNjFweDtcbiAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgxMjgsIDEyOCwgMTI4LCAwLjE0KTtcbiAgYm9yZGVyLXJhZGl1czogMTVweDtcbiAgcGFkZGluZy1sZWZ0OiAxMHB4O1xuICBvdXRsaW5lOiBub25lO1xuXG4gIGlucHV0e1xuICAgIGZsb2F0OiBsZWZ0O1xuICB9XG59XG4iLCJkaXYjY2hhdHRpbmdXaXRoIHtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogNTJweDtcbiAgYmFja2dyb3VuZDogI2Y3ZjdmNztcbiAgY29sb3I6IGdyYXk7XG4gIGZvbnQtc2l6ZTogMTVweDtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIHBhZGRpbmctbGVmdDogMTVweDtcbiAgcGFkZGluZy10b3A6IDE1cHg7XG59XG5cbmlvbi1pY29uI3NlbmRJY29uIHtcbiAgZmxvYXQ6IHJpZ2h0O1xuICBtYXJnaW4tcmlnaHQ6IDE1cHg7XG4gIGZvbnQtc2l6ZTogMzZweDtcbiAgY29sb3I6ICMwMDAwMDA7XG4gIG1hcmdpbi10b3A6IDEwcHg7XG59XG5cbnNwYW4jc2VudEJ5TWUge1xuICBmb250LXNpemU6IDEycHg7XG4gIGNvbG9yOiBncmF5O1xuICBmbG9hdDogcmlnaHQ7XG4gIHdpZHRoOiAxMDAlO1xuICB0ZXh0LWFsaWduOiByaWdodDtcbiAgcGFkZGluZy1yaWdodDogMTVweDtcbn1cblxuI21lc3NhZ2VTZW50QnlNZSB7XG4gIHdpZHRoOiBhdXRvO1xuICBmbG9hdDogcmlnaHQ7XG4gIHRleHQtYWxpZ246IHJpZ2h0O1xuICBtYXJnaW4tcmlnaHQ6IDE1cHg7XG4gIGJhY2tncm91bmQ6IG9yYW5nZTtcbiAgY29sb3I6IHdoaXRlO1xuICBwYWRkaW5nOiA1cHg7XG4gIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgbWFyZ2luOiAzcHggMTVweCAyMnB4O1xufVxuXG5zcGFuI25vdFNlbnRCeU1lIHtcbiAgZm9udC1zaXplOiAxMnB4O1xuICBjb2xvcjogZ3JheTtcbiAgZmxvYXQ6IGxlZnQ7XG4gIHdpZHRoOiAxMDAlO1xuICB0ZXh0LWFsaWduOiBsZWZ0O1xuICBwYWRkaW5nLWxlZnQ6IDE1cHg7XG59XG5cbiNtZXNzYWdlTm90U2VudEJ5TWUge1xuICB3aWR0aDogYXV0bztcbiAgZmxvYXQ6IGxlZnQ7XG4gIHRleHQtYWxpZ246IGxlZnQ7XG4gIG1hcmdpbi1yaWdodDogMTVweDtcbiAgYmFja2dyb3VuZDogYmxhY2s7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgcGFkZGluZzogNXB4O1xuICBib3JkZXItcmFkaXVzOiA1cHg7XG4gIG1hcmdpbjogM3B4IDE1cHggMjJweDtcbn1cblxuZGl2I21lc3NhZ2VCb3gge1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiBhdXRvO1xuICBmbG9hdDogbGVmdDtcbiAgbWFyZ2luLXRvcDogMTBweDtcbn1cblxuZGl2I2NoYXRzQ29udGFpbmVyIHtcbiAgd2lkdGg6IDEwMCU7XG4gIGZsb2F0OiBsZWZ0O1xuICBwYWRkaW5nLWJvdHRvbTogMTAwcHg7XG4gIGhlaWdodDogNzUlO1xuICBvdmVyZmxvdzogc2Nyb2xsO1xufVxuXG4jbWVzc2FnZUlucHV0IHtcbiAgYm90dG9tOiAwcHg7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgbWFyZ2luLWJvdHRvbTogNTZweDtcbiAgd2lkdGg6IDEwMCU7XG4gIGJhY2tncm91bmQ6IHdoaXRlO1xuICBoZWlnaHQ6IDcxcHg7XG59XG5cbmlucHV0I21lc3NhZ2Uge1xuICB3aWR0aDogNzUlO1xuICBtYXJnaW4tbGVmdDogMTVweDtcbiAgaGVpZ2h0OiA2MXB4O1xuICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDEyOCwgMTI4LCAxMjgsIDAuMTQpO1xuICBib3JkZXItcmFkaXVzOiAxNXB4O1xuICBwYWRkaW5nLWxlZnQ6IDEwcHg7XG4gIG91dGxpbmU6IG5vbmU7XG59XG5pbnB1dCNtZXNzYWdlIGlucHV0IHtcbiAgZmxvYXQ6IGxlZnQ7XG59Il19 */\"","import { Component, OnInit } from '@angular/core';\nimport { StatusBar } from '@ionic-native/status-bar/ngx';\nimport { Storage } from '@ionic/storage';\nimport { AngularFireDatabase} from 'angularfire2/database';\nimport { Observable } from 'rxjs';\nimport { Router } from '@angular/router';\nimport { RequestsService } from '../services/requests.service';\nimport * as $ from 'jquery';\nimport { TabsPage } from '../tabs/tabs.page';\n\n\n@Component({\n  selector: 'app-messaging',\n  templateUrl: './messaging.page.html',\n  styleUrls: ['./messaging.page.scss'],\n})\n\nexport class MessagingPage implements OnInit {\n\n\n  chatsRef$: Observable<any[]>;\n  chatID: Observable<any>;\n  name: Observable<any>;\n  sname: Observable<any>;\n  receiverUsername: Observable<any>;\n  receiverID: Observable<any>;\n  this_userID: Observable<any>;\n  this_username: Observable<any>;\n  constructor(private tabs: TabsPage,private statusBar: StatusBar,private storage: Storage,private database:AngularFireDatabase,private route: Router, private requests: RequestsService) { \n    this.statusBar.overlaysWebView(false);\n    this.statusBar.styleDefault();\n    this.tabs.bgColor = '#000000';\n  }\n\n  ngOnInit() {\n  }\n\n\n\n  ionViewDidEnter() {\n    // Put here the code you want to execute\n    this.statusBar.overlaysWebView(false);\n    this.statusBar.backgroundColorByHexString('#ffffff');\n    this.tabs.bgColor = '#000000';\n    this.statusBar.styleDefault();\n    this.storage.get('mail').then((val) => {\n      let profile_url =  'https://uploaded.herokuapp.com/users/users';\n      //profile_url = 'http://127.0.0.1:8000/users/users'\n      if(val == undefined){\n        this.route.navigate(['']);\n      }else{\n        this.storage.get('username').then((val)=>{\n          this.this_username = val;\n        });\n        this.getChat();\n      }\n    });\n  }\n\n\n  getChat(){\n    this.storage.get(\"receiverName\").then( (name)=>{\n      this.name = name;\n      console.log(name);\n      this.storage.get(\"receiverSName\").then( (sname)=>{\n        this.sname = sname;\n        this.storage.get(\"receiverID\").then((id)=>{\n          this.receiverID = id;\n          this.storage.get(\"receiverUsername\").then((username)=>{\n            this.receiverUsername = username;\n            //get this current user's id\n            this.storage.get(\"current_userID\").then( (id)=>{\n              this.this_userID = id;\n              //get the chat ID\n              let user_ids: number[] = [id, this.receiverID];\n              console.log(user_ids);\n              console.log(Math.max.apply(Math,user_ids), Math.min.apply(Math,user_ids));\n              let chat_id =  JSON.stringify(Math.max.apply(Math,user_ids)) + JSON.stringify(Math.min.apply(Math,user_ids));\n              this.chatsRef$ =  this.chatsRef$ = this.database.list(\"chats/\"+chat_id, ref => ref.orderByChild('date') ).valueChanges();\n              this.chatsRef$.subscribe(()=>{\n                this.scroll();\n              });\n            });\n          });\n        });\n      });\n    });\n  }\n\n\n  sendMessage(){\n    let messageInput = $(\"#message\").val();\n    console.log(messageInput);\n    console.log(this.receiverUsername, this.receiverID);\n    //get this user's id\n    this.storage.get(\"current_userID\").then( (id)=>{\n      console.log(id);\n      let user_ids: number[] = [id, this.receiverID];\n      console.log(user_ids);\n      console.log(Math.max.apply(Math,user_ids), Math.min.apply(Math,user_ids));\n      let chat_id =  JSON.stringify(Math.max.apply(Math,user_ids)) + JSON.stringify(Math.min.apply(Math,user_ids));\n      console.log(chat_id);\n      if(messageInput != \"\"){\n        let message = { \"sender\":this.this_username, \"to\":this.receiverUsername, \"message\":messageInput };\n        //send message notification\n        this.sendMessageNotification(this.receiverUsername, messageInput,this.this_username);\n        this.database.list(\"chats/\"+chat_id).push(message);\n        $(\"#message\").val(\"\");\n        this.scroll();\n       }\n    });\n  }\n\n\n  scroll(){\n    setTimeout(function(){\n      let objDiv = document.getElementById(\"chatsContainer\");\n      objDiv.scrollTop = objDiv.scrollHeight;\n    },10);\n  }\n\n\n  //send notifcation of new message\n  sendMessageNotification(receiver,message, from){\n    let profile_url =  'https://uploaded.herokuapp.com/users/users';\n    let new_message = this.requests.sendMessageNotification(profile_url, receiver, from,message);\n    new_message.subscribe();\n\n\n  }\n\n}\n"],"sourceRoot":""}