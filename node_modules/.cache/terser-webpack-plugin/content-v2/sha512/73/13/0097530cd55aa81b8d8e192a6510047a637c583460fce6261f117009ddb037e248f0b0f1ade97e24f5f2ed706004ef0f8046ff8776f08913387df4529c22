{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{\"/uUt\":function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return i});var r=n(\"7o/Q\");function i(e,t){return n=>n.lift(new o(e,t))}class o{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new s(e,this.compare,this.keySelector))}}class s extends r.a{constructor(e,t,n){super(e),this.keySelector=n,this.hasKey=!1,\"function\"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:n}=this;t=n?n(e):e}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:e}=this;n=e(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=t,this.destination.next(e))}}},0:function(e,t,n){e.exports=n(\"zUnb\")},\"01F9\":function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return o});var r=n(\"mrSG\"),i=n(\"a3Cf\"),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cordovaFileError={1:\"NOT_FOUND_ERR\",2:\"SECURITY_ERR\",3:\"ABORT_ERR\",4:\"NOT_READABLE_ERR\",5:\"ENCODING_ERR\",6:\"NO_MODIFICATION_ALLOWED_ERR\",7:\"INVALID_STATE_ERR\",8:\"SYNTAX_ERR\",9:\"INVALID_MODIFICATION_ERR\",10:\"QUOTA_EXCEEDED_ERR\",11:\"TYPE_MISMATCH_ERR\",12:\"PATH_EXISTS_ERR\",13:\"WRONG_ENTRY_TYPE\",14:\"DIR_READ_ERR\"},t}return Object(r.__extends)(t,e),t.prototype.getFreeDiskSpace=function(){var e=this;return function(){if(!0===Object(i.checkAvailability)(e))return Object(i.getPromise)(function(e,t){cordova.exec(e,t,\"File\",\"getFreeDiskSpace\",[])})}()},t.prototype.checkDir=function(e,t){var n=this;return function(){if(!0===Object(i.checkAvailability)(n)){if(/^\\//.test(t)){var r=new FileError(5);return r.message=\"directory cannot start with /\",Promise.reject(r)}return n.resolveDirectoryUrl(e+t).then(function(){return!0})}}()},t.prototype.createDir=function(e,t,n){var r=this;return function(){if(!0===Object(i.checkAvailability)(r)){if(/^\\//.test(t)){var o=new FileError(5);return o.message=\"directory cannot start with /\",Promise.reject(o)}var s={create:!0};return n||(s.exclusive=!0),r.resolveDirectoryUrl(e).then(function(e){return r.getDirectory(e,t,s)})}}()},t.prototype.removeDir=function(e,t){var n=this;return function(){if(!0===Object(i.checkAvailability)(n)){if(/^\\//.test(t)){var r=new FileError(5);return r.message=\"directory cannot start with /\",Promise.reject(r)}return n.resolveDirectoryUrl(e).then(function(e){return n.getDirectory(e,t,{create:!1})}).then(function(e){return n.remove(e)})}}()},t.prototype.moveDir=function(e,t,n,r){var o=this;return function(){if(!0===Object(i.checkAvailability)(o)){if(/^\\//.test(r=r||t)){var s=new FileError(5);return s.message=\"directory cannot start with /\",Promise.reject(s)}return o.resolveDirectoryUrl(e).then(function(e){return o.getDirectory(e,t,{create:!1})}).then(function(e){return o.resolveDirectoryUrl(n).then(function(t){return o.move(e,t,r)})})}}()},t.prototype.copyDir=function(e,t,n,r){var o=this;return function(){if(!0===Object(i.checkAvailability)(o)){if(/^\\//.test(r)){var s=new FileError(5);return s.message=\"directory cannot start with /\",Promise.reject(s)}return o.resolveDirectoryUrl(e).then(function(e){return o.getDirectory(e,t,{create:!1})}).then(function(e){return o.resolveDirectoryUrl(n).then(function(t){return o.copy(e,t,r)})})}}()},t.prototype.listDir=function(e,t){var n=this;return function(){if(!0===Object(i.checkAvailability)(n)){if(/^\\//.test(t)){var r=new FileError(5);return r.message=\"directory cannot start with /\",Promise.reject(r)}return n.resolveDirectoryUrl(e).then(function(e){return n.getDirectory(e,t,{create:!1,exclusive:!1})}).then(function(e){var t=e.createReader();return n.readEntries(t)})}}()},t.prototype.removeRecursively=function(e,t){var n=this;return function(){if(!0===Object(i.checkAvailability)(n)){if(/^\\//.test(t)){var r=new FileError(5);return r.message=\"directory cannot start with /\",Promise.reject(r)}return n.resolveDirectoryUrl(e).then(function(e){return n.getDirectory(e,t,{create:!1})}).then(function(e){return n.rimraf(e)})}}()},t.prototype.checkFile=function(e,t){var n=this;return function(){if(!0===Object(i.checkAvailability)(n)){if(/^\\//.test(t)){var r=new FileError(5);return r.message=\"file cannot start with /\",Promise.reject(r)}return n.resolveLocalFilesystemUrl(e+t).then(function(e){if(e.isFile)return!0;var t=new FileError(13);return t.message=\"input is not a file\",Promise.reject(t)})}}()},t.prototype.createFile=function(e,t,n){var r=this;return function(){if(!0===Object(i.checkAvailability)(r)){if(/^\\//.test(t)){var o=new FileError(5);return o.message=\"file-name cannot start with /\",Promise.reject(o)}var s={create:!0};return n||(s.exclusive=!0),r.resolveDirectoryUrl(e).then(function(e){return r.getFile(e,t,s)})}}()},t.prototype.removeFile=function(e,t){var n=this;return function(){if(!0===Object(i.checkAvailability)(n)){if(/^\\//.test(t)){var r=new FileError(5);return r.message=\"file-name cannot start with /\",Promise.reject(r)}return n.resolveDirectoryUrl(e).then(function(e){return n.getFile(e,t,{create:!1})}).then(function(e){return n.remove(e)})}}()},t.prototype.writeFile=function(e,t,n,r){var o=this;return void 0===r&&(r={}),function(){if(!0===Object(i.checkAvailability)(o)){if(/^\\//.test(t)){var s=new FileError(5);return s.message=\"file-name cannot start with /\",Promise.reject(s)}var a={create:!r.append,exclusive:!r.replace};return o.resolveDirectoryUrl(e).then(function(e){return o.getFile(e,t,a)}).then(function(e){return o.writeFileEntry(e,n,r)})}}()},t.prototype.writeFileEntry=function(e,t,n){var r=this;return this.createWriter(e).then(function(e){return n.append&&e.seek(e.length),n.truncate&&e.truncate(n.truncate),r.write(e,t)}).then(function(){return e})},t.prototype.writeExistingFile=function(e,t,n){var r=this;return function(){if(!0===Object(i.checkAvailability)(r))return r.writeFile(e,t,n,{replace:!0})}()},t.prototype.readAsText=function(e,t){var n=this;return function(){if(!0===Object(i.checkAvailability)(n))return n.readFile(e,t,\"Text\")}()},t.prototype.readAsDataURL=function(e,t){var n=this;return function(){if(!0===Object(i.checkAvailability)(n))return n.readFile(e,t,\"DataURL\")}()},t.prototype.readAsBinaryString=function(e,t){var n=this;return function(){if(!0===Object(i.checkAvailability)(n))return n.readFile(e,t,\"BinaryString\")}()},t.prototype.readAsArrayBuffer=function(e,t){var n=this;return function(){if(!0===Object(i.checkAvailability)(n))return n.readFile(e,t,\"ArrayBuffer\")}()},t.prototype.moveFile=function(e,t,n,r){var o=this;return function(){if(!0===Object(i.checkAvailability)(o)){if(/^\\//.test(r=r||t)){var s=new FileError(5);return s.message=\"file name cannot start with /\",Promise.reject(s)}return o.resolveDirectoryUrl(e).then(function(e){return o.getFile(e,t,{create:!1})}).then(function(e){return o.resolveDirectoryUrl(n).then(function(t){return o.move(e,t,r)})})}}()},t.prototype.copyFile=function(e,t,n,r){var o=this;return function(){if(!0===Object(i.checkAvailability)(o)){if(/^\\//.test(r=r||t)){var s=new FileError(5);return s.message=\"file name cannot start with /\",Promise.reject(s)}return o.resolveDirectoryUrl(e).then(function(e){return o.getFile(e,t,{create:!1})}).then(function(e){return o.resolveDirectoryUrl(n).then(function(t){return o.copy(e,t,r)})})}}()},t.prototype.fillErrorMessage=function(e){try{e.message=this.cordovaFileError[e.code]}catch(t){}},t.prototype.resolveLocalFilesystemUrl=function(e){var t=this;return function(){if(!0===Object(i.checkAvailability)(t))return Object(i.getPromise)(function(n,r){try{window.resolveLocalFileSystemURL(e,function(e){n(e)},function(e){t.fillErrorMessage(e),r(e)})}catch(i){t.fillErrorMessage(i),r(i)}})}()},t.prototype.resolveDirectoryUrl=function(e){var t=this;return function(){if(!0===Object(i.checkAvailability)(t))return t.resolveLocalFilesystemUrl(e).then(function(e){if(e.isDirectory)return e;var t=new FileError(13);return t.message=\"input is not a directory\",Promise.reject(t)})}()},t.prototype.getDirectory=function(e,t,n){var r=this;return function(){if(!0===Object(i.checkAvailability)(r))return new Promise(function(i,o){try{e.getDirectory(t,n,function(e){i(e)},function(e){r.fillErrorMessage(e),o(e)})}catch(s){r.fillErrorMessage(s),o(s)}})}()},t.prototype.getFile=function(e,t,n){var r=this;return function(){if(!0===Object(i.checkAvailability)(r))return new Promise(function(i,o){try{e.getFile(t,n,i,function(e){r.fillErrorMessage(e),o(e)})}catch(s){r.fillErrorMessage(s),o(s)}})}()},t.prototype.readFile=function(e,t,n){var r=this;if(/^\\//.test(t)){var o=new FileError(5);return o.message=\"file-name cannot start with /\",Promise.reject(o)}return this.resolveDirectoryUrl(e).then(function(e){return r.getFile(e,t,{create:!1})}).then(function(e){var t=new FileReader;return Object(i.getPromise)(function(r,i){t.onloadend=function(){void 0!==t.result||null!==t.result?r(t.result):i(void 0!==t.error||null!==t.error?t.error:{code:null,message:\"READER_ONLOADEND_ERR\"})},e.file(function(e){t[\"readAs\"+n].call(t,e)},function(e){i(e)})})})},t.prototype.remove=function(e){var t=this;return new Promise(function(n,r){e.remove(function(){n({success:!0,fileRemoved:e})},function(e){t.fillErrorMessage(e),r(e)})})},t.prototype.move=function(e,t,n){var r=this;return new Promise(function(i,o){e.moveTo(t,n,function(e){i(e)},function(e){r.fillErrorMessage(e),o(e)})})},t.prototype.copy=function(e,t,n){var r=this;return new Promise(function(i,o){e.copyTo(t,n,function(e){i(e)},function(e){r.fillErrorMessage(e),o(e)})})},t.prototype.readEntries=function(e){var t=this;return new Promise(function(n,r){e.readEntries(function(e){n(e)},function(e){t.fillErrorMessage(e),r(e)})})},t.prototype.rimraf=function(e){var t=this;return new Promise(function(n,r){e.removeRecursively(function(){n({success:!0,fileRemoved:e})},function(e){t.fillErrorMessage(e),r(e)})})},t.prototype.createWriter=function(e){var t=this;return new Promise(function(n,r){e.createWriter(function(e){n(e)},function(e){t.fillErrorMessage(e),r(e)})})},t.prototype.write=function(e,t){return t instanceof Blob?this.writeFileInChunks(e,t):new Promise(function(n,r){e.onwriteend=function(t){e.error?r(e.error):n(t)},e.write(t)})},t.prototype.writeFileInChunks=function(e,t){var n=1048576,r=0;function o(){var i=Math.min(n,t.size-r),o=t.slice(r,r+i);r+=i,e.write(o)}return Object(i.getPromise)(function(n,i){e.onerror=i,e.onwrite=function(){r<t.size?o():n()},o()})},Object.defineProperty(t.prototype,\"applicationDirectory\",{get:function(){return Object(i.cordovaPropertyGet)(this,\"applicationDirectory\")},set:function(e){Object(i.cordovaPropertySet)(this,\"applicationDirectory\",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"applicationStorageDirectory\",{get:function(){return Object(i.cordovaPropertyGet)(this,\"applicationStorageDirectory\")},set:function(e){Object(i.cordovaPropertySet)(this,\"applicationStorageDirectory\",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"dataDirectory\",{get:function(){return Object(i.cordovaPropertyGet)(this,\"dataDirectory\")},set:function(e){Object(i.cordovaPropertySet)(this,\"dataDirectory\",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"cacheDirectory\",{get:function(){return Object(i.cordovaPropertyGet)(this,\"cacheDirectory\")},set:function(e){Object(i.cordovaPropertySet)(this,\"cacheDirectory\",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"externalApplicationStorageDirectory\",{get:function(){return Object(i.cordovaPropertyGet)(this,\"externalApplicationStorageDirectory\")},set:function(e){Object(i.cordovaPropertySet)(this,\"externalApplicationStorageDirectory\",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"externalDataDirectory\",{get:function(){return Object(i.cordovaPropertyGet)(this,\"externalDataDirectory\")},set:function(e){Object(i.cordovaPropertySet)(this,\"externalDataDirectory\",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"externalCacheDirectory\",{get:function(){return Object(i.cordovaPropertyGet)(this,\"externalCacheDirectory\")},set:function(e){Object(i.cordovaPropertySet)(this,\"externalCacheDirectory\",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"externalRootDirectory\",{get:function(){return Object(i.cordovaPropertyGet)(this,\"externalRootDirectory\")},set:function(e){Object(i.cordovaPropertySet)(this,\"externalRootDirectory\",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"tempDirectory\",{get:function(){return Object(i.cordovaPropertyGet)(this,\"tempDirectory\")},set:function(e){Object(i.cordovaPropertySet)(this,\"tempDirectory\",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"syncedDataDirectory\",{get:function(){return Object(i.cordovaPropertyGet)(this,\"syncedDataDirectory\")},set:function(e){Object(i.cordovaPropertySet)(this,\"syncedDataDirectory\",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"documentsDirectory\",{get:function(){return Object(i.cordovaPropertyGet)(this,\"documentsDirectory\")},set:function(e){Object(i.cordovaPropertySet)(this,\"documentsDirectory\",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"sharedDirectory\",{get:function(){return Object(i.cordovaPropertyGet)(this,\"sharedDirectory\")},set:function(e){Object(i.cordovaPropertySet)(this,\"sharedDirectory\",e)},enumerable:!0,configurable:!0}),t.pluginName=\"File\",t.plugin=\"cordova-plugin-file\",t.pluginRef=\"cordova.file\",t.repo=\"https://github.com/apache/cordova-plugin-file\",t.platforms=[\"Android\",\"Browser\",\"iOS\",\"macOS\",\"Windows\"],t}(i.IonicNativePlugin)},\"1JF4\":function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return o});var r=n(\"mrSG\"),i=n(\"a3Cf\"),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.OSInFocusDisplayOption={None:0,InAppAlert:1,Notification:2},t}return Object(r.__extends)(t,e),t.prototype.startInit=function(e,t){return Object(i.cordova)(this,\"startInit\",{sync:!0},arguments)},t.prototype.handleNotificationReceived=function(){return Object(i.cordova)(this,\"handleNotificationReceived\",{observable:!0},arguments)},t.prototype.handleNotificationOpened=function(){return Object(i.cordova)(this,\"handleNotificationOpened\",{observable:!0},arguments)},t.prototype.iOSSettings=function(e){return Object(i.cordova)(this,\"iOSSettings\",{sync:!0,platforms:[\"iOS\"]},arguments)},t.prototype.endInit=function(){return Object(i.cordova)(this,\"endInit\",{sync:!0},arguments)},t.prototype.promptForPushNotificationsWithUserResponse=function(){return Object(i.cordova)(this,\"promptForPushNotificationsWithUserResponse\",{platforms:[\"iOS\"]},arguments)},t.prototype.getTags=function(){return Object(i.cordova)(this,\"getTags\",{},arguments)},t.prototype.getIds=function(){return Object(i.cordova)(this,\"getIds\",{},arguments)},t.prototype.sendTag=function(e,t){return Object(i.cordova)(this,\"sendTag\",{sync:!0},arguments)},t.prototype.sendTags=function(e){return Object(i.cordova)(this,\"sendTags\",{sync:!0},arguments)},t.prototype.deleteTag=function(e){return Object(i.cordova)(this,\"deleteTag\",{sync:!0},arguments)},t.prototype.deleteTags=function(e){return Object(i.cordova)(this,\"deleteTags\",{sync:!0},arguments)},t.prototype.registerForPushNotifications=function(){return Object(i.cordova)(this,\"registerForPushNotifications\",{sync:!0},arguments)},t.prototype.enableVibrate=function(e){return Object(i.cordova)(this,\"enableVibrate\",{sync:!0},arguments)},t.prototype.enableSound=function(e){return Object(i.cordova)(this,\"enableSound\",{sync:!0},arguments)},t.prototype.inFocusDisplaying=function(e){return Object(i.cordova)(this,\"inFocusDisplaying\",{sync:!0},arguments)},t.prototype.setSubscription=function(e){return Object(i.cordova)(this,\"setSubscription\",{sync:!0},arguments)},t.prototype.getPermissionSubscriptionState=function(){return Object(i.cordova)(this,\"getPermissionSubscriptionState\",{},arguments)},t.prototype.postNotification=function(e){return Object(i.cordova)(this,\"postNotification\",{},arguments)},t.prototype.cancelNotification=function(e){return Object(i.cordova)(this,\"cancelNotification\",{sync:!0},arguments)},t.prototype.promptLocation=function(){return Object(i.cordova)(this,\"promptLocation\",{sync:!0},arguments)},t.prototype.syncHashedEmail=function(e){return Object(i.cordova)(this,\"syncHashedEmail\",{sync:!0},arguments)},t.prototype.setLogLevel=function(e){return Object(i.cordova)(this,\"setLogLevel\",{sync:!0},arguments)},t.prototype.setLocationShared=function(e){return Object(i.cordova)(this,\"setLocationShared\",{sync:!0},arguments)},t.prototype.addPermissionObserver=function(){return Object(i.cordova)(this,\"addPermissionObserver\",{observable:!0},arguments)},t.prototype.addSubscriptionObserver=function(){return Object(i.cordova)(this,\"addSubscriptionObserver\",{observable:!0},arguments)},t.prototype.setEmail=function(e,t){return Object(i.cordova)(this,\"setEmail\",{},arguments)},t.prototype.logoutEmail=function(){return Object(i.cordova)(this,\"logoutEmail\",{},arguments)},t.prototype.addEmailSubscriptionObserver=function(){return Object(i.cordova)(this,\"addEmailSubscriptionObserver\",{observable:!0},arguments)},t.prototype.clearOneSignalNotifications=function(){return Object(i.cordova)(this,\"clearOneSignalNotifications\",{sync:!0},arguments)},t.prototype.setRequiresUserPrivacyConsent=function(e){return Object(i.cordova)(this,\"setRequiresUserPrivacyConsent\",{},arguments)},t.prototype.provideUserConsent=function(e){return Object(i.cordova)(this,\"provideUserConsent\",{},arguments)},t.prototype.userProvidedPrivacyConsent=function(e){return Object(i.cordova)(this,\"userProvidedPrivacyConsent\",{},arguments)},t.prototype.setExternalUserId=function(e){return Object(i.cordova)(this,\"setExternalUserId\",{},arguments)},t.prototype.removeExternalUserId=function(){return Object(i.cordova)(this,\"removeExternalUserId\",{},arguments)},t.pluginName=\"OneSignal\",t.plugin=\"onesignal-cordova-plugin\",t.pluginRef=\"plugins.OneSignal\",t.repo=\"https://github.com/OneSignal/OneSignal-Cordova-SDK\",t.platforms=[\"Amazon Fire OS\",\"Android\",\"iOS\",\"Windows\"],t}(i.IonicNativePlugin)},\"1XSQ\":function(e,t,n){\"use strict\";var r=n(\"8Y7J\"),i=n(\"SVse\"),o=n(\"3N8a\");class s extends o.a{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(e,t,n):e.flush(this)}}var a=n(\"IjjT\");class u extends a.a{}const c=new u(s);var l=n(\"HDdC\");n.d(t,\"b\",function(){return h}),n.d(t,\"a\",function(){return d}),n.d(t,\"c\",function(){return f});const h=new r.o(\"angularfire2.realtimeDatabaseURL\");class d{constructor(e,t){this.zone=e,this.platformId=t}schedule(...e){return this.zone.runGuarded(function(){return c.schedule.apply(c,e)})}keepUnstableUntilFirst(e){return Object(i.q)(this.platformId)?new l.a(t=>{const n=()=>{},r=Zone.current.scheduleMacroTask(\"firebaseZoneBlock\",n,{},n,n);e.subscribe(e=>{\"scheduled\"===r.state&&r.invoke(),t.next(e)},e=>{\"scheduled\"===r.state&&r.invoke(),t.error(e)},()=>{\"scheduled\"===r.state&&r.invoke(),t.complete()})}):e}runOutsideAngular(e){return new l.a(t=>this.zone.runOutsideAngular(()=>e.subscribe(e=>this.zone.run(()=>t.next(e)),e=>this.zone.run(()=>t.error(e)),()=>this.zone.run(()=>t.complete()))))}}const f=e=>t=>new l.a(n=>t.subscribe(t=>e.run(()=>n.next(t)),t=>e.run(()=>n.error(t)),()=>e.run(()=>n.complete())))},\"2QA8\":function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return r});const r=(()=>\"function\"==typeof Symbol?Symbol(\"rxSubscriber\"):\"@@rxSubscriber_\"+Math.random())()},\"2Vo4\":function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return o});var r=n(\"XNiG\"),i=n(\"9ppp\");class o extends r.a{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new i.a;return this._value}next(e){super.next(this._value=e)}}},\"2fFW\":function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},\"3N8a\":function(e,t,n){\"use strict\";var r=n(\"quSY\");class i extends r.a{constructor(e,t){super()}schedule(e,t=0){return this}}n.d(t,\"a\",function(){return o});class o extends i{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,n=0){return setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error(\"executing a cancelled action\");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let n=!1,r=void 0;try{this.work(e)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}},\"4pTB\":function(e,t){},\"5+tZ\":function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return u});var r=n(\"ZUHj\"),i=n(\"l7GE\"),o=n(\"51Dv\"),s=n(\"lJxs\"),a=n(\"Cfvw\");function u(e,t,n=Number.POSITIVE_INFINITY){return\"function\"==typeof t?r=>r.pipe(u((n,r)=>Object(a.a)(e(n,r)).pipe(Object(s.a)((e,i)=>t(n,e,r,i))),n)):(\"number\"==typeof t&&(n=t),t=>t.lift(new c(e,n)))}class c{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new l(e,this.project,this.concurrent))}}class l extends i.a{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t,e,n)}_innerSub(e,t,n){const i=new o.a(this,void 0,void 0);this.destination.add(i),Object(r.a)(this,e,t,n,i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e,t,n,r,i){this.destination.next(t)}notifyComplete(e){const t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},\"51Dv\":function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return i});var r=n(\"7o/Q\");class i extends r.a{constructor(e,t,n){super(),this.parent=e,this.outerValue=t,this.outerIndex=n,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}},6233:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(\"O0a9\"))},\"6Joi\":function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r,i=(r=n(\"wj3C\"))&&\"object\"==typeof r&&\"default\"in r?r.default:r,o=n(\"q/0M\"),s=n(\"mrSG\"),a=n(\"zVF4\"),u=n(\"x7I3\"),c=i.SDK_VERSION,l=new o.Logger(\"@firebase/firestore\"),h=function(e){return e[e.DEBUG=0]=\"DEBUG\",e[e.ERROR=1]=\"ERROR\",e[e.SILENT=2]=\"SILENT\",e}({});function d(){return l.logLevel===o.LogLevel.DEBUG?h.DEBUG:l.logLevel===o.LogLevel.SILENT?h.SILENT:h.ERROR}function f(e){switch(e){case h.DEBUG:l.logLevel=o.LogLevel.DEBUG;break;case h.ERROR:l.logLevel=o.LogLevel.ERROR;break;case h.SILENT:l.logLevel=o.LogLevel.SILENT;break;default:l.error(\"Firestore (\"+c+\"): Invalid value passed to `setLogLevel`\")}}function p(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(l.logLevel<=o.LogLevel.DEBUG){var i=n.map(g);l.debug.apply(l,[\"Firestore (\"+c+\") [\"+e+\"]: \"+t].concat(i))}}function m(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(l.logLevel<=o.LogLevel.ERROR){var r=t.map(g);l.error.apply(l,[\"Firestore (\"+c+\"): \"+e].concat(r))}}function g(e){if(\"string\"==typeof e)return e;var t=b.getPlatform();try{return t.formatJSON(e)}catch(n){return e}}function y(e){var t=\"FIRESTORE (\"+c+\") INTERNAL ASSERTION FAILED: \"+e;throw m(t),new Error(t)}function v(e,t){e||y(t)}var b=function(){function e(){}return e.setPlatform=function(t){e.platform&&y(\"Platform already defined\"),e.platform=t},e.getPlatform=function(){return e.platform||y(\"Platform not set\"),e.platform},e}();function _(){return b.getPlatform().emptyByteString}var w={OK:\"ok\",CANCELLED:\"cancelled\",UNKNOWN:\"unknown\",INVALID_ARGUMENT:\"invalid-argument\",DEADLINE_EXCEEDED:\"deadline-exceeded\",NOT_FOUND:\"not-found\",ALREADY_EXISTS:\"already-exists\",PERMISSION_DENIED:\"permission-denied\",UNAUTHENTICATED:\"unauthenticated\",RESOURCE_EXHAUSTED:\"resource-exhausted\",FAILED_PRECONDITION:\"failed-precondition\",ABORTED:\"aborted\",OUT_OF_RANGE:\"out-of-range\",UNIMPLEMENTED:\"unimplemented\",INTERNAL:\"internal\",UNAVAILABLE:\"unavailable\",DATA_LOSS:\"data-loss\"},E=function(e){function t(t,n){var r=e.call(this,n)||this;return r.code=t,r.message=n,r.name=\"FirebaseError\",r.toString=function(){return r.name+\": [code=\"+r.code+\"]: \"+r.message},r}return s.__extends(t,e),t}(Error);function C(e,t){function n(){var e=\"This constructor is private.\";throw t&&(e+=\" \",e+=t),new E(w.INVALID_ARGUMENT,e)}for(var r in n.prototype=e.prototype,e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}function S(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function T(e,t){return void 0!==e?e:t}function I(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Number(n);isNaN(r)||t(r,e[n])}}function O(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function N(e){for(var t in v(null!=e&&\"object\"==typeof e,\"isEmpty() expects object parameter.\"),e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function A(e,t){if(0!==t.length)throw new E(w.INVALID_ARGUMENT,\"Function \"+e+\"() does not support arguments, but was called with \"+H(t.length,\"argument\")+\".\")}function R(e,t,n){if(t.length!==n)throw new E(w.INVALID_ARGUMENT,\"Function \"+e+\"() requires \"+H(n,\"argument\")+\", but was called with \"+H(t.length,\"argument\")+\".\")}function D(e,t,n){if(t.length<n)throw new E(w.INVALID_ARGUMENT,\"Function \"+e+\"() requires at least \"+H(n,\"argument\")+\", but was called with \"+H(t.length,\"argument\")+\".\")}function k(e,t,n,r){if(t.length<n||t.length>r)throw new E(w.INVALID_ARGUMENT,\"Function \"+e+\"() requires between \"+n+\" and \"+r+\" arguments, but was called with \"+H(t.length,\"argument\")+\".\")}function x(e,t,n,r){U(e,t,W(n)+\" argument\",r)}function P(e,t,n,r){void 0!==r&&x(e,t,n,r)}function L(e,t,n,r){U(e,t,n+\" option\",r)}function M(e,t,n,r){void 0!==r&&L(e,t,n,r)}function j(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){for(var o=[],s=0,a=i;s<a.length;s++){var u=a[s];if(u===r)return;o.push(q(u))}var c=q(r);throw new E(w.INVALID_ARGUMENT,\"Invalid value \"+c+\" provided to function \"+e+'() for option \"'+n+'\". Acceptable values: '+o.join(\", \"))}(e,0,n,r,i)}function F(e,t,n,r){if(!t.some(function(e){return e===r}))throw new E(w.INVALID_ARGUMENT,\"Invalid value \"+q(r)+\" provided to function \"+e+\"() for its \"+W(n)+\" argument. Acceptable values: \"+t.join(\", \"))}function U(e,t,n,r){if(!(\"object\"===t?V(r):\"non-empty string\"===t?\"string\"==typeof r&&\"\"!==r:typeof r===t)){var i=q(r);throw new E(w.INVALID_ARGUMENT,\"Function \"+e+\"() requires its \"+n+\" to be of type \"+t+\", but it was: \"+i)}}function V(e){return\"object\"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function q(e){if(void 0===e)return\"undefined\";if(null===e)return\"null\";if(\"string\"==typeof e)return e.length>20&&(e=e.substring(0,20)+\"...\"),JSON.stringify(e);if(\"number\"==typeof e||\"boolean\"==typeof e)return\"\"+e;if(\"object\"==typeof e){if(e instanceof Array)return\"an array\";var t=function(e){if(e.constructor){var t=/function\\s+([^\\s(]+)\\s*\\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?\"a custom \"+t+\" object\":\"an object\"}return\"function\"==typeof e?\"a function\":y(\"Unknown wrong type: \"+typeof e)}function B(e,t,n){if(void 0===n)throw new E(w.INVALID_ARGUMENT,\"Function \"+e+\"() requires a valid \"+W(t)+\" argument, but it was undefined.\")}function $(e,t,n){O(t,function(t,r){if(n.indexOf(t)<0)throw new E(w.INVALID_ARGUMENT,\"Unknown option '\"+t+\"' passed to function \"+e+\"(). Available options: \"+n.join(\", \"))})}function z(e,t,n,r){var i=q(r);return new E(w.INVALID_ARGUMENT,\"Function \"+e+\"() requires its \"+W(n)+\" argument to be a \"+t+\", but it was: \"+i)}function W(e){switch(e){case 1:return\"first\";case 2:return\"second\";case 3:return\"third\";default:return e+\"th\"}}function H(e,t){return e+\" \"+t+(1===e?\"\":\"s\")}var Q=function(){function e(){}return e.newId=function(){for(var e=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\",t=\"\",n=0;n<20;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return v(20===t.length,\"Invalid auto ID: \"+t),t},e}();function G(e,t){return e<t?-1:e>t?1:0}function K(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].isEqual(t[n]))return!1;return!0}function Y(e){return e+\"\\0\"}function X(){if(\"undefined\"==typeof Uint8Array)throw new E(w.UNIMPLEMENTED,\"Uint8Arrays are not available in this environment.\")}function J(){if(!b.getPlatform().base64Available)throw new E(w.UNIMPLEMENTED,\"Blobs are unavailable in Firestore in this environment.\")}var Z=function(){function e(e){J(),this._binaryString=e}return e.fromBase64String=function(t){R(\"Blob.fromBase64String\",arguments,1),x(\"Blob.fromBase64String\",\"string\",1,t),J();try{var n=b.getPlatform().atob(t);return new e(n)}catch(r){throw new E(w.INVALID_ARGUMENT,\"Failed to construct Blob from Base64 string: \"+r)}},e.fromUint8Array=function(t){if(R(\"Blob.fromUint8Array\",arguments,1),X(),!(t instanceof Uint8Array))throw z(\"Blob.fromUint8Array\",\"Uint8Array\",1,t);var n=Array.prototype.map.call(t,function(e){return String.fromCharCode(e)}).join(\"\");return new e(n)},e.prototype.toBase64=function(){return R(\"Blob.toBase64\",arguments,0),J(),b.getPlatform().btoa(this._binaryString)},e.prototype.toUint8Array=function(){R(\"Blob.toUint8Array\",arguments,0),X();for(var e=new Uint8Array(this._binaryString.length),t=0;t<this._binaryString.length;t++)e[t]=this._binaryString.charCodeAt(t);return e},e.prototype.toString=function(){return\"Blob(base64: \"+this.toBase64()+\")\"},e.prototype.isEqual=function(e){return this._binaryString===e._binaryString},e.prototype._compareTo=function(e){return G(this._binaryString,e._binaryString)},e}(),ee=C(Z,\"Use Blob.fromUint8Array() or Blob.fromBase64String() instead.\"),te=function(){return function(e,t,n,r,i){this.databaseId=e,this.persistenceKey=t,this.host=n,this.ssl=r,this.forceLongPolling=i}}(),ne=\"(default)\",re=function(){function e(e,t){this.projectId=e,this.database=t||ne}return Object.defineProperty(e.prototype,\"isDefaultDatabase\",{get:function(){return this.database===ne},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e.prototype.compareTo=function(e){return G(this.projectId,e.projectId)||G(this.database,e.database)},e}(),ie=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.setPreviousValue(e)},this.writeNewSequenceNumber=function(e){return t.writeSequenceNumber(e)})}return e.prototype.setPreviousValue=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e},e.INVALID=-1,e}(),oe=function(){function e(e,t,n){void 0===t?t=0:t>e.length&&y(\"offset \"+t+\" out of range \"+e.length),void 0===n?n=e.length-t:n>e.length-t&&y(\"length \"+n+\" out of range \"+(e.length-t)),this.segments=e,this.offset=t,this.len=n}return Object.defineProperty(e.prototype,\"length\",{get:function(){return this.len},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(e){n.push(e)}):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return v(this.length>=(e=void 0===e?1:e),\"Can't call popFirst() with less segments\"),this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return v(!this.isEmpty(),\"Can't call popLast() on empty path\"),this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return v(!this.isEmpty(),\"Can't call firstSegment() on empty path\"),this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return v(e<this.length,\"Index out of range\"),this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),se=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.prototype.canonicalString=function(){return this.toArray().join(\"/\")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(e){if(e.indexOf(\"//\")>=0)throw new E(w.INVALID_ARGUMENT,\"Invalid path (\"+e+\"). Paths must not contain // in them.\");return new t(e.split(\"/\").filter(function(e){return e.length>0}))},t.EMPTY_PATH=new t([]),t}(oe),ae=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ue=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.isValidIdentifier=function(e){return ae.test(e)},t.prototype.canonicalString=function(){return this.toArray().map(function(e){return e=e.replace(\"\\\\\",\"\\\\\\\\\").replace(\"`\",\"\\\\`\"),t.isValidIdentifier(e)||(e=\"`\"+e+\"`\"),e}).join(\".\")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&\"__name__\"===this.get(0)},t.keyField=function(){return new t([\"__name__\"])},t.fromServerFormat=function(e){for(var n=[],r=\"\",i=0,o=function(){if(0===r.length)throw new E(w.INVALID_ARGUMENT,\"Invalid field path (\"+e+\"). Paths must not be empty, begin with '.', end with '.', or contain '..'\");n.push(r),r=\"\"},s=!1;i<e.length;){var a=e[i];if(\"\\\\\"===a){if(i+1===e.length)throw new E(w.INVALID_ARGUMENT,\"Path has trailing escape character: \"+e);var u=e[i+1];if(\"\\\\\"!==u&&\".\"!==u&&\"`\"!==u)throw new E(w.INVALID_ARGUMENT,\"Path has invalid escape sequence: \"+e);r+=u,i+=2}else\"`\"===a?(s=!s,i++):\".\"!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new E(w.INVALID_ARGUMENT,\"Unterminated ` in path: \"+e);return new t(n)},t.EMPTY_PATH=new t([]),t}(oe),ce=function(){function e(t){this.path=t,v(e.isDocumentKey(t),\"Invalid DocumentKey with an odd number of segments: \"+t.toArray().join(\"/\"))}return e.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===se.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return se.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2==0},e.fromSegments=function(t){return new e(new se(t.slice()))},e.fromPathString=function(t){return new e(se.fromString(t))},e.EMPTY=new e(new se([])),e}(),le=function(){return function(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}}(),he=function(e){return e.All=\"all\",e.ListenStreamIdle=\"listen_stream_idle\",e.ListenStreamConnectionBackoff=\"listen_stream_connection_backoff\",e.WriteStreamIdle=\"write_stream_idle\",e.WriteStreamConnectionBackoff=\"write_stream_connection_backoff\",e.OnlineStateTimeout=\"online_state_timeout\",e.ClientMetadataRefresh=\"client_metadata_refresh\",e.LruGarbageCollection=\"lru_garbage_collection\",e.RetryTransaction=\"retry_transaction\",e}({}),de=function(){function e(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new le,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(e){})}return e.createAndSchedule=function(t,n,r,i,o){var s=new e(t,n,Date.now()+r,i,o);return s.start(r),s},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout(function(){return t.handleDelayElapsed()},e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new E(w.CANCELLED,\"Operation cancelled\"+(e?\": \"+e:\"\"))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}(),fe=function(){function e(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.timerIdsToSkip=[]}return Object.defineProperty(e.prototype,\"isShuttingDown\",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueueAndForgetEvenAfterShutdown=function(e){this.verifyNotFailed(),this.enqueueInternal(e)},e.prototype.enqueueEvenAfterShutdown=function(e){return this.verifyNotFailed(),this.enqueueInternal(e)},e.prototype.enqueueAndInitiateShutdown=function(e){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(e)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.enqueue=function(e){return this.verifyNotFailed(),this._isShuttingDown?new Promise(function(e){}):this.enqueueInternal(e)},e.prototype.enqueueInternal=function(e){var t=this,n=this.tail.then(function(){return t.operationInProgress=!0,e().catch(function(e){t.failure=e,t.operationInProgress=!1;var n=e.stack||e.message||\"\";throw m(\"INTERNAL UNHANDLED ERROR: \",n),n.indexOf(\"Firestore Test Simulated Error\")<0&&setTimeout(function(){throw e},0),e}).then(function(e){return t.operationInProgress=!1,e})});return this.tail=n,n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.verifyNotFailed(),v(t>=0,\"Attempted to schedule an operation with a negative delay of \"+t),this.timerIdsToSkip.indexOf(e)>-1&&(t=0);var i=de.createAndSchedule(this,e,t,n,function(e){return r.removeDelayedOperation(e)});return this.delayedOperations.push(i),i},e.prototype.verifyNotFailed=function(){this.failure&&y(\"AsyncQueue is already failed: \"+(this.failure.stack||this.failure.message))},e.prototype.verifyOperationInProgress=function(){v(this.operationInProgress,\"verifyOpInProgress() called when no op in progress on this queue.\")},e.prototype.drain=function(){return this.enqueueEvenAfterShutdown(function(){return Promise.resolve()})},e.prototype.containsDelayedOperation=function(e){for(var t=0,n=this.delayedOperations;t<n.length;t++)if(n[t].timerId===e)return!0;return!1},e.prototype.runDelayedOperationsEarly=function(e){var t=this;return this.drain().then(function(){v(e===he.All||t.containsDelayedOperation(e),\"Attempted to drain to missing operation \"+e),t.delayedOperations.sort(function(e,t){return e.targetTimeMs-t.targetTimeMs});for(var n=0,r=t.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),e!==he.All&&i.timerId===e)break}return t.drain()})},e.prototype.skipDelaysForTimerId=function(e){this.timerIdsToSkip.push(e)},e.prototype.removeDelayedOperation=function(e){var t=this.delayedOperations.indexOf(e);v(t>=0,\"Delayed operation not found.\"),this.delayedOperations.splice(t,1)},e}(),pe=\"\\x01\",me=\"\\x01\",ge=\"\\x10\",ye=\"\\x11\";function ve(e){for(var t=\"\",n=0;n<e.length;n++)t.length>0&&(t=_e(t)),t=be(e.get(n),t);return _e(t)}function be(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case\"\\0\":n+=pe+ge;break;case pe:n+=pe+ye;break;default:n+=o}}return n}function _e(e){return e+pe+me}function we(e){var t=e.length;if(v(t>=2,\"Invalid path \"+e),2===t)return v(e.charAt(0)===pe&&e.charAt(1)===me,\"Non-empty path \"+e+\" had length 2\"),se.EMPTY_PATH;for(var n=t-2,r=[],i=\"\",o=0;o<t;){var s=e.indexOf(pe,o);switch((s<0||s>n)&&y('Invalid encoded resource path: \"'+e+'\"'),e.charAt(s+1)){case me:var a=e.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=\"\"),r.push(u);break;case ge:i+=e.substring(o,s),i+=\"\\0\";break;case ye:i+=e.substring(o,s+1);break;default:y('Invalid encoded resource path: \"'+e+'\"')}o=s+2}return new se(r)}var Ee=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new E(w.INVALID_ARGUMENT,\"Timestamp nanoseconds out of range: \"+t);if(t>=1e9)throw new E(w.INVALID_ARGUMENT,\"Timestamp nanoseconds out of range: \"+t);if(e<-62135596800)throw new E(w.INVALID_ARGUMENT,\"Timestamp seconds out of range: \"+e);if(e>=253402300800)throw new E(w.INVALID_ARGUMENT,\"Timestamp seconds out of range: \"+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,1e6*(t-1e3*n))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?G(this.nanoseconds,e.nanoseconds):G(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return\"Timestamp(seconds=\"+this.seconds+\", nanoseconds=\"+this.nanoseconds+\")\"},e}(),Ce=function(){function e(e){this.timestamp=e}return e.fromMicroseconds=function(t){var n=Math.floor(t/1e6);return new e(new Ee(n,t%1e6*1e3))},e.fromTimestamp=function(t){return new e(t)},e.forDeletedDoc=function(){return e.MIN},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return\"SnapshotVersion(\"+this.timestamp.toString()+\")\"},e.prototype.toTimestamp=function(){return this.timestamp},e.MIN=new e(new Ee(0,0)),e}(),Se=function(){function e(e,t){this.comparator=e,this.root=t||Ie.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ie.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ie.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,\"size\",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal(function(t,n){return e(t,n),!1})},e.prototype.toString=function(){var e=[];return this.inorderTraversal(function(t,n){return e.push(t+\":\"+n),!1}),\"{\"+e.join(\", \")+\"}\"},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new Te(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new Te(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new Te(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new Te(this.root,e,this.comparator,!0)},e}(),Te=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){v(this.nodeStack.length>0,\"getNext() called on iterator when hasNext() is false.\");var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),Ie=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw y(\"Red node has red child(\"+this.key+\",\"+this.value+\")\");if(this.right.isRed())throw y(\"Right child of (\"+this.key+\",\"+this.value+\") is red\");var e=this.left.check();if(e!==this.right.check())throw y(\"Black depths differ\");return e+(this.isRed()?0:1)},e.EMPTY=null,e.RED=!0,e.BLACK=!1,e}(),Oe=function(){function e(){this.size=0}return Object.defineProperty(e.prototype,\"key\",{get:function(){throw y(\"LLRBEmptyNode has no key.\")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"value\",{get:function(){throw y(\"LLRBEmptyNode has no value.\")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"color\",{get:function(){throw y(\"LLRBEmptyNode has no color.\")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"left\",{get:function(){throw y(\"LLRBEmptyNode has no left child.\")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"right\",{get:function(){throw y(\"LLRBEmptyNode has no right child.\")},enumerable:!0,configurable:!0}),e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new Ie(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}();Ie.EMPTY=new Oe;var Ne=function(){function e(e){this.comparator=e,this.data=new Se(this.comparator)}return e.fromMapKeys=function(t){var n=new e(t.comparator);return t.forEach(function(e){n=n.add(e)}),n},e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,\"size\",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal(function(t,n){return e(t),!1})},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new Ae(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new Ae(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return e.forEach(function(e){t=t.add(e)}),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},e.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),\"SortedSet(\"+e.toString()+\")\"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),Ae=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),Re=new Se(ce.comparator);function De(){return Re}function ke(){return De()}var xe=new Se(ce.comparator);function Pe(){return xe}var Le=new Se(ce.comparator);function Me(){return Le}var je=new Ne(ce.comparator);function Fe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=je,r=0,i=e;r<i.length;r++)n=n.add(i[r]);return n}var Ue=new Ne(G);function Ve(){return Ue}var qe=function(){function e(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r,v(r.length>0,\"Cannot create an empty mutation batch\")}return e.prototype.applyToRemoteDocument=function(e,t,n){t&&v(t.key.isEqual(e),\"applyToRemoteDocument: key \"+e+\" should match maybeDoc key\\n        \"+t.key);var r=n.mutationResults;v(r.length===this.mutations.length,\"Mismatch between mutations length\\n      (\"+this.mutations.length+\") and mutation results length\\n      (\"+r.length+\").\");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(e)&&(t=o.applyToRemoteDocument(t,r[i]))}return t},e.prototype.applyToLocalView=function(e,t){t&&v(t.key.isEqual(e),\"applyToLocalDocument: key \"+e+\" should match maybeDoc key\\n        \"+t.key);for(var n=0,r=this.baseMutations;n<r.length;n++)(a=r[n]).key.isEqual(e)&&(t=a.applyToLocalView(t,t,this.localWriteTime));for(var i=t,o=0,s=this.mutations;o<s.length;o++){var a;(a=s[o]).key.isEqual(e)&&(t=a.applyToLocalView(t,i,this.localWriteTime))}return t},e.prototype.applyToLocalDocumentSet=function(e){var t=this,n=e;return this.mutations.forEach(function(r){var i=t.applyToLocalView(r.key,e.get(r.key));i&&(n=n.insert(r.key,i))}),n},e.prototype.keys=function(){return this.mutations.reduce(function(e,t){return e.add(t.key)},Fe())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&K(this.mutations,e.mutations)&&K(this.baseMutations,e.baseMutations)},e}(),Be=function(){function e(e,t,n,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return e.from=function(t,n,r,i){v(t.mutations.length===r.length,\"Mutations sent \"+t.mutations.length+\" must equal results received \"+r.length);for(var o=Me(),s=t.mutations,a=0;a<s.length;a++)o=o.insert(s[a].key,r[a].version);return new e(t,n,r,i,o)},e}(),$e=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)},function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)})}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&y(\"Called next() or catch() twice for PersistencePromise\"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}})},e.prototype.toPromise=function(){var e=this;return new Promise(function(t,n){e.next(t,n)})},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(r){return e.reject(r)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)},e.resolve=function(t){return new e(function(e,n){e(t)})},e.reject=function(t){return new e(function(e,n){n(t)})},e.waitFor=function(t){return new e(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(e){return n(e)})}),o=!0,i===r&&e()})},e.or=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next(function(n){return n?e.resolve(n):t()})},i=0,o=t;i<o.length;i++)r(o[i]);return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach(function(e,i){r.push(t.call(n,e,i))}),this.waitFor(r)},e}(),ze=function(){function e(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}return e.forUser=function(t,n,r,i){return v(\"\"!==t.uid,\"UserID must not be an empty string.\"),new e(t.isAuthenticated()?t.uid:\"\",n,r,i)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ge(e).iterate({index:un.userMutationsIndex,range:n},function(e,n,r){t=!1,r.done()}).next(function(){return t})},e.prototype.acknowledgeBatch=function(e,t,n){return this.getMutationQueueMetadata(e).next(function(t){return t.lastStreamToken=Qe(n),Ye(e).put(t)})},e.prototype.getLastStreamToken=function(e){return this.getMutationQueueMetadata(e).next(function(e){return e.lastStreamToken})},e.prototype.setLastStreamToken=function(e,t){return this.getMutationQueueMetadata(e).next(function(n){return n.lastStreamToken=Qe(t),Ye(e).put(n)})},e.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=Ke(e),s=Ge(e);return s.add({}).next(function(a){v(\"number\"==typeof a,\"Auto-generated key is not a number\");var u=new qe(a,t,n,r),c=i.serializer.toDbMutationBatch(i.userId,u);i.documentKeysByBatchId[a]=u.keys();for(var l=[],h=0,d=r;h<d.length;h++){var f=d[h],p=cn.key(i.userId,f.key.path,a);l.push(s.put(c)),l.push(o.put(p,cn.PLACEHOLDER)),l.push(i.indexManager.addToCollectionParentIndex(e,f.key.path.popLast()))}return $e.waitFor(l).next(function(){return u})})},e.prototype.lookupMutationBatch=function(e,t){var n=this;return Ge(e).get(t).next(function(e){return e?(v(e.userId===n.userId,\"Unexpected user '\"+e.userId+\"' for mutation batch \"+t),n.serializer.fromDbMutationBatch(e)):null})},e.prototype.lookupMutationKeys=function(e,t){var n=this;return this.documentKeysByBatchId[t]?$e.resolve(this.documentKeysByBatchId[t]):this.lookupMutationBatch(e,t).next(function(e){if(e){var r=e.keys();return n.documentKeysByBatchId[t]=r,r}return null})},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Ge(e).iterate({index:un.userMutationsIndex,range:i},function(e,t,i){t.userId===n.userId&&(v(t.batchId>=r,\"Should have found mutation after \"+r),o=n.serializer.fromDbMutationBatch(t)),i.done()}).next(function(){return o})},e.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Ge(e).iterate({index:un.userMutationsIndex,range:t,reverse:!0},function(e,t,r){n=t.batchId,r.done()}).next(function(){return n})},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ge(e).loadAll(un.userMutationsIndex,n).next(function(e){return e.map(function(e){return t.serializer.fromDbMutationBatch(e)})})},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=cn.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Ke(e).iterate({range:i},function(r,i,s){var a=r[0],u=r[2],c=we(r[1]);if(a===n.userId&&t.path.isEqual(c))return Ge(e).get(u).next(function(e){if(!e)throw y(\"Dangling document-mutation reference found: \"+r+\" which points to \"+u);v(e.userId===n.userId,\"Unexpected user '\"+e.userId+\"' for mutation batch \"+u),o.push(n.serializer.fromDbMutationBatch(e))});s.done()}).next(function(){return o})},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new Ne(G),i=[];return t.forEach(function(t){var o=cn.prefixForPath(n.userId,t.path),s=IDBKeyRange.lowerBound(o),a=Ke(e).iterate({range:s},function(e,i,o){var s=e[0],a=e[2],u=we(e[1]);s===n.userId&&t.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),$e.waitFor(i).next(function(){return n.lookupMutationBatches(e,r)})},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this;v(!t.isDocumentQuery(),\"Document queries shouldn't go down this path\"),v(!t.isCollectionGroupQuery(),\"CollectionGroup queries should be handled in LocalDocumentsView\");var r=t.path,i=r.length+1,o=cn.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Ne(G);return Ke(e).iterate({range:s},function(e,t,o){var s=e[0],u=e[2],c=we(e[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.lookupMutationBatches(e,a)})},e.prototype.lookupMutationBatches=function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(Ge(e).get(t).next(function(e){if(null===e)throw y(\"Dangling document-mutation reference found, which points to \"+t);v(e.userId===n.userId,\"Unexpected user '\"+e.userId+\"' for mutation batch \"+t),r.push(n.serializer.fromDbMutationBatch(e))}))}),$e.waitFor(i).next(function(){return r})},e.prototype.removeMutationBatch=function(e,t){var n=this;return He(e.simpleDbTransaction,this.userId,t).next(function(r){return n.removeCachedMutationKeys(t.batchId),$e.forEach(r,function(t){return n.referenceDelegate.removeMutationReference(e,t)})})},e.prototype.removeCachedMutationKeys=function(e){delete this.documentKeysByBatchId[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next(function(n){if(!n)return $e.resolve();var r=IDBKeyRange.lowerBound(cn.prefixForUser(t.userId)),i=[];return Ke(e).iterate({range:r},function(e,n,r){if(e[0]===t.userId){var o=we(e[1]);i.push(o)}else r.done()}).next(function(){v(0===i.length,\"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: \"+i.map(function(e){return e.canonicalString()}))})})},e.prototype.containsKey=function(e,t){return We(e,this.userId,t)},e.prototype.getMutationQueueMetadata=function(e){var t=this;return Ye(e).get(this.userId).next(function(e){return e||new an(t.userId,-1,\"\")})},e}();function We(e,t,n){var r=cn.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Ke(e).iterate({range:o,keysOnly:!0},function(e,n,r){e[0]===t&&e[1]===i&&(s=!0),r.done()}).next(function(){return s})}function He(e,t,n){var r=e.store(un.store),i=e.store(cn.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.iterate({range:s},function(e,t,n){return a++,n.delete()});o.push(u.next(function(){v(1===a,\"Dangling document-mutation reference found: Missing batch \"+n.batchId)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=cn.key(t,d.key.path,n.batchId);o.push(i.delete(f)),c.push(d.key)}return $e.waitFor(o).next(function(){return c})}function Qe(e){return e instanceof Uint8Array?(v(\"YES\"===process.env.USE_MOCK_PERSISTENCE,\"Persisting non-string stream tokens is only supported with mock persistence.\"),e.toString()):e}function Ge(e){return jn.getStore(e,un.store)}function Ke(e){return jn.getStore(e,cn.store)}function Ye(e){return jn.getStore(e,an.store)}var Xe=1,Je=function(e){return e[e.QueryCache=0]=\"QueryCache\",e[e.SyncEngine=1]=\"SyncEngine\",e}({}),Ze=function(){function e(e,t){this.generatorId=e,v((e&Xe)===e,\"Generator ID \"+e+\" contains more than \"+Xe+\" reserved bits\"),this.seek(void 0!==t?t:this.generatorId)}return e.prototype.next=function(){var e=this.nextId;return this.nextId+=1<<Xe,e},e.prototype.after=function(e){return this.seek(e+(1<<Xe)),this.next()},e.prototype.seek=function(e){v((e&Xe)===this.generatorId,\"Cannot supply target ID from different generator ID\"),this.nextId=e},e.forQueryCache=function(){return new e(Je.QueryCache,2)},e.forSyncEngine=function(){return new e(Je.SyncEngine)},e}(),et=\"SimpleDb\",tt=function(){function e(t){this.db=t,12.2===e.getIOSVersion(a.getUA())&&m(\"Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.\")}return e.openOrCreate=function(t,n,r){return v(e.isAvailable(),\"IndexedDB not supported in current environment.\"),p(et,\"Opening database:\",t),new $e(function(i,o){var s=window.indexedDB.open(t,n);s.onsuccess=function(t){i(new e(t.target.result))},s.onblocked=function(){o(new E(w.FAILED_PRECONDITION,\"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed.\"))},s.onerror=function(e){var t=e.target.error;o(\"VersionError\"===t.name?new E(w.FAILED_PRECONDITION,\"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.\"):t)},s.onupgradeneeded=function(e){p(et,'Database \"'+t+'\" requires upgrade from version:',e.oldVersion);var n=e.target.result,i=new rt(s.transaction);r.createOrUpgrade(n,i,e.oldVersion,nn).next(function(){p(et,\"Database upgrade to version \"+nn+\" complete\")})}}).toPromise()},e.delete=function(e){return p(et,\"Removing database:\",e),ot(window.indexedDB.deleteDatabase(e)).toPromise()},e.isAvailable=function(){if(\"undefined\"==typeof window||null==window.indexedDB)return!1;if(void 0===window.navigator)return\"YES\"===process.env.USE_MOCK_PERSISTENCE;var t=a.getUA(),n=e.getIOSVersion(t),r=0<n&&n<10,i=e.getAndroidVersion(t),o=0<i&&i<4.5;return!(t.indexOf(\"MSIE \")>0||t.indexOf(\"Trident/\")>0||t.indexOf(\"Edge/\")>0||r||o)},e.getStore=function(e,t){return e.store(t)},e.getIOSVersion=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\\d_]+)/i),n=t?t[1].split(\"_\").slice(0,2).join(\".\"):\"-1\";return Number(n)},e.getAndroidVersion=function(e){var t=e.match(/Android ([\\d.]+)/i),n=t?t[1].split(\".\").slice(0,2).join(\".\"):\"-1\";return Number(n)},e.prototype.setVersionChangeListener=function(e){this.db.onversionchange=function(t){return e(t)}},e.prototype.runTransaction=function(e,t,n){var r=rt.open(this.db,e,t),i=n(r).catch(function(e){return r.abort(e),$e.reject(e)}).toPromise();return i.catch(function(){}),r.completionPromise.then(function(){return i})},e.prototype.close=function(){this.db.close()},e}(),nt=function(){function e(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(e.prototype,\"isDone\",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"skipToKey\",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"cursor\",{set:function(e){this.dbCursor=e},enumerable:!0,configurable:!0}),e.prototype.done=function(){this.shouldStop=!0},e.prototype.skip=function(e){this.nextKey=e},e.prototype.delete=function(){return ot(this.dbCursor.delete())},e}(),rt=function(){function e(e){var t=this;this.transaction=e,this.aborted=!1,this.completionDeferred=new le,this.transaction.oncomplete=function(){t.completionDeferred.resolve()},this.transaction.onabort=function(){e.error?t.completionDeferred.reject(e.error):t.completionDeferred.resolve()},this.transaction.onerror=function(e){var n=at(e.target.error);t.completionDeferred.reject(n)}}return e.open=function(t,n,r){return new e(t.transaction(r,n))},Object.defineProperty(e.prototype,\"completionPromise\",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),e.prototype.abort=function(e){e&&this.completionDeferred.reject(e),this.aborted||(p(et,\"Aborting transaction:\",e?e.message:\"Client-initiated abort\"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return v(!!t,\"Object store not part of transaction: \"+e),new it(t)},e}(),it=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(p(et,\"PUT\",this.store.name,e,t),n=this.store.put(t,e)):(p(et,\"PUT\",this.store.name,\"<auto-key>\",e),n=this.store.put(e)),ot(n)},e.prototype.add=function(e){return p(et,\"ADD\",this.store.name,e,e),ot(this.store.add(e))},e.prototype.get=function(e){var t=this;return ot(this.store.get(e)).next(function(n){return void 0===n&&(n=null),p(et,\"GET\",t.store.name,e,n),n})},e.prototype.delete=function(e){return p(et,\"DELETE\",this.store.name,e),ot(this.store.delete(e))},e.prototype.count=function(){return p(et,\"COUNT\",this.store.name),ot(this.store.count())},e.prototype.loadAll=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.iterateCursor(n,function(e,t){r.push(t)}).next(function(){return r})},e.prototype.deleteAll=function(e,t){p(et,\"DELETE ALL\",this.store.name);var n=this.options(e,t);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,function(e,t,n){return n.delete()})},e.prototype.iterate=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.iterateCursor(r,t)},e.prototype.iterateSerial=function(e){var t=this.cursor({});return new $e(function(n,r){t.onerror=function(e){var t=at(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next(function(e){e?r.continue():n()}):n()}})},e.prototype.iterateCursor=function(e,t){var n=[];return new $e(function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new nt(i),s=t(i.primaryKey,i.value,o);if(s instanceof $e){var a=s.catch(function(e){return o.done(),$e.reject(e)});n.push(a)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}}).next(function(){return $e.waitFor(n)})},e.prototype.options=function(e,t){var n=void 0;return void 0!==e&&(\"string\"==typeof e?n=e:(v(void 0===t,\"3rd argument must not be defined if 2nd is a range.\"),t=e)),{index:n,range:t}},e.prototype.cursor=function(e){var t=\"next\";if(e.reverse&&(t=\"prev\"),e.index){var n=this.store.index(e.index);return e.keysOnly?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function ot(e){return new $e(function(t,n){e.onsuccess=function(e){t(e.target.result)},e.onerror=function(e){var t=at(e.target.error);n(t)}})}var st=!1;function at(e){var t=tt.getIOSVersion(a.getUA());if(t>=12.2&&t<13){var n=\"An internal error was encountered in the Indexed Database server\";if(e.message.indexOf(n)>=0){var r=new E(\"internal\",\"IOS_INDEXEDDB_BUG1: IndexedDb has thrown '\"+n+\"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.\");return st||(st=!0,setTimeout(function(){throw r},0)),r}}return e}var ut=function(){function e(e,t){this.referenceDelegate=e,this.serializer=t,this.targetIdGenerator=Ze.forQueryCache()}return e.prototype.allocateTargetId=function(e){var t=this;return this.retrieveMetadata(e).next(function(n){return n.highestTargetId=t.targetIdGenerator.after(n.highestTargetId),t.saveMetadata(e,n).next(function(){return n.highestTargetId})})},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.retrieveMetadata(e).next(function(e){return Ce.fromTimestamp(new Ee(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))})},e.prototype.getHighestSequenceNumber=function(e){return ht(e.simpleDbTransaction)},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.retrieveMetadata(e).next(function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.saveMetadata(e,i)})},e.prototype.addQueryData=function(e,t){var n=this;return this.saveQueryData(e,t).next(function(){return n.retrieveMetadata(e).next(function(r){return r.targetCount+=1,n.updateMetadataFromQueryData(t,r),n.saveMetadata(e,r)})})},e.prototype.updateQueryData=function(e,t){return this.saveQueryData(e,t)},e.prototype.removeQueryData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return ct(e).delete(t.targetId)}).next(function(){return n.retrieveMetadata(e)}).next(function(t){return v(t.targetCount>0,\"Removing from an empty query cache\"),t.targetCount-=1,n.saveMetadata(e,t)})},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return ct(e).iterate(function(s,a){var u=r.serializer.fromDbTarget(a);u.sequenceNumber<=t&&void 0===n[u.targetId]&&(i++,o.push(r.removeQueryData(e,u)))}).next(function(){return $e.waitFor(o)}).next(function(){return i})},e.prototype.forEachTarget=function(e,t){var n=this;return ct(e).iterate(function(e,r){var i=n.serializer.fromDbTarget(r);t(i)})},e.prototype.retrieveMetadata=function(e){return lt(e.simpleDbTransaction)},e.prototype.saveMetadata=function(e,t){return(n=e,jn.getStore(n,gn.store)).put(gn.key,t);var n},e.prototype.saveQueryData=function(e,t){return ct(e).put(this.serializer.toDbTarget(t))},e.prototype.updateMetadataFromQueryData=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getQueryCount=function(e){return this.retrieveMetadata(e).next(function(e){return e.targetCount})},e.prototype.getQueryData=function(e,t){var n=this,r=t.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return ct(e).iterate({range:i,index:pn.queryTargetsIndexName},function(e,r,i){var s=n.serializer.fromDbTarget(r);t.isEqual(s.query)&&(o=s,i.done())}).next(function(){return o})},e.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=dt(e);return t.forEach(function(t){var s=ve(t.path);i.push(o.put(new mn(n,s))),i.push(r.referenceDelegate.addReference(e,t))}),$e.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=dt(e);return $e.forEach(t,function(t){var o=ve(t.path);return $e.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,t)])})},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=dt(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=dt(e),i=Fe();return r.iterate({range:n,keysOnly:!0},function(e,t,n){var r=we(e[1]),o=new ce(r);i=i.add(o)}).next(function(){return i})},e.prototype.containsKey=function(e,t){var n=ve(t.path),r=IDBKeyRange.bound([n],[Y(n)],!1,!0),i=0;return dt(e).iterate({index:mn.documentTargetsIndex,keysOnly:!0,range:r},function(e,t,n){0!==e[0]&&(i++,n.done())}).next(function(){return i>0})},e.prototype.getQueryDataForTarget=function(e,t){var n=this;return ct(e).get(t).next(function(e){return e?n.serializer.fromDbTarget(e):null})},e}();function ct(e){return jn.getStore(e,pn.store)}function lt(e){return tt.getStore(e,gn.store).get(gn.key).next(function(e){return v(null!==e,\"Missing metadata row.\"),e})}function ht(e){return lt(e).next(function(e){return e.highestListenSequenceNumber})}function dt(e){return jn.getStore(e,mn.store)}var ft=function(){function e(e){this.fields=e}return e.fromSet=function(t){return new e(t)},e.fromArray=function(t){var n=new Ne(ue.comparator);return t.forEach(function(e){return n=n.add(e)}),new e(n)},e.prototype.covers=function(e){var t=!1;return this.fields.forEach(function(n){n.isPrefixOf(e)&&(t=!0)}),t},e.prototype.isEqual=function(e){return this.fields.isEqual(e.fields)},e}(),pt=function(){function e(e,t){this.field=e,this.transform=t}return e.prototype.isEqual=function(e){return this.field.isEqual(e.field)&&this.transform.isEqual(e.transform)},e}(),mt=function(){return function(e,t){this.version=e,this.transformResults=t}}(),gt=function(e){return e[e.Set=0]=\"Set\",e[e.Patch=1]=\"Patch\",e[e.Transform=2]=\"Transform\",e[e.Delete=3]=\"Delete\",e}({}),yt=function(){function e(e,t){this.updateTime=e,this.exists=t,v(void 0===e||void 0===t,'Precondition can specify \"exists\" or \"updateTime\" but not both')}return e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,\"isNone\",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),e.prototype.isValidFor=function(e){return void 0!==this.updateTime?e instanceof Bt&&e.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===e instanceof Bt:(v(this.isNone,\"Precondition should be empty\"),!0)},e.prototype.isEqual=function(e){return n=e.updateTime,(null!=(t=this.updateTime)?!(!n||!t.isEqual(n)):t===n)&&this.exists===e.exists;var t,n},e.NONE=new e,e}(),vt=function(){function e(){}return e.prototype.verifyKeyMatches=function(e){null!=e&&v(e.key.isEqual(this.key),\"Can only apply a mutation to a document with the same key\")},e.getPostMutationVersion=function(e){return e instanceof Bt?e.version:Ce.MIN},e}(),bt=function(e){function t(t,n,r){var i=e.call(this)||this;return i.key=t,i.value=n,i.precondition=r,i.type=gt.Set,i}return s.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),v(null==t.transformResults,\"Transform results received by SetMutation.\"),new Bt(this.key,t.version,{hasCommittedMutations:!0},this.value)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=vt.getPostMutationVersion(e);return new Bt(this.key,r,{hasLocalMutations:!0},this.value)},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.value.isEqual(e.value)&&this.precondition.isEqual(e.precondition)},t}(vt),_t=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.key=t,o.data=n,o.fieldMask=r,o.precondition=i,o.type=gt.Patch,o}return s.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),v(null==t.transformResults,\"Transform results received by PatchMutation.\"),!this.precondition.isValidFor(e))return new zt(this.key,t.version);var n=this.patchDocument(e);return new Bt(this.key,t.version,{hasCommittedMutations:!0},n)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=vt.getPostMutationVersion(e),i=this.patchDocument(e);return new Bt(this.key,r,{hasLocalMutations:!0},i)},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.fieldMask.isEqual(e.fieldMask)&&this.precondition.isEqual(e.precondition)},t.prototype.patchDocument=function(e){var t;return t=e instanceof Bt?e.data():Ut.EMPTY,this.patchObject(t)},t.prototype.patchObject=function(e){var t=this;return this.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e=null!==r?e.set(n,r):e.delete(n)}}),e},t}(vt),wt=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.fieldTransforms=n,r.type=gt.Transform,r.precondition=yt.exists(!0),r}return s.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),v(null!=t.transformResults,\"Transform results missing for TransformMutation.\"),!this.precondition.isValidFor(e))return new zt(this.key,t.version);var n=this.requireDocument(e),r=this.serverTransformResults(e,t.transformResults),i=t.version,o=this.transformObject(n.data(),r);return new Bt(this.key,i,{hasCommittedMutations:!0},o)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=this.requireDocument(e),i=this.localTransformResults(n,e,t),o=this.transformObject(r.data(),i);return new Bt(this.key,r.version,{hasLocalMutations:!0},o)},t.prototype.extractBaseValue=function(e){for(var t=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=e instanceof Bt?e.field(i.field):void 0,s=i.transform.computeBaseValue(o||null);null!=s&&(t=null==t?Ut.EMPTY.set(i.field,s):t.set(i.field,s))}return t},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&K(this.fieldTransforms,e.fieldTransforms)&&this.precondition.isEqual(e.precondition)},t.prototype.requireDocument=function(e){v(e instanceof Bt,\"Unknown MaybeDocument type \"+e);var t=e;return v(t.key.isEqual(this.key),\"Can only transform a document with the same key\"),t},t.prototype.serverTransformResults=function(e,t){var n=[];v(this.fieldTransforms.length===t.length,\"server transform result count (\"+t.length+\") should match field transform count (\"+this.fieldTransforms.length+\")\");for(var r=0;r<t.length;r++){var i=this.fieldTransforms[r],o=i.transform,s=null;e instanceof Bt&&(s=e.field(i.field)),n.push(o.applyToRemoteDocument(s,t[r]))}return n},t.prototype.localTransformResults=function(e,t,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var s=o[i],a=s.transform,u=null;t instanceof Bt&&(u=t.field(s.field)),null===u&&n instanceof Bt&&(u=n.field(s.field)),r.push(a.applyToLocalView(u,e))}return r},t.prototype.transformObject=function(e,t){v(t.length===this.fieldTransforms.length,\"TransformResults length mismatch.\");for(var n=0;n<this.fieldTransforms.length;n++)e=e.set(this.fieldTransforms[n].field,t[n]);return e},t}(vt),Et=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.precondition=n,r.type=gt.Delete,r}return s.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),v(null==t.transformResults,\"Transform results received by DeleteMutation.\"),new $t(this.key,t.version,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){return this.verifyKeyMatches(e),this.precondition.isValidFor(e)?(e&&v(e.key.isEqual(this.key),\"Can only apply mutation to document with same key\"),new $t(this.key,Ce.forDeletedDoc())):e},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},t}(vt),Ct=function(e){return e[e.NullValue=0]=\"NullValue\",e[e.BooleanValue=1]=\"BooleanValue\",e[e.NumberValue=2]=\"NumberValue\",e[e.TimestampValue=3]=\"TimestampValue\",e[e.StringValue=4]=\"StringValue\",e[e.BlobValue=5]=\"BlobValue\",e[e.RefValue=6]=\"RefValue\",e[e.GeoPointValue=7]=\"GeoPointValue\",e[e.ArrayValue=8]=\"ArrayValue\",e[e.ObjectValue=9]=\"ObjectValue\",e}({}),St=function(e){return e[e.Default=0]=\"Default\",e[e.Estimate=1]=\"Estimate\",e[e.Previous=2]=\"Previous\",e}({}),Tt=function(){function e(e,t){this.serverTimestampBehavior=e,this.timestampsInSnapshots=t}return e.fromSnapshotOptions=function(t,n){switch(t.serverTimestamps){case\"estimate\":return new e(St.Estimate,n);case\"previous\":return new e(St.Previous,n);case\"none\":case void 0:return new e(St.Default,n);default:return y(\"fromSnapshotOptions() called with invalid options.\")}},e}(),It=function(){function e(){}return e.prototype.toString=function(){var e=this.value();return null===e?\"null\":e.toString()},e.prototype.defaultCompareTo=function(e){return v(this.typeOrder!==e.typeOrder,\"Default compareTo should not be used for values of same type.\"),G(this.typeOrder,e.typeOrder)},e}(),Ot=function(e){function t(){var t=e.call(this)||this;return t.typeOrder=Ct.NullValue,t.internalValue=null,t}return s.__extends(t,e),t.prototype.value=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t},t.prototype.compareTo=function(e){return e instanceof t?0:this.defaultCompareTo(e)},t.INSTANCE=new t,t}(It),Nt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Ct.BooleanValue,n}return s.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?G(this,e):this.defaultCompareTo(e)},t.of=function(e){return e?t.TRUE:t.FALSE},t.TRUE=new t(!0),t.FALSE=new t(!1),t}(It),At=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Ct.NumberValue,n}return s.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.compareTo=function(e){return e instanceof t?(n=this.internalValue)<(r=e.internalValue)?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1:this.defaultCompareTo(e);var n,r},t}(It);function Rt(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}var Dt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&Rt(this.internalValue,e.internalValue)},t}(At),kt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&Rt(this.internalValue,e.internalValue)},t.NAN=new t(NaN),t.POSITIVE_INFINITY=new t(1/0),t.NEGATIVE_INFINITY=new t(-1/0),t}(At),xt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Ct.StringValue,n}return s.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?G(this.internalValue,e.internalValue):this.defaultCompareTo(e)},t}(It),Pt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Ct.TimestampValue,n}return s.__extends(t,e),t.prototype.value=function(e){return!e||e.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):e instanceof Lt?-1:this.defaultCompareTo(e)},t}(It),Lt=function(e){function t(t,n){var r=e.call(this)||this;return r.localWriteTime=t,r.previousValue=n,r.typeOrder=Ct.TimestampValue,r}return s.__extends(t,e),t.prototype.value=function(e){return e&&e.serverTimestampBehavior===St.Estimate?new Pt(this.localWriteTime).value(e):e&&e.serverTimestampBehavior===St.Previous&&this.previousValue?this.previousValue.value(e):null},t.prototype.isEqual=function(e){return e instanceof t&&this.localWriteTime.isEqual(e.localWriteTime)},t.prototype.compareTo=function(e){return e instanceof t?this.localWriteTime._compareTo(e.localWriteTime):e instanceof Pt?1:this.defaultCompareTo(e)},t.prototype.toString=function(){return\"<ServerTimestamp localTime=\"+this.localWriteTime.toString()+\">\"},t}(It),Mt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Ct.BlobValue,n}return s.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(It),jt=function(e){function t(t,n){var r=e.call(this)||this;return r.databaseId=t,r.key=n,r.typeOrder=Ct.RefValue,r}return s.__extends(t,e),t.prototype.value=function(e){return this.key},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.databaseId.isEqual(e.databaseId)},t.prototype.compareTo=function(e){if(e instanceof t){var n=this.databaseId.compareTo(e.databaseId);return 0!==n?n:ce.comparator(this.key,e.key)}return this.defaultCompareTo(e)},t}(It),Ft=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Ct.GeoPointValue,n}return s.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(It),Ut=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Ct.ObjectValue,n}return s.__extends(t,e),t.prototype.value=function(e){var t={};return this.internalValue.inorderTraversal(function(n,r){t[n]=r.value(e)}),t},t.prototype.forEach=function(e){this.internalValue.inorderTraversal(e)},t.prototype.isEqual=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext(),s=G(i.key,o.key)||i.value.compareTo(o.value);if(s)return s}return G(n.hasNext(),r.hasNext())}return this.defaultCompareTo(e)},t.prototype.set=function(e,n){if(v(!e.isEmpty(),\"Cannot set field for empty path on ObjectValue\"),1===e.length)return this.setChild(e.firstSegment(),n);var r=this.child(e.firstSegment());r instanceof t||(r=t.EMPTY);var i=r.set(e.popFirst(),n);return this.setChild(e.firstSegment(),i)},t.prototype.delete=function(e){if(v(!e.isEmpty(),\"Cannot delete field for empty path on ObjectValue\"),1===e.length)return new t(this.internalValue.remove(e.firstSegment()));var n=this.child(e.firstSegment());if(n instanceof t){var r=n.delete(e.popFirst());return new t(this.internalValue.insert(e.firstSegment(),r))}return this},t.prototype.contains=function(e){return null!==this.field(e)},t.prototype.field=function(e){v(!e.isEmpty(),\"Can't get field of empty path\");var n=this;return e.forEach(function(e){n=n instanceof t?n.internalValue.get(e):null}),n},t.prototype.fieldMask=function(){var e=new Ne(ue.comparator);return this.internalValue.forEach(function(n,r){var i=new ue([n]);if(r instanceof t){var o=r.fieldMask().fields;o.isEmpty()?e=e.add(i):o.forEach(function(t){e=e.add(i.child(t))})}else e=e.add(i)}),ft.fromSet(e)},t.prototype.toString=function(){return this.internalValue.toString()},t.prototype.child=function(e){return this.internalValue.get(e)||void 0},t.prototype.setChild=function(e,n){return new t(this.internalValue.insert(e,n))},t.EMPTY=new t(new Se(G)),t}(It),Vt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Ct.ArrayValue,n}return s.__extends(t,e),t.prototype.value=function(e){return this.internalValue.map(function(t){return t.value(e)})},t.prototype.contains=function(e){for(var t=0,n=this.internalValue;t<n.length;t++)if(n[t].isEqual(e))return!0;return!1},t.prototype.forEach=function(e){this.internalValue.forEach(e)},t.prototype.isEqual=function(e){if(e instanceof t){if(this.internalValue.length!==e.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(e.internalValue[n]))return!1;return!0}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=Math.min(this.internalValue.length,e.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(e.internalValue[r]);if(i)return i}return G(this.internalValue.length,e.internalValue.length)}return this.defaultCompareTo(e)},t.prototype.toString=function(){return\"[\"+this.internalValue.map(function(e){return e.toString()}).join(\",\")+\"]\"},t}(It),qt=function(){function e(e,t){this.key=e,this.version=t}return e.compareByKey=function(e,t){return ce.comparator(e.key,t.key)},e}(),Bt=function(e){function t(t,n,r,i,o,s){var a=e.call(this,t,n)||this;return a.objectValue=i,a.proto=o,a.converter=s,v(void 0!==a.objectValue||void 0!==a.proto&&void 0!==a.converter,\"If objectValue is not defined, proto and converter need to be set.\"),a.hasLocalMutations=!!r.hasLocalMutations,a.hasCommittedMutations=!!r.hasCommittedMutations,a}return s.__extends(t,e),t.prototype.field=function(e){if(this.objectValue)return this.objectValue.field(e);this.fieldValueCache||(this.fieldValueCache=new Map);var t=e.canonicalString(),n=this.fieldValueCache.get(t);if(void 0===n){var r=this.getProtoField(e);n=void 0===r?null:this.converter(r),this.fieldValueCache.set(t,n)}return n},t.prototype.data=function(){var e=this;if(!this.objectValue){var t=Ut.EMPTY;O(this.proto.fields,function(n,r){t=t.set(new ue([n]),e.converter(r))}),this.objectValue=t,this.fieldValueCache=void 0}return this.objectValue},t.prototype.value=function(){return this.data().value()},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.hasLocalMutations===e.hasLocalMutations&&this.hasCommittedMutations===e.hasCommittedMutations&&this.data().isEqual(e.data())},t.prototype.toString=function(){return\"Document(\"+this.key+\", \"+this.version+\", \"+this.data().toString()+\", {hasLocalMutations: \"+this.hasLocalMutations+\"}), {hasCommittedMutations: \"+this.hasCommittedMutations+\"})\"},Object.defineProperty(t.prototype,\"hasPendingWrites\",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.prototype.getProtoField=function(e){v(void 0!==this.proto,\"Can only call getProtoField() when proto is defined\");for(var t=this.proto.fields[e.firstSegment()],n=1;n<e.length;++n){if(!t||!t.mapValue)return;t=t.mapValue.fields[e.get(n)]}return t},t.compareByField=function(e,t,n){var r=t.field(e),i=n.field(e);return null!==r&&null!==i?r.compareTo(i):y(\"Trying to compare documents on fields that don't exist\")},t}(qt),$t=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return s.__extends(t,e),t.prototype.toString=function(){return\"NoDocument(\"+this.key+\", \"+this.version+\")\"},Object.defineProperty(t.prototype,\"hasPendingWrites\",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(qt),zt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.toString=function(){return\"UnknownDocument(\"+this.key+\", \"+this.version+\")\"},Object.defineProperty(t.prototype,\"hasPendingWrites\",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(qt),Wt=function(){function e(e){this.mapKeyFn=e,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(o[0].isEqual(e))return s}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){O(this.inner,function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];e(o[0],o[1])}})},e.prototype.isEmpty=function(){return N(this.inner)},e}(),Ht=function(){function e(){this.changes=new Wt(function(e){return e.toString()}),this.changesApplied=!1}return e.prototype.addEntry=function(e){this.assertNotApplied(),this.changes.set(e.key,e)},e.prototype.removeEntry=function(e){this.assertNotApplied(),this.changes.set(e,null)},e.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?$e.resolve(n):this.getFromCache(e,t)},e.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},e.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},e.prototype.assertNotApplied=function(){v(!this.changesApplied,\"Changes have already been applied.\")},e}(),Qt=\"The remote document changelog no longer contains all changes for all local query views. It may be necessary to rebuild these views.\",Gt=function(){function e(e,t,n){this.serializer=e,this.indexManager=t,this.keepDocumentChangeLog=n,this._lastProcessedDocumentChangeId=0}return Object.defineProperty(e.prototype,\"lastProcessedDocumentChangeId\",{get:function(){return this._lastProcessedDocumentChangeId},enumerable:!0,configurable:!0}),e.prototype.start=function(e){var t=tt.getStore(e,bn.store);return this.synchronizeLastDocumentChangeId(t)},e.prototype.addEntry=function(e,t,n){var r=this;return Yt(e).put(Jt(t),n).next(function(){r.indexManager.addToCollectionParentIndex(e,t.path.popLast())})},e.prototype.removeEntry=function(e,t){var n=Yt(e),r=Jt(t);return n.delete(r)},e.prototype.updateMetadata=function(e,t,n){var r=this;return this.getMetadata(e).next(function(i){return i.byteSize+=n,r.setMetadata(e,i).next(function(){if(r.keepDocumentChangeLog)return Xt(e).put({changes:r.serializer.toDbResourcePaths(t)})})})},e.prototype.getEntry=function(e,t){var n=this;return Yt(e).get(Jt(t)).next(function(e){return e?n.serializer.fromDbRemoteDocument(e):null})},e.prototype.getSizedEntry=function(e,t){var n=this;return Yt(e).get(Jt(t)).next(function(e){return e?{maybeDocument:n.serializer.fromDbRemoteDocument(e),size:Zt(e)}:null})},e.prototype.getEntries=function(e,t){var n=this,r=ke();return this.forEachDbEntry(e,t,function(e,t){r=r.insert(e,t?n.serializer.fromDbRemoteDocument(t):null)}).next(function(){return r})},e.prototype.getSizedEntries=function(e,t){var n=this,r=ke(),i=new Se(ce.comparator);return this.forEachDbEntry(e,t,function(e,t){t?(r=r.insert(e,n.serializer.fromDbRemoteDocument(t)),i=i.insert(e,Zt(t))):(r=r.insert(e,null),i=i.insert(e,0))}).next(function(){return{maybeDocuments:r,sizeMap:i}})},e.prototype.forEachDbEntry=function(e,t,n){if(t.isEmpty())return $e.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return Yt(e).iterate({range:r},function(e,t,r){for(var s=ce.fromSegments(e);o&&ce.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},e.prototype.getDocumentsMatchingQuery=function(e,t){var n=this;v(!t.isCollectionGroupQuery(),\"CollectionGroup queries should be handled in LocalDocumentsView\");var r=Pe(),i=t.path.length+1,o=t.path.toArray(),s=IDBKeyRange.lowerBound(o);return Yt(e).iterate({range:s},function(e,o,s){if(e.length===i){var a=n.serializer.fromDbRemoteDocument(o);t.path.isPrefixOf(a.key.path)?a instanceof Bt&&t.matches(a)&&(r=r.insert(a.key,a)):s.done()}}).next(function(){return r})},e.prototype.getNewDocumentChanges=function(e){var t=this;v(this.keepDocumentChangeLog,\"Can only call getNewDocumentChanges() when document change log is enabled\");var n=Fe(),r=De(),i=IDBKeyRange.lowerBound(this._lastProcessedDocumentChangeId+1),o=!0,s=Xt(e);return s.iterate({range:i},function(e,r){if(o&&(o=!1,t._lastProcessedDocumentChangeId+1!==r.id))return t.synchronizeLastDocumentChangeId(s).next(function(){return $e.reject(new E(w.DATA_LOSS,Qt))});n=n.unionWith(t.serializer.fromDbResourcePaths(r.changes)),t._lastProcessedDocumentChangeId=r.id}).next(function(){var i=[];return n.forEach(function(n){i.push(t.getEntry(e,n).next(function(e){var t=e||new $t(n,Ce.forDeletedDoc());r=r.insert(n,t)}))}),$e.waitFor(i)}).next(function(){return r})},e.prototype.removeDocumentChangesThroughChangeId=function(e,t){var n=IDBKeyRange.upperBound(t);return Xt(e).delete(n)},e.prototype.synchronizeLastDocumentChangeId=function(e){var t=this;return this._lastProcessedDocumentChangeId=0,e.iterate({keysOnly:!0,reverse:!0},function(e,n,r){t._lastProcessedDocumentChangeId=e,r.done()})},e.prototype.newChangeBuffer=function(){return new e.RemoteDocumentChangeBuffer(this)},e.prototype.getSize=function(e){return this.getMetadata(e).next(function(e){return e.byteSize})},e.prototype.getMetadata=function(e){return Kt(e).get(fn.key).next(function(e){return v(!!e,\"Missing document cache metadata\"),e})},e.prototype.setMetadata=function(e,t){return Kt(e).put(fn.key,t)},e.RemoteDocumentChangeBuffer=function(e){function t(t){var n=e.call(this)||this;return n.documentCache=t,n.documentSizes=new Wt(function(e){return e.toString()}),n}return s.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=Fe();return this.changes.forEach(function(o,s){var a=t.documentSizes.get(o);if(v(void 0!==a,\"Cannot modify a document that wasn't read (for \"+o+\")\"),s){var u=t.documentCache.serializer.toDbRemoteDocument(s),c=Zt(u);r+=c-a,n.push(t.documentCache.addEntry(e,o,u))}else r-=a,n.push(t.documentCache.removeEntry(e,o));i=i.add(o)}),n.push(this.documentCache.updateMetadata(e,i,r)),$e.waitFor(n)},t.prototype.getFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntry(e,t).next(function(e){return null===e?(n.documentSizes.set(t,0),null):(n.documentSizes.set(t,e.size),e.maybeDocument)})},t.prototype.getAllFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntries(e,t).next(function(e){var t=e.maybeDocuments;return e.sizeMap.forEach(function(e,t){n.documentSizes.set(e,t)}),t})},t}(Ht),e}();function Kt(e){return jn.getStore(e,fn.store)}function Yt(e){return jn.getStore(e,dn.store)}function Xt(e){return jn.getStore(e,bn.store)}function Jt(e){return e.path.toArray()}function Zt(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw y(\"Unknown remote document type\");t=e.noDocument}return JSON.stringify(t).length}var en=function(){function e(){this.collectionParentIndex=new tn}return e.prototype.addToCollectionParentIndex=function(e,t){return this.collectionParentIndex.add(t),$e.resolve()},e.prototype.getCollectionParents=function(e,t){return $e.resolve(this.collectionParentIndex.getEntries(t))},e}(),tn=function(){function e(){this.index={}}return e.prototype.add=function(e){v(e.length%2==1,\"Expected a collection path.\");var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ne(se.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},e.prototype.getEntries=function(e){return(this.index[e]||new Ne(se.comparator)).toArray()},e}(),nn=8,rn=function(){function e(e){this.serializer=e}return e.prototype.createOrUpgrade=function(e,t,n,r){var i=this;v(n<r&&n>=0&&r<=nn,\"Unexpected schema upgrade from v\"+n+\" to v{toVersion}.\"),n<1&&r>=1&&(function(e){e.createObjectStore(sn.store)}(e),function(e){e.createObjectStore(an.store,{keyPath:an.keyPath}),e.createObjectStore(un.store,{keyPath:un.keyPath,autoIncrement:!0}).createIndex(un.userMutationsIndex,un.userMutationsKeyPath,{unique:!0}),e.createObjectStore(cn.store)}(e),vn(e),function(e){e.createObjectStore(dn.store)}(e));var o=$e.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(mn.store),e.deleteObjectStore(pn.store),e.deleteObjectStore(gn.store)}(e),vn(e)),o=o.next(function(){return function(e){var t=e.store(gn.store),n=new gn(0,0,Ce.MIN.toTimestamp(),0);return t.put(gn.key,n)}(t)})),n<4&&r>=4&&(0!==n&&(o=o.next(function(){return function(e,t){return t.store(un.store).loadAll().next(function(n){e.deleteObjectStore(un.store),e.createObjectStore(un.store,{keyPath:un.keyPath,autoIncrement:!0}).createIndex(un.userMutationsIndex,un.userMutationsKeyPath,{unique:!0});var r=t.store(un.store),i=n.map(function(e){return r.put(e)});return $e.waitFor(i)})}(e,t)})),o=o.next(function(){!function(e){e.createObjectStore(_n.store,{keyPath:_n.keyPath})}(e),function(e){e.createObjectStore(bn.store,{keyPath:\"id\",autoIncrement:!0})}(e)})),n<5&&r>=5&&(o=o.next(function(){return i.removeAcknowledgedMutations(t)})),n<6&&r>=6&&(o=o.next(function(){return function(e){e.createObjectStore(fn.store)}(e),i.addDocumentGlobal(t)})),n<7&&r>=7&&(o=o.next(function(){return i.ensureSequenceNumbers(t)})),n<8&&r>=8&&(o=o.next(function(){return i.createCollectionParentIndex(e,t)})),o},e.prototype.addDocumentGlobal=function(e){var t=0;return e.store(dn.store).iterate(function(e,n){t+=Zt(n)}).next(function(){var n=new fn(t);return e.store(fn.store).put(fn.key,n)})},e.prototype.removeAcknowledgedMutations=function(e){var t=this,n=e.store(an.store),r=e.store(un.store);return n.loadAll().next(function(n){return $e.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(un.userMutationsIndex,i).next(function(r){return $e.forEach(r,function(r){v(r.userId===n.userId,\"Cannot process batch \"+r.batchId+\" from unexpected user\");var i=t.serializer.fromDbMutationBatch(r);return He(e,n.userId,i).next(function(){})})})})})},e.prototype.ensureSequenceNumbers=function(e){var t=e.store(mn.store),n=e.store(dn.store);return ht(e).next(function(e){var r=[];return n.iterate(function(n,i){var o=new se(n),s=function(e){return[0,ve(e)]}(o);r.push(t.get(s).next(function(n){return n?$e.resolve():function(n){return t.put(new mn(0,ve(n),e))}(o)}))}).next(function(){return $e.waitFor(r)})})},e.prototype.createCollectionParentIndex=function(e,t){e.createObjectStore(yn.store,{keyPath:yn.keyPath});var n=t.store(yn.store),r=new tn,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:ve(i)})}};return t.store(dn.store).iterate({keysOnly:!0},function(e,t){var n=new se(e);return i(n.popLast())}).next(function(){return t.store(cn.store).iterate({keysOnly:!0},function(e,t){var n=we(e[1]);return i(n.popLast())})})},e}(),on=function(){return function(e,t){this.seconds=e,this.nanoseconds=t}}(),sn=function(){function e(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}return e.store=\"owner\",e.key=\"owner\",e}(),an=function(){function e(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}return e.store=\"mutationQueues\",e.keyPath=\"userId\",e}(),un=function(){function e(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}return e.store=\"mutations\",e.keyPath=\"batchId\",e.userMutationsIndex=\"userMutationsIndex\",e.userMutationsKeyPath=[\"userId\",\"batchId\"],e}(),cn=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,ve(t)]},e.key=function(e,t,n){return[e,ve(t),n]},e.store=\"documentMutations\",e.PLACEHOLDER=new e,e}(),ln=function(){return function(e,t){this.path=e,this.readTime=t}}(),hn=function(){return function(e,t){this.path=e,this.version=t}}(),dn=function(){function e(e,t,n,r){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r}return e.store=\"remoteDocuments\",e}(),fn=function(){function e(e){this.byteSize=e}return e.store=\"remoteDocumentGlobal\",e.key=\"remoteDocumentGlobalKey\",e}(),pn=function(){function e(e,t,n,r,i,o){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.query=o}return e.store=\"targets\",e.keyPath=\"targetId\",e.queryTargetsIndexName=\"queryTargetsIndex\",e.queryTargetsKeyPath=[\"canonicalId\",\"targetId\"],e}(),mn=function(){function e(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n,v(0===e==(void 0!==n),\"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number\")}return e.store=\"targetDocuments\",e.keyPath=[\"targetId\",\"path\"],e.documentTargetsIndex=\"documentTargetsIndex\",e.documentTargetsKeyPath=[\"path\",\"targetId\"],e}(),gn=function(){function e(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return e.key=\"targetGlobalKey\",e.store=\"targetGlobal\",e}(),yn=function(){function e(e,t){this.collectionId=e,this.parent=t}return e.store=\"collectionParents\",e.keyPath=[\"collectionId\",\"parent\"],e}();function vn(e){e.createObjectStore(mn.store,{keyPath:mn.keyPath}).createIndex(mn.documentTargetsIndex,mn.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(pn.store,{keyPath:pn.keyPath}).createIndex(pn.queryTargetsIndexName,pn.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(gn.store)}var bn=function(){function e(e){this.changes=e}return e.store=\"remoteDocumentChanges\",e.keyPath=\"id\",e}(),_n=function(){function e(e,t,n,r,i){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r,this.lastProcessedDocumentChangeId=i}return e.store=\"clientMetadata\",e.keyPath=\"clientId\",e}(),wn=[an.store,un.store,cn.store,dn.store,pn.store,sn.store,gn.store,mn.store].concat([_n.store,bn.store]).concat([fn.store]).concat([yn.store]),En=function(){function e(){this.collectionParentsCache=new tn}return e.prototype.addToCollectionParentIndex=function(e,t){if(v(t.length%2==1,\"Expected a collection path.\"),this.collectionParentsCache.add(t)){v(t.length>=1,\"Invalid collection path.\");var n=t.lastSegment(),r=t.popLast();return Cn(e).put({collectionId:n,parent:ve(r)})}return $e.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,\"\"],[Y(t),\"\"],!1,!0);return Cn(e).loadAll(r).next(function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(we(o.parent))}return n})},e}();function Cn(e){return jn.getStore(e,yn.store)}var Sn=function(e){return e[e.Listen=0]=\"Listen\",e[e.ExistenceFilterMismatch=1]=\"ExistenceFilterMismatch\",e[e.LimboResolution=2]=\"LimboResolution\",e}({}),Tn=function(){function e(e,t,n,r,i,o){void 0===i&&(i=Ce.MIN),void 0===o&&(o=_()),this.query=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.resumeToken=o}return e.prototype.withSequenceNumber=function(t){return new e(this.query,this.targetId,this.purpose,t,this.snapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.query,this.targetId,this.purpose,this.sequenceNumber,n,t)},e.prototype.isEqual=function(e){return this.targetId===e.targetId&&this.purpose===e.purpose&&this.sequenceNumber===e.sequenceNumber&&this.snapshotVersion.isEqual(e.snapshotVersion)&&this.resumeToken===e.resumeToken&&this.query.isEqual(e.query)},e}(),In=function(){function e(e){this.remoteSerializer=e}return e.prototype.fromDbRemoteDocument=function(e){if(e.document)return this.remoteSerializer.fromDocument(e.document,!!e.hasCommittedMutations);if(e.noDocument){var t=ce.fromSegments(e.noDocument.path),n=this.fromDbTimestamp(e.noDocument.readTime);return new $t(t,n,{hasCommittedMutations:!!e.hasCommittedMutations})}return e.unknownDocument?(t=ce.fromSegments(e.unknownDocument.path),n=this.fromDbTimestamp(e.unknownDocument.version),new zt(t,n)):y(\"Unexpected DbRemoteDocument\")},e.prototype.toDbRemoteDocument=function(e){if(e instanceof Bt){var t=e.proto?e.proto:this.remoteSerializer.toDocument(e);return new dn(null,null,t,i=e.hasCommittedMutations)}if(e instanceof $t){var n=e.key.path.toArray(),r=this.toDbTimestamp(e.version),i=e.hasCommittedMutations;return new dn(null,new ln(n,r),null,i)}return e instanceof zt?(n=e.key.path.toArray(),r=this.toDbTimestamp(e.version),new dn(new hn(n,r),null,null,!0)):y(\"Unexpected MaybeDocumment\")},e.prototype.toDbTimestamp=function(e){var t=e.toTimestamp();return new on(t.seconds,t.nanoseconds)},e.prototype.fromDbTimestamp=function(e){var t=new Ee(e.seconds,e.nanoseconds);return Ce.fromTimestamp(t)},e.prototype.toDbMutationBatch=function(e,t){var n=this,r=t.baseMutations.map(function(e){return n.remoteSerializer.toMutation(e)}),i=t.mutations.map(function(e){return n.remoteSerializer.toMutation(e)});return new un(e,t.batchId,t.localWriteTime.toMillis(),r,i)},e.prototype.fromDbMutationBatch=function(e){var t=this,n=(e.baseMutations||[]).map(function(e){return t.remoteSerializer.fromMutation(e)}),r=e.mutations.map(function(e){return t.remoteSerializer.fromMutation(e)}),i=Ee.fromMillis(e.localWriteTimeMs);return new qe(e.batchId,i,n,r)},e.prototype.toDbResourcePaths=function(e){var t=[];return e.forEach(function(e){t.push(ve(e.path))}),t},e.prototype.fromDbResourcePaths=function(e){for(var t=Fe(),n=0,r=e;n<r.length;n++)t=t.add(new ce(we(r[n])));return t},e.prototype.fromDbTarget=function(e){var t,n=this.fromDbTimestamp(e.readTime);return t=void 0!==e.query.documents?this.remoteSerializer.fromDocumentsTarget(e.query):this.remoteSerializer.fromQueryTarget(e.query),new Tn(t,e.targetId,Sn.Listen,e.lastListenSequenceNumber,n,e.resumeToken)},e.prototype.toDbTarget=function(e){v(Sn.Listen===e.purpose,\"Only queries with purpose \"+Sn.Listen+\" may be stored, got \"+e.purpose);var t,n,r=this.toDbTimestamp(e.snapshotVersion);return t=e.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(e.query):this.remoteSerializer.toQueryTarget(e.query),e.resumeToken instanceof Uint8Array?(v(\"YES\"===process.env.USE_MOCK_PERSISTENCE,\"Persisting non-string stream tokens is only supported with mock persistence .\"),n=e.resumeToken.toString()):n=e.resumeToken,new pn(e.targetId,e.query.canonicalId(),r,n,e.sequenceNumber,t)},e}();function On(e,t){var n=e[1],r=t[1],i=G(e[0],t[0]);return 0===i?G(n,r):i}var Nn=function(){function e(e){this.maxElements=e,this.buffer=new Ne(On),this.previousIndex=0}return e.prototype.nextIndex=function(){return++this.previousIndex},e.prototype.addElement=function(e){var t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();On(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,\"maxValue\",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),e}(),An={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Rn=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e.COLLECTION_DISABLED=-1,e.MINIMUM_CACHE_SIZE_BYTES=1048576,e.DEFAULT=new e(e.DEFAULT_CACHE_SIZE_BYTES=41943040,e.DEFAULT_COLLECTION_PERCENTILE=10,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3),e.DISABLED=new e(e.COLLECTION_DISABLED,0,0),e}(),Dn=function(){function e(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.hasRun=!1,this.gcTask=null}return e.prototype.start=function(){v(null===this.gcTask,\"Cannot start an already started LruScheduler\"),this.garbageCollector.params.cacheSizeCollectionThreshold!==Rn.COLLECTION_DISABLED&&this.scheduleGC()},e.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(e.prototype,\"started\",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),e.prototype.scheduleGC=function(){var e=this;v(null===this.gcTask,\"Cannot schedule GC while a task is pending\");var t=this.hasRun?3e5:6e4;p(\"LruGarbageCollector\",\"Garbage collection scheduled in \"+t+\"ms\"),this.gcTask=this.asyncQueue.enqueueAfterDelay(he.LruGarbageCollection,t,function(){return e.gcTask=null,e.hasRun=!0,e.localStore.collectGarbage(e.garbageCollector).then(function(){return e.scheduleGC()}).catch(Fn)})},e}(),kn=function(){function e(e,t){this.delegate=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.delegate.getSequenceNumberCount(e).next(function(e){return Math.floor(t/100*e)})},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return $e.resolve(ie.INVALID);var r=new Nn(t);return this.delegate.forEachTarget(e,function(e){return r.addElement(e.sequenceNumber)}).next(function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(e,function(e){return r.addElement(e)})}).next(function(){return r.maxValue})},e.prototype.removeTargets=function(e,t,n){return this.delegate.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.delegate.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return this.params.cacheSizeCollectionThreshold===Rn.COLLECTION_DISABLED?(p(\"LruGarbageCollector\",\"Garbage collection skipped; disabled\"),$e.resolve(An)):this.getCacheSize(e).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(p(\"LruGarbageCollector\",\"Garbage collection skipped; Cache size \"+r+\" is lower than threshold \"+n.params.cacheSizeCollectionThreshold),An):n.runGarbageCollection(e,t)})},e.prototype.getCacheSize=function(e){return this.delegate.getCacheSize(e)},e.prototype.runGarbageCollection=function(e,t){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(t){return t>c.params.maximumSequenceNumbersToCollect?(p(\"LruGarbageCollector\",\"Capping sequence numbers to collect down to the maximum of \"+c.params.maximumSequenceNumbersToCollect+\" from \"+t),r=c.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),c.nthSequenceNumber(e,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(e,n,t)}).next(function(t){return i=t,a=Date.now(),c.removeOrphanedDocuments(e,n)}).next(function(e){return u=Date.now(),d()<=h.DEBUG&&p(\"LruGarbageCollector\",\"LRU Garbage Collection\\n\\tCounted targets in \"+(o-l)+\"ms\\n\\tDetermined least recently used \"+r+\" in \"+(s-o)+\"ms\\n\\tRemoved \"+i+\" targets in \"+(a-s)+\"ms\\n\\tRemoved \"+e+\" documents in \"+(u-a)+\"ms\\nTotal Duration: \"+(u-l)+\"ms\"),$e.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})})},e}(),xn=\"IndexedDbPersistence\",Pn=\"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.\",Ln=\"Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.\",Mn=function(e){function t(t,n){var r=e.call(this)||this;return r.simpleDbTransaction=t,r.currentSequenceNumber=n,r}return s.__extends(t,e),t}(function(){return function(){}}()),jn=function(){function e(t,n,r,i,o,s,a,u){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.queue=s,this.sequenceNumberSyncer=u,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(e){return Promise.resolve()},this.referenceDelegate=new qn(this,o),this.dbName=n+e.MAIN_DATABASE,this.serializer=new In(a),this.document=i.document,this.queryCache=new ut(this.referenceDelegate,this.serializer),this.indexManager=new En,this.remoteDocumentCache=new Gt(this.serializer,this.indexManager,this.allowTabSynchronization),!i.window||!i.window.localStorage)throw new E(w.UNIMPLEMENTED,\"IndexedDB persistence is only available on platforms that support LocalStorage.\");this.window=i.window,this.webStorage=this.window.localStorage}return e.getStore=function(e,t){if(e instanceof Mn)return tt.getStore(e.simpleDbTransaction,t);throw y(\"IndexedDbPersistence must use instances of IndexedDbTransaction\")},e.createIndexedDbPersistence=function(t){return s.__awaiter(this,void 0,void 0,function(){var n;return s.__generator(this,function(r){switch(r.label){case 0:if(!e.isAvailable())throw new E(w.UNIMPLEMENTED,\"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.\");return[4,(n=new e(t.allowTabSynchronization,t.persistenceKey,t.clientId,t.platform,t.lruParams,t.queue,t.serializer,t.sequenceNumberSyncer)).start()];case 1:return r.sent(),[2,n]}})})},e.prototype.start=function(){var e=this;return v(!this.started,\"IndexedDbPersistence double-started!\"),v(null!==this.window,\"Expected 'window' to be defined\"),tt.openOrCreate(this.dbName,nn,new rn(this.serializer)).then(function(t){return e.simpleDb=t,e.updateClientMetadataAndTryBecomePrimary()}).then(function(){return e.attachVisibilityHandler(),e.attachWindowUnloadHook(),e.scheduleClientMetadataAndPrimaryLeaseRefreshes(),e.startRemoteDocumentCache()}).then(function(){return e.simpleDb.runTransaction(\"readonly\",[gn.store],function(t){return ht(t).next(function(t){e.listenSequence=new ie(t,e.sequenceNumberSyncer)})})}).then(function(){e._started=!0}).catch(function(t){return e.simpleDb&&e.simpleDb.close(),Promise.reject(t)})},e.prototype.startRemoteDocumentCache=function(){var e=this;return this.simpleDb.runTransaction(\"readonly\",wn,function(t){return e.remoteDocumentCache.start(t)})},e.prototype.setPrimaryStateListener=function(e){var t=this;return this.primaryStateListener=function(n){return s.__awaiter(t,void 0,void 0,function(){return s.__generator(this,function(t){return this.started?[2,e(n)]:[2]})})},e(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(e){var t=this;this.simpleDb.setVersionChangeListener(function(n){return s.__awaiter(t,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return null!==n.newVersion?[3,2]:[4,e()];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget(function(){return s.__awaiter(t,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})}))},e.prototype.updateClientMetadataAndTryBecomePrimary=function(){var e=this;return this.simpleDb.runTransaction(\"readwrite\",wn,function(t){return Vn(t).put(new _n(e.clientId,Date.now(),e.networkEnabled,e.inForeground,e.remoteDocumentCache.lastProcessedDocumentChangeId)).next(function(){if(e.isPrimary)return e.verifyPrimaryLease(t).next(function(t){t||(e.isPrimary=!1,e.queue.enqueueAndForget(function(){return e.primaryStateListener(!1)}))})}).next(function(){return e.canActAsPrimary(t)}).next(function(n){var r=e.isPrimary;return e.isPrimary=n,r!==e.isPrimary&&e.queue.enqueueAndForget(function(){return e.primaryStateListener(e.isPrimary)}),r&&!e.isPrimary?e.releasePrimaryLeaseIfHeld(t):e.isPrimary?e.acquireOrExtendPrimaryLease(t):void 0})})},e.prototype.verifyPrimaryLease=function(e){var t=this;return Un(e).get(sn.key).next(function(e){return $e.resolve(t.isLocalClient(e))})},e.prototype.removeClientMetadata=function(e){return Vn(e).delete(this.clientId)},e.prototype.maybeGarbageCollectMultiClientState=function(){return s.__awaiter(this,void 0,void 0,function(){var t,n,r=this;return s.__generator(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),n=[],[4,this.runTransaction(\"maybeGarbageCollectMultiClientState\",\"readwrite-primary\",function(i){var o=e.getStore(i,_n.store);return o.loadAll().next(function(e){t=r.filterActiveClients(e,18e5),n=e.filter(function(e){return-1===t.indexOf(e)})}).next(function(){return $e.forEach(n,function(e){return o.delete(e.clientId)})}).next(function(){if((t=t.filter(function(e){return e.clientId!==r.clientId})).length>0){var e=t.map(function(e){return e.lastProcessedDocumentChangeId||0}),n=Math.min.apply(Math,e);return r.remoteDocumentCache.removeDocumentChangesThroughChangeId(i,n)}})})]);case 1:i.sent(),n.forEach(function(e){r.window.localStorage.removeItem(r.zombiedClientLocalStorageKey(e.clientId))}),i.label=2;case 2:return[2]}})})},e.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var e=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(he.ClientMetadataRefresh,4e3,function(){return e.updateClientMetadataAndTryBecomePrimary().then(function(){return e.maybeGarbageCollectMultiClientState()}).then(function(){return e.scheduleClientMetadataAndPrimaryLeaseRefreshes()})})},e.prototype.isLocalClient=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.canActAsPrimary=function(e){var t=this;return Un(e).get(sn.key).next(function(n){if(null!==n&&t.isWithinAge(n.leaseTimestampMs,5e3)&&!t.isClientZombied(n.ownerId)){if(t.isLocalClient(n)&&t.networkEnabled)return!0;if(!t.isLocalClient(n)){if(!n.allowTabSynchronization)throw new E(w.FAILED_PRECONDITION,Ln);return!1}}return!(!t.networkEnabled||!t.inForeground)||Vn(e).loadAll().next(function(e){return void 0===t.filterActiveClients(e,5e3).find(function(e){return!(t.clientId===e.clientId||!(!t.networkEnabled&&e.networkEnabled||!t.inForeground&&e.inForeground&&t.networkEnabled===e.networkEnabled))})})}).next(function(e){return t.isPrimary!==e&&p(xn,\"Client \"+(e?\"is\":\"is not\")+\" eligible for a primary lease.\"),e})},e.prototype.shutdown=function(){return s.__awaiter(this,void 0,void 0,function(){var e=this;return s.__generator(this,function(t){switch(t.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction(\"readwrite\",[sn.store,_n.store],function(t){return e.releasePrimaryLeaseIfHeld(t).next(function(){return e.removeClientMetadata(t)})})];case 1:return t.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}})})},e.prototype.filterActiveClients=function(e,t){var n=this;return e.filter(function(e){return n.isWithinAge(e.updateTimeMs,t)&&!n.isClientZombied(e.clientId)})},e.prototype.getActiveClients=function(){var e=this;return this.simpleDb.runTransaction(\"readonly\",[_n.store],function(t){return Vn(t).loadAll().next(function(t){return e.filterActiveClients(t,18e5).map(function(e){return e.clientId})})})},e.clearPersistence=function(t){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(n){switch(n.label){case 0:return e.isAvailable()?[4,tt.delete(t+e.MAIN_DATABASE)]:[2,Promise.resolve()];case 1:return n.sent(),[2]}})})},Object.defineProperty(e.prototype,\"started\",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getMutationQueue=function(e){return v(this.started,\"Cannot initialize MutationQueue before persistence is started.\"),ze.forUser(e,this.serializer,this.indexManager,this.referenceDelegate)},e.prototype.getQueryCache=function(){return v(this.started,\"Cannot initialize QueryCache before persistence is started.\"),this.queryCache},e.prototype.getRemoteDocumentCache=function(){return v(this.started,\"Cannot initialize RemoteDocumentCache before persistence is started.\"),this.remoteDocumentCache},e.prototype.getIndexManager=function(){return v(this.started,\"Cannot initialize IndexManager before persistence is started.\"),this.indexManager},e.prototype.runTransaction=function(e,t,n){var r=this;return p(xn,\"Starting transaction:\",e),this.simpleDb.runTransaction(\"readonly\"===t?\"readonly\":\"readwrite\",wn,function(i){return\"readwrite-primary\"===t?r.verifyPrimaryLease(i).next(function(t){if(!t)throw m(\"Failed to obtain primary lease for action '\"+e+\"'.\"),r.isPrimary=!1,r.queue.enqueueAndForget(function(){return r.primaryStateListener(!1)}),new E(w.FAILED_PRECONDITION,Pn);return n(new Mn(i,r.listenSequence.next()))}).next(function(e){return r.acquireOrExtendPrimaryLease(i).next(function(){return e})}):r.verifyAllowTabSynchronization(i).next(function(){return n(new Mn(i,r.listenSequence.next()))})})},e.prototype.verifyAllowTabSynchronization=function(e){var t=this;return Un(e).get(sn.key).next(function(e){if(null!==e&&t.isWithinAge(e.leaseTimestampMs,5e3)&&!t.isClientZombied(e.ownerId)&&!t.isLocalClient(e)&&!e.allowTabSynchronization)throw new E(w.FAILED_PRECONDITION,Ln)})},e.prototype.acquireOrExtendPrimaryLease=function(e){var t=new sn(this.clientId,this.allowTabSynchronization,Date.now());return Un(e).put(sn.key,t)},e.isAvailable=function(){return tt.isAvailable()},e.buildStoragePrefix=function(e){var t=e.databaseId.projectId;return e.databaseId.isDefaultDatabase||(t+=\".\"+e.databaseId.database),\"firestore/\"+e.persistenceKey+\"/\"+t+\"/\"},e.prototype.releasePrimaryLeaseIfHeld=function(e){var t=this,n=Un(e);return n.get(sn.key).next(function(e){return t.isLocalClient(e)?(p(xn,\"Releasing primary lease.\"),n.delete(sn.key)):$e.resolve()})},e.prototype.isWithinAge=function(e,t){var n=Date.now();return!(e<n-t||e>n&&(m(\"Detected an update time that is in the future: \"+e+\" > \"+n),1))},e.prototype.attachVisibilityHandler=function(){var e=this;null!==this.document&&\"function\"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){e.queue.enqueueAndForget(function(){return e.inForeground=\"visible\"===e.document.visibilityState,e.updateClientMetadataAndTryBecomePrimary()})},this.document.addEventListener(\"visibilitychange\",this.documentVisibilityHandler),this.inForeground=\"visible\"===this.document.visibilityState)},e.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(v(null!==this.document&&\"function\"==typeof this.document.addEventListener,\"Expected 'document.addEventListener' to be a function\"),this.document.removeEventListener(\"visibilitychange\",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},e.prototype.attachWindowUnloadHook=function(){var e=this;\"function\"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){e.markClientZombied(),e.queue.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener(\"unload\",this.windowUnloadHandler))},e.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(v(\"function\"==typeof this.window.removeEventListener,\"Expected 'window.removeEventListener' to be a function\"),this.window.removeEventListener(\"unload\",this.windowUnloadHandler),this.windowUnloadHandler=null)},e.prototype.isClientZombied=function(e){try{var t=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(e));return p(xn,\"Client '\"+e+\"' \"+(t?\"is\":\"is not\")+\" zombied in LocalStorage\"),t}catch(n){return m(xn,\"Failed to get zombied client id.\",n),!1}},e.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(e){m(\"Failed to set zombie client id.\",e)}},e.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(e){}},e.prototype.zombiedClientLocalStorageKey=function(e){return\"firestore_zombie_\"+this.persistenceKey+\"_\"+e},e.MAIN_DATABASE=\"main\",e}();function Fn(e){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){if(!function(e){return e.code===w.FAILED_PRECONDITION&&e.message===Pn}(e))throw e;return p(xn,\"Unexpectedly lost primary lease\"),[2]})})}function Un(e){return e.store(sn.store)}function Vn(e){return e.store(_n.store)}var qn=function(){function e(e,t){this.db=e,this.inMemoryPins=null,this.garbageCollector=new kn(this,t)}return e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocmentCount(e);return this.db.getQueryCache().getQueryCount(e).next(function(e){return t.next(function(t){return e+t})})},e.prototype.orphanedDocmentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,function(e){t++}).next(function(){return t})},e.prototype.forEachTarget=function(e,t){return this.db.getQueryCache().forEachTarget(e,t)},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){return this.forEachOrphanedDocument(e,function(e,n){return t(n)})},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return Bn(e,t)},e.prototype.removeReference=function(e,t){return Bn(e,t)},e.prototype.removeTargets=function(e,t,n){return this.db.getQueryCache().removeTargets(e,t,n)},e.prototype.removeMutationReference=function(e,t){return Bn(e,t)},e.prototype.isPinned=function(e,t){return this.inMemoryPins.containsKey(t)?$e.resolve(!0):function(e,t){var n=!1;return Ye(e).iterateSerial(function(r){return We(e,r,t).next(function(e){return e&&(n=!0),$e.resolve(!e)})}).next(function(){return n})}(e,t)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.forEachOrphanedDocument(e,function(s,a){if(a<=t){var u=n.isPinned(e,s).next(function(t){if(!t)return o++,r.getEntry(e,s).next(function(){return r.removeEntry(s),dt(e).delete([0,ve(s.path)])})});i.push(u)}}).next(function(){return $e.waitFor(i)}).next(function(){return r.apply(e)}).next(function(){return o})},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getQueryCache().updateQueryData(e,n)},e.prototype.updateLimboDocument=function(e,t){return Bn(e,t)},e.prototype.forEachOrphanedDocument=function(e,t){var n,r=dt(e),i=ie.INVALID;return r.iterate({index:mn.documentTargetsIndex},function(e,r){var o=r.path,s=r.sequenceNumber;0===e[0]?(i!==ie.INVALID&&t(new ce(we(n)),i),i=s,n=o):i=ie.INVALID}).next(function(){i!==ie.INVALID&&t(new ce(we(n)),i)})},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}();function Bn(e,t){return dt(e).put(function(e,t){return new mn(0,ve(e.path),t)}(t,e.currentSequenceNumber))}var $n=function(){function e(e,t,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.indexManager=n}return e.prototype.getDocument=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e,t).next(function(r){return n.getDocumentInternal(e,t,r)})},e.prototype.getDocumentInternal=function(e,t,n){return this.remoteDocumentCache.getEntry(e,t).next(function(e){for(var r=0,i=n;r<i.length;r++)e=i[r].applyToLocalView(t,e);return e})},e.prototype.applyLocalMutationsToDocuments=function(e,t,n){var r=ke();return t.forEach(function(e,t){for(var i=0,o=n;i<o.length;i++)t=o[i].applyToLocalView(e,t);r=r.insert(e,t)}),r},e.prototype.getDocuments=function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next(function(t){return n.getLocalViewOfDocuments(e,t)})},e.prototype.getLocalViewOfDocuments=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(function(r){var i=n.applyLocalMutationsToDocuments(e,t,r),o=De();return i.forEach(function(e,t){t||(t=new $t(e,Ce.forDeletedDoc())),o=o.insert(e,t)}),o})},e.prototype.getDocumentsMatchingQuery=function(e,t){return t.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(e,t.path):t.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(e,t):this.getDocumentsMatchingCollectionQuery(e,t)},e.prototype.getDocumentsMatchingDocumentQuery=function(e,t){return this.getDocument(e,new ce(t)).next(function(e){var t=Pe();return e instanceof Bt&&(t=t.insert(e.key,e)),t})},e.prototype.getDocumentsMatchingCollectionGroupQuery=function(e,t){var n=this;v(t.path.isEmpty(),\"Currently we only support collection group queries at the root.\");var r=t.collectionGroup,i=Pe();return this.indexManager.getCollectionParents(e,r).next(function(o){return $e.forEach(o,function(o){var s=t.asCollectionQueryAtPath(o.child(r));return n.getDocumentsMatchingCollectionQuery(e,s).next(function(e){e.forEach(function(e,t){i=i.insert(e,t)})})}).next(function(){return i})})},e.prototype.getDocumentsMatchingCollectionQuery=function(e,t){var n,r,i=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(e,t).next(function(r){return n=r,i.mutationQueue.getAllMutationBatchesAffectingQuery(e,t)}).next(function(t){return i.addMissingBaseDocuments(e,r=t,n).next(function(e){n=e;for(var t=0,i=r;t<i.length;t++)for(var o=i[t],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=n.get(c),h=u.applyToLocalView(l,l,o.localWriteTime);n=h instanceof Bt?n.insert(c,h):n.remove(c)}})}).next(function(){return n.forEach(function(e,r){t.matches(r)||(n=n.remove(e))}),n})},e.prototype.addMissingBaseDocuments=function(e,t,n){for(var r=Fe(),i=0,o=t;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof _t&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.remoteDocumentCache.getEntries(e,r).next(function(e){return e.forEach(function(e,t){null!==t&&t instanceof Bt&&(c=c.insert(e,t))}),c})},e}(),zn=function(){function e(){this.refsByKey=new Ne(Wn.compareByKey),this.refsByTarget=new Ne(Wn.compareByTargetId)}return e.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},e.prototype.addReference=function(e,t){var n=new Wn(e,t);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},e.prototype.addReferences=function(e,t){var n=this;e.forEach(function(e){return n.addReference(e,t)})},e.prototype.removeReference=function(e,t){this.removeRef(new Wn(e,t))},e.prototype.removeReferences=function(e,t){var n=this;e.forEach(function(e){return n.removeReference(e,t)})},e.prototype.removeReferencesForId=function(e){var t=this,n=ce.EMPTY,r=new Wn(n,e),i=new Wn(n,e+1),o=[];return this.refsByTarget.forEachInRange([r,i],function(e){t.removeRef(e),o.push(e.key)}),o},e.prototype.removeAllReferences=function(){var e=this;this.refsByKey.forEach(function(t){return e.removeRef(t)})},e.prototype.removeRef=function(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)},e.prototype.referencesForId=function(e){var t=ce.EMPTY,n=new Wn(t,e),r=new Wn(t,e+1),i=Fe();return this.refsByTarget.forEachInRange([n,r],function(e){i=i.add(e.key)}),i},e.prototype.containsKey=function(e){var t=new Wn(e,0),n=this.refsByKey.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),Wn=function(){function e(e,t){this.key=e,this.targetOrBatchId=t}return e.compareByKey=function(e,t){return ce.comparator(e.key,t.key)||G(e.targetOrBatchId,t.targetOrBatchId)},e.compareByTargetId=function(e,t){return G(e.targetOrBatchId,t.targetOrBatchId)||ce.comparator(e.key,t.key)},e}(),Hn=function(){function e(e,t){this.persistence=e,this.localViewReferences=new zn,this.queryDataByTarget={},v(e.started,\"LocalStore was passed an unstarted persistence implementation\"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=e.getMutationQueue(t),this.remoteDocuments=e.getRemoteDocumentCache(),this.queryCache=e.getQueryCache(),this.localDocuments=new $n(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager())}return e.prototype.handleUserChange=function(e){var t=this;return this.persistence.runTransaction(\"Handle user change\",\"readonly\",function(n){var r;return t.mutationQueue.getAllMutationBatches(n).next(function(i){return r=i,t.mutationQueue=t.persistence.getMutationQueue(e),t.localDocuments=new $n(t.remoteDocuments,t.mutationQueue,t.persistence.getIndexManager()),t.mutationQueue.getAllMutationBatches(n)}).next(function(e){for(var i=[],o=[],s=Fe(),a=0,u=r;a<u.length;a++){i.push((f=u[a]).batchId);for(var c=0,l=f.mutations;c<l.length;c++)s=s.add(l[c].key)}for(var h=0,d=e;h<d.length;h++){var f;o.push((f=d[h]).batchId);for(var p=0,m=f.mutations;p<m.length;p++)s=s.add(m[p].key)}return t.localDocuments.getDocuments(n,s).next(function(e){return{affectedDocuments:e,removedBatchIds:i,addedBatchIds:o}})})})},e.prototype.localWrite=function(e){var t=this,n=Ee.now(),r=e.reduce(function(e,t){return e.add(t.key)},Fe());return this.persistence.runTransaction(\"Locally write mutations\",\"readwrite\",function(i){return t.localDocuments.getDocuments(i,r).next(function(r){for(var o=[],s=0,a=e;s<a.length;s++){var u=a[s],c=u.extractBaseValue(r.get(u.key));null!=c&&o.push(new _t(u.key,c,c.fieldMask(),yt.exists(!0)))}return t.mutationQueue.addMutationBatch(i,n,o,e).next(function(e){var t=e.applyToLocalDocumentSet(r);return{batchId:e.batchId,changes:t}})})})},e.prototype.lookupMutationDocuments=function(e){var t=this;return this.persistence.runTransaction(\"Lookup mutation documents\",\"readonly\",function(n){return t.mutationQueue.lookupMutationKeys(n,e).next(function(e){return e?t.localDocuments.getDocuments(n,e):$e.resolve(null)})})},e.prototype.acknowledgeBatch=function(e){var t=this;return this.persistence.runTransaction(\"Acknowledge batch\",\"readwrite-primary\",function(n){var r=e.batch.keys(),i=t.remoteDocuments.newChangeBuffer();return t.mutationQueue.acknowledgeBatch(n,e.batch,e.streamToken).next(function(){return t.applyWriteToRemoteDocuments(n,e,i)}).next(function(){return i.apply(n)}).next(function(){return t.mutationQueue.performConsistencyCheck(n)}).next(function(){return t.localDocuments.getDocuments(n,r)})})},e.prototype.rejectBatch=function(e){var t=this;return this.persistence.runTransaction(\"Reject batch\",\"readwrite-primary\",function(n){var r;return t.mutationQueue.lookupMutationBatch(n,e).next(function(e){return v(null!==e,\"Attempt to reject nonexistent batch!\"),r=e.keys(),t.mutationQueue.removeMutationBatch(n,e)}).next(function(){return t.mutationQueue.performConsistencyCheck(n)}).next(function(){return t.localDocuments.getDocuments(n,r)})})},e.prototype.getHighestUnacknowledgedBatchId=function(){var e=this;return this.persistence.runTransaction(\"Get highest unacknowledged batch id\",\"readonly\",function(t){return e.mutationQueue.getHighestUnacknowledgedBatchId(t)})},e.prototype.getLastStreamToken=function(){var e=this;return this.persistence.runTransaction(\"Get last stream token\",\"readonly\",function(t){return e.mutationQueue.getLastStreamToken(t)})},e.prototype.setLastStreamToken=function(e){var t=this;return this.persistence.runTransaction(\"Set last stream token\",\"readwrite-primary\",function(n){return t.mutationQueue.setLastStreamToken(n,e)})},e.prototype.getLastRemoteSnapshotVersion=function(){var e=this;return this.persistence.runTransaction(\"Get last remote snapshot version\",\"readonly\",function(t){return e.queryCache.getLastRemoteSnapshotVersion(t)})},e.prototype.applyRemoteEvent=function(t){var n=this,r=this.remoteDocuments.newChangeBuffer(),i=t.snapshotVersion;return this.persistence.runTransaction(\"Apply remote event\",\"readwrite-primary\",function(o){var s=[];I(t.targetChanges,function(t,r){var a=n.queryDataByTarget[t];if(a){s.push(n.queryCache.removeMatchingKeys(o,r.removedDocuments,t).next(function(){return n.queryCache.addMatchingKeys(o,r.addedDocuments,t)}));var u=r.resumeToken;if(u.length>0){var c=a.withResumeToken(u,i);n.queryDataByTarget[t]=c,e.shouldPersistQueryData(a,c,r)&&s.push(n.queryCache.updateQueryData(o,c))}}});var a=De(),u=Fe();if(t.documentUpdates.forEach(function(e,t){u=u.add(e)}),s.push(r.getEntries(o,u).next(function(e){t.documentUpdates.forEach(function(i,u){var c=e.get(i);u instanceof $t&&u.version.isEqual(Ce.MIN)?(r.removeEntry(i),a=a.insert(i,u)):null==c||u.version.compareTo(c.version)>0||0===u.version.compareTo(c.version)&&c.hasPendingWrites?(Ce.MIN.isEqual(t.snapshotVersion)&&m(\"LocalStore\",\"Cannot add a document when the remote version is zero\"),r.addEntry(u),a=a.insert(i,u)):p(\"LocalStore\",\"Ignoring outdated watch update for \",i,\". Current version:\",c.version,\" Watch version:\",u.version),t.resolvedLimboDocuments.has(i)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(o,i))})})),!i.isEqual(Ce.MIN)){var c=n.queryCache.getLastRemoteSnapshotVersion(o).next(function(e){return v(i.compareTo(e)>=0,\"Watch stream reverted to previous snapshot?? \"+i+\" < \"+e),n.queryCache.setTargetsMetadata(o,o.currentSequenceNumber,i)});s.push(c)}return $e.waitFor(s).next(function(){return r.apply(o)}).next(function(){return n.localDocuments.getLocalViewOfDocuments(o,a)})})},e.shouldPersistQueryData=function(e,t,n){return v(t.resumeToken.length>0,\"Attempted to persist query data with no resume token\"),0===e.resumeToken.length||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0},e.prototype.notifyLocalViewChanges=function(e){var t=this;return this.persistence.runTransaction(\"notifyLocalViewChanges\",\"readwrite\",function(n){return $e.forEach(e,function(e){return t.localViewReferences.addReferences(e.addedKeys,e.targetId),t.localViewReferences.removeReferences(e.removedKeys,e.targetId),$e.forEach(e.removedKeys,function(e){return t.persistence.referenceDelegate.removeReference(n,e)})})})},e.prototype.nextMutationBatch=function(e){var t=this;return this.persistence.runTransaction(\"Get next mutation batch\",\"readonly\",function(n){return void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)})},e.prototype.readDocument=function(e){var t=this;return this.persistence.runTransaction(\"read document\",\"readonly\",function(n){return t.localDocuments.getDocument(n,e)})},e.prototype.allocateQuery=function(e){var t=this;return this.persistence.runTransaction(\"Allocate query\",\"readwrite\",function(n){var r;return t.queryCache.getQueryData(n,e).next(function(i){return i?(r=i,$e.resolve()):t.queryCache.allocateTargetId(n).next(function(i){return r=new Tn(e,i,Sn.Listen,n.currentSequenceNumber),t.queryCache.addQueryData(n,r)})}).next(function(){return v(!t.queryDataByTarget[r.targetId],\"Tried to allocate an already allocated query: \"+e),t.queryDataByTarget[r.targetId]=r,r})})},e.prototype.releaseQuery=function(e,t){var n=this;return this.persistence.runTransaction(\"Release query\",t?\"readwrite\":\"readwrite-primary\",function(r){return n.queryCache.getQueryData(r,e).next(function(i){v(null!=i,\"Tried to release nonexistent query: \"+e);var o=i.targetId,s=n.queryDataByTarget[o],a=n.localViewReferences.removeReferencesForId(o);return delete n.queryDataByTarget[o],t?$e.resolve():$e.forEach(a,function(e){return n.persistence.referenceDelegate.removeReference(r,e)}).next(function(){return n.persistence.referenceDelegate.removeTarget(r,s)})})})},e.prototype.executeQuery=function(e){var t=this;return this.persistence.runTransaction(\"Execute query\",\"readonly\",function(n){return t.localDocuments.getDocumentsMatchingQuery(n,e)})},e.prototype.remoteDocumentKeys=function(e){var t=this;return this.persistence.runTransaction(\"Remote document keys\",\"readonly\",function(n){return t.queryCache.getMatchingKeysForTargetId(n,e)})},e.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},e.prototype.removeCachedMutationBatchMetadata=function(e){this.mutationQueue.removeCachedMutationKeys(e)},e.prototype.setNetworkEnabled=function(e){this.persistence.setNetworkEnabled(e)},e.prototype.applyWriteToRemoteDocuments=function(e,t,n){var r=this,i=t.batch,o=i.keys(),s=$e.resolve();return o.forEach(function(r){s=s.next(function(){return n.getEntry(e,r)}).next(function(e){var o=e,s=t.docVersions.get(r);v(null!==s,\"ackVersions should contain every doc in the write.\"),(!o||o.version.compareTo(s)<0)&&((o=i.applyToRemoteDocument(r,o,t))?n.addEntry(o):v(!e,\"Mutation batch \"+i+\" applied to document \"+e+\" resulted in null\"))})}),s.next(function(){return r.mutationQueue.removeMutationBatch(e,i)})},e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction(\"Collect garbage\",\"readwrite-primary\",function(n){return e.collect(n,t.queryDataByTarget)})},e.prototype.getQueryForTarget=function(e){var t=this;return this.queryDataByTarget[e]?Promise.resolve(this.queryDataByTarget[e].query):this.persistence.runTransaction(\"Get query data\",\"readonly\",function(n){return t.queryCache.getQueryDataForTarget(n,e).next(function(e){return e?e.query:null})})},e.prototype.getNewDocumentChanges=function(){var e=this;return this.persistence.runTransaction(\"Get new document changes\",\"readonly\",function(t){return e.remoteDocuments.getNewDocumentChanges(t)})},e.RESUME_TOKEN_MAX_AGE_MICROS=3e8,e}(),Qn=function(){function e(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=_(),this.batchesByDocumentKey=new Ne(Wn.compareByKey)}return e.prototype.checkEmpty=function(e){return $e.resolve(0===this.mutationQueue.length)},e.prototype.acknowledgeBatch=function(e,t,n){var r=t.batchId,i=this.indexOfExistingBatchId(r,\"acknowledged\");v(0===i,\"Can only acknowledge the first batch in the mutation queue\");var o=this.mutationQueue[i];return v(r===o.batchId,\"Queue ordering failure: expected batch \"+r+\", got batch \"+o.batchId),this.lastStreamToken=n,$e.resolve()},e.prototype.getLastStreamToken=function(e){return $e.resolve(this.lastStreamToken)},e.prototype.setLastStreamToken=function(e,t){return this.lastStreamToken=t,$e.resolve()},e.prototype.addMutationBatch=function(e,t,n,r){v(0!==r.length,\"Mutation batches should not be empty\");var i=this.nextBatchId;this.nextBatchId++,this.mutationQueue.length>0&&v(this.mutationQueue[this.mutationQueue.length-1].batchId<i,\"Mutation batchIDs must be monotonically increasing order\");var o=new qe(i,t,n,r);this.mutationQueue.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new Wn(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}return $e.resolve(o)},e.prototype.lookupMutationBatch=function(e,t){return $e.resolve(this.findMutationBatch(t))},e.prototype.lookupMutationKeys=function(e,t){var n=this.findMutationBatch(t);return v(null!=n,\"Failed to find local mutation batch.\"),$e.resolve(n.keys())},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this.indexOfBatchId(t+1),r=n<0?0:n;return $e.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return $e.resolve(0===this.mutationQueue.length?-1:this.nextBatchId-1)},e.prototype.getAllMutationBatches=function(e){return $e.resolve(this.mutationQueue.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new Wn(t,0),i=new Wn(t,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],function(e){v(t.isEqual(e.key),\"Should only iterate over a single key's batches\");var r=n.findMutationBatch(e.targetOrBatchId);v(null!==r,\"Batches in the index must exist in the main table\"),o.push(r)}),$e.resolve(o)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new Ne(G);return t.forEach(function(e){var t=new Wn(e,0),i=new Wn(e,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([t,i],function(t){v(e.isEqual(t.key),\"For each key, should only iterate over a single key's batches\"),r=r.add(t.targetOrBatchId)})}),$e.resolve(this.findMutationBatches(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){v(!t.isCollectionGroupQuery(),\"CollectionGroup queries should be handled in LocalDocumentsView\");var n=t.path,r=n.length+1,i=n;ce.isDocumentKey(i)||(i=i.child(\"\"));var o=new Wn(new ce(i),0),s=new Ne(G);return this.batchesByDocumentKey.forEachWhile(function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.targetOrBatchId)),!0)},o),$e.resolve(this.findMutationBatches(s))},e.prototype.findMutationBatches=function(e){var t=this,n=[];return e.forEach(function(e){var r=t.findMutationBatch(e);null!==r&&n.push(r)}),n},e.prototype.removeMutationBatch=function(e,t){var n=this;v(0===this.indexOfExistingBatchId(t.batchId,\"removed\"),\"Can only remove the first entry of the mutation queue\"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return $e.forEach(t.mutations,function(i){var o=new Wn(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(e,i.key)}).next(function(){n.batchesByDocumentKey=r})},e.prototype.removeCachedMutationKeys=function(e){},e.prototype.containsKey=function(e,t){var n=new Wn(t,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return $e.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return 0===this.mutationQueue.length&&v(this.batchesByDocumentKey.isEmpty(),\"Document leak -- detected dangling mutation references when queue is empty.\"),$e.resolve()},e.prototype.indexOfExistingBatchId=function(e,t){var n=this.indexOfBatchId(e);return v(n>=0&&n<this.mutationQueue.length,\"Batches must exist to be \"+t),n},e.prototype.indexOfBatchId=function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId},e.prototype.findMutationBatch=function(e){var t=this.indexOfBatchId(e);if(t<0||t>=this.mutationQueue.length)return null;var n=this.mutationQueue[t];return v(n.batchId===e,\"If found batch must match\"),n},e}(),Gn=function(){function e(e){this.persistence=e,this.queries=new Wt(function(e){return e.canonicalId()}),this.lastRemoteSnapshotVersion=Ce.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new zn,this.targetCount=0,this.targetIdGenerator=Ze.forQueryCache()}return e.prototype.getTargetCount=function(e){return $e.resolve(this.targetCount)},e.prototype.forEachTarget=function(e,t){return this.queries.forEach(function(e,n){return t(n)}),$e.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return $e.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return $e.resolve(this.highestSequenceNumber)},e.prototype.allocateTargetId=function(e){var t=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=t,$e.resolve(t)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),$e.resolve()},e.prototype.saveQueryData=function(e){this.queries.set(e.query,e);var t=e.targetId;t>this.highestTargetId&&(this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)},e.prototype.addQueryData=function(e,t){return v(!this.queries.has(t.query),\"Adding a query that already exists\"),this.saveQueryData(t),this.targetCount+=1,$e.resolve()},e.prototype.updateQueryData=function(e,t){return v(this.queries.has(t.query),\"Updating a non-existent query\"),this.saveQueryData(t),$e.resolve()},e.prototype.removeQueryData=function(e,t){return v(this.targetCount>0,\"Removing a target from an empty cache\"),v(this.queries.has(t.query),\"Removing a non-existent target from the cache\"),this.queries.delete(t.query),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,$e.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.queries.forEach(function(s,a){a.sequenceNumber<=t&&!n[a.targetId]&&(r.queries.delete(s),o.push(r.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),$e.waitFor(o).next(function(){return i})},e.prototype.getQueryCount=function(e){return $e.resolve(this.targetCount)},e.prototype.getQueryData=function(e,t){var n=this.queries.get(t)||null;return $e.resolve(n)},e.prototype.getQueryDataForTarget=function(e,t){return y(\"Not yet implemented.\")},e.prototype.addMatchingKeys=function(e,t,n){this.references.addReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.addReference(e,t))}),$e.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){this.references.removeReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.removeReference(e,t))}),$e.waitFor(i)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this.references.removeReferencesForId(t),$e.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this.references.referencesForId(t);return $e.resolve(n)},e.prototype.containsKey=function(e,t){return $e.resolve(this.references.containsKey(t))},e}(),Kn=function(){function e(e,t){this.indexManager=e,this.sizer=t,this.docs=new Se(ce.comparator),this.newDocumentChanges=Fe(),this.size=0}return e.prototype.addEntry=function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.sizer(t);return this.docs=this.docs.insert(n,{maybeDocument:t,size:o}),this.newDocumentChanges=this.newDocumentChanges.add(n),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())},e.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return $e.resolve(n?n.maybeDocument:null)},e.prototype.getEntries=function(e,t){var n=this,r=ke();return t.forEach(function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null)}),$e.resolve(r)},e.prototype.getDocumentsMatchingQuery=function(e,t){v(!t.isCollectionGroupQuery(),\"CollectionGroup queries should be handled in LocalDocumentsView\");for(var n=Pe(),r=new ce(t.path.child(\"\")),i=this.docs.getIteratorFrom(r);i.hasNext();){var o=i.getNext(),s=o.value.maybeDocument;if(!t.path.isPrefixOf(o.key.path))break;s instanceof Bt&&t.matches(s)&&(n=n.insert(s.key,s))}return $e.resolve(n)},e.prototype.forEachDocumentKey=function(e,t){return $e.forEach(this.docs,function(e){return t(e)})},e.prototype.getNewDocumentChanges=function(e){var t=this,n=De();return this.newDocumentChanges.forEach(function(e){var r=t.docs.get(e),i=r?r.maybeDocument:new $t(e,Ce.forDeletedDoc());n=n.insert(e,i)}),this.newDocumentChanges=Fe(),$e.resolve(n)},e.prototype.newChangeBuffer=function(){return new e.RemoteDocumentChangeBuffer(this)},e.prototype.getSize=function(e){return $e.resolve(this.size)},e.RemoteDocumentChangeBuffer=function(e){function t(t){var n=e.call(this)||this;return n.documentCache=t,n}return s.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach(function(r,i){i?n.push(t.documentCache.addEntry(e,i)):t.documentCache.removeEntry(r)}),$e.waitFor(n)},t.prototype.getFromCache=function(e,t){return this.documentCache.getEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.documentCache.getEntries(e,t)},t}(Ht),e}(),Yn=function(){function e(e,t){var n=this;this.clientId=e,this.mutationQueues={},this.listenSequence=new ie(0),this._started=!1,this._started=!0,this.referenceDelegate=t(this),this.queryCache=new Gn(this),this.indexManager=new en,this.remoteDocumentCache=new Kn(this.indexManager,function(e){return n.referenceDelegate.documentSize(e)})}return e.createLruPersistence=function(t,n,r){return new e(t,function(e){return new Zn(e,new In(n),r)})},e.createEagerPersistence=function(t){return new e(t,function(e){return new Jn(e)})},e.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(e.prototype,\"started\",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getActiveClients=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){return[2,[this.clientId]]})})},e.prototype.setPrimaryStateListener=function(e){return e(!0)},e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(e){},e.prototype.getIndexManager=function(){return this.indexManager},e.prototype.getMutationQueue=function(e){var t=this.mutationQueues[e.toKey()];return t||(t=new Qn(this.indexManager,this.referenceDelegate),this.mutationQueues[e.toKey()]=t),t},e.prototype.getQueryCache=function(){return this.queryCache},e.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},e.prototype.runTransaction=function(e,t,n){var r=this;p(\"MemoryPersistence\",\"Starting transaction:\",e);var i=new Xn(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next(function(e){return r.referenceDelegate.onTransactionCommitted(i).next(function(){return e})}).toPromise()},e.prototype.mutationQueuesContainKey=function(e,t){return $e.or((n=this.mutationQueues,r=[],O(n,function(e,t){return r.push(t)}),r).map(function(n){return function(){return n.containsKey(e,t)}}));var n,r},e}(),Xn=function(){return function(e){this.currentSequenceNumber=e}}(),Jn=function(){function e(e){this.persistence=e,this.inMemoryPins=null,this._orphanedDocuments=null}return Object.defineProperty(e.prototype,\"orphanedDocuments\",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw y(\"orphanedDocuments is only valid during a transaction.\")},enumerable:!0,configurable:!0}),e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return this.orphanedDocuments.delete(t),$e.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedDocuments.add(t),$e.resolve()},e.prototype.removeMutationReference=function(e,t){return this.orphanedDocuments.add(t),$e.resolve()},e.prototype.removeTarget=function(e,t){var n=this,r=this.persistence.getQueryCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(function(e){e.forEach(function(e){return n.orphanedDocuments.add(e)})}).next(function(){return r.removeQueryData(e,t)})},e.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},e.prototype.onTransactionCommitted=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $e.forEach(this.orphanedDocuments,function(r){return t.isReferenced(e,r).next(function(e){e||n.removeEntry(r)})}).next(function(){return t._orphanedDocuments=null,n.apply(e)})},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.isReferenced(e,t).next(function(e){e?n.orphanedDocuments.delete(t):n.orphanedDocuments.add(t)})},e.prototype.documentSize=function(e){return 0},e.prototype.isReferenced=function(e,t){var n=this;return $e.or([function(){return n.persistence.getQueryCache().containsKey(e,t)},function(){return n.persistence.mutationQueuesContainKey(e,t)},function(){return $e.resolve(n.inMemoryPins.containsKey(t))}])},e}(),Zn=function(){function e(e,t,n){this.persistence=e,this.serializer=t,this.inMemoryPins=null,this.orphanedSequenceNumbers=new Wt(function(e){return ve(e.path)}),this.garbageCollector=new kn(this,n)}return e.prototype.onTransactionStarted=function(){},e.prototype.onTransactionCommitted=function(e){return $e.resolve()},e.prototype.forEachTarget=function(e,t){return this.persistence.getQueryCache().forEachTarget(e,t)},e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocumentCount(e);return this.persistence.getQueryCache().getTargetCount(e).next(function(e){return t.next(function(t){return e+t})})},e.prototype.orphanedDocumentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,function(e){t++}).next(function(){return t})},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){var n=this;return $e.forEach(this.orphanedSequenceNumbers,function(r,i){return n.isPinned(e,r,i).next(function(e){return e?$e.resolve():t(i)})})},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.removeTargets=function(e,t,n){return this.persistence.getQueryCache().removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.forEachDocumentKey(e,function(i){return n.isPinned(e,i,t).next(function(e){e||(r++,o.removeEntry(i))})}).next(function(){return o.apply(e)}).next(function(){return r})},e.prototype.removeMutationReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),$e.resolve()},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getQueryCache().updateQueryData(e,n)},e.prototype.addReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),$e.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),$e.resolve()},e.prototype.updateLimboDocument=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),$e.resolve()},e.prototype.documentSize=function(e){var t,n=this.serializer.toDbRemoteDocument(e);if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw y(\"Unknown remote document type\");t=n.noDocument}return JSON.stringify(t).length},e.prototype.isPinned=function(e,t,n){var r=this;return $e.or([function(){return r.persistence.mutationQueuesContainKey(e,t)},function(){return $e.resolve(r.inMemoryPins.containsKey(t))},function(){return r.persistence.getQueryCache().containsKey(e,t)},function(){var e=r.orphanedSequenceNumbers.get(t);return $e.resolve(void 0!==e&&e>n)}])},e.prototype.getCacheSize=function(e){return this.persistence.getRemoteDocumentCache().getSize(e)},e}(),er=Number,tr=er.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),nr=er.MAX_SAFE_INTEGER||Math.pow(2,53)-1,rr=er.isInteger||function(e){return\"number\"==typeof e&&isFinite(e)&&Math.floor(e)===e};function ir(e){return null==e}function or(e){return rr(e)&&e<=nr&&e>=tr}var sr=1e3,ar=1.5,ur=6e4,cr=function(){function e(e,t,n,r,i){void 0===n&&(n=sr),void 0===r&&(r=ar),void 0===i&&(i=ur),this.queue=e,this.timerId=t,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return e.prototype.reset=function(){this.currentBaseMs=0},e.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},e.prototype.backoffAndRun=function(e){var t=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);this.currentBaseMs>0&&p(\"ExponentialBackoff\",\"Backing off for \"+i+\" ms (base delay: \"+this.currentBaseMs+\" ms, delay with jitter: \"+n+\" ms, last attempt: \"+r+\" ms ago)\"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,function(){return t.lastAttemptTime=Date.now(),e()}),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},e.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},e.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},e}(),lr=function(e){return e[e.Initial=0]=\"Initial\",e[e.Starting=1]=\"Starting\",e[e.Open=2]=\"Open\",e[e.Error=3]=\"Error\",e[e.Backoff=4]=\"Backoff\",e}({}),hr=function(){function e(e,t,n,r,i,o){this.queue=e,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=lr.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new cr(e,t)}return e.prototype.isStarted=function(){return this.state===lr.Starting||this.state===lr.Open||this.state===lr.Backoff},e.prototype.isOpen=function(){return this.state===lr.Open},e.prototype.start=function(){this.state!==lr.Error?(v(this.state===lr.Initial,\"Already started\"),this.auth()):this.performBackoff()},e.prototype.stop=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return this.isStarted()?[4,this.close(lr.Initial)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.inhibitBackoff=function(){v(!this.isStarted(),\"Can only inhibit backoff in a stopped state\"),this.state=lr.Initial,this.backoff.reset()},e.prototype.markIdle=function(){var e=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,function(){return e.handleIdleCloseTimer()}))},e.prototype.sendRequest=function(e){this.cancelIdleCheck(),this.stream.send(e)},e.prototype.handleIdleCloseTimer=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){return this.isOpen()?[2,this.close(lr.Initial)]:[2]})})},e.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},e.prototype.close=function(e,t){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(n){switch(n.label){case 0:return v(this.isStarted(),\"Only started streams should be closed.\"),v(e===lr.Error||ir(t),\"Can't provide an error when not in an error state.\"),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,e!==lr.Error?this.backoff.reset():t&&t.code===w.RESOURCE_EXHAUSTED?(m(t.toString()),m(\"Using maximum backoff delay to prevent overloading the backend.\"),this.backoff.resetToMax()):t&&t.code===w.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.onClose(t)];case 1:return n.sent(),[2]}})})},e.prototype.tearDown=function(){},e.prototype.auth=function(){var e=this;v(this.state===lr.Initial,\"Must be in initial state to auth\"),this.state=lr.Starting;var t=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then(function(t){e.closeCount===n&&e.startStream(t)},function(n){t(function(){var t=new E(w.UNKNOWN,\"Fetching auth token failed: \"+n.message);return e.handleStreamClose(t)})})},e.prototype.startStream=function(e){var t=this;v(this.state===lr.Starting,\"Trying to start stream in a non-starting state\");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e),this.stream.onOpen(function(){n(function(){return v(t.state===lr.Starting,\"Expected stream to be in state Starting, but was \"+t.state),t.state=lr.Open,t.listener.onOpen()})}),this.stream.onClose(function(e){n(function(){return t.handleStreamClose(e)})}),this.stream.onMessage(function(e){n(function(){return t.onMessage(e)})})},e.prototype.performBackoff=function(){var e=this;v(this.state===lr.Error,\"Should only perform backoff when in Error state\"),this.state=lr.Backoff,this.backoff.backoffAndRun(function(){return s.__awaiter(e,void 0,void 0,function(){return s.__generator(this,function(e){return v(this.state===lr.Backoff,\"Backoff elapsed but state is now: \"+this.state),this.state=lr.Initial,this.start(),v(this.isStarted(),\"PersistentStream should have started\"),[2]})})})},e.prototype.handleStreamClose=function(e){return v(this.isStarted(),\"Can't handle server close on non-started stream\"),p(\"PersistentStream\",\"close with error: \"+e),this.stream=null,this.close(lr.Error,e)},e.prototype.getCloseGuardedDispatcher=function(e){var t=this;return function(n){t.queue.enqueueAndForget(function(){return t.closeCount===e?n():(p(\"PersistentStream\",\"stream callback skipped by getCloseGuardedDispatcher.\"),Promise.resolve())})}},e}(),dr=function(e){function t(t,n,r,i,o){var s=e.call(this,t,he.ListenStreamConnectionBackoff,he.ListenStreamIdle,n,r,o)||this;return s.serializer=i,s}return s.__extends(t,e),t.prototype.startRpc=function(e){return this.connection.openStream(\"Listen\",e)},t.prototype.onMessage=function(e){this.backoff.reset();var t=this.serializer.fromWatchChange(e),n=this.serializer.versionFromListenResponse(e);return this.listener.onWatchChange(t,n)},t.prototype.watch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.addTarget=this.serializer.toTarget(e);var n=this.serializer.toListenRequestLabels(e);n&&(t.labels=n),this.sendRequest(t)},t.prototype.unwatch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.removeTarget=e,this.sendRequest(t)},t}(hr),fr=function(e){function t(t,n,r,i,o){var s=e.call(this,t,he.WriteStreamConnectionBackoff,he.WriteStreamIdle,n,r,o)||this;return s.serializer=i,s.handshakeComplete_=!1,s.lastStreamToken=_(),s}return s.__extends(t,e),Object.defineProperty(t.prototype,\"handshakeComplete\",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.handshakeComplete_=!1,e.prototype.start.call(this)},t.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},t.prototype.startRpc=function(e){return this.connection.openStream(\"Write\",e)},t.prototype.onMessage=function(e){if(v(!!e.streamToken,\"Got a write response without a stream token\"),this.lastStreamToken=e.streamToken,this.handshakeComplete_){this.backoff.reset();var t=this.serializer.fromWriteResults(e.writeResults,e.commitTime),n=this.serializer.fromVersion(e.commitTime);return this.listener.onMutationResult(n,t)}return v(!e.writeResults||0===e.writeResults.length,\"Got mutation results for handshake\"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},t.prototype.writeHandshake=function(){v(this.isOpen(),\"Writing handshake requires an opened stream\"),v(!this.handshakeComplete_,\"Handshake already completed\");var e={};e.database=this.serializer.encodedDatabaseId,this.sendRequest(e)},t.prototype.writeMutations=function(e){var t=this;v(this.isOpen(),\"Writing mutations requires an opened stream\"),v(this.handshakeComplete_,\"Handshake must be complete before writing mutations\"),v(this.lastStreamToken.length>0,\"Trying to write mutation without a token\");var n={streamToken:this.lastStreamToken,writes:e.map(function(e){return t.serializer.toMutation(e)})};this.sendRequest(n)},t}(hr),pr=function(){function e(e,t,n,r){this.queue=e,this.connection=t,this.credentials=n,this.serializer=r}return e.prototype.newPersistentWriteStream=function(e){return new fr(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.newPersistentWatchStream=function(e){return new dr(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.commit=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,writes:e.map(function(e){return t.serializer.toMutation(e)})};return this.invokeRPC(\"Commit\",n).then(function(e){return t.serializer.fromWriteResults(e.writeResults,e.commitTime)})},e.prototype.lookup=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,documents:e.map(function(e){return t.serializer.toName(e)})};return this.invokeStreamingRPC(\"BatchGetDocuments\",n).then(function(n){var r=De();n.forEach(function(e){var n=t.serializer.fromMaybeDocument(e);r=r.insert(n.key,n)});var i=[];return e.forEach(function(e){var t=r.get(e);v(!!t,\"Missing entity in write response for \"+e),i.push(t)}),i})},e.prototype.invokeRPC=function(e,t){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeRPC(e,t,r)}).catch(function(e){throw e.code===w.UNAUTHENTICATED&&n.credentials.invalidateToken(),e})},e.prototype.invokeStreamingRPC=function(e,t){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeStreamingRPC(e,t,r)}).catch(function(e){throw e.code===w.UNAUTHENTICATED&&n.credentials.invalidateToken(),e})},e}(),mr=function(){function e(e){this.datastore=e,this.readVersions=Me(),this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(e){return s.__awaiter(this,void 0,void 0,function(){var t,n=this;return s.__generator(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new E(w.INVALID_ARGUMENT,\"Firestore transactions require all reads to be executed before all writes.\");return[4,this.datastore.lookup(e)];case 1:return(t=r.sent()).forEach(function(e){e instanceof $t||e instanceof Bt?n.recordVersion(e):y(\"Document in a transaction was a \"+e.constructor.name)}),[2,t]}})})},e.prototype.set=function(e,t){this.write(t.toMutations(e,this.precondition(e))),this.writtenDocs.add(e)},e.prototype.update=function(e,t){try{this.write(t.toMutations(e,this.preconditionForUpdate(e)))}catch(n){this.lastWriteError=n}this.writtenDocs.add(e)},e.prototype.delete=function(e){this.write([new Et(e,this.precondition(e))]),this.writtenDocs.add(e)},e.prototype.commit=function(){return s.__awaiter(this,void 0,void 0,function(){var e;return s.__generator(this,function(t){switch(t.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;if(e=this.readVersions,this.mutations.forEach(function(t){e=e.remove(t.key)}),!e.isEmpty())throw new E(w.INVALID_ARGUMENT,\"Every document read in a transaction must also be written.\");return[4,this.datastore.commit(this.mutations)];case 1:return t.sent(),this.committed=!0,[2]}})})},e.prototype.recordVersion=function(e){var t;if(e instanceof Bt)t=e.version;else{if(!(e instanceof $t))throw y(\"Document in a transaction was a \"+e.constructor.name);t=Ce.forDeletedDoc()}var n=this.readVersions.get(e.key);if(null!==n){if(!t.isEqual(n))throw new E(w.ABORTED,\"Document version changed between two reads.\")}else this.readVersions=this.readVersions.insert(e.key,t)},e.prototype.precondition=function(e){var t=this.readVersions.get(e);return!this.writtenDocs.has(e)&&t?yt.updateTime(t):yt.NONE},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e);if(!this.writtenDocs.has(e)&&t){if(t.isEqual(Ce.forDeletedDoc()))throw new E(w.INVALID_ARGUMENT,\"Can't update a document that doesn't exist.\");return yt.updateTime(t)}return yt.exists(!0)},e.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(e)},e.prototype.ensureCommitNotCalled=function(){v(!this.committed,\"A transaction object cannot be used after its update callback has been invoked.\")},e}(),gr=function(e){return e[e.Unknown=0]=\"Unknown\",e[e.Online=1]=\"Online\",e[e.Offline=2]=\"Offline\",e}({}),yr=function(e){return e[e.RemoteStore=0]=\"RemoteStore\",e[e.SharedClientState=1]=\"SharedClientState\",e}({}),vr=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=gr.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return e.prototype.handleWatchStreamStart=function(){var e=this;0===this.watchStreamFailures&&(this.setAndBroadcast(gr.Unknown),v(null===this.onlineStateTimer,\"onlineStateTimer shouldn't be started yet\"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(he.OnlineStateTimeout,1e4,function(){return e.onlineStateTimer=null,v(e.state===gr.Unknown,\"Timer should be canceled if we transitioned to a different state.\"),e.logClientOfflineWarningIfNecessary(\"Backend didn't respond within 10 seconds.\"),e.setAndBroadcast(gr.Offline),Promise.resolve()}))},e.prototype.handleWatchStreamFailure=function(e){this.state===gr.Online?(this.setAndBroadcast(gr.Unknown),v(0===this.watchStreamFailures,\"watchStreamFailures must be 0\"),v(null===this.onlineStateTimer,\"onlineStateTimer must be null\")):(this.watchStreamFailures++,this.watchStreamFailures>=1&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary(\"Connection failed 1 times. Most recent error: \"+e.toString()),this.setAndBroadcast(gr.Offline)))},e.prototype.set=function(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,e===gr.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)},e.prototype.setAndBroadcast=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.logClientOfflineWarningIfNecessary=function(e){var t=\"Could not reach Cloud Firestore backend. \"+e+\"\\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.\";this.shouldWarnClientIsOffline?(m(t),this.shouldWarnClientIsOffline=!1):p(\"OnlineStateTracker\",t)},e.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},e}(),br=function(e){return e[e.OK=0]=\"OK\",e[e.CANCELLED=1]=\"CANCELLED\",e[e.UNKNOWN=2]=\"UNKNOWN\",e[e.INVALID_ARGUMENT=3]=\"INVALID_ARGUMENT\",e[e.DEADLINE_EXCEEDED=4]=\"DEADLINE_EXCEEDED\",e[e.NOT_FOUND=5]=\"NOT_FOUND\",e[e.ALREADY_EXISTS=6]=\"ALREADY_EXISTS\",e[e.PERMISSION_DENIED=7]=\"PERMISSION_DENIED\",e[e.UNAUTHENTICATED=16]=\"UNAUTHENTICATED\",e[e.RESOURCE_EXHAUSTED=8]=\"RESOURCE_EXHAUSTED\",e[e.FAILED_PRECONDITION=9]=\"FAILED_PRECONDITION\",e[e.ABORTED=10]=\"ABORTED\",e[e.OUT_OF_RANGE=11]=\"OUT_OF_RANGE\",e[e.UNIMPLEMENTED=12]=\"UNIMPLEMENTED\",e[e.INTERNAL=13]=\"INTERNAL\",e[e.UNAVAILABLE=14]=\"UNAVAILABLE\",e[e.DATA_LOSS=15]=\"DATA_LOSS\",e}({});function _r(e){switch(e){case w.OK:return y(\"Treated status OK as error\");case w.CANCELLED:case w.UNKNOWN:case w.DEADLINE_EXCEEDED:case w.RESOURCE_EXHAUSTED:case w.INTERNAL:case w.UNAVAILABLE:case w.UNAUTHENTICATED:return!1;case w.INVALID_ARGUMENT:case w.NOT_FOUND:case w.ALREADY_EXISTS:case w.PERMISSION_DENIED:case w.FAILED_PRECONDITION:case w.ABORTED:case w.OUT_OF_RANGE:case w.UNIMPLEMENTED:case w.DATA_LOSS:return!0;default:return y(\"Unknown status code: \"+e)}}function wr(e){if(void 0===e)return m(\"GRPC error has no .code\"),w.UNKNOWN;switch(e){case br.OK:return w.OK;case br.CANCELLED:return w.CANCELLED;case br.UNKNOWN:return w.UNKNOWN;case br.DEADLINE_EXCEEDED:return w.DEADLINE_EXCEEDED;case br.RESOURCE_EXHAUSTED:return w.RESOURCE_EXHAUSTED;case br.INTERNAL:return w.INTERNAL;case br.UNAVAILABLE:return w.UNAVAILABLE;case br.UNAUTHENTICATED:return w.UNAUTHENTICATED;case br.INVALID_ARGUMENT:return w.INVALID_ARGUMENT;case br.NOT_FOUND:return w.NOT_FOUND;case br.ALREADY_EXISTS:return w.ALREADY_EXISTS;case br.PERMISSION_DENIED:return w.PERMISSION_DENIED;case br.FAILED_PRECONDITION:return w.FAILED_PRECONDITION;case br.ABORTED:return w.ABORTED;case br.OUT_OF_RANGE:return w.OUT_OF_RANGE;case br.UNIMPLEMENTED:return w.UNIMPLEMENTED;case br.DATA_LOSS:return w.DATA_LOSS;default:return y(\"Unknown status code: \"+e)}}function Er(e){if(void 0===e)return br.OK;switch(e){case w.OK:return br.OK;case w.CANCELLED:return br.CANCELLED;case w.UNKNOWN:return br.UNKNOWN;case w.DEADLINE_EXCEEDED:return br.DEADLINE_EXCEEDED;case w.RESOURCE_EXHAUSTED:return br.RESOURCE_EXHAUSTED;case w.INTERNAL:return br.INTERNAL;case w.UNAVAILABLE:return br.UNAVAILABLE;case w.UNAUTHENTICATED:return br.UNAUTHENTICATED;case w.INVALID_ARGUMENT:return br.INVALID_ARGUMENT;case w.NOT_FOUND:return br.NOT_FOUND;case w.ALREADY_EXISTS:return br.ALREADY_EXISTS;case w.PERMISSION_DENIED:return br.PERMISSION_DENIED;case w.FAILED_PRECONDITION:return br.FAILED_PRECONDITION;case w.ABORTED:return br.ABORTED;case w.OUT_OF_RANGE:return br.OUT_OF_RANGE;case w.UNIMPLEMENTED:return br.UNIMPLEMENTED;case w.DATA_LOSS:return br.DATA_LOSS;default:return y(\"Unknown status code: \"+e)}}var Cr=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||ce.comparator(t.key,n.key)}:function(e,t){return ce.comparator(e.key,t.key)},this.keyedMap=Pe(),this.sortedSet=new Se(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,\"size\",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal(function(t,n){return e(t),!1})},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?\"DocumentSet ()\":\"DocumentSet (\\n  \"+e.join(\"  \\n\")+\"\\n)\"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}(),Sr=function(e){return e[e.Added=0]=\"Added\",e[e.Removed=1]=\"Removed\",e[e.Modified=2]=\"Modified\",e[e.Metadata=3]=\"Metadata\",e}({}),Tr=function(e){return e[e.Local=0]=\"Local\",e[e.Synced=1]=\"Synced\",e}({}),Ir=function(){function e(){this.changeMap=new Se(ce.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.changeMap.get(t);n?e.type!==Sr.Added&&n.type===Sr.Metadata?this.changeMap=this.changeMap.insert(t,e):e.type===Sr.Metadata&&n.type!==Sr.Removed?this.changeMap=this.changeMap.insert(t,{type:n.type,doc:e.doc}):e.type===Sr.Modified&&n.type===Sr.Modified?this.changeMap=this.changeMap.insert(t,{type:Sr.Modified,doc:e.doc}):e.type===Sr.Modified&&n.type===Sr.Added?this.changeMap=this.changeMap.insert(t,{type:Sr.Added,doc:e.doc}):e.type===Sr.Removed&&n.type===Sr.Added?this.changeMap=this.changeMap.remove(t):e.type===Sr.Removed&&n.type===Sr.Modified?this.changeMap=this.changeMap.insert(t,{type:Sr.Removed,doc:n.doc}):e.type===Sr.Added&&n.type===Sr.Removed?this.changeMap=this.changeMap.insert(t,{type:Sr.Modified,doc:e.doc}):y(\"unsupported combination of changes: \"+JSON.stringify(e)+\" after \"+JSON.stringify(n)):this.changeMap=this.changeMap.insert(t,e)},e.prototype.getChanges=function(){var e=[];return this.changeMap.inorderTraversal(function(t,n){e.push(n)}),e},e}(),Or=function(){function e(e,t,n,r,i,o,s,a){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return e.fromInitialDocuments=function(t,n,r,i){var o=[];return n.forEach(function(e){o.push({type:Sr.Added,doc:e})}),new e(t,n,Cr.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,\"hasPendingWrites\",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&this.query.isEqual(e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),Nr=function(){function e(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r,i=((r={})[t]=Ar.createSynthesizedTargetChangeForCurrentChange(t,n),r);return new e(Ce.MIN,i,Ve(),De(),Fe())},e}(),Ar=function(){function e(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(_(),n,Fe(),Fe(),Fe())},e}(),Rr=function(){return function(e,t,n,r){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=n,this.newDoc=r}}(),Dr=function(){return function(e,t){this.targetId=e,this.existenceFilter=t}}(),kr=function(e){return e[e.NoChange=0]=\"NoChange\",e[e.Added=1]=\"Added\",e[e.Removed=2]=\"Removed\",e[e.Current=3]=\"Current\",e[e.Reset=4]=\"Reset\",e}({}),xr=function(){return function(e,t,n,r){void 0===n&&(n=_()),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}(),Pr=function(){function e(){this.pendingResponses=0,this.documentChanges=jr(),this._resumeToken=_(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(e.prototype,\"current\",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"resumeToken\",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"isPending\",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"hasPendingChanges\",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),e.prototype.updateResumeToken=function(e){e.length>0&&(this._hasPendingChanges=!0,this._resumeToken=e)},e.prototype.toTargetChange=function(){var e=Fe(),t=Fe(),n=Fe();return this.documentChanges.forEach(function(r,i){switch(i){case Sr.Added:e=e.add(r);break;case Sr.Modified:t=t.add(r);break;case Sr.Removed:n=n.add(r);break;default:y(\"Encountered invalid change type: \"+i)}}),new Ar(this._resumeToken,this._current,e,t,n)},e.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=jr()},e.prototype.addDocumentChange=function(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)},e.prototype.removeDocumentChange=function(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)},e.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},e.prototype.recordTargetResponse=function(){this.pendingResponses-=1},e.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},e}(),Lr=function(){function e(e){this.metadataProvider=e,this.targetStates={},this.pendingDocumentUpdates=De(),this.pendingDocumentTargetMapping=Mr(),this.pendingTargetResets=new Ne(G)}return e.prototype.handleDocumentChange=function(e){for(var t=0,n=e.updatedTargetIds;t<n.length;t++){var r=n[t];e.newDoc instanceof Bt?this.addDocumentToTarget(r,e.newDoc):e.newDoc instanceof $t&&this.removeDocumentFromTarget(r,e.key,e.newDoc)}for(var i=0,o=e.removedTargetIds;i<o.length;i++)this.removeDocumentFromTarget(r=o[i],e.key,e.newDoc)},e.prototype.handleTargetChange=function(e){var t=this;this.forEachTarget(e,function(n){var r=t.ensureTargetState(n);switch(e.state){case kr.NoChange:t.isActiveTarget(n)&&r.updateResumeToken(e.resumeToken);break;case kr.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(e.resumeToken);break;case kr.Removed:r.recordTargetResponse(),r.isPending||t.removeTarget(n),v(!e.cause,\"WatchChangeAggregator does not handle errored targets\");break;case kr.Current:t.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(e.resumeToken));break;case kr.Reset:t.isActiveTarget(n)&&(t.resetTarget(n),r.updateResumeToken(e.resumeToken));break;default:y(\"Unknown target watch change state: \"+e.state)}})},e.prototype.forEachTarget=function(e,t){e.targetIds.length>0?e.targetIds.forEach(t):I(this.targetStates,t)},e.prototype.handleExistenceFilter=function(e){var t=e.targetId,n=e.existenceFilter.count,r=this.queryDataForActiveTarget(t);if(r){var i=r.query;if(i.isDocumentQuery())if(0===n){var o=new ce(i.path);this.removeDocumentFromTarget(t,o,new $t(o,Ce.forDeletedDoc()))}else v(1===n,\"Single document existence filter with count: \"+n);else this.getCurrentDocumentCountForTarget(t)!==n&&(this.resetTarget(t),this.pendingTargetResets=this.pendingTargetResets.add(t))}},e.prototype.createRemoteEvent=function(e){var t=this,n={};I(this.targetStates,function(r,i){var o=t.queryDataForActiveTarget(r);if(o){if(i.current&&o.query.isDocumentQuery()){var s=new ce(o.query.path);null!==t.pendingDocumentUpdates.get(s)||t.targetContainsDocument(r,s)||t.removeDocumentFromTarget(r,s,new $t(s,e))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}});var r=Fe();this.pendingDocumentTargetMapping.forEach(function(e,n){var i=!0;n.forEachWhile(function(e){var n=t.queryDataForActiveTarget(e);return!n||n.purpose===Sn.LimboResolution||(i=!1,!1)}),i&&(r=r.add(e))});var i=new Nr(e,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=De(),this.pendingDocumentTargetMapping=Mr(),this.pendingTargetResets=new Ne(G),i},e.prototype.addDocumentToTarget=function(e,t){if(this.isActiveTarget(e)){var n=this.targetContainsDocument(e,t.key)?Sr.Modified:Sr.Added;this.ensureTargetState(e).addDocumentChange(t.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}},e.prototype.removeDocumentFromTarget=function(e,t,n){if(this.isActiveTarget(e)){var r=this.ensureTargetState(e);this.targetContainsDocument(e,t)?r.addDocumentChange(t,Sr.Removed):r.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,n))}},e.prototype.removeTarget=function(e){delete this.targetStates[e]},e.prototype.getCurrentDocumentCountForTarget=function(e){var t=this.ensureTargetState(e).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},e.prototype.recordPendingTargetRequest=function(e){this.ensureTargetState(e).recordPendingTargetRequest()},e.prototype.ensureTargetState=function(e){return this.targetStates[e]||(this.targetStates[e]=new Pr),this.targetStates[e]},e.prototype.ensureDocumentTargetMapping=function(e){var t=this.pendingDocumentTargetMapping.get(e);return t||(t=new Ne(G),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t},e.prototype.isActiveTarget=function(e){var t=null!==this.queryDataForActiveTarget(e);return t||p(\"WatchChangeAggregator\",\"Detected inactive target\",e),t},e.prototype.queryDataForActiveTarget=function(e){var t=this.targetStates[e];return t&&t.isPending?null:this.metadataProvider.getQueryDataForTarget(e)},e.prototype.resetTarget=function(e){var t=this;v(!this.targetStates[e].isPending,\"Should only reset active targets\"),this.targetStates[e]=new Pr,this.metadataProvider.getRemoteKeysForTarget(e).forEach(function(n){t.removeDocumentFromTarget(e,n,null)})},e.prototype.targetContainsDocument=function(e,t){return this.metadataProvider.getRemoteKeysForTarget(e).has(t)},e}();function Mr(){return new Se(ce.comparator)}function jr(){return new Se(ce.comparator)}var Fr=\"RemoteStore\",Ur=function(){function e(e,t,n,r,i){var o=this;this.localStore=e,this.datastore=t,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=i,this.connectivityMonitor.addCallback(function(e){n.enqueueAndForget(function(){return s.__awaiter(o,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return this.canUseNetwork()?(p(Fr,\"Restarting streams for network reachability change.\"),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})}),this.onlineStateTracker=new vr(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return e.prototype.start=function(){return this.enableNetwork()},e.prototype.enableNetwork=function(){return s.__awaiter(this,void 0,void 0,function(){var e;return s.__generator(this,function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(e=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(gr.Unknown),[4,this.fillWritePipeline()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},e.prototype.disableNetwork=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(gr.Offline),[2]}})})},e.prototype.disableNetworkInternal=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return[4,this.writeStream.stop()];case 1:return e.sent(),[4,this.watchStream.stop()];case 2:return e.sent(),this.writePipeline.length>0&&(p(Fr,\"Stopping write stream with \"+this.writePipeline.length+\" pending writes\"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}})})},e.prototype.shutdown=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return p(Fr,\"RemoteStore shutting down.\"),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(gr.Unknown),[2]}})})},e.prototype.listen=function(e){v(!S(this.listenTargets,e.targetId),\"listen called with duplicate targetId!\"),this.listenTargets[e.targetId]=e,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(e)},e.prototype.unlisten=function(e){v(S(this.listenTargets,e),\"unlisten called without assigned target ID!\"),delete this.listenTargets[e],this.watchStream.isOpen()&&this.sendUnwatchRequest(e),N(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(gr.Unknown))},e.prototype.getQueryDataForTarget=function(e){return this.listenTargets[e]||null},e.prototype.getRemoteKeysForTarget=function(e){return this.syncEngine.getRemoteKeysForTarget(e)},e.prototype.sendWatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e.targetId),this.watchStream.watch(e)},e.prototype.sendUnwatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e),this.watchStream.unwatch(e)},e.prototype.startWatchStream=function(){v(this.shouldStartWatchStream(),\"startWatchStream() called when shouldStartWatchStream() is false.\"),this.watchChangeAggregator=new Lr(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},e.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!N(this.listenTargets)},e.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},e.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},e.prototype.onWatchStreamOpen=function(){return s.__awaiter(this,void 0,void 0,function(){var e=this;return s.__generator(this,function(t){return I(this.listenTargets,function(t,n){e.sendWatchRequest(n)}),[2]})})},e.prototype.onWatchStreamClose=function(e){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){return void 0===e&&v(!this.shouldStartWatchStream(),\"Watch stream was stopped gracefully while still needed.\"),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(e),this.startWatchStream()):this.onlineStateTracker.set(gr.Unknown),[2]})})},e.prototype.onWatchStreamChange=function(e,t){return s.__awaiter(this,void 0,void 0,function(){var n;return s.__generator(this,function(r){switch(r.label){case 0:return this.onlineStateTracker.set(gr.Online),e instanceof xr&&e.state===kr.Removed&&e.cause?[2,this.handleTargetError(e)]:(e instanceof Rr?this.watchChangeAggregator.handleDocumentChange(e):e instanceof Dr?this.watchChangeAggregator.handleExistenceFilter(e):(v(e instanceof xr,\"Expected watchChange to be an instance of WatchTargetChange\"),this.watchChangeAggregator.handleTargetChange(e)),t.isEqual(Ce.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),t.compareTo(n)>=0?[4,this.raiseWatchSnapshot(t)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.raiseWatchSnapshot=function(e){var t=this;v(!e.isEqual(Ce.MIN),\"Can't raise event for unknown SnapshotVersion\");var n=this.watchChangeAggregator.createRemoteEvent(e);return I(n.targetChanges,function(n,r){if(r.resumeToken.length>0){var i=t.listenTargets[n];i&&(t.listenTargets[n]=i.withResumeToken(r.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.listenTargets[e];if(n){t.listenTargets[e]=n.withResumeToken(_(),n.snapshotVersion),t.sendUnwatchRequest(e);var r=new Tn(n.query,e,Sn.ExistenceFilterMismatch,n.sequenceNumber);t.sendWatchRequest(r)}}),this.syncEngine.applyRemoteEvent(n)},e.prototype.handleTargetError=function(e){var t=this;v(!!e.cause,\"Handling target error without a cause\");var n=e.cause,r=Promise.resolve();return e.targetIds.forEach(function(e){r=r.then(function(){return s.__awaiter(t,void 0,void 0,function(){return s.__generator(this,function(t){return S(this.listenTargets,e)?(delete this.listenTargets[e],this.watchChangeAggregator.removeTarget(e),[2,this.syncEngine.rejectListen(e,n)]):[2]})})})}),r},e.prototype.fillWritePipeline=function(){return s.__awaiter(this,void 0,void 0,function(){var e;return s.__generator(this,function(t){switch(t.label){case 0:return this.canAddToWritePipeline()?[4,this.localStore.nextMutationBatch(this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:-1)]:[3,4];case 1:return null!==(e=t.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(e),[4,this.fillWritePipeline()];case 3:t.sent(),t.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}})})},e.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},e.prototype.outstandingWrites=function(){return this.writePipeline.length},e.prototype.addToWritePipeline=function(e){v(this.canAddToWritePipeline(),\"addToWritePipeline called when pipeline is full\"),this.writePipeline.push(e),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(e.mutations)},e.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},e.prototype.startWriteStream=function(){v(this.shouldStartWriteStream(),\"startWriteStream() called when shouldStartWriteStream() is false.\"),this.writeStream.start()},e.prototype.onWriteStreamOpen=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){return this.writeStream.writeHandshake(),[2]})})},e.prototype.onWriteHandshakeComplete=function(){var e=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var t=0,n=e.writePipeline;t<n.length;t++)e.writeStream.writeMutations(n[t].mutations)}).catch(Fn)},e.prototype.onMutationResult=function(e,t){var n=this;v(this.writePipeline.length>0,\"Got result for empty write pipeline\");var r=this.writePipeline.shift(),i=Be.from(r,e,t,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then(function(){return n.fillWritePipeline()})},e.prototype.onWriteStreamClose=function(e){return s.__awaiter(this,void 0,void 0,function(){var t=this;return s.__generator(this,function(n){return void 0===e&&v(!this.shouldStartWriteStream(),\"Write stream was stopped gracefully while still needed.\"),e&&this.writePipeline.length>0?[2,(this.writeStream.handshakeComplete?this.handleWriteError(e):this.handleHandshakeError(e)).then(function(){t.shouldStartWriteStream()&&t.startWriteStream()})]:[2]})})},e.prototype.handleHandshakeError=function(e){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){return _r(e.code)?(p(Fr,\"RemoteStore error before completed handshake; resetting stream token: \",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=_(),[2,this.localStore.setLastStreamToken(_()).catch(Fn)]):[2]})})},e.prototype.handleWriteError=function(e){return s.__awaiter(this,void 0,void 0,function(){var t,n=this;return s.__generator(this,function(r){return _r(i=e.code)&&i!==w.ABORTED?(t=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(t.batchId,e).then(function(){return n.fillWritePipeline()})]):[2];var i})})},e.prototype.createTransaction=function(){return new mr(this.datastore)},e.prototype.restartNetwork=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(gr.Unknown),[4,this.enableNetwork()];case 2:return e.sent(),[2]}})})},e.prototype.handleCredentialChange=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return this.canUseNetwork()?(p(Fr,\"RemoteStore restarting streams for new credential\"),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.applyPrimaryState=function(e){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return this.isPrimary=e,e&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,4];case 2:return e?[3,4]:[4,this.disableNetworkInternal()];case 3:t.sent(),this.onlineStateTracker.set(gr.Unknown),t.label=4;case 4:return[2]}})})},e}(),Vr=function(){function e(e,t){if(R(\"GeoPoint\",arguments,2),x(\"GeoPoint\",\"number\",1,e),x(\"GeoPoint\",\"number\",2,t),!isFinite(e)||e<-90||e>90)throw new E(w.INVALID_ARGUMENT,\"Latitude must be a number between -90 and 90, but was: \"+e);if(!isFinite(t)||t<-180||t>180)throw new E(w.INVALID_ARGUMENT,\"Longitude must be a number between -180 and 180, but was: \"+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,\"latitude\",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"longitude\",{get:function(){return this._long},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype._compareTo=function(e){return G(this._lat,e._lat)||G(this._long,e._long)},e}(),qr=function(){function e(e,t,n,r,i,o,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return e.atPath=function(t){return new e(t)},Object.defineProperty(e.prototype,\"orderBy\",{get:function(){if(null===this.memoizedOrderBy){var e=this.getInequalityFilterField(),t=this.getFirstOrderByField();if(null!==e&&null===t)this.memoizedOrderBy=e.isKeyField()?[Zr]:[new Jr(e),Zr];else{v(null===e||null!==t&&e.isEqual(t),\"First orderBy should match inequality field.\"),this.memoizedOrderBy=[];for(var n=!1,r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}n||this.memoizedOrderBy.push((this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:Yr.ASCENDING)===Yr.ASCENDING?Zr:ei)}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),e.prototype.addFilter=function(t){v(null==this.getInequalityFilterField()||!(t instanceof zr)||!t.isInequality()||t.field.isEqual(this.getInequalityFilterField()),\"Query must only have one inequality field.\"),v(!this.isDocumentQuery(),\"No filtering allowed for document query\");var n=this.filters.concat([t]);return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),n,this.limit,this.startAt,this.endAt)},e.prototype.addOrderBy=function(t){v(!this.startAt&&!this.endAt,\"Bounds must be set after orderBy\");var n=this.explicitOrderBy.concat([t]);return new e(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.startAt,this.endAt)},e.prototype.withLimit=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,this.startAt,this.endAt)},e.prototype.withStartAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,t,this.endAt)},e.prototype.withEndAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,t)},e.prototype.asCollectionQueryAtPath=function(t){return new e(t,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,this.endAt)},e.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var e=this.path.canonicalString();this.isCollectionGroupQuery()&&(e+=\"|cg:\"+this.collectionGroup),e+=\"|f:\";for(var t=0,n=this.filters;t<n.length;t++)e+=n[t].canonicalId(),e+=\",\";e+=\"|ob:\";for(var r=0,i=this.orderBy;r<i.length;r++)e+=i[r].canonicalId(),e+=\",\";ir(this.limit)||(e+=\"|l:\",e+=this.limit),this.startAt&&(e+=\"|lb:\",e+=this.startAt.canonicalId()),this.endAt&&(e+=\"|ub:\",e+=this.endAt.canonicalId()),this.memoizedCanonicalId=e}return this.memoizedCanonicalId},e.prototype.toString=function(){var e=\"Query(\"+this.path.canonicalString();return this.isCollectionGroupQuery()&&(e+=\" collectionGroup=\"+this.collectionGroup),this.filters.length>0&&(e+=\", filters: [\"+this.filters.join(\", \")+\"]\"),ir(this.limit)||(e+=\", limit: \"+this.limit),this.explicitOrderBy.length>0&&(e+=\", orderBy: [\"+this.explicitOrderBy.join(\", \")+\"]\"),this.startAt&&(e+=\", startAt: \"+this.startAt.canonicalId()),this.endAt&&(e+=\", endAt: \"+this.endAt.canonicalId()),e+\")\"},e.prototype.isEqual=function(e){if(this.limit!==e.limit)return!1;if(this.orderBy.length!==e.orderBy.length)return!1;for(var t=0;t<this.orderBy.length;t++)if(!this.orderBy[t].isEqual(e.orderBy[t]))return!1;if(this.filters.length!==e.filters.length)return!1;for(t=0;t<this.filters.length;t++)if(!this.filters[t].isEqual(e.filters[t]))return!1;return this.collectionGroup===e.collectionGroup&&!!this.path.isEqual(e.path)&&!(null!==this.startAt?!this.startAt.isEqual(e.startAt):null!==e.startAt)&&(null!==this.endAt?this.endAt.isEqual(e.endAt):null===e.endAt)},e.prototype.docComparator=function(e,t){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],s=o.compare(e,t);if(0!==s)return s;n=n||o.field.isKeyField()}return v(n,\"orderBy used that doesn't compare on key field\"),0},e.prototype.matches=function(e){return this.matchesPathAndCollectionGroup(e)&&this.matchesOrderBy(e)&&this.matchesFilters(e)&&this.matchesBounds(e)},e.prototype.hasLimit=function(){return!ir(this.limit)},e.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},e.prototype.getInequalityFilterField=function(){for(var e=0,t=this.filters;e<t.length;e++){var n=t[e];if(n instanceof zr&&n.isInequality())return n.field}return null},e.prototype.findFilterOperator=function(e){for(var t=0,n=this.filters;t<n.length;t++){var r=n[t];if(r instanceof zr&&e.indexOf(r.op)>=0)return r.op}return null},e.prototype.isDocumentQuery=function(){return ce.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},e.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},e.prototype.matchesPathAndCollectionGroup=function(e){var t=e.key.path;return null!==this.collectionGroup?e.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(t):ce.isDocumentKey(this.path)?this.path.isEqual(t):this.path.isImmediateParentOf(t)},e.prototype.matchesOrderBy=function(e){for(var t=0,n=this.explicitOrderBy;t<n.length;t++){var r=n[t];if(!r.field.isKeyField()&&null===e.field(r.field))return!1}return!0},e.prototype.matchesFilters=function(e){for(var t=0,n=this.filters;t<n.length;t++)if(!n[t].matches(e))return!1;return!0},e.prototype.matchesBounds=function(e){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,e)||this.endAt&&this.endAt.sortsBeforeDocument(this.orderBy,e))},e.prototype.assertValidBound=function(e){v(e.position.length<=this.orderBy.length,\"Bound is longer than orderBy\")},e}(),Br=function(){return function(){}}(),$r=function(){function e(e){this.name=e}return e.fromString=function(t){switch(t){case\"<\":return e.LESS_THAN;case\"<=\":return e.LESS_THAN_OR_EQUAL;case\"==\":return e.EQUAL;case\">=\":return e.GREATER_THAN_OR_EQUAL;case\">\":return e.GREATER_THAN;case\"array-contains\":return e.ARRAY_CONTAINS;case\"in\":return e.IN;case\"array-contains-any\":return e.ARRAY_CONTAINS_ANY;default:return y(\"Unknown FieldFilter operator: \"+t)}},e.prototype.toString=function(){return this.name},e.prototype.isEqual=function(e){return this.name===e.name},e.LESS_THAN=new e(\"<\"),e.LESS_THAN_OR_EQUAL=new e(\"<=\"),e.EQUAL=new e(\"==\"),e.GREATER_THAN=new e(\">\"),e.GREATER_THAN_OR_EQUAL=new e(\">=\"),e.ARRAY_CONTAINS=new e(\"array-contains\"),e.IN=new e(\"in\"),e.ARRAY_CONTAINS_ANY=new e(\"array-contains-any\"),e}(),zr=function(e){function t(t,n,r){var i=e.call(this)||this;return i.field=t,i.op=n,i.value=r,i}return s.__extends(t,e),t.create=function(e,n,r){if(e.isKeyField())return n===$r.IN?(v(r instanceof Vt,\"Comparing on key with IN, but filter value not an ArrayValue\"),v(r.internalValue.every(function(e){return e instanceof jt}),\"Comparing on key with IN, but an array value was not a RefValue\"),new Hr(e,r)):(v(r instanceof jt,\"Comparing on key, but filter value not a RefValue\"),v(n!==$r.ARRAY_CONTAINS&&n!==$r.ARRAY_CONTAINS_ANY,\"'\"+n.toString()+\"' queries don't make sense on document keys.\"),new Wr(e,n,r));if(r.isEqual(Ot.INSTANCE)){if(n!==$r.EQUAL)throw new E(w.INVALID_ARGUMENT,\"Invalid query. Null supports only equality comparisons.\");return new t(e,n,r)}if(r.isEqual(kt.NAN)){if(n!==$r.EQUAL)throw new E(w.INVALID_ARGUMENT,\"Invalid query. NaN supports only equality comparisons.\");return new t(e,n,r)}return n===$r.ARRAY_CONTAINS?new Qr(e,r):n===$r.IN?(v(r instanceof Vt,\"IN filter has invalid value: \"+r.toString()),new Gr(e,r)):n===$r.ARRAY_CONTAINS_ANY?(v(r instanceof Vt,\"ARRAY_CONTAINS_ANY filter has invalid value: \"+r.toString()),new Kr(e,r)):new t(e,n,r)},t.prototype.matches=function(e){var t=e.field(this.field);return null!==t&&this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},t.prototype.matchesComparison=function(e){switch(this.op){case $r.LESS_THAN:return e<0;case $r.LESS_THAN_OR_EQUAL:return e<=0;case $r.EQUAL:return 0===e;case $r.GREATER_THAN:return e>0;case $r.GREATER_THAN_OR_EQUAL:return e>=0;default:return y(\"Unknown FieldFilter operator: \"+this.op)}},t.prototype.isInequality=function(){return[$r.LESS_THAN,$r.LESS_THAN_OR_EQUAL,$r.GREATER_THAN,$r.GREATER_THAN_OR_EQUAL].indexOf(this.op)>=0},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},t.prototype.isEqual=function(e){return e instanceof t&&this.op.isEqual(e.op)&&this.field.isEqual(e.field)&&this.value.isEqual(e.value)},t.prototype.toString=function(){return this.field.canonicalString()+\" \"+this.op+\" \"+this.value.value()},t}(Br),Wr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.matches=function(e){var t=ce.comparator(e.key,this.value.key);return this.matchesComparison(t)},t}(zr),Hr=function(e){function t(t,n){var r=e.call(this,t,$r.IN,n)||this;return r.value=n,r}return s.__extends(t,e),t.prototype.matches=function(e){return this.value.internalValue.some(function(t){return e.key.isEqual(t.key)})},t}(zr),Qr=function(e){function t(t,n){return e.call(this,t,$r.ARRAY_CONTAINS,n)||this}return s.__extends(t,e),t.prototype.matches=function(e){var t=e.field(this.field);return t instanceof Vt&&t.contains(this.value)},t}(zr),Gr=function(e){function t(t,n){var r=e.call(this,t,$r.IN,n)||this;return r.value=n,r}return s.__extends(t,e),t.prototype.matches=function(e){var t=this.value,n=e.field(this.field);return null!==n&&t.contains(n)},t}(zr),Kr=function(e){function t(t,n){var r=e.call(this,t,$r.ARRAY_CONTAINS_ANY,n)||this;return r.value=n,r}return s.__extends(t,e),t.prototype.matches=function(e){var t=this,n=e.field(this.field);return n instanceof Vt&&n.internalValue.some(function(e){return t.value.contains(e)})},t}(zr),Yr=function(){function e(e){this.name=e}return e.prototype.toString=function(){return this.name},e.ASCENDING=new e(\"asc\"),e.DESCENDING=new e(\"desc\"),e}(),Xr=function(){function e(e,t){this.position=e,this.before=t}return e.prototype.canonicalId=function(){for(var e=this.before?\"b:\":\"a:\",t=0,n=this.position;t<n.length;t++)e+=n[t].toString();return e},e.prototype.sortsBeforeDocument=function(e,t){v(this.position.length<=e.length,\"Bound has more components than query's orderBy\");for(var n=0,r=0;r<this.position.length;r++){var i=e[r],o=this.position[r];if(i.field.isKeyField())v(o instanceof jt,\"Bound has a non-key value where the key path is being used.\"),n=ce.comparator(o.key,t.key);else{var s=t.field(i.field);v(null!==s,\"Field should exist since document matched the orderBy already.\"),n=o.compareTo(s)}if(i.dir===Yr.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},e.prototype.isEqual=function(e){if(null===e)return!1;if(this.before!==e.before||this.position.length!==e.position.length)return!1;for(var t=0;t<this.position.length;t++)if(!this.position[t].isEqual(e.position[t]))return!1;return!0},e}(),Jr=function(){function e(e,t){this.field=e,void 0===t&&(t=Yr.ASCENDING),this.dir=t,this.isKeyOrderBy=e.isKeyField()}return e.prototype.compare=function(e,t){var n=this.isKeyOrderBy?Bt.compareByKey(e,t):Bt.compareByField(this.field,e,t);switch(this.dir){case Yr.ASCENDING:return n;case Yr.DESCENDING:return-1*n;default:return y(\"Unknown direction: \"+this.dir)}},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},e.prototype.toString=function(){return this.field.canonicalString()+\" (\"+this.dir+\")\"},e.prototype.isEqual=function(e){return this.dir===e.dir&&this.field.isEqual(e.field)},e}(),Zr=new Jr(ue.keyField(),Yr.ASCENDING),ei=new Jr(ue.keyField(),Yr.DESCENDING),ti=function(){function e(){}return e.prototype.applyToLocalView=function(e,t){return new Lt(t,e)},e.prototype.applyToRemoteDocument=function(e,t){return t},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e},e.instance=new e,e}(),ni=function(){function e(e){this.elements=e}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=oi(e),n=function(e){t.find(function(t){return t.isEqual(e)})||t.push(e)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Vt(t)},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e&&K(t.elements,this.elements)},e}(),ri=function(){function e(e){this.elements=e}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=oi(e),n=function(e){t=t.filter(function(t){return!t.isEqual(e)})},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Vt(t)},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e&&K(t.elements,this.elements)},e}(),ii=function(){function e(e){this.operand=e}return e.prototype.applyToLocalView=function(e,t){var n=this.computeBaseValue(e);return n instanceof Dt&&this.operand instanceof Dt?new Dt(n.internalValue+this.operand.internalValue):new kt(n.internalValue+this.operand.internalValue)},e.prototype.applyToRemoteDocument=function(e,t){return v(null!==t,\"Didn't receive transformResult for NUMERIC_ADD transform\"),t},e.prototype.computeBaseValue=function(e){return e instanceof At?e:new Dt(0)},e.prototype.isEqual=function(t){return t instanceof e&&this.operand.isEqual(t.operand)},e}();function oi(e){return e instanceof Vt?e.internalValue.slice():[]}var si,ai,ui=function(){function e(e){this.count=e}return e.prototype.isEqual=function(e){return e&&e.count===this.count},e}(),ci=((si={})[Yr.ASCENDING.name]=\"ASCENDING\",si[Yr.DESCENDING.name]=\"DESCENDING\",si),li=((ai={})[$r.LESS_THAN.name]=\"LESS_THAN\",ai[$r.LESS_THAN_OR_EQUAL.name]=\"LESS_THAN_OR_EQUAL\",ai[$r.GREATER_THAN.name]=\"GREATER_THAN\",ai[$r.GREATER_THAN_OR_EQUAL.name]=\"GREATER_THAN_OR_EQUAL\",ai[$r.EQUAL.name]=\"EQUAL\",ai[$r.ARRAY_CONTAINS.name]=\"ARRAY_CONTAINS\",ai[$r.IN.name]=\"IN\",ai[$r.ARRAY_CONTAINS_ANY.name]=\"ARRAY_CONTAINS_ANY\",ai),hi=new RegExp(/^\\d{4}-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d(?:\\.(\\d+))?Z$/);function di(e,t){v(!ir(e),t+\" is missing\")}function fi(e){return\"number\"==typeof e?e:\"string\"==typeof e?Number(e):y(\"can't parse \"+e)}var pi=function(){function e(e,t){this.databaseId=e,this.options=t}return e.prototype.emptyByteString=function(){return this.options.useProto3Json?\"\":new Uint8Array(0)},e.prototype.unsafeCastProtoByteString=function(e){return e},e.prototype.fromRpcStatus=function(e){var t=void 0===e.code?w.UNKNOWN:wr(e.code);return new E(t,e.message||\"\")},e.prototype.toInt32Value=function(e){return ir(e)?void 0:{value:e}},e.prototype.fromInt32Value=function(e){var t;return ir(t=\"object\"==typeof e?e.value:e)?null:t},e.prototype.toTimestamp=function(e){return{seconds:\"\"+e.seconds,nanos:e.nanoseconds}},e.prototype.fromTimestamp=function(e){if(\"string\"==typeof e)return this.fromIso8601String(e);v(!!e,\"Cannot deserialize null or undefined timestamp.\");var t=fi(e.seconds||\"0\");return new Ee(t,e.nanos||0)},e.prototype.fromIso8601String=function(e){var t=0,n=hi.exec(e);if(v(!!n,\"invalid timestamp: \"+e),n[1]){var r=n[1];r=(r+\"000000000\").substr(0,9),t=Number(r)}var i=new Date(e),o=Math.floor(i.getTime()/1e3);return new Ee(o,t)},e.prototype.toBytes=function(e){return this.options.useProto3Json?e.toBase64():this.unsafeCastProtoByteString(e.toUint8Array())},e.prototype.fromBlob=function(e){return\"string\"==typeof e?(v(this.options.useProto3Json,\"Expected bytes to be passed in as Uint8Array, but got a string instead.\"),Z.fromBase64String(e)):(v(!this.options.useProto3Json,\"Expected bytes to be passed in as Uint8Array, but got a string instead.\"),Z.fromUint8Array(e))},e.prototype.toVersion=function(e){return this.toTimestamp(e.toTimestamp())},e.prototype.fromVersion=function(e){return v(!!e,\"Trying to deserialize version that isn't set\"),Ce.fromTimestamp(this.fromTimestamp(e))},e.prototype.toResourceName=function(e,t){return this.fullyQualifiedPrefixPath(e).child(\"documents\").child(t).canonicalString()},e.prototype.fromResourceName=function(e){var t=se.fromString(e);return v(this.isValidResourceName(t),\"Tried to deserialize invalid key \"+t.toString()),t},e.prototype.toName=function(e){return this.toResourceName(this.databaseId,e.path)},e.prototype.fromName=function(e){var t=this.fromResourceName(e);return v(t.get(1)===this.databaseId.projectId,\"Tried to deserialize key from different project: \"+t.get(1)+\" vs \"+this.databaseId.projectId),v(!t.get(3)&&!this.databaseId.database||t.get(3)===this.databaseId.database,\"Tried to deserialize key from different database: \"+t.get(3)+\" vs \"+this.databaseId.database),new ce(this.extractLocalPathFromResourceName(t))},e.prototype.toQueryPath=function(e){return this.toResourceName(this.databaseId,e)},e.prototype.fromQueryPath=function(e){var t=this.fromResourceName(e);return 4===t.length?se.EMPTY_PATH:this.extractLocalPathFromResourceName(t)},Object.defineProperty(e.prototype,\"encodedDatabaseId\",{get:function(){return new se([\"projects\",this.databaseId.projectId,\"databases\",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),e.prototype.fullyQualifiedPrefixPath=function(e){return new se([\"projects\",e.projectId,\"databases\",e.database])},e.prototype.extractLocalPathFromResourceName=function(e){return v(e.length>4&&\"documents\"===e.get(4),\"tried to deserialize invalid key \"+e.toString()),e.popFirst(5)},e.prototype.isValidResourceName=function(e){return e.length>=4&&\"projects\"===e.get(0)&&\"databases\"===e.get(2)},e.prototype.toValue=function(e){if(e instanceof Ot)return{nullValue:\"NULL_VALUE\"};if(e instanceof Nt)return{booleanValue:e.value()};if(e instanceof Dt)return{integerValue:\"\"+e.value()};if(e instanceof kt){var t=e.value();if(this.options.useProto3Json){if(isNaN(t))return{doubleValue:\"NaN\"};if(t===1/0)return{doubleValue:\"Infinity\"};if(t===-1/0)return{doubleValue:\"-Infinity\"}}return{doubleValue:e.value()}}return e instanceof xt?{stringValue:e.value()}:e instanceof Ut?{mapValue:this.toMapValue(e)}:e instanceof Vt?{arrayValue:this.toArrayValue(e)}:e instanceof Pt?{timestampValue:this.toTimestamp(e.internalValue)}:e instanceof Ft?{geoPointValue:{latitude:e.value().latitude,longitude:e.value().longitude}}:e instanceof Mt?{bytesValue:this.toBytes(e.value())}:e instanceof jt?{referenceValue:this.toResourceName(e.databaseId,e.key.path)}:y(\"Unknown FieldValue \"+JSON.stringify(e))},e.prototype.fromValue=function(e){var t=this;if(\"nullValue\"in e)return Ot.INSTANCE;if(\"booleanValue\"in e)return Nt.of(e.booleanValue);if(\"integerValue\"in e)return new Dt(fi(e.integerValue));if(\"doubleValue\"in e){if(this.options.useProto3Json){if(\"NaN\"===e.doubleValue)return kt.NAN;if(\"Infinity\"===e.doubleValue)return kt.POSITIVE_INFINITY;if(\"-Infinity\"===e.doubleValue)return kt.NEGATIVE_INFINITY}return new kt(e.doubleValue)}if(\"stringValue\"in e)return new xt(e.stringValue);if(\"mapValue\"in e)return this.fromFields(e.mapValue.fields||{});if(\"arrayValue\"in e)return di(e.arrayValue,\"arrayValue\"),new Vt((e.arrayValue.values||[]).map(function(e){return t.fromValue(e)}));if(\"timestampValue\"in e)return di(e.timestampValue,\"timestampValue\"),new Pt(this.fromTimestamp(e.timestampValue));if(\"geoPointValue\"in e)return di(e.geoPointValue,\"geoPointValue\"),new Ft(new Vr(e.geoPointValue.latitude||0,e.geoPointValue.longitude||0));if(\"bytesValue\"in e){di(e.bytesValue,\"bytesValue\");var n=this.fromBlob(e.bytesValue);return new Mt(n)}if(\"referenceValue\"in e){di(e.referenceValue,\"referenceValue\");var r=this.fromResourceName(e.referenceValue),i=new re(r.get(1),r.get(3)),o=new ce(this.extractLocalPathFromResourceName(r));return new jt(i,o)}return y(\"Unknown Value proto \"+JSON.stringify(e))},e.prototype.toMutationDocument=function(e,t){return{name:this.toName(e),fields:this.toFields(t)}},e.prototype.toDocument=function(e){return v(!e.hasLocalMutations,\"Can't serialize documents with mutations.\"),{name:this.toName(e.key),fields:this.toFields(e.data()),updateTime:this.toTimestamp(e.version.toTimestamp())}},e.prototype.fromDocument=function(e,t){var n=this,r=this.fromName(e.name),i=this.fromVersion(e.updateTime);return new Bt(r,i,{hasCommittedMutations:!!t},void 0,e,function(e){return n.fromValue(e)})},e.prototype.toFields=function(e){var t=this,n={};return e.forEach(function(e,r){n[e]=t.toValue(r)}),n},e.prototype.fromFields=function(e){var t=this,n=Ut.EMPTY;return O(e,function(e,r){n=n.set(new ue([e]),t.fromValue(r))}),n},e.prototype.toMapValue=function(e){return{fields:this.toFields(e)}},e.prototype.toArrayValue=function(e){var t=this,n=[];return e.forEach(function(e){n.push(t.toValue(e))}),{values:n}},e.prototype.fromFound=function(e){var t=this;v(!!e.found,\"Tried to deserialize a found document from a missing document.\"),di(e.found.name,\"doc.found.name\"),di(e.found.updateTime,\"doc.found.updateTime\");var n=this.fromName(e.found.name),r=this.fromVersion(e.found.updateTime);return new Bt(n,r,{},void 0,e.found,function(e){return t.fromValue(e)})},e.prototype.fromMissing=function(e){v(!!e.missing,\"Tried to deserialize a missing document from a found document.\"),v(!!e.readTime,\"Tried to deserialize a missing document without a read time.\");var t=this.fromName(e.missing),n=this.fromVersion(e.readTime);return new $t(t,n)},e.prototype.fromMaybeDocument=function(e){return\"found\"in e?this.fromFound(e):\"missing\"in e?this.fromMissing(e):y(\"invalid batch get response: \"+JSON.stringify(e))},e.prototype.toWatchTargetChangeState=function(e){switch(e){case kr.Added:return\"ADD\";case kr.Current:return\"CURRENT\";case kr.NoChange:return\"NO_CHANGE\";case kr.Removed:return\"REMOVE\";case kr.Reset:return\"RESET\";default:return y(\"Unknown WatchTargetChangeState: \"+e)}},e.prototype.toTestWatchChange=function(e){if(e instanceof Dr)return{filter:{count:e.existenceFilter.count,targetId:e.targetId}};if(e instanceof Rr){var t;if(e.newDoc instanceof Bt)return{documentChange:{document:{name:this.toName((t=e.newDoc).key),fields:this.toFields(t.data()),updateTime:this.toVersion(t.version)},targetIds:e.updatedTargetIds,removedTargetIds:e.removedTargetIds}};if(e.newDoc instanceof $t)return{documentDelete:{document:this.toName((t=e.newDoc).key),readTime:this.toVersion(t.version),removedTargetIds:e.removedTargetIds}};if(null===e.newDoc)return{documentRemove:{document:this.toName(e.key),removedTargetIds:e.removedTargetIds}}}if(e instanceof xr){var n=void 0;return e.cause&&(n={code:Er(e.cause.code),message:e.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(e.state),targetIds:e.targetIds,resumeToken:this.unsafeCastProtoByteString(e.resumeToken),cause:n}}}return y(\"Unrecognized watch change: \"+JSON.stringify(e))},e.prototype.fromWatchChange=function(e){var t,n=this;if(\"targetChange\"in e){di(e.targetChange,\"targetChange\");var r=this.fromWatchTargetChangeState(e.targetChange.targetChangeType||\"NO_CHANGE\"),i=e.targetChange.targetIds||[],o=e.targetChange.resumeToken||this.emptyByteString(),s=e.targetChange.cause,a=s&&this.fromRpcStatus(s);t=new xr(r,i,o,a||null)}else if(\"documentChange\"in e){di(e.documentChange,\"documentChange\"),di(e.documentChange.document,\"documentChange.name\"),di(e.documentChange.document.name,\"documentChange.document.name\"),di(e.documentChange.document.updateTime,\"documentChange.document.updateTime\");var u=e.documentChange,c=this.fromName(u.document.name),l=this.fromVersion(u.document.updateTime),h=new Bt(c,l,{},void 0,u.document,function(e){return n.fromValue(e)});t=new Rr(u.targetIds||[],u.removedTargetIds||[],h.key,h)}else if(\"documentDelete\"in e){di(e.documentDelete,\"documentDelete\"),di(e.documentDelete.document,\"documentDelete.document\");var d=e.documentDelete;c=this.fromName(d.document),l=d.readTime?this.fromVersion(d.readTime):Ce.forDeletedDoc(),h=new $t(c,l),t=new Rr([],d.removedTargetIds||[],h.key,h)}else if(\"documentRemove\"in e){di(e.documentRemove,\"documentRemove\"),di(e.documentRemove.document,\"documentRemove\");var f=e.documentRemove;c=this.fromName(f.document),t=new Rr([],f.removedTargetIds||[],c,null)}else{if(!(\"filter\"in e))return y(\"Unknown change type \"+JSON.stringify(e));di(e.filter,\"filter\"),di(e.filter.targetId,\"filter.targetId\");var p=e.filter,m=new ui(p.count||0);t=new Dr(p.targetId,m)}return t},e.prototype.fromWatchTargetChangeState=function(e){return\"NO_CHANGE\"===e?kr.NoChange:\"ADD\"===e?kr.Added:\"REMOVE\"===e?kr.Removed:\"CURRENT\"===e?kr.Current:\"RESET\"===e?kr.Reset:y(\"Got unexpected TargetChange.state: \"+e)},e.prototype.versionFromListenResponse=function(e){if(!(\"targetChange\"in e))return Ce.MIN;var t=e.targetChange;return t.targetIds&&t.targetIds.length?Ce.MIN:t.readTime?this.fromVersion(t.readTime):Ce.MIN},e.prototype.toMutation=function(e){var t,n=this;if(e instanceof bt)t={update:this.toMutationDocument(e.key,e.value)};else if(e instanceof Et)t={delete:this.toName(e.key)};else if(e instanceof _t)t={update:this.toMutationDocument(e.key,e.data),updateMask:this.toDocumentMask(e.fieldMask)};else{if(!(e instanceof wt))return y(\"Unknown mutation type \"+e.type);t={transform:{document:this.toName(e.key),fieldTransforms:e.fieldTransforms.map(function(e){return n.toFieldTransform(e)})}}}return e.precondition.isNone||(t.currentDocument=this.toPrecondition(e.precondition)),t},e.prototype.fromMutation=function(e){var t=this,n=e.currentDocument?this.fromPrecondition(e.currentDocument):yt.NONE;if(e.update){di(e.update.name,\"name\");var r=this.fromName(e.update.name),i=this.fromFields(e.update.fields||{});if(e.updateMask){var o=this.fromDocumentMask(e.updateMask);return new _t(r,i,o,n)}return new bt(r,i,n)}if(e.delete)return r=this.fromName(e.delete),new Et(r,n);if(e.transform){r=this.fromName(e.transform.document);var s=e.transform.fieldTransforms.map(function(e){return t.fromFieldTransform(e)});return v(!0===n.exists,'Transforms only support precondition \"exists == true\"'),new wt(r,s)}return y(\"unknown mutation proto: \"+JSON.stringify(e))},e.prototype.toPrecondition=function(e){return v(!e.isNone,\"Can't serialize an empty precondition\"),void 0!==e.updateTime?{updateTime:this.toVersion(e.updateTime)}:void 0!==e.exists?{exists:e.exists}:y(\"Unknown precondition\")},e.prototype.fromPrecondition=function(e){return void 0!==e.updateTime?yt.updateTime(this.fromVersion(e.updateTime)):void 0!==e.exists?yt.exists(e.exists):yt.NONE},e.prototype.fromWriteResult=function(e,t){var n=this,r=this.fromVersion(e.updateTime?e.updateTime:t),i=null;return e.transformResults&&e.transformResults.length>0&&(i=e.transformResults.map(function(e){return n.fromValue(e)})),new mt(r,i)},e.prototype.fromWriteResults=function(e,t){var n=this;return e&&e.length>0?(v(void 0!==t,\"Received a write result without a commit time\"),e.map(function(e){return n.fromWriteResult(e,t)})):[]},e.prototype.toFieldTransform=function(e){var t=this,n=e.transform;if(n instanceof ti)return{fieldPath:e.field.canonicalString(),setToServerValue:\"REQUEST_TIME\"};if(n instanceof ni)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements.map(function(e){return t.toValue(e)})}};if(n instanceof ri)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements.map(function(e){return t.toValue(e)})}};if(n instanceof ii)return{fieldPath:e.field.canonicalString(),increment:this.toValue(n.operand)};throw y(\"Unknown transform: \"+e.transform)},e.prototype.fromFieldTransform=function(e){var t=this,n=null;if(\"setToServerValue\"in e)v(\"REQUEST_TIME\"===e.setToServerValue,\"Unknown server value transform proto: \"+JSON.stringify(e)),n=ti.instance;else if(\"appendMissingElements\"in e)n=new ni((e.appendMissingElements.values||[]).map(function(e){return t.fromValue(e)}));else if(\"removeAllFromArray\"in e)n=new ri((e.removeAllFromArray.values||[]).map(function(e){return t.fromValue(e)}));else if(\"increment\"in e){var r=this.fromValue(e.increment);v(r instanceof At,\"NUMERIC_ADD transform requires a NumberValue\"),n=new ii(r)}else y(\"Unknown transform proto: \"+JSON.stringify(e));var i=ue.fromServerFormat(e.fieldPath);return new pt(i,n)},e.prototype.toDocumentsTarget=function(e){return{documents:[this.toQueryPath(e.path)]}},e.prototype.fromDocumentsTarget=function(e){var t=e.documents.length;return v(1===t,\"DocumentsTarget contained other than 1 document: \"+t),qr.atPath(this.fromQueryPath(e.documents[0]))},e.prototype.toQueryTarget=function(e){var t={structuredQuery:{}},n=e.path;null!==e.collectionGroup?(v(n.length%2==0,\"Collection Group queries should be within a document path or root.\"),t.parent=this.toQueryPath(n),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(v(n.length%2!=0,\"Document queries with filters are not supported.\"),t.parent=this.toQueryPath(n.popLast()),t.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(e.filters);r&&(t.structuredQuery.where=r);var i=this.toOrder(e.orderBy);i&&(t.structuredQuery.orderBy=i);var o=this.toInt32Value(e.limit);return void 0!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=this.toCursor(e.startAt)),e.endAt&&(t.structuredQuery.endAt=this.toCursor(e.endAt)),t},e.prototype.fromQueryTarget=function(e){var t=this.fromQueryPath(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){v(1===r,\"StructuredQuery.from with more than one collection is not supported.\");var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var s=[];n.where&&(s=this.fromFilter(n.where));var a=[];n.orderBy&&(a=this.fromOrder(n.orderBy));var u=null;n.limit&&(u=this.fromInt32Value(n.limit));var c=null;n.startAt&&(c=this.fromCursor(n.startAt));var l=null;return n.endAt&&(l=this.fromCursor(n.endAt)),new qr(t,i,a,s,u,c,l)},e.prototype.toListenRequestLabels=function(e){var t=this.toLabel(e.purpose);return null==t?null:{\"goog-listen-tags\":t}},e.prototype.toLabel=function(e){switch(e){case Sn.Listen:return null;case Sn.ExistenceFilterMismatch:return\"existence-filter-mismatch\";case Sn.LimboResolution:return\"limbo-document\";default:return y(\"Unrecognized query purpose: \"+e)}},e.prototype.toTarget=function(e){var t,n=e.query;return(t=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=e.targetId,e.resumeToken.length>0&&(t.resumeToken=this.unsafeCastProtoByteString(e.resumeToken)),t},e.prototype.toFilter=function(e){var t=this;if(0!==e.length){var n=e.map(function(e){return e instanceof zr?t.toUnaryOrFieldFilter(e):y(\"Unrecognized filter: \"+JSON.stringify(e))});return 1===n.length?n[0]:{compositeFilter:{op:\"AND\",filters:n}}}},e.prototype.fromFilter=function(e){var t=this;return e?void 0!==e.unaryFilter?[this.fromUnaryFilter(e)]:void 0!==e.fieldFilter?[this.fromFieldFilter(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(function(e){return t.fromFilter(e)}).reduce(function(e,t){return e.concat(t)}):y(\"Unknown filter: \"+JSON.stringify(e)):[]},e.prototype.toOrder=function(e){var t=this;if(0!==e.length)return e.map(function(e){return t.toPropertyOrder(e)})},e.prototype.fromOrder=function(e){var t=this;return e.map(function(e){return t.fromPropertyOrder(e)})},e.prototype.toCursor=function(e){var t=this;return{before:e.before,values:e.position.map(function(e){return t.toValue(e)})}},e.prototype.fromCursor=function(e){var t=this,n=!!e.before,r=e.values.map(function(e){return t.fromValue(e)});return new Xr(r,n)},e.prototype.toDirection=function(e){return ci[e.name]},e.prototype.fromDirection=function(e){switch(e){case\"ASCENDING\":return Yr.ASCENDING;case\"DESCENDING\":return Yr.DESCENDING;default:return}},e.prototype.toOperatorName=function(e){return li[e.name]},e.prototype.fromOperatorName=function(e){switch(e){case\"EQUAL\":return $r.EQUAL;case\"GREATER_THAN\":return $r.GREATER_THAN;case\"GREATER_THAN_OR_EQUAL\":return $r.GREATER_THAN_OR_EQUAL;case\"LESS_THAN\":return $r.LESS_THAN;case\"LESS_THAN_OR_EQUAL\":return $r.LESS_THAN_OR_EQUAL;case\"ARRAY_CONTAINS\":return $r.ARRAY_CONTAINS;case\"IN\":return $r.IN;case\"ARRAY_CONTAINS_ANY\":return $r.ARRAY_CONTAINS_ANY;case\"OPERATOR_UNSPECIFIED\":return y(\"Unspecified operator\");default:return y(\"Unknown operator\")}},e.prototype.toFieldPathReference=function(e){return{fieldPath:e.canonicalString()}},e.prototype.fromFieldPathReference=function(e){return ue.fromServerFormat(e.fieldPath)},e.prototype.toPropertyOrder=function(e){return{field:this.toFieldPathReference(e.field),direction:this.toDirection(e.dir)}},e.prototype.fromPropertyOrder=function(e){return new Jr(this.fromFieldPathReference(e.field),this.fromDirection(e.direction))},e.prototype.fromFieldFilter=function(e){return zr.create(this.fromFieldPathReference(e.fieldFilter.field),this.fromOperatorName(e.fieldFilter.op),this.fromValue(e.fieldFilter.value))},e.prototype.toUnaryOrFieldFilter=function(e){if(e.op===$r.EQUAL){if(e.value.isEqual(kt.NAN))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:\"IS_NAN\"}};if(e.value.isEqual(Ot.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:\"IS_NULL\"}}}return{fieldFilter:{field:this.toFieldPathReference(e.field),op:this.toOperatorName(e.op),value:this.toValue(e.value)}}},e.prototype.fromUnaryFilter=function(e){switch(e.unaryFilter.op){case\"IS_NAN\":var t=this.fromFieldPathReference(e.unaryFilter.field);return zr.create(t,$r.EQUAL,kt.NAN);case\"IS_NULL\":var n=this.fromFieldPathReference(e.unaryFilter.field);return zr.create(n,$r.EQUAL,Ot.INSTANCE);case\"OPERATOR_UNSPECIFIED\":return y(\"Unspecified filter\");default:return y(\"Unknown filter\")}},e.prototype.toDocumentMask=function(e){var t=[];return e.fields.forEach(function(e){return t.push(e.canonicalString())}),{fieldPaths:t}},e.prototype.fromDocumentMask=function(e){var t=(e.fieldPaths||[]).map(function(e){return ue.fromServerFormat(e)});return ft.fromArray(t)},e}(),mi=function(){return function(){this.viewSnap=null,this.targetId=0,this.listeners=[]}}(),gi=function(){function e(e){this.syncEngine=e,this.queries=new Wt(function(e){return e.canonicalId()}),this.onlineState=gr.Unknown,this.snapshotsInSyncListeners=new Set,this.syncEngine.subscribe(this)}return e.prototype.listen=function(e){var t=e.query,n=!1,r=this.queries.get(t);return r||(n=!0,r=new mi,this.queries.set(t,r)),r.listeners.push(e),v(!e.applyOnlineStateChange(this.onlineState),\"applyOnlineStateChange() shouldn't raise an event for brand-new listeners.\"),r.viewSnap&&e.onViewSnapshot(r.viewSnap)&&this.raiseSnapshotsInSyncEvent(),n?this.syncEngine.listen(t).then(function(e){return r.targetId=e,e}):Promise.resolve(r.targetId)},e.prototype.unlisten=function(e){return s.__awaiter(this,void 0,void 0,function(){var t,n,r,i;return s.__generator(this,function(o){return n=!1,(r=this.queries.get(t=e.query))&&(i=r.listeners.indexOf(e))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(t),[2,this.syncEngine.unlisten(t)]):[2]})})},e.prototype.onWatchChange=function(e){for(var t=!1,n=0,r=e;n<r.length;n++){var i=r[n],o=this.queries.get(i.query);if(o){for(var s=0,a=o.listeners;s<a.length;s++)a[s].onViewSnapshot(i)&&(t=!0);o.viewSnap=i}}t&&this.raiseSnapshotsInSyncEvent()},e.prototype.onWatchError=function(e,t){var n=this.queries.get(e);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(t);this.queries.delete(e)},e.prototype.onOnlineStateChange=function(e){this.onlineState=e;var t=!1;this.queries.forEach(function(n,r){for(var i=0,o=r.listeners;i<o.length;i++)o[i].applyOnlineStateChange(e)&&(t=!0)}),t&&this.raiseSnapshotsInSyncEvent()},e.prototype.addSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.add(e),e.next()},e.prototype.removeSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.delete(e)},e.prototype.raiseSnapshotsInSyncEvent=function(){this.snapshotsInSyncListeners.forEach(function(e){e.next()})},e}(),yi=function(){function e(e,t,n){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=gr.Unknown,this.options=n||{}}return e.prototype.onViewSnapshot=function(e){if(v(e.docChanges.length>0||e.syncStateChanged,\"We got a new snapshot with no changes?\"),!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];i.type!==Sr.Metadata&&t.push(i)}e=new Or(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(e)&&(this.queryObserver.next(e),o=!0):this.shouldRaiseInitialEvent(e,this.onlineState)&&(this.raiseInitialEvent(e),o=!0),this.snap=e,o},e.prototype.onError=function(e){this.queryObserver.error(e)},e.prototype.applyOnlineStateChange=function(e){this.onlineState=e;var t=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&(this.raiseInitialEvent(this.snap),t=!0),t},e.prototype.shouldRaiseInitialEvent=function(e,t){return v(!this.raisedInitialEvent,\"Determining whether to raise first event but already had first event\"),!e.fromCache||(this.options.waitForSyncWhenOnline&&t!==gr.Offline?(v(e.fromCache,\"Waiting for sync, but snapshot is not from cache\"),!1):!e.docs.isEmpty()||t===gr.Offline)},e.prototype.shouldRaiseEvent=function(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges},e.prototype.raiseInitialEvent=function(e){v(!this.raisedInitialEvent,\"Trying to raise initial events for second time\"),e=Or.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(e)},e}(),vi=function(){function e(e,t,n){this.targetId=e,this.addedKeys=t,this.removedKeys=n}return e.fromSnapshot=function(t,n){for(var r=Fe(),i=Fe(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case Sr.Added:r=r.add(a.doc.key);break;case Sr.Removed:i=i.add(a.doc.key)}}return new e(t,r,i)},e}(),bi=function(){return function(e){this.key=e}}(),_i=function(){return function(e){this.key=e}}(),wi=function(){function e(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.current=!1,this.limboDocuments=Fe(),this.mutatedKeys=Fe(),this.documentSet=new Cr(e.docComparator.bind(e))}return Object.defineProperty(e.prototype,\"syncedDocuments\",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),e.prototype.computeDocChanges=function(e,t){var n=this,r=t?t.changeSet:new Ir,i=t?t.documentSet:this.documentSet,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.hasLimit()&&i.size===this.query.limit?i.last():null;if(e.inorderTraversal(function(e,t){var c=i.get(e),l=t instanceof Bt?t:null;l&&(v(e.isEqual(l.key),\"Mismatching keys found in document changes: \"+e+\" != \"+l.key),l=n.query.matches(l)?l:null);var h=!!c&&n.mutatedKeys.has(c.key),d=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),f=!1;c&&l?c.data().isEqual(l.data())?h!==d&&(r.track({type:Sr.Metadata,doc:l}),f=!0):n.shouldWaitForSyncedDocument(c,l)||(r.track({type:Sr.Modified,doc:l}),f=!0,u&&n.query.docComparator(l,u)>0&&(a=!0)):!c&&l?(r.track({type:Sr.Added,doc:l}),f=!0):c&&!l&&(r.track({type:Sr.Removed,doc:c}),f=!0,u&&(a=!0)),f&&(l?(s=s.add(l),o=d?o.add(e):o.delete(e)):(s=s.delete(e),o=o.delete(e)))}),this.query.hasLimit())for(;s.size>this.query.limit;){var c=s.last();s=s.delete(c.key),o=o.delete(c.key),r.track({type:Sr.Removed,doc:c})}return v(!a||!t,\"View was refilled using docs that themselves needed refilling.\"),{documentSet:s,changeSet:r,needsRefill:a,mutatedKeys:o}},e.prototype.shouldWaitForSyncedDocument=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this;v(!e.needsRefill,\"Cannot apply changes that need a refill\");var i=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;var o=e.changeSet.getChanges();o.sort(function(e,t){return function(e,t){var n=function(e){switch(e){case Sr.Added:return 1;case Sr.Modified:case Sr.Metadata:return 2;case Sr.Removed:return 0;default:return y(\"Unknown ChangeType: \"+e)}};return n(e)-n(t)}(e.type,t.type)||r.query.docComparator(e.doc,t.doc)}),this.applyTargetChange(n);var s=t?this.updateLimboDocuments():[],a=0===this.limboDocuments.size&&this.current?Tr.Synced:Tr.Local,u=a!==this.syncState;return this.syncState=a,0!==o.length||u?{snapshot:new Or(this.query,e.documentSet,i,o,e.mutatedKeys,a===Tr.Local,u,!1),limboChanges:s}:{limboChanges:s}},e.prototype.applyOnlineStateChange=function(e){return this.current&&e===gr.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Ir,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},e.prototype.shouldBeInLimbo=function(e){return!this._syncedDocuments.has(e)&&!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations},e.prototype.applyTargetChange=function(e){var t=this;e&&(e.addedDocuments.forEach(function(e){return t._syncedDocuments=t._syncedDocuments.add(e)}),e.modifiedDocuments.forEach(function(e){return v(t._syncedDocuments.has(e),\"Modified document \"+e+\" not found in view.\")}),e.removedDocuments.forEach(function(e){return t._syncedDocuments=t._syncedDocuments.delete(e)}),this.current=e.current)},e.prototype.updateLimboDocuments=function(){var e=this;if(!this.current)return[];var t=this.limboDocuments;this.limboDocuments=Fe(),this.documentSet.forEach(function(t){e.shouldBeInLimbo(t.key)&&(e.limboDocuments=e.limboDocuments.add(t.key))});var n=[];return t.forEach(function(t){e.limboDocuments.has(t)||n.push(new _i(t))}),this.limboDocuments.forEach(function(e){t.has(e)||n.push(new bi(e))}),n},e.prototype.synchronizeWithPersistedState=function(e,t){this._syncedDocuments=t,this.limboDocuments=Fe();var n=this.computeDocChanges(e);return this.applyChanges(n,!0)},e.prototype.computeInitialSnapshot=function(){return Or.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Tr.Local)},e}(),Ei=5,Ci=function(){function e(e,t,n,r){this.asyncQueue=e,this.remoteStore=t,this.updateFunction=n,this.deferred=r,this.retries=Ei,this.backoff=new cr(this.asyncQueue,he.RetryTransaction)}return e.prototype.run=function(){this.runWithBackOff()},e.prototype.runWithBackOff=function(){var e=this;this.backoff.backoffAndRun(function(){return s.__awaiter(e,void 0,void 0,function(){var e,t,n=this;return s.__generator(this,function(r){return e=this.remoteStore.createTransaction(),(t=this.tryRunUpdateFunction(e))&&t.then(function(t){n.asyncQueue.enqueueAndForget(function(){return e.commit().then(function(){n.deferred.resolve(t)}).catch(function(e){n.handleTransactionError(e)})})}).catch(function(e){n.handleTransactionError(e)}),[2]})})})},e.prototype.tryRunUpdateFunction=function(e){try{var t=this.updateFunction(e);return!ir(t)&&t.catch&&t.then?t:(this.deferred.reject(Error(\"Transaction callback must return a Promise\")),null)}catch(m){return this.deferred.reject(m),null}},e.prototype.handleTransactionError=function(e){var t=this;this.retries>0&&this.isRetryableTransactionError(e)?(this.retries-=1,this.asyncQueue.enqueueAndForget(function(){return t.runWithBackOff(),Promise.resolve()})):this.deferred.reject(e)},e.prototype.isRetryableTransactionError=function(e){if(\"FirebaseError\"===e.name){var t=e.code;return\"aborted\"===t||\"failed-precondition\"===t||!_r(t)}return!1},e}(),Si=function(){return function(e,t,n){this.query=e,this.targetId=t,this.view=n}}(),Ti=function(){return function(e){this.key=e,this.receivedDocument=!1}}(),Ii=function(){function e(e,t,n,r){this.localStore=e,this.remoteStore=t,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new Wt(function(e){return e.canonicalId()}),this.queryViewsByTarget={},this.limboTargetsByKey=new Se(ce.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new zn,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=Ze.forSyncEngine(),this.isPrimary=void 0,this.onlineState=gr.Unknown}return Object.defineProperty(e.prototype,\"isPrimaryClient\",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),e.prototype.subscribe=function(e){v(null!==e,\"SyncEngine listener cannot be null\"),v(null===this.syncEngineListener,\"SyncEngine already has a subscriber.\"),this.syncEngineListener=e},e.prototype.listen=function(e){return s.__awaiter(this,void 0,void 0,function(){var t,n,r,i,o;return s.__generator(this,function(s){switch(s.label){case 0:return this.assertSubscribed(\"listen()\"),(r=this.queryViewsByQuery.get(e))?(this.sharedClientState.addLocalQueryTarget(t=r.targetId),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateQuery(e)];case 2:return i=s.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),t=i.targetId,[4,this.initializeViewAndComputeSnapshot(i,\"current\"===o)];case 3:n=s.sent(),this.isPrimary&&this.remoteStore.listen(i),s.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,t]}})})},e.prototype.initializeViewAndComputeSnapshot=function(e,t){return s.__awaiter(this,void 0,void 0,function(){var n,r,i,o,a,u,c,l;return s.__generator(this,function(s){switch(s.label){case 0:return[4,this.localStore.executeQuery(n=e.query)];case 1:return r=s.sent(),[4,this.localStore.remoteDocumentKeys(e.targetId)];case 2:return i=s.sent(),o=new wi(n,i),a=o.computeDocChanges(r),u=Ar.createSynthesizedTargetChangeForCurrentChange(e.targetId,t&&this.onlineState!==gr.Offline),v(0===(c=o.applyChanges(a,!0===this.isPrimary,u)).limboChanges.length,\"View returned limbo docs before target ack from the server.\"),v(!!c.snapshot,\"applyChanges for new view should always return a snapshot\"),l=new Si(n,e.targetId,o),this.queryViewsByQuery.set(n,l),this.queryViewsByTarget[e.targetId]=l,[2,c.snapshot]}})})},e.prototype.synchronizeViewAndComputeSnapshot=function(e){return s.__awaiter(this,void 0,void 0,function(){var t,n,r;return s.__generator(this,function(i){switch(i.label){case 0:return[4,this.localStore.executeQuery(e.query)];case 1:return t=i.sent(),[4,this.localStore.remoteDocumentKeys(e.targetId)];case 2:return n=i.sent(),r=e.view.synchronizeWithPersistedState(t,n),this.isPrimary&&this.updateTrackedLimbos(e.targetId,r.limboChanges),[2,r]}})})},e.prototype.unlisten=function(e){return s.__awaiter(this,void 0,void 0,function(){var t,n=this;return s.__generator(this,function(r){switch(r.label){case 0:return this.assertSubscribed(\"unlisten()\"),v(!!(t=this.queryViewsByQuery.get(e)),\"Trying to unlisten on query not found:\"+e),this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.sharedClientState.isActiveQueryTarget(t.targetId)?[3,2]:[4,this.localStore.releaseQuery(e,!1).then(function(){n.sharedClientState.clearQueryState(t.targetId),n.remoteStore.unlisten(t.targetId),n.removeAndCleanupQuery(t)}).catch(Fn)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupQuery(t),[4,this.localStore.releaseQuery(e,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}})})},e.prototype.write=function(e,t){return s.__awaiter(this,void 0,void 0,function(){var n;return s.__generator(this,function(r){switch(r.label){case 0:return this.assertSubscribed(\"write()\"),[4,this.localStore.localWrite(e)];case 1:return n=r.sent(),this.sharedClientState.addPendingMutation(n.batchId),this.addMutationCallback(n.batchId,t),[4,this.emitNewSnapsAndNotifyLocalStore(n.changes)];case 2:return r.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return r.sent(),[2]}})})},e.prototype.runTransaction=function(e,t,n){new Ci(e,this.remoteStore,t,n).run()},e.prototype.applyRemoteEvent=function(e){return s.__awaiter(this,void 0,void 0,function(){var t,n=this;return s.__generator(this,function(r){switch(r.label){case 0:this.assertSubscribed(\"applyRemoteEvent()\"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(e)];case 2:return t=r.sent(),O(e.targetChanges,function(e,t){var r=n.limboResolutionsByTarget[Number(e)];r&&(v(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1,\"Limbo resolution for single document contains multiple changes.\"),t.addedDocuments.size>0?r.receivedDocument=!0:t.modifiedDocuments.size>0?v(r.receivedDocument,\"Received change for limbo target document without add.\"):t.removedDocuments.size>0&&(v(r.receivedDocument,\"Received remove for limbo target document without add.\"),r.receivedDocument=!1))}),[4,this.emitNewSnapsAndNotifyLocalStore(t,e)];case 3:return r.sent(),[3,6];case 4:return[4,Fn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}})})},e.prototype.applyOnlineStateChange=function(e,t){if(this.isPrimary&&t===yr.RemoteStore||!this.isPrimary&&t===yr.SharedClientState){this.assertSubscribed(\"applyOnlineStateChange()\");var n=[];this.queryViewsByQuery.forEach(function(t,r){var i=r.view.applyOnlineStateChange(e);v(0===i.limboChanges.length,\"OnlineState should not affect limbo documents.\"),i.snapshot&&n.push(i.snapshot)}),this.syncEngineListener.onOnlineStateChange(e),this.syncEngineListener.onWatchChange(n),this.onlineState=e,this.isPrimary&&this.sharedClientState.setOnlineState(e)}},e.prototype.rejectListen=function(e,t){return s.__awaiter(this,void 0,void 0,function(){var n,r,i,o,a,u,c=this;return s.__generator(this,function(s){switch(s.label){case 0:return this.assertSubscribed(\"rejectListens()\"),this.sharedClientState.updateQueryState(e,\"rejected\",t),(r=(n=this.limboResolutionsByTarget[e])&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[e],i=(i=new Se(ce.comparator)).insert(r,new $t(r,Ce.forDeletedDoc())),o=Fe().add(r),a=new Nr(Ce.MIN,{},new Ne(G),i,o),[2,this.applyRemoteEvent(a)]):[3,1];case 1:return v(!!(u=this.queryViewsByTarget[e]),\"Unknown targetId: \"+e),[4,this.localStore.releaseQuery(u.query,!1).then(function(){return c.removeAndCleanupQuery(u)}).catch(Fn)];case 2:s.sent(),this.syncEngineListener.onWatchError(u.query,t),s.label=3;case 3:return[2]}})})},e.prototype.applyBatchState=function(e,t,n){return s.__awaiter(this,void 0,void 0,function(){var r;return s.__generator(this,function(i){switch(i.label){case 0:return this.assertSubscribed(\"applyBatchState()\"),[4,this.localStore.lookupMutationDocuments(e)];case 1:return null===(r=i.sent())?(p(\"SyncEngine\",\"Cannot apply mutation batch with id: \"+e),[2]):\"pending\"!==t?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:\"acknowledged\"===t||\"rejected\"===t?(this.processUserCallback(e,n||null),this.localStore.removeCachedMutationBatchMetadata(e)):y(\"Unknown batchState: \"+t),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}})})},e.prototype.applySuccessfulWrite=function(e){return s.__awaiter(this,void 0,void 0,function(){var t,n;return s.__generator(this,function(r){switch(r.label){case 0:this.assertSubscribed(\"applySuccessfulWrite()\"),this.processUserCallback(t=e.batch.batchId,null),this.triggerPendingWritesCallbacks(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(t,\"acknowledged\"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,Fn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}})})},e.prototype.rejectFailedWrite=function(e,t){return s.__awaiter(this,void 0,void 0,function(){var n;return s.__generator(this,function(r){switch(r.label){case 0:this.assertSubscribed(\"rejectFailedWrite()\"),this.processUserCallback(e,t),this.triggerPendingWritesCallbacks(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(e,\"rejected\",t),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,Fn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}})})},e.prototype.registerPendingWritesCallback=function(e){return s.__awaiter(this,void 0,void 0,function(){var t,n;return s.__generator(this,function(r){switch(r.label){case 0:return this.remoteStore.canUseNetwork()||p(\"SyncEngine\",\"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.\"),[4,this.localStore.getHighestUnacknowledgedBatchId()];case 1:return-1===(t=r.sent())?(e.resolve(),[2]):((n=this.pendingWritesCallbacks.get(t)||[]).push(e),this.pendingWritesCallbacks.set(t,n),[2])}})})},e.prototype.triggerPendingWritesCallbacks=function(e){(this.pendingWritesCallbacks.get(e)||[]).forEach(function(e){e.resolve()}),this.pendingWritesCallbacks.delete(e)},e.prototype.rejectOutstandingPendingWritesCallbacks=function(e){this.pendingWritesCallbacks.forEach(function(t){t.forEach(function(t){t.reject(new E(w.CANCELLED,e))})}),this.pendingWritesCallbacks.clear()},e.prototype.addMutationCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new Se(G)),n=n.insert(e,t),this.mutationUserCallbacks[this.currentUser.toKey()]=n},e.prototype.processUserCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(e);r&&(v(e===n.minKey(),\"Mutation callbacks processed out-of-order?\"),t?r.reject(t):r.resolve(),n=n.remove(e)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},e.prototype.removeAndCleanupQuery=function(e){var t=this;if(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.queryViewsByQuery.delete(e.query),delete this.queryViewsByTarget[e.targetId],this.isPrimary){var n=this.limboDocumentRefs.referencesForId(e.targetId);this.limboDocumentRefs.removeReferencesForId(e.targetId),n.forEach(function(e){t.limboDocumentRefs.containsKey(e)||t.removeLimboTarget(e)})}},e.prototype.removeLimboTarget=function(e){var t=this.limboTargetsByKey.get(e);null!==t&&(this.remoteStore.unlisten(t),this.limboTargetsByKey=this.limboTargetsByKey.remove(e),delete this.limboResolutionsByTarget[t])},e.prototype.updateTrackedLimbos=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n];i instanceof bi?(this.limboDocumentRefs.addReference(i.key,e),this.trackLimboChange(i)):i instanceof _i?(p(\"SyncEngine\",\"Document no longer in limbo: \"+i.key),this.limboDocumentRefs.removeReference(i.key,e),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)):y(\"Unknown limbo change: \"+JSON.stringify(i))}},e.prototype.trackLimboChange=function(e){var t=e.key;if(!this.limboTargetsByKey.get(t)){p(\"SyncEngine\",\"New document in limbo: \"+t);var n=this.limboTargetIdGenerator.next(),r=qr.atPath(t.path);this.limboResolutionsByTarget[n]=new Ti(t),this.remoteStore.listen(new Tn(r,n,Sn.LimboResolution,ie.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(t,n)}},e.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},e.prototype.emitNewSnapsAndNotifyLocalStore=function(e,t){return s.__awaiter(this,void 0,void 0,function(){var n,r,i,o=this;return s.__generator(this,function(s){switch(s.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach(function(s,a){i.push(Promise.resolve().then(function(){var t=a.view.computeDocChanges(e);return t.needsRefill?o.localStore.executeQuery(a.query).then(function(e){return a.view.computeDocChanges(e,t)}):t}).then(function(e){var i=a.view.applyChanges(e,!0===o.isPrimary,t&&t.targetChanges[a.targetId]);if(o.updateTrackedLimbos(a.targetId,i.limboChanges),i.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(a.targetId,i.snapshot.fromCache?\"not-current\":\"current\"),n.push(i.snapshot);var s=vi.fromSnapshot(a.targetId,i.snapshot);r.push(s)}}))}),[4,Promise.all(i)];case 1:return s.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return s.sent(),[2]}})})},e.prototype.assertSubscribed=function(e){v(null!==this.syncEngineListener,\"Trying to call \"+e+\" before calling subscribe().\")},e.prototype.handleCredentialChange=function(e){return s.__awaiter(this,void 0,void 0,function(){var t,n;return s.__generator(this,function(r){switch(r.label){case 0:return t=!this.currentUser.isEqual(e),this.currentUser=e,t?(this.rejectOutstandingPendingWritesCallbacks(\"'waitForPendingWrites' promise is rejected due to a user change.\"),[4,this.localStore.handleUserChange(e)]):[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}})})},e.prototype.applyPrimaryState=function(e){return s.__awaiter(this,void 0,void 0,function(){var t,n,r,i,o,a,u=this;return s.__generator(this,function(s){switch(s.label){case 0:return!0!==e||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return s.sent(),t=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(t.toArray())];case 2:for(n=s.sent(),r=0,i=n;r<i.length;r++)this.remoteStore.listen(i[r]);return[3,7];case 3:return!1!==e||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,o=[],a=Promise.resolve(),I(this.queryViewsByTarget,function(e,t){u.sharedClientState.isLocalQueryTarget(e)?o.push(e):a=a.then(function(){return u.unlisten(t.query)}),u.remoteStore.unlisten(t.targetId)}),[4,a]);case 4:return s.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(o)];case 5:return s.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:s.sent(),s.label=7;case 7:return[2]}})})},e.prototype.resetLimboDocuments=function(){var e=this;I(this.limboResolutionsByTarget,function(t){e.remoteStore.unlisten(t)}),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new Se(ce.comparator)},e.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(e){return s.__awaiter(this,void 0,void 0,function(){var t,n,r,i,o,a,u,c,l;return s.__generator(this,function(s){switch(s.label){case 0:t=[],n=[],r=0,i=e,s.label=1;case 1:return r<i.length?(a=void 0,(u=this.queryViewsByTarget[o=i[r]])?[4,this.localStore.releaseQuery(u.query,!0)]:[3,5]):[3,11];case 2:return s.sent(),[4,this.localStore.allocateQuery(u.query)];case 3:return a=s.sent(),[4,this.synchronizeViewAndComputeSnapshot(u)];case 4:return(c=s.sent()).snapshot&&n.push(c.snapshot),[3,9];case 5:return v(!0===this.isPrimary,\"A secondary tab should never have an active query without an active view.\"),[4,this.localStore.getQueryForTarget(o)];case 6:return v(!!(l=s.sent()),\"Query data for target \"+o+\" not found\"),[4,this.localStore.allocateQuery(l)];case 7:return a=s.sent(),[4,this.initializeViewAndComputeSnapshot(a,!1)];case 8:s.sent(),s.label=9;case 9:t.push(a),s.label=10;case 10:return r++,[3,1];case 11:return this.syncEngineListener.onWatchChange(n),[2,t]}})})},e.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},e.prototype.applyTargetState=function(e,t,n){return s.__awaiter(this,void 0,void 0,function(){var r,i,o,a,u;return s.__generator(this,function(s){switch(s.label){case 0:if(this.isPrimary)return p(\"SyncEngine\",\"Ignoring unexpected query state notification.\"),[2];if(!this.queryViewsByTarget[e])return[3,11];switch(t){case\"current\":case\"not-current\":return[3,1];case\"rejected\":return[3,8]}return[3,10];case 1:return s.trys.push([1,4,,8]),[4,this.localStore.getNewDocumentChanges()];case 2:return r=s.sent(),i=Nr.createSynthesizedRemoteEventForCurrentChange(e,\"current\"===t),[4,this.emitNewSnapsAndNotifyLocalStore(r,i)];case 3:return s.sent(),[3,11];case 4:return(c=o=s.sent()).code!==w.DATA_LOSS||c.message!==Qt?[3,6]:(a=[],I(this.queryViewsByTarget,function(e){return a.push(e)}),[4,this.synchronizeQueryViewsAndRaiseSnapshots(a)]);case 5:return s.sent(),[3,7];case 6:throw o;case 7:return[3,8];case 8:return this.removeAndCleanupQuery(u=this.queryViewsByTarget[e]),[4,this.localStore.releaseQuery(u.query,!0)];case 9:return s.sent(),this.syncEngineListener.onWatchError(u.query,n),[3,11];case 10:y(\"Unexpected target state: \"+t),s.label=11;case 11:return[2]}var c})})},e.prototype.applyActiveTargetsChange=function(e,t){return s.__awaiter(this,void 0,void 0,function(){var n,r,i,o,a,u,c,l,h,d=this;return s.__generator(this,function(f){switch(f.label){case 0:if(!this.isPrimary)return[2];n=0,r=e,f.label=1;case 1:return n<r.length?(v(!this.queryViewsByTarget[h=r[n]],\"Trying to add an already active target\"),[4,this.localStore.getQueryForTarget(h)]):[3,6];case 2:return v(!!(i=f.sent()),\"Query data for active target \"+h+\" not found\"),[4,this.localStore.allocateQuery(i)];case 3:return o=f.sent(),[4,this.initializeViewAndComputeSnapshot(o,!1)];case 4:f.sent(),this.remoteStore.listen(o),f.label=5;case 5:return n++,[3,1];case 6:a=function(e){var t;return s.__generator(this,function(n){switch(n.label){case 0:return(t=u.queryViewsByTarget[e])?[4,u.localStore.releaseQuery(t.query,!1).then(function(){d.remoteStore.unlisten(e),d.removeAndCleanupQuery(t)}).catch(Fn)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})},u=this,c=0,l=t,f.label=7;case 7:return c<l.length?[5,a(h=l[c])]:[3,10];case 8:f.sent(),f.label=9;case 9:return c++,[3,7];case 10:return[2]}})})},e.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},e.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},e.prototype.getRemoteKeysForTarget=function(e){var t=this.limboResolutionsByTarget[e];return t&&t.receivedDocument?Fe().add(t.key):this.queryViewsByTarget[e]?this.queryViewsByTarget[e].view.syncedDocuments:Fe()},e}(),Oi=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?\"uid:\"+this.uid:\"anonymous-user\"},e.prototype.isEqual=function(e){return e.uid===this.uid},e.UNAUTHENTICATED=new e(null),e.GOOGLE_CREDENTIALS=new e(\"google-credentials-uid\"),e.FIRST_PARTY=new e(\"first-party-uid\"),e}(),Ni=\"SharedClientState\",Ai=\"firestore_clients\",Ri=\"firestore_mutations\",Di=\"firestore_targets\",ki=\"firestore_online_state\",xi=\"firestore_sequence_number\",Pi=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r,v(void 0!==r==(\"rejected\"===n),\"MutationMetadata must contain an error iff state is 'rejected'\")}return e.fromWebStorageEntry=function(t,n,r){var i=JSON.parse(r),o=\"object\"==typeof i&&-1!==[\"pending\",\"acknowledged\",\"rejected\"].indexOf(i.state)&&(void 0===i.error||\"object\"==typeof i.error),s=void 0;return o&&i.error&&(o=\"string\"==typeof i.error.message&&\"string\"==typeof i.error.code)&&(s=new E(i.error.code,i.error.message)),o?new e(t,n,i.state,s):(m(Ni,\"Failed to parse mutation state for ID '\"+n+\"': \"+r),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Li=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n,v(void 0!==n==(\"rejected\"===t),\"QueryTargetMetadata must contain an error iff state is 'rejected'\")}return e.fromWebStorageEntry=function(t,n){var r=JSON.parse(n),i=\"object\"==typeof r&&-1!==[\"not-current\",\"current\",\"rejected\"].indexOf(r.state)&&(void 0===r.error||\"object\"==typeof r.error),o=void 0;return i&&r.error&&(i=\"string\"==typeof r.error.message&&\"string\"==typeof r.error.code)&&(o=new E(r.error.code,r.error.message)),i?new e(t,r.state,o):(m(Ni,\"Failed to parse target state for ID '\"+t+\"': \"+n),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Mi=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.fromWebStorageEntry=function(t,n){for(var r=JSON.parse(n),i=\"object\"==typeof r&&r.activeTargetIds instanceof Array,o=Ve(),s=0;i&&s<r.activeTargetIds.length;++s)i=or(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new e(t,o):(m(Ni,\"Failed to parse client data for instance '\"+t+\"': \"+n),null)},e}(),ji=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.fromWebStorageEntry=function(t){var n=JSON.parse(t);return\"object\"==typeof n&&n.onlineState in gr&&\"string\"==typeof n.clientId?new e(n.clientId,gr[n.onlineState]):(m(Ni,\"Failed to parse online state: \"+t),null)},e}(),Fi=function(){function e(){this.activeTargetIds=Ve()}return e.prototype.addQueryTarget=function(e){v(!this.activeTargetIds.has(e),\"Target with ID '\"+e+\"' already active.\"),this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.removeQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.toWebStorageJSON=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),Ui=function(){function e(t,n,r,i,o){if(this.queue=t,this.platform=n,this.persistenceKey=r,this.localClientId=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!e.isAvailable(this.platform))throw new E(w.UNIMPLEMENTED,\"LocalStorage is not available on this platform.\");var s=r.replace(/[.*+?^${}()|[\\]\\\\]/g,\"\\\\$&\");this.storage=this.platform.window.localStorage,this.currentUser=o,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey=xi+\"_\"+r,this.activeClients[this.localClientId]=new Fi,this.clientStateKeyRe=new RegExp(\"^\"+Ai+\"_\"+s+\"_([^_]*)$\"),this.mutationBatchKeyRe=new RegExp(\"^\"+Ri+\"_\"+s+\"_(\\\\d+)(?:_(.*))?$\"),this.queryTargetKeyRe=new RegExp(\"^\"+Di+\"_\"+s+\"_(\\\\d+)$\"),this.onlineStateKey=ki+\"_\"+r,this.platform.window.addEventListener(\"storage\",this.storageListener)}return e.isAvailable=function(e){return!(!e.window||null==e.window.localStorage)},e.prototype.start=function(){return s.__awaiter(this,void 0,void 0,function(){var e,t,n,r,i,o,a,u,c,l,h=this;return s.__generator(this,function(s){switch(s.label){case 0:return v(!this.started,\"WebStorageSharedClientState already started\"),v(null!==this.syncEngine,\"syncEngine property must be set before calling start()\"),v(null!==this.onlineStateHandler,\"onlineStateHandler property must be set before calling start()\"),[4,this.syncEngine.getActiveClients()];case 1:for(e=s.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.localClientId&&(i=this.getItem(this.toWebStorageClientStateKey(r)))&&(o=Mi.fromWebStorageEntry(r,i))&&(this.activeClients[o.clientId]=o);for(this.persistClientState(),(a=this.storage.getItem(this.onlineStateKey))&&(u=this.fromWebStorageOnlineState(a))&&this.handleOnlineStateEvent(u),c=0,l=this.earlyEvents;c<l.length;c++)this.handleWebStorageEvent(l[c]);return this.earlyEvents=[],this.platform.window.addEventListener(\"unload\",function(){return h.shutdown()}),this.started=!0,[2]}})})},e.prototype.writeSequenceNumber=function(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){var e=Ve();return O(this.activeClients,function(t,n){e=e.unionWith(n.activeTargetIds)}),e},e.prototype.isActiveQueryTarget=function(e){for(var t in this.activeClients)if(this.activeClients.hasOwnProperty(t)&&this.activeClients[t].activeTargetIds.has(e))return!0;return!1},e.prototype.addPendingMutation=function(e){this.persistMutationState(e,\"pending\")},e.prototype.updateMutationState=function(e,t,n){this.persistMutationState(e,t,n),this.removeMutationState(e)},e.prototype.addLocalQueryTarget=function(e){var t=\"not-current\";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(e));if(n){var r=Li.fromWebStorageEntry(e,n);r&&(t=r.state)}}return this.localClientState.addQueryTarget(e),this.persistClientState(),t},e.prototype.removeLocalQueryTarget=function(e){this.localClientState.removeQueryTarget(e),this.persistClientState()},e.prototype.isLocalQueryTarget=function(e){return this.localClientState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(this.toWebStorageQueryTargetMetadataKey(e))},e.prototype.updateQueryState=function(e,t,n){this.persistQueryTargetState(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach(function(e){r.removeMutationState(e)}),this.currentUser=e,n.forEach(function(e){r.addPendingMutation(e)})},e.prototype.setOnlineState=function(e){this.persistOnlineState(e)},e.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener(\"storage\",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return p(Ni,\"READ\",e,t),t},e.prototype.setItem=function(e,t){p(Ni,\"SET\",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){p(Ni,\"REMOVE\",e),this.storage.removeItem(e)},e.prototype.handleWebStorageEvent=function(e){var t=this;if(e.storageArea===this.storage){if(p(Ni,\"EVENT\",e.key,e.newValue),e.key===this.localClientStorageKey)return void m(\"Received WebStorage notification for local change. Another client might have garbage-collected our state\");this.queue.enqueueAndForget(function(){return s.__awaiter(t,void 0,void 0,function(){var t,n,r,i,o,a;return s.__generator(this,function(s){if(!this.started)return this.earlyEvents.push(e),[2];if(null===e.key)return[2];if(this.clientStateKeyRe.test(e.key)){if(null==e.newValue)return n=this.fromWebStorageClientStateKey(e.key),[2,this.handleClientStateEvent(n,null)];if(t=this.fromWebStorageClientState(e.key,e.newValue))return[2,this.handleClientStateEvent(t.clientId,t)]}else if(this.mutationBatchKeyRe.test(e.key)){if(null!==e.newValue&&(r=this.fromWebStorageMutationMetadata(e.key,e.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(e.key)){if(null!==e.newValue&&(i=this.fromWebStorageQueryTargetMetadata(e.key,e.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(e.key===this.onlineStateKey){if(null!==e.newValue&&(o=this.fromWebStorageOnlineState(e.newValue)))return[2,this.handleOnlineStateEvent(o)]}else e.key===this.sequenceNumberKey&&(v(!!this.sequenceNumberHandler,\"Missing sequenceNumberHandler\"),(a=function(e){var t=ie.INVALID;if(null!=e)try{var n=JSON.parse(e);v(\"number\"==typeof n,\"Found non-numeric sequence number\"),t=n}catch(r){m(Ni,\"Failed to read sequence number from WebStorage\",r)}return t}(e.newValue))!==ie.INVALID&&this.sequenceNumberHandler(a));return[2]})})})}},Object.defineProperty(e.prototype,\"localClientState\",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),e.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},e.prototype.persistMutationState=function(e,t,n){var r=new Pi(this.currentUser,e,t,n),i=this.toWebStorageMutationBatchKey(e);this.setItem(i,r.toWebStorageJSON())},e.prototype.removeMutationState=function(e){var t=this.toWebStorageMutationBatchKey(e);this.removeItem(t)},e.prototype.persistOnlineState=function(e){this.storage.setItem(this.onlineStateKey,JSON.stringify({clientId:this.localClientId,onlineState:gr[e]}))},e.prototype.persistQueryTargetState=function(e,t,n){var r=this.toWebStorageQueryTargetMetadataKey(e),i=new Li(e,t,n);this.setItem(r,i.toWebStorageJSON())},e.prototype.toWebStorageClientStateKey=function(e){return v(-1===e.indexOf(\"_\"),\"Client key cannot contain '_', but was '\"+e+\"'\"),Ai+\"_\"+this.persistenceKey+\"_\"+e},e.prototype.toWebStorageQueryTargetMetadataKey=function(e){return Di+\"_\"+this.persistenceKey+\"_\"+e},e.prototype.toWebStorageMutationBatchKey=function(e){var t=Ri+\"_\"+this.persistenceKey+\"_\"+e;return this.currentUser.isAuthenticated()&&(t+=\"_\"+this.currentUser.uid),t},e.prototype.fromWebStorageClientStateKey=function(e){var t=this.clientStateKeyRe.exec(e);return t?t[1]:null},e.prototype.fromWebStorageClientState=function(e,t){var n=this.fromWebStorageClientStateKey(e);return v(null!==n,\"Cannot parse client state key '\"+e+\"'\"),Mi.fromWebStorageEntry(n,t)},e.prototype.fromWebStorageMutationMetadata=function(e,t){var n=this.mutationBatchKeyRe.exec(e);v(null!==n,\"Cannot parse mutation batch key '\"+e+\"'\");var r=Number(n[1]);return Pi.fromWebStorageEntry(new Oi(void 0!==n[2]?n[2]:null),r,t)},e.prototype.fromWebStorageQueryTargetMetadata=function(e,t){var n=this.queryTargetKeyRe.exec(e);v(null!==n,\"Cannot parse query target key '\"+e+\"'\");var r=Number(n[1]);return Li.fromWebStorageEntry(r,t)},e.prototype.fromWebStorageOnlineState=function(e){return ji.fromWebStorageEntry(e)},e.prototype.handleMutationBatchEvent=function(e){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){return e.user.uid!==this.currentUser.uid?(p(Ni,\"Ignoring mutation for non-active user \"+e.user.uid),[2]):[2,this.syncEngine.applyBatchState(e.batchId,e.state,e.error)]})})},e.prototype.handleQueryTargetEvent=function(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)},e.prototype.handleClientStateEvent=function(e,t){var n=this,r=this.getAllActiveQueryTargets();t?this.activeClients[e]=t:delete this.activeClients[e];var i=this.getAllActiveQueryTargets(),o=[],a=[];return i.forEach(function(e){return s.__awaiter(n,void 0,void 0,function(){return s.__generator(this,function(t){return r.has(e)||o.push(e),[2]})})}),r.forEach(function(e){return s.__awaiter(n,void 0,void 0,function(){return s.__generator(this,function(t){return i.has(e)||a.push(e),[2]})})}),this.syncEngine.applyActiveTargetsChange(o,a)},e.prototype.handleOnlineStateEvent=function(e){this.activeClients[e.clientId]&&this.onlineStateHandler(e.onlineState)},e}(),Vi=function(){function e(){this.localState=new Fi,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.localState.addQueryTarget(e),this.queryState[e]||\"not-current\"},e.prototype.updateQueryState=function(e,t,n){this.queryState[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.localState.removeQueryTarget(e)},e.prototype.isLocalQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.queryState[e]},e.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.start=function(){return this.localState=new Fi,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e}(),qi=function(){function e(e,t){this.cacheSizeBytes=e,this.synchronizeTabs=t}return e.prototype.lruParams=function(){return Rn.withCacheSize(this.cacheSizeBytes)},e}(),Bi=function(){return function(){}}(),$i=function(){function e(e,t,n,r){this.platform=e,this.databaseInfo=t,this.credentials=n,this.asyncQueue=r,this.clientId=Q.newId()}return e.prototype.start=function(e){var t=this;this.verifyNotTerminated();var n=new le,r=new le,i=!1;return this.credentials.setChangeListener(function(o){i?t.asyncQueue.enqueueAndForget(function(){return t.handleCredentialChange(o)}):(i=!0,t.initializePersistence(e,r,o).then(function(e){return t.initializeRest(o,e)}).then(n.resolve,n.reject))}),this.asyncQueue.enqueueAndForget(function(){return n.promise}),r.promise},e.prototype.enableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return e.syncEngine.enableNetwork()})},e.prototype.initializePersistence=function(e,t,n){var r=this;return e instanceof qi?this.startIndexedDbPersistence(n,e).then(function(e){return t.resolve(),e}).catch(function(e){if(t.reject(e),!r.canFallback(e))throw e;return console.warn(\"Error enabling offline persistence. Falling back to persistence disabled: \"+e),r.startMemoryPersistence()}):(t.resolve(),this.startMemoryPersistence())},e.prototype.canFallback=function(e){return e instanceof E?e.code===w.FAILED_PRECONDITION||e.code===w.UNIMPLEMENTED:!(\"undefined\"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new E(w.FAILED_PRECONDITION,\"The client has already been terminated.\")},e.prototype.startIndexedDbPersistence=function(e,t){var n=this,r=jn.buildStoragePrefix(this.databaseInfo),i=new pi(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then(function(){return s.__awaiter(n,void 0,void 0,function(){var n,o;return s.__generator(this,function(s){switch(s.label){case 0:if(t.synchronizeTabs&&!Ui.isAvailable(this.platform))throw new E(w.UNIMPLEMENTED,\"IndexedDB persistence is only available on platforms that support LocalStorage.\");return n=t.lruParams(),this.sharedClientState=t.synchronizeTabs?new Ui(this.asyncQueue,this.platform,r,this.clientId,e):new Vi,[4,jn.createIndexedDbPersistence({allowTabSynchronization:t.synchronizeTabs,persistenceKey:r,clientId:this.clientId,platform:this.platform,queue:this.asyncQueue,serializer:i,lruParams:n,sequenceNumberSyncer:this.sharedClientState})];case 1:return o=s.sent(),this.persistence=o,[2,o.referenceDelegate.garbageCollector]}})})})},e.prototype.startMemoryPersistence=function(){return this.persistence=Yn.createEagerPersistence(this.clientId),this.sharedClientState=new Vi,Promise.resolve(null)},e.prototype.initializeRest=function(e,t){var n=this;return p(\"FirestoreClient\",\"Initializing. user=\",e.uid),this.platform.loadConnection(this.databaseInfo).then(function(r){return s.__awaiter(n,void 0,void 0,function(){var n,i,o,a,u=this;return s.__generator(this,function(c){switch(c.label){case 0:return this.localStore=new Hn(this.persistence,e),t&&(this.lruScheduler=new Dn(t,this.asyncQueue,this.localStore)),n=this.platform.newConnectivityMonitor(),i=this.platform.newSerializer(this.databaseInfo.databaseId),o=new pr(this.asyncQueue,r,this.credentials,i),a=function(e){return u.syncEngine.applyOnlineStateChange(e,yr.SharedClientState)},this.remoteStore=new Ur(this.localStore,o,this.asyncQueue,function(e){return u.syncEngine.applyOnlineStateChange(e,yr.RemoteStore)},n),this.syncEngine=new Ii(this.localStore,this.remoteStore,this.sharedClientState,e),this.sharedClientState.onlineStateHandler=a,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new gi(this.syncEngine),[4,this.sharedClientState.start()];case 1:return c.sent(),[4,this.remoteStore.start()];case 2:return c.sent(),[4,this.persistence.setPrimaryStateListener(function(e){return s.__awaiter(u,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return[4,this.syncEngine.applyPrimaryState(e)];case 1:return t.sent(),this.lruScheduler&&(e&&!this.lruScheduler.started?this.lruScheduler.start():e||this.lruScheduler.stop()),[2]}})})})];case 3:return c.sent(),[4,this.persistence.setDatabaseDeletedListener(function(){return s.__awaiter(u,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return[4,this.terminate()];case 1:return e.sent(),[2]}})})})];case 4:return c.sent(),[2]}})})})},e.prototype.handleCredentialChange=function(e){return this.asyncQueue.verifyOperationInProgress(),p(\"FirestoreClient\",\"Credential Changed. Current user: \"+e.uid),this.syncEngine.handleCredentialChange(e)},e.prototype.disableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return e.syncEngine.disableNetwork()})},e.prototype.terminate=function(){var e=this;return this.asyncQueue.enqueueAndInitiateShutdown(function(){return s.__awaiter(e,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown()];case 3:return e.sent(),this.credentials.removeChangeListener(),[2]}})})})},e.prototype.waitForPendingWrites=function(){var e=this;this.verifyNotTerminated();var t=new le;return this.asyncQueue.enqueueAndForget(function(){return e.syncEngine.registerPendingWritesCallback(t)}),t.promise},e.prototype.listen=function(e,t,n){var r=this;this.verifyNotTerminated();var i=new yi(e,t,n);return this.asyncQueue.enqueueAndForget(function(){return r.eventMgr.listen(i)}),i},e.prototype.unlisten=function(e){var t=this;this.clientTerminated||this.asyncQueue.enqueueAndForget(function(){return t.eventMgr.unlisten(e)})},e.prototype.getDocumentFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return t.localStore.readDocument(e)}).then(function(e){if(e instanceof Bt)return e;if(e instanceof $t)return null;throw new E(w.UNAVAILABLE,\"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)\")})},e.prototype.getDocumentsFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return t.localStore.executeQuery(e)}).then(function(t){var n=Fe(),r=new wi(e,n),i=r.computeDocChanges(t);return r.applyChanges(i,!1).snapshot})},e.prototype.write=function(e){var t=this;this.verifyNotTerminated();var n=new le;return this.asyncQueue.enqueueAndForget(function(){return t.syncEngine.write(e,n)}),n.promise},e.prototype.databaseId=function(){return this.databaseInfo.databaseId},e.prototype.addSnapshotsInSyncListener=function(e){var t=this;this.verifyNotTerminated(),this.asyncQueue.enqueueAndForget(function(){return t.eventMgr.addSnapshotsInSyncListener(e),Promise.resolve()})},e.prototype.removeSnapshotsInSyncListener=function(e){this.clientTerminated||this.eventMgr.removeSnapshotsInSyncListener(e)},Object.defineProperty(e.prototype,\"clientTerminated\",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),e.prototype.transaction=function(e){var t=this;this.verifyNotTerminated();var n=new le;return this.asyncQueue.enqueueAndForget(function(){return t.syncEngine.runTransaction(t.asyncQueue,e,n),Promise.resolve()}),n.promise},e}(),zi=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.scheduleEvent(this.observer.next,e)},e.prototype.error=function(e){this.scheduleEvent(this.observer.error,e)},e.prototype.mute=function(){this.muted=!0},e.prototype.scheduleEvent=function(e,t){var n=this;this.muted||setTimeout(function(){n.muted||e(t)},0)},e}(),Wi=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];!function(t,n,r,i){if(!(e instanceof Array)||e.length<1)throw new E(w.INVALID_ARGUMENT,\"Function FieldPath() requires its fieldNames argument to be an array with at least \"+H(1,\"element\")+\".\")}();for(var n=0;n<e.length;++n)if(x(\"FieldPath\",\"string\",n,e[n]),0===e[n].length)throw new E(w.INVALID_ARGUMENT,\"Invalid field name at argument $(i + 1). Field names must not be empty.\");this._internalPath=new ue(e)}return e.documentId=function(){return e._DOCUMENT_ID},e.prototype.isEqual=function(t){if(!(t instanceof e))throw z(\"isEqual\",\"FieldPath\",1,t);return this._internalPath.isEqual(t._internalPath)},e._DOCUMENT_ID=new e(ue.keyField().canonicalString()),e}(),Hi=new RegExp(\"[~\\\\*/\\\\[\\\\]]\"),Qi=function(){return function(e,t){this.user=t,this.type=\"OAuth\",this.authHeaders={Authorization:\"Bearer \"+e}}}(),Gi=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e){v(!this.changeListener,\"Can only call setChangeListener() once.\"),this.changeListener=e,e(Oi.UNAUTHENTICATED)},e.prototype.removeChangeListener=function(){v(null!==this.changeListener,\"removeChangeListener() when no listener registered\"),this.changeListener=null},e}(),Ki=function(){function e(e){var t=this;this.app=e,this.tokenListener=null,this.currentUser=Oi.UNAUTHENTICATED,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){t.tokenCounter++,t.currentUser=t.getUser(),t.changeListener&&t.changeListener(t.currentUser)},this.currentUser=this.getUser(),this.tokenCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}return e.prototype.getToken=function(){var e=this;v(null!=this.tokenListener,\"getToken cannot be called after listener removed.\");var t=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.app.INTERNAL.getToken(n).then(function(n){if(e.tokenCounter!==t)throw new E(w.ABORTED,\"getToken aborted due to token change.\");return n?(v(\"string\"==typeof n.accessToken,\"Invalid tokenData returned from getToken():\"+n),new Qi(n.accessToken,e.currentUser)):null})},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e){v(!this.changeListener,\"Can only call setChangeListener() once.\"),this.changeListener=e,e(this.currentUser)},e.prototype.removeChangeListener=function(){v(null!=this.tokenListener,\"removeChangeListener() called twice\"),v(null!==this.changeListener,\"removeChangeListener() called when no listener registered\"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},e.prototype.getUser=function(){var e=this.app.INTERNAL.getUid();return v(null===e||\"string\"==typeof e,\"Received invalid UID: \"+e),new Oi(e)},e}(),Yi=function(){function e(e,t){this.gapi=e,this.sessionIndex=t,this.type=\"FirstParty\",this.user=Oi.FIRST_PARTY}return Object.defineProperty(e.prototype,\"authHeaders\",{get:function(){var e={\"X-Goog-AuthUser\":this.sessionIndex},t=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),e},enumerable:!0,configurable:!0}),e}(),Xi=function(){function e(e,t){this.gapi=e,this.sessionIndex=t}return e.prototype.getToken=function(){return Promise.resolve(new Yi(this.gapi,this.sessionIndex))},e.prototype.setChangeListener=function(e){e(Oi.FIRST_PARTY)},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();function Ji(e){if(!e)return new Gi;switch(e.type){case\"gapi\":var t=e.client;return v(!(\"object\"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty),\"unexpected gapi interface\"),new Xi(t,e.sessionIndex||\"0\");case\"provider\":return e.client;default:throw new E(w.INVALID_ARGUMENT,\"makeCredentialsProvider failed due to invalid credential type\")}}function Zi(e){return function(e,t){if(\"object\"!=typeof e||null===e)return!1;for(var n=e,r=0,i=[\"next\",\"error\",\"complete\"];r<i.length;r++){var o=i[r];if(o in n&&\"function\"==typeof n[o])return!0}return!1}(e)}var eo=function(){function e(e){this._methodName=e}return e.delete=function(){return A(\"FieldValue.delete\",arguments),to.instance},e.serverTimestamp=function(){return A(\"FieldValue.serverTimestamp\",arguments),no.instance},e.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return D(\"FieldValue.arrayUnion\",arguments,1),new ro(e)},e.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return D(\"FieldValue.arrayRemove\",arguments,1),new io(e)},e.increment=function(e){return x(\"FieldValue.increment\",\"number\",1,e),R(\"FieldValue.increment\",arguments,1),new oo(e)},e.prototype.isEqual=function(e){return this===e},e}(),to=function(e){function t(){return e.call(this,\"FieldValue.delete\")||this}return s.__extends(t,e),t.instance=new t,t}(eo),no=function(e){function t(){return e.call(this,\"FieldValue.serverTimestamp\")||this}return s.__extends(t,e),t.instance=new t,t}(eo),ro=function(e){function t(t){var n=e.call(this,\"FieldValue.arrayUnion\")||this;return n._elements=t,n}return s.__extends(t,e),t}(eo),io=function(e){function t(t){var n=e.call(this,\"FieldValue.arrayRemove\")||this;return n._elements=t,n}return s.__extends(t,e),t}(eo),oo=function(e){function t(t){var n=e.call(this,\"FieldValue.increment\")||this;return n._operand=t,n}return s.__extends(t,e),t}(eo),so=C(eo,\"Use FieldValue.<field>() instead.\"),ao=/^__.*__$/,uo=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[];return n.push(null!==this.fieldMask?new _t(e,this.data,this.fieldMask,t):new bt(e,this.data,t)),this.fieldTransforms.length>0&&n.push(new wt(e,this.fieldTransforms)),n},e}(),co=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[new _t(e,this.data,this.fieldMask,t)];return this.fieldTransforms.length>0&&n.push(new wt(e,this.fieldTransforms)),n},e}(),lo=function(e){return e[e.Set=0]=\"Set\",e[e.Update=1]=\"Update\",e[e.MergeSet=2]=\"MergeSet\",e[e.Argument=3]=\"Argument\",e}({});function ho(e){switch(e){case lo.Set:case lo.MergeSet:case lo.Update:return!0;case lo.Argument:return!1;default:throw y(\"Unexpected case for UserDataSource: \"+e)}}var fo=function(){function e(e,t,n,r,i,o){this.dataSource=e,this.methodName=t,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return e.prototype.childContextForField=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(t),r},e.prototype.childContextForFieldPath=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},e.prototype.childContextForArray=function(t){return new e(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},e.prototype.createError=function(e){var t=null===this.path||this.path.isEmpty()?\"\":\" (found in field \"+this.path.toString()+\")\";return new E(w.INVALID_ARGUMENT,\"Function \"+this.methodName+\"() called with invalid data. \"+e+t)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})},e.prototype.validatePath=function(){if(null!==this.path)for(var e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))},e.prototype.validatePathSegment=function(e){if(ho(this.dataSource)&&ao.test(e))throw this.createError(\"Document fields cannot begin and end with __\")},e}(),po=function(){return function(e,t){this.databaseId=e,this.key=t}}(),mo=function(){function e(e){this.preConverter=e}return e.prototype.parseSetData=function(e,t){var n=new fo(lo.Set,e,ue.EMPTY_PATH);yo(\"Data must be an object, but it was:\",n,t);var r=this.parseData(t,n);return new uo(r,null,n.fieldTransforms)},e.prototype.parseMergeData=function(e,t,n){var r=new fo(lo.MergeSet,e,ue.EMPTY_PATH);yo(\"Data must be an object, but it was:\",r,t);var i,o,s=this.parseData(t,r);if(n){for(var a=new Ne(ue.comparator),u=0,c=n;u<c.length;u++){var l=c[u],h=void 0;if(l instanceof Wi)h=l._internalPath;else{if(\"string\"!=typeof l)throw y(\"Expected stringOrFieldPath to be a string or a FieldPath\");h=bo(e,l)}if(!r.contains(h))throw new E(w.INVALID_ARGUMENT,\"Field '\"+h+\"' is specified in your field mask but missing from your input data.\");a=a.add(h)}i=ft.fromSet(a),o=r.fieldTransforms.filter(function(e){return i.covers(e.field)})}else i=ft.fromArray(r.fieldMask),o=r.fieldTransforms;return new uo(s,i,o)},e.prototype.parseUpdateData=function(e,t){var n=this,r=new fo(lo.Update,e,ue.EMPTY_PATH);yo(\"Data must be an object, but it was:\",r,t);var i=new Ne(ue.comparator),o=Ut.EMPTY;O(t,function(t,s){var a=bo(e,t),u=r.childContextForFieldPath(a);if((s=n.runPreConverter(s,u))instanceof to)i=i.add(a);else{var c=n.parseData(s,u);null!=c&&(i=i.add(a),o=o.set(a,c))}});var s=ft.fromSet(i);return new co(o,s,r.fieldTransforms)},e.prototype.parseUpdateVarargs=function(e,t,n,r){var i=new fo(lo.Update,e,ue.EMPTY_PATH),o=[vo(e,t)],s=[n];if(r.length%2!=0)throw new E(w.INVALID_ARGUMENT,\"Function \"+e+\"() needs to be called with an even number of arguments that alternate between field names and values.\");for(var a=0;a<r.length;a+=2)o.push(vo(e,r[a])),s.push(r[a+1]);var u=new Ne(ue.comparator),c=Ut.EMPTY;for(a=0;a<o.length;++a){var l=o[a],h=i.childContextForFieldPath(l),d=this.runPreConverter(s[a],h);if(d instanceof to)u=u.add(l);else{var f=this.parseData(d,h);null!=f&&(u=u.add(l),c=c.set(l,f))}}var p=ft.fromSet(u);return new co(c,p,i.fieldTransforms)},e.prototype.parseQueryValue=function(e,t){var n=new fo(lo.Argument,e,ue.EMPTY_PATH),r=this.parseData(t,n);return v(null!=r,\"Parsed data should not be null.\"),v(0===n.fieldTransforms.length,\"Field transforms should have been disallowed.\"),r},e.prototype.runPreConverter=function(e,t){try{return this.preConverter(e)}catch(r){var n=_o(r);throw t.createError(n)}},e.prototype.parseData=function(e,t){if(go(e=this.runPreConverter(e,t)))return yo(\"Unsupported field value:\",t,e),this.parseObject(e,t);if(e instanceof eo)return this.parseSentinelFieldValue(e,t),null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.arrayElement)throw t.createError(\"Nested arrays are not supported\");return this.parseArray(e,t)}return this.parseScalarValue(e,t)},e.prototype.parseObject=function(e,t){var n=this,r=new Se(G);return N(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):O(e,function(e,i){var o=n.parseData(i,t.childContextForField(e));null!=o&&(r=r.insert(e,o))}),new Ut(r)},e.prototype.parseArray=function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var s=this.parseData(o[i],t.childContextForArray(r));null==s&&(s=Ot.INSTANCE),n.push(s),r++}return new Vt(n)},e.prototype.parseSentinelFieldValue=function(e,t){if(!ho(t.dataSource))throw t.createError(e._methodName+\"() can only be used with update() and set()\");if(null===t.path)throw t.createError(e._methodName+\"() is not currently supported inside arrays\");if(e instanceof to){if(t.dataSource!==lo.MergeSet)throw t.dataSource===lo.Update?(v(t.path.length>0,\"FieldValue.delete() at the top level should have already been handled.\"),t.createError(\"FieldValue.delete() can only appear at the top level of your update data\")):t.createError(\"FieldValue.delete() cannot be used with set() unless you pass {merge:true}\");t.fieldMask.push(t.path)}else if(e instanceof no)t.fieldTransforms.push(new pt(t.path,ti.instance));else if(e instanceof ro){var n=this.parseArrayTransformElements(e._methodName,e._elements),r=new ni(n);t.fieldTransforms.push(new pt(t.path,r))}else if(e instanceof io){n=this.parseArrayTransformElements(e._methodName,e._elements);var i=new ri(n);t.fieldTransforms.push(new pt(t.path,i))}else if(e instanceof oo){var o=this.parseQueryValue(\"FieldValue.increment\",e._operand),s=new ii(o);t.fieldTransforms.push(new pt(t.path,s))}else y(\"Unknown FieldValue type: \"+e)},e.prototype.parseScalarValue=function(e,t){if(null===e)return Ot.INSTANCE;if(\"number\"==typeof e)return or(e)?new Dt(e):new kt(e);if(\"boolean\"==typeof e)return Nt.of(e);if(\"string\"==typeof e)return new xt(e);if(e instanceof Date)return new Pt(Ee.fromDate(e));if(e instanceof Ee)return new Pt(new Ee(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)));if(e instanceof Vr)return new Ft(e);if(e instanceof Z)return new Mt(e);if(e instanceof po)return new jt(e.databaseId,e.key);throw t.createError(\"Unsupported field value: \"+q(e))},e.prototype.parseArrayTransformElements=function(e,t){var n=this;return t.map(function(t,r){var i=new fo(lo.Argument,e,ue.EMPTY_PATH);return n.parseData(t,i.childContextForArray(r))})},e}();function go(e){return!(\"object\"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ee||e instanceof Vr||e instanceof Z||e instanceof po||e instanceof eo)}function yo(e,t,n){if(!go(n)||!V(n)){var r=q(n);throw t.createError(\"an object\"===r?e+\" a custom object\":e+\" \"+r)}}function vo(e,t){if(t instanceof Wi)return t._internalPath;if(\"string\"==typeof t)return bo(e,t);throw new E(w.INVALID_ARGUMENT,\"Function \"+e+\"() called with invalid data. Field path arguments must be of type string or FieldPath.\")}function bo(e,t){try{return function(e){if(e.search(Hi)>=0)throw new E(w.INVALID_ARGUMENT,\"Invalid field path (\"+e+\"). Paths must not contain '~', '*', '/', '[', or ']'\");try{return new(Wi.bind.apply(Wi,[void 0].concat(e.split(\".\"))))}catch(t){throw new E(w.INVALID_ARGUMENT,\"Invalid field path (\"+e+\"). Paths must not be empty, begin with '.', end with '.', or contain '..'\")}}(t)._internalPath}catch(r){var n=_o(r);throw new E(w.INVALID_ARGUMENT,\"Function \"+e+\"() called with invalid data. \"+n)}}function _o(e){return e instanceof Error?e.message:e.toString()}var wo=\"firestore.googleapis.com\",Eo=!0,Co=!0,So=!1,To=Rn.COLLECTION_DISABLED,Io=function(){function e(e){if(void 0===e.host){if(void 0!==e.ssl)throw new E(w.INVALID_ARGUMENT,\"Can't provide ssl option if host option is not set\");this.host=wo,this.ssl=Eo}else L(\"settings\",\"non-empty string\",\"host\",e.host),this.host=e.host,M(\"settings\",\"boolean\",\"ssl\",e.ssl),this.ssl=T(e.ssl,Eo);if($(\"settings\",e,[\"host\",\"ssl\",\"credentials\",\"timestampsInSnapshots\",\"cacheSizeBytes\",\"experimentalForceLongPolling\"]),M(\"settings\",\"object\",\"credentials\",e.credentials),this.credentials=e.credentials,M(\"settings\",\"boolean\",\"timestampsInSnapshots\",e.timestampsInSnapshots),!0===e.timestampsInSnapshots?m(\"\\n  The timestampsInSnapshots setting now defaults to true and you no\\n  longer need to explicitly set it. In a future release, the setting\\n  will be removed entirely and so it is recommended that you remove it\\n  from your firestore.settings() call now.\"):!1===e.timestampsInSnapshots&&m(\"\\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\\n  YOUR CODE.\\n\\n  To hide this warning, stop using the timestampsInSnapshots setting in your\\n  firestore.settings({ ... }) call.\\n\\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\\n  read back as Firebase Timestamp objects instead of as system Date objects.\\n  So you will also need to update code expecting a Date to instead expect a\\n  Timestamp. For example:\\n\\n  // Old:\\n  const date = snapshot.get('created_at');\\n  // New:\\n  const timestamp = snapshot.get('created_at'); const date =\\n  timestamp.toDate();\\n\\n  Please audit all existing usages of Date when you enable the new\\n  behavior.\"),this.timestampsInSnapshots=T(e.timestampsInSnapshots,Co),M(\"settings\",\"number\",\"cacheSizeBytes\",e.cacheSizeBytes),void 0===e.cacheSizeBytes)this.cacheSizeBytes=Rn.DEFAULT_CACHE_SIZE_BYTES;else{if(e.cacheSizeBytes!==To&&e.cacheSizeBytes<Rn.MINIMUM_CACHE_SIZE_BYTES)throw new E(w.INVALID_ARGUMENT,\"cacheSizeBytes must be at least \"+Rn.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=e.cacheSizeBytes}M(\"settings\",\"boolean\",\"experimentalForceLongPolling\",e.experimentalForceLongPolling),this.forceLongPolling=void 0===e.experimentalForceLongPolling?So:e.experimentalForceLongPolling}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.forceLongPolling===e.forceLongPolling},e}(),Oo=function(){function e(t){var n=this;if(this._firebaseApp=null,this._queue=new fe,this.INTERNAL={delete:function(){return s.__awaiter(n,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.terminate()];case 1:return e.sent(),[2]}})})}},\"object\"==typeof t.options){var r=t;this._firebaseApp=r,this._databaseId=e.databaseIdFromApp(r),this._persistenceKey=r.name,this._credentials=new Ki(r)}else{var i=t;if(!i.projectId)throw new E(w.INVALID_ARGUMENT,\"Must provide projectId\");this._databaseId=new re(i.projectId,i.database),this._persistenceKey=\"[DEFAULT]\",this._credentials=new Gi}this._settings=new Io({}),this._dataConverter=this.createDataConverter(this._databaseId)}return e.prototype.settings=function(e){if(R(\"Firestore.settings\",arguments,1),x(\"Firestore.settings\",\"object\",1,e),S(e,\"persistence\"))throw new E(w.INVALID_ARGUMENT,'\"persistence\" is now specified with a separate call to firestore.enablePersistence().');var t=new Io(e);if(this._firestoreClient&&!this._settings.isEqual(t))throw new E(w.FAILED_PRECONDITION,\"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.\");this._settings=t,void 0!==t.credentials&&(this._credentials=Ji(t.credentials))},e.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},e.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},e.prototype.enablePersistence=function(e){if(this._firestoreClient)throw new E(w.FAILED_PRECONDITION,\"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.\");var t=!1;return e&&(void 0!==e.experimentalTabSynchronization&&m(\"The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'.\"),t=T(void 0!==e.synchronizeTabs?e.synchronizeTabs:e.experimentalTabSynchronization,!1)),this.configureClient(new qi(this._settings.cacheSizeBytes,t))},e.prototype.clearPersistence=function(){var e=this,t=jn.buildStoragePrefix(this.makeDatabaseInfo()),n=new le;return this._queue.enqueueAndForgetEvenAfterShutdown(function(){return s.__awaiter(e,void 0,void 0,function(){var e;return s.__generator(this,function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientTerminated)throw new E(w.FAILED_PRECONDITION,\"Persistence cannot be cleared after this Firestore instance is initialized.\");return[4,jn.clearPersistence(t)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise},e.prototype.terminate=function(){return this.app._removeServiceInstance(\"firestore\"),this.INTERNAL.delete()},Object.defineProperty(e.prototype,\"_isTerminated\",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientTerminated},enumerable:!0,configurable:!0}),e.prototype.waitForPendingWrites=function(){return this.ensureClientConfigured(),this._firestoreClient.waitForPendingWrites()},e.prototype._onSnapshotsInSync=function(e){return this.ensureClientConfigured(),Zi(e)?this.onSnapshotsInSyncInternal(e):(x(\"Firestore.onSnapshotsInSync\",\"function\",1,e),this.onSnapshotsInSyncInternal({next:e}))},e.prototype.onSnapshotsInSyncInternal=function(e){var t=this,n=new zi({next:function(){e.next&&e.next()},error:function(e){throw y(\"Uncaught Error in onSnapshotsInSync\")}});return this._firestoreClient.addSnapshotsInSyncListener(n),function(){n.mute(),t._firestoreClient.removeSnapshotsInSyncListener(n)}},e.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new Bi),this._firestoreClient},e.prototype.makeDatabaseInfo=function(){return new te(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},e.prototype.configureClient=function(e){v(!!this._settings.host,\"FirestoreSettings.host is not set\"),v(!this._firestoreClient,\"configureClient() called multiple times\");var t=this.makeDatabaseInfo();return this._firestoreClient=new $i(b.getPlatform(),t,this._credentials,this._queue),this._firestoreClient.start(e)},e.prototype.createDataConverter=function(e){return new mo(function(t){if(t instanceof Ro){var n=e,r=t.firestore._databaseId;if(!r.isEqual(n))throw new E(w.INVALID_ARGUMENT,\"Document reference is for database \"+r.projectId+\"/\"+r.database+\" but should be for database \"+n.projectId+\"/\"+n.database);return new po(e,t._key)}return t})},e.databaseIdFromApp=function(e){var t=e.options;if(!S(t,\"projectId\"))throw new E(w.INVALID_ARGUMENT,'\"projectId\" not provided in firebase.initializeApp.');var n=t.projectId;if(!n||\"string\"!=typeof n)throw new E(w.INVALID_ARGUMENT,\"projectId must be a string in FirebaseApp.options\");return new re(n)},Object.defineProperty(e.prototype,\"app\",{get:function(){if(!this._firebaseApp)throw new E(w.FAILED_PRECONDITION,\"Firestore was not initialized using the Firebase SDK. 'app' is not available\");return this._firebaseApp},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){return R(\"Firestore.collection\",arguments,1),x(\"Firestore.collection\",\"non-empty string\",1,e),this.ensureClientConfigured(),new Mo(se.fromString(e),this)},e.prototype.doc=function(e){return R(\"Firestore.doc\",arguments,1),x(\"Firestore.doc\",\"non-empty string\",1,e),this.ensureClientConfigured(),Ro.forPath(se.fromString(e),this)},e.prototype.collectionGroup=function(e){if(R(\"Firestore.collectionGroup\",arguments,1),x(\"Firestore.collectionGroup\",\"non-empty string\",1,e),e.indexOf(\"/\")>=0)throw new E(w.INVALID_ARGUMENT,\"Invalid collection ID '\"+e+\"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.\");return this.ensureClientConfigured(),new Po(new qr(se.EMPTY_PATH,e),this)},e.prototype.runTransaction=function(e){var t=this;return R(\"Firestore.runTransaction\",arguments,1),x(\"Firestore.runTransaction\",\"function\",1,e),this.ensureClientConfigured().transaction(function(n){return e(new No(t,n))})},e.prototype.batch=function(){return this.ensureClientConfigured(),new Ao(this)},Object.defineProperty(e,\"logLevel\",{get:function(){switch(d()){case h.DEBUG:return\"debug\";case h.ERROR:return\"error\";case h.SILENT:return\"silent\";default:return y(\"Unknown log level: \"+d())}},enumerable:!0,configurable:!0}),e.setLogLevel=function(e){switch(R(\"Firestore.setLogLevel\",arguments,1),x(\"Firestore.setLogLevel\",\"non-empty string\",1,e),e){case\"debug\":f(h.DEBUG);break;case\"error\":f(h.ERROR);break;case\"silent\":f(h.SILENT);break;default:throw new E(w.INVALID_ARGUMENT,\"Invalid log level: \"+e)}},e.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots},e}(),No=function(){function e(e,t){this._firestore=e,this._transaction=t}return e.prototype.get=function(e){var t=this;R(\"Transaction.get\",arguments,1);var n=Vo(\"Transaction.get\",e,this._firestore);return this._transaction.lookup([n._key]).then(function(e){if(!e||1!==e.length)return y(\"Mismatch in docs returned from document lookup.\");var r=e[0];if(r instanceof $t)return new ko(t._firestore,n._key,null,!1,!1);if(r instanceof Bt)return new ko(t._firestore,n._key,r,!1,!1);throw y(\"BatchGetDocumentsRequest returned unexpected document type: \"+r.constructor.name)})},e.prototype.set=function(e,t,n){k(\"Transaction.set\",arguments,2,3);var r=Vo(\"Transaction.set\",e,this._firestore),i=(n=jo(\"Transaction.set\",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(\"Transaction.set\",t,n.mergeFields):this._firestore._dataConverter.parseSetData(\"Transaction.set\",t);return this._transaction.set(r._key,i),this},e.prototype.update=function(e,t,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return\"string\"==typeof t||t instanceof Wi?(D(\"Transaction.update\",arguments,3),r=Vo(\"Transaction.update\",e,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs(\"Transaction.update\",t,n,o)):(R(\"Transaction.update\",arguments,2),r=Vo(\"Transaction.update\",e,this._firestore),i=this._firestore._dataConverter.parseUpdateData(\"Transaction.update\",t)),this._transaction.update(r._key,i),this},e.prototype.delete=function(e){R(\"Transaction.delete\",arguments,1);var t=Vo(\"Transaction.delete\",e,this._firestore);return this._transaction.delete(t._key),this},e}(),Ao=function(){function e(e){this._firestore=e,this._mutations=[],this._committed=!1}return e.prototype.set=function(e,t,n){k(\"WriteBatch.set\",arguments,2,3),this.verifyNotCommitted();var r=Vo(\"WriteBatch.set\",e,this._firestore),i=(n=jo(\"WriteBatch.set\",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(\"WriteBatch.set\",t,n.mergeFields):this._firestore._dataConverter.parseSetData(\"WriteBatch.set\",t);return this._mutations=this._mutations.concat(i.toMutations(r._key,yt.NONE)),this},e.prototype.update=function(e,t,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.verifyNotCommitted(),\"string\"==typeof t||t instanceof Wi?(D(\"WriteBatch.update\",arguments,3),r=Vo(\"WriteBatch.update\",e,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs(\"WriteBatch.update\",t,n,o)):(R(\"WriteBatch.update\",arguments,2),r=Vo(\"WriteBatch.update\",e,this._firestore),i=this._firestore._dataConverter.parseUpdateData(\"WriteBatch.update\",t)),this._mutations=this._mutations.concat(i.toMutations(r._key,yt.exists(!0))),this},e.prototype.delete=function(e){R(\"WriteBatch.delete\",arguments,1),this.verifyNotCommitted();var t=Vo(\"WriteBatch.delete\",e,this._firestore);return this._mutations=this._mutations.concat(new Et(t._key,yt.NONE)),this},e.prototype.commit=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},e.prototype.verifyNotCommitted=function(){if(this._committed)throw new E(w.FAILED_PRECONDITION,\"A write batch can no longer be used after commit() has been called.\")},e}(),Ro=function(){function e(e,t){this._key=e,this.firestore=t,this._firestoreClient=this.firestore.ensureClientConfigured()}return e.forPath=function(t,n){if(t.length%2!=0)throw new E(w.INVALID_ARGUMENT,\"Invalid document reference. Document references must have an even number of segments, but \"+t.canonicalString()+\" has \"+t.length);return new e(new ce(t),n)},Object.defineProperty(e.prototype,\"id\",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"parent\",{get:function(){return new Mo(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"path\",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){if(R(\"DocumentReference.collection\",arguments,1),x(\"DocumentReference.collection\",\"non-empty string\",1,e),!e)throw new E(w.INVALID_ARGUMENT,\"Must provide a non-empty collection name to collection()\");var t=se.fromString(e);return new Mo(this._key.path.child(t),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw z(\"isEqual\",\"DocumentReference\",1,t);return this.firestore===t.firestore&&this._key.isEqual(t._key)},e.prototype.set=function(e,t){k(\"DocumentReference.set\",arguments,1,2);var n=(t=jo(\"DocumentReference.set\",t)).merge||t.mergeFields?this.firestore._dataConverter.parseMergeData(\"DocumentReference.set\",e,t.mergeFields):this.firestore._dataConverter.parseSetData(\"DocumentReference.set\",e);return this._firestoreClient.write(n.toMutations(this._key,yt.NONE))},e.prototype.update=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return\"string\"==typeof e||e instanceof Wi?(D(\"DocumentReference.update\",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs(\"DocumentReference.update\",e,t,r)):(R(\"DocumentReference.update\",arguments,1),n=this.firestore._dataConverter.parseUpdateData(\"DocumentReference.update\",e)),this._firestoreClient.write(n.toMutations(this._key,yt.exists(!0)))},e.prototype.delete=function(){return R(\"DocumentReference.delete\",arguments,0),this._firestoreClient.write([new Et(this._key,yt.NONE)])},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];k(\"DocumentReference.onSnapshot\",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;\"object\"!=typeof e[i]||Zi(e[i])||($(\"DocumentReference.onSnapshot\",r=e[i],[\"includeMetadataChanges\"]),M(\"DocumentReference.onSnapshot\",\"boolean\",\"includeMetadataChanges\",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return Zi(e[i])?n=e[i]:(x(\"DocumentReference.onSnapshot\",\"function\",i,e[i]),P(\"DocumentReference.onSnapshot\",\"function\",i+1,e[i+1]),P(\"DocumentReference.onSnapshot\",\"function\",i+2,e[i+2]),n={next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(o,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error(\"Uncaught Error in onSnapshot:\",e)};t.error&&(r=t.error.bind(t));var i=new zi({next:function(e){if(t.next){v(e.docs.size<=1,\"Too many documents returned on a document query\");var r=e.docs.get(n._key);t.next(new ko(n.firestore,n._key,r,e.fromCache,e.hasPendingWrites))}},error:r}),o=this._firestoreClient.listen(qr.atPath(this._key.path),i,e);return function(){i.mute(),n._firestoreClient.unlisten(o)}},e.prototype.get=function(e){var t=this;return k(\"DocumentReference.get\",arguments,0,1),Uo(\"DocumentReference.get\",e),new Promise(function(n,r){e&&\"cache\"===e.source?t.firestore.ensureClientConfigured().getDocumentFromLocalCache(t._key).then(function(e){n(new ko(t.firestore,t._key,e,!0,e instanceof Bt&&e.hasLocalMutations))},r):t.getViaSnapshotListener(n,r,e)})},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?t(new E(w.UNAVAILABLE,\"Failed to get document because the client is offline.\")):i.exists&&i.metadata.fromCache&&n&&\"server\"===n.source?t(new E(w.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to \"server\" to retrieve the cached document.)')):e(i)},error:t})},e}(),Do=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),ko=function(){function e(e,t,n,r,i){this._firestore=e,this._key=t,this._document=n,this._fromCache=r,this._hasPendingWrites=i}return e.prototype.data=function(e){return k(\"DocumentSnapshot.data\",arguments,0,1),e=Fo(\"DocumentSnapshot.data\",e),this._document?this.convertObject(this._document.data(),Tt.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},e.prototype.get=function(e,t){if(k(\"DocumentSnapshot.get\",arguments,1,2),t=Fo(\"DocumentSnapshot.get\",t),this._document){var n=this._document.data().field(vo(\"DocumentSnapshot.get\",e));if(null!==n)return this.convertValue(n,Tt.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(e.prototype,\"id\",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"ref\",{get:function(){return new Ro(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"exists\",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"metadata\",{get:function(){return new Do(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){if(!(t instanceof e))throw z(\"isEqual\",\"DocumentSnapshot\",1,t);return this._firestore===t._firestore&&this._fromCache===t._fromCache&&this._key.isEqual(t._key)&&(null===this._document?null===t._document:this._document.isEqual(t._document))},e.prototype.convertObject=function(e,t){var n=this,r={};return e.forEach(function(e,i){r[e]=n.convertValue(i,t)}),r},e.prototype.convertValue=function(e,t){if(e instanceof Ut)return this.convertObject(e,t);if(e instanceof Vt)return this.convertArray(e,t);if(e instanceof jt){var n=e.value(t),r=this._firestore.ensureClientConfigured().databaseId();return e.databaseId.isEqual(r)||m(\"Document \"+this._key.path+\" contains a document reference within a different database (\"+e.databaseId.projectId+\"/\"+e.databaseId.database+\") which is not supported. It will be treated as a reference in the current database (\"+r.projectId+\"/\"+r.database+\") instead.\"),new Ro(n,this._firestore)}return e.value(t)},e.prototype.convertArray=function(e,t){var n=this;return e.internalValue.map(function(e){return n.convertValue(e,t)})},e}(),xo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.data=function(t){var n=e.prototype.data.call(this,t);return v(\"object\"==typeof n,\"Document in a QueryDocumentSnapshot should exist\"),n},t}(ko),Po=function(){function e(e,t){this._query=e,this.firestore=t}return e.prototype.where=function(t,n,r){if(R(\"Query.where\",arguments,3),B(\"Query.where\",3,r),\"in\"!==n&&\"array-contains-any\"!==n){var i=[\"<\",\"<=\",\"==\",\">=\",\">\",\"array-contains\"];F(\"Query.where\",i,2,n)}var o,s=vo(\"Query.where\",t),a=$r.fromString(n);if(s.isKeyField()){if(a===$r.ARRAY_CONTAINS||a===$r.ARRAY_CONTAINS_ANY)throw new E(w.INVALID_ARGUMENT,\"Invalid Query. You can't perform '\"+a.toString()+\"' queries on FieldPath.documentId().\");if(a===$r.IN){this.validateDisjunctiveFilterElements(r,a);for(var u=[],c=0,l=r;c<l.length;c++){var h=l[c];u.push(this.parseDocumentIdValue(h))}o=new Vt(u)}else o=this.parseDocumentIdValue(r)}else a!==$r.IN&&a!==$r.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(r,a),o=this.firestore._dataConverter.parseQueryValue(\"Query.where\",r);var d=zr.create(s,a,o);return this.validateNewFilter(d),new e(this._query.addFilter(d),this.firestore)},e.prototype.orderBy=function(t,n){var r;if(k(\"Query.orderBy\",arguments,1,2),P(\"Query.orderBy\",\"non-empty string\",2,n),void 0===n||\"asc\"===n)r=Yr.ASCENDING;else{if(\"desc\"!==n)throw new E(w.INVALID_ARGUMENT,\"Function Query.orderBy() has unknown direction '\"+n+\"', expected 'asc' or 'desc'.\");r=Yr.DESCENDING}if(null!==this._query.startAt)throw new E(w.INVALID_ARGUMENT,\"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().\");if(null!==this._query.endAt)throw new E(w.INVALID_ARGUMENT,\"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().\");var i=vo(\"Query.orderBy\",t),o=new Jr(i,r);return this.validateNewOrderBy(o),new e(this._query.addOrderBy(o),this.firestore)},e.prototype.limit=function(t){if(R(\"Query.limit\",arguments,1),x(\"Query.limit\",\"number\",1,t),t<=0)throw new E(w.INVALID_ARGUMENT,\"Invalid Query. Query limit (\"+t+\") is invalid. Limit must be positive.\");return new e(this._query.withLimit(t),this.firestore)},e.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];D(\"Query.startAt\",arguments,1);var i=this.boundFromDocOrFields(\"Query.startAt\",t,n,!0);return new e(this._query.withStartAt(i),this.firestore)},e.prototype.startAfter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];D(\"Query.startAfter\",arguments,1);var i=this.boundFromDocOrFields(\"Query.startAfter\",t,n,!1);return new e(this._query.withStartAt(i),this.firestore)},e.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];D(\"Query.endBefore\",arguments,1);var i=this.boundFromDocOrFields(\"Query.endBefore\",t,n,!0);return new e(this._query.withEndAt(i),this.firestore)},e.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];D(\"Query.endAt\",arguments,1);var i=this.boundFromDocOrFields(\"Query.endAt\",t,n,!1);return new e(this._query.withEndAt(i),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw z(\"isEqual\",\"Query\",1,t);return this.firestore===t.firestore&&this._query.isEqual(t._query)},e.prototype.boundFromDocOrFields=function(e,t,n,r){if(B(e,1,t),t instanceof ko){if(n.length>0)throw new E(w.INVALID_ARGUMENT,\"Too many arguments provided to \"+e+\"().\");var i=t;if(!i.exists)throw new E(w.NOT_FOUND,\"Can't use a DocumentSnapshot that doesn't exist for \"+e+\"().\");return this.boundFromDocument(e,i._document,r)}var o=[t].concat(n);return this.boundFromFields(e,o,r)},e.prototype.boundFromDocument=function(e,t,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var s=o[i];if(s.field.isKeyField())r.push(new jt(this.firestore._databaseId,t.key));else{var a=t.field(s.field);if(a instanceof Lt)throw new E(w.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field \"'+s.field+'\" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===a){var u=s.field.canonicalString();throw new E(w.INVALID_ARGUMENT,\"Invalid query. You are trying to start or end a query using a document for which the field '\"+u+\"' (used as the orderBy) does not exist.\")}r.push(a)}}return new Xr(r,n)},e.prototype.boundFromFields=function(e,t,n){var r=this._query.explicitOrderBy;if(t.length>r.length)throw new E(w.INVALID_ARGUMENT,\"Too many arguments provided to \"+e+\"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses\");for(var i=[],o=0;o<t.length;o++){var s=t[o];if(r[o].field.isKeyField()){if(\"string\"!=typeof s)throw new E(w.INVALID_ARGUMENT,\"Invalid query. Expected a string for document ID in \"+e+\"(), but got a \"+typeof s);if(!this._query.isCollectionGroupQuery()&&-1!==s.indexOf(\"/\"))throw new E(w.INVALID_ARGUMENT,\"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to \"+e+\"() must be a plain document ID, but '\"+s+\"' contains a slash.\");var a=this._query.path.child(se.fromString(s));if(!ce.isDocumentKey(a))throw new E(w.INVALID_ARGUMENT,\"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to \"+e+\"() must result in a valid document path, but '\"+a+\"' is not because it contains an odd number of segments.\");var u=new ce(a);i.push(new jt(this.firestore._databaseId,u))}else{var c=this.firestore._dataConverter.parseQueryValue(e,s);i.push(c)}}return new Xr(i,n)},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];k(\"Query.onSnapshot\",arguments,1,4);var n,r={},i=0;return\"object\"!=typeof e[i]||Zi(e[i])||($(\"Query.onSnapshot\",r=e[i],[\"includeMetadataChanges\"]),M(\"Query.onSnapshot\",\"boolean\",\"includeMetadataChanges\",r.includeMetadataChanges),i++),Zi(e[i])?n=e[i]:(x(\"Query.onSnapshot\",\"function\",i,e[i]),P(\"Query.onSnapshot\",\"function\",i+1,e[i+1]),P(\"Query.onSnapshot\",\"function\",i+2,e[i+2]),n={next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(r,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error(\"Uncaught Error in onSnapshot:\",e)};t.error&&(r=t.error.bind(t));var i=new zi({next:function(e){t.next&&t.next(new Lo(n.firestore,n._query,e))},error:r}),o=this.firestore.ensureClientConfigured(),s=o.listen(this._query,i,e);return function(){i.mute(),o.unlisten(s)}},e.prototype.get=function(e){var t=this;return k(\"Query.get\",arguments,0,1),Uo(\"Query.get\",e),new Promise(function(n,r){e&&\"cache\"===e.source?t.firestore.ensureClientConfigured().getDocumentsFromLocalCache(t._query).then(function(e){n(new Lo(t.firestore,t._query,e))},r):t.getViaSnapshotListener(n,r,e)})},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&\"server\"===n.source?t(new E(w.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to \"server\" to retrieve the cached documents.)')):e(i)},error:t})},e.prototype.parseDocumentIdValue=function(e){if(\"string\"==typeof e){if(\"\"===e)throw new E(w.INVALID_ARGUMENT,\"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.\");if(!this._query.isCollectionGroupQuery()&&-1!==e.indexOf(\"/\"))throw new E(w.INVALID_ARGUMENT,\"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '\"+e+\"' contains a '/' character.\");var t=this._query.path.child(se.fromString(e));if(!ce.isDocumentKey(t))throw new E(w.INVALID_ARGUMENT,\"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '\"+t+\"' is not because it has an odd number of segments (\"+t.length+\").\");return new jt(this.firestore._databaseId,new ce(t))}if(e instanceof Ro)return new jt(this.firestore._databaseId,e._key);throw new E(w.INVALID_ARGUMENT,\"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: \"+q(e)+\".\")},e.prototype.validateDisjunctiveFilterElements=function(e,t){if(!Array.isArray(e)||0===e.length)throw new E(w.INVALID_ARGUMENT,\"Invalid Query. A non-empty array is required for '\"+t.toString()+\"' filters.\");if(e.length>10)throw new E(w.INVALID_ARGUMENT,\"Invalid Query. '\"+t.toString()+\"' filters support a maximum of 10 elements in the value array.\");if(e.indexOf(null)>=0)throw new E(w.INVALID_ARGUMENT,\"Invalid Query. '\"+t.toString()+\"' filters cannot contain 'null' in the value array.\");if(e.filter(function(e){return Number.isNaN(e)}).length>0)throw new E(w.INVALID_ARGUMENT,\"Invalid Query. '\"+t.toString()+\"' filters cannot contain 'NaN' in the value array.\")},e.prototype.validateNewFilter=function(e){if(e instanceof zr){var t=[$r.ARRAY_CONTAINS,$r.ARRAY_CONTAINS_ANY],n=[$r.IN,$r.ARRAY_CONTAINS_ANY],r=t.indexOf(e.op)>=0,i=n.indexOf(e.op)>=0;if(e.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(e.field))throw new E(w.INVALID_ARGUMENT,\"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '\"+o.toString()+\"' and '\"+e.field.toString()+\"'\");var s=this._query.getFirstOrderByField();null!==s&&this.validateOrderByAndInequalityMatch(e.field,s)}else if(i||r){var a=null;if(i&&(a=this._query.findFilterOperator(n)),null===a&&r&&(a=this._query.findFilterOperator(t)),null!=a)throw new E(w.INVALID_ARGUMENT,a===e.op?\"Invalid query. You cannot use more than one '\"+e.op.toString()+\"' filter.\":\"Invalid query. You cannot use '\"+e.op.toString()+\"' filters with '\"+a.toString()+\"' filters.\")}}},e.prototype.validateNewOrderBy=function(e){if(null===this._query.getFirstOrderByField()){var t=this._query.getInequalityFilterField();null!==t&&this.validateOrderByAndInequalityMatch(t,e.field)}},e.prototype.validateOrderByAndInequalityMatch=function(e,t){if(!t.isEqual(e))throw new E(w.INVALID_ARGUMENT,\"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '\"+e.toString()+\"' and so you must also use '\"+e.toString()+\"' as your first Query.orderBy(), but your first Query.orderBy() is on field '\"+t.toString()+\"' instead.\")},e}(),Lo=function(){function e(e,t,n){this._firestore=e,this._originalQuery=t,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new Do(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(e.prototype,\"docs\",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"empty\",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"size\",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;k(\"QuerySnapshot.forEach\",arguments,1,2),x(\"QuerySnapshot.forEach\",\"function\",1,e),this._snapshot.docs.forEach(function(r){e.call(t,n.convertToDocumentImpl(r))})},Object.defineProperty(e.prototype,\"query\",{get:function(){return new Po(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),e.prototype.docChanges=function(e){e&&($(\"QuerySnapshot.docChanges\",e,[\"includeMetadataChanges\"]),M(\"QuerySnapshot.docChanges\",\"boolean\",\"includeMetadataChanges\",e.includeMetadataChanges));var t=!(!e||!e.includeMetadataChanges);if(t&&this._snapshot.excludesMetadataChanges)throw new E(w.INVALID_ARGUMENT,\"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().\");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t,n){if(n.oldDocs.isEmpty()){var r,i=0;return n.docChanges.map(function(t){var o=new xo(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key));return v(t.type===Sr.Added,\"Invalid event type for first snapshot\"),v(!r||n.query.docComparator(r,t.doc)<0,\"Got added events in wrong order\"),r=t.doc,{type:\"added\",doc:o,oldIndex:-1,newIndex:i++}})}var o=n.oldDocs;return n.docChanges.filter(function(e){return t||e.type!==Sr.Metadata}).map(function(t){var r=new xo(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key)),i=-1,s=-1;return t.type!==Sr.Added&&(v((i=o.indexOf(t.doc.key))>=0,\"Index for document not found\"),o=o.delete(t.doc.key)),t.type!==Sr.Removed&&(s=(o=o.add(t.doc)).indexOf(t.doc.key)),{type:qo(t.type),doc:r,oldIndex:i,newIndex:s}})}(this._firestore,t,this._snapshot),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e.prototype.isEqual=function(t){if(!(t instanceof e))throw z(\"isEqual\",\"QuerySnapshot\",1,t);return this._firestore===t._firestore&&this._originalQuery.isEqual(t._originalQuery)&&this._snapshot.isEqual(t._snapshot)},e.prototype.convertToDocumentImpl=function(e){return new xo(this._firestore,e.key,e,this.metadata.fromCache,this._snapshot.mutatedKeys.has(e.key))},e}();[\"length\",\"forEach\",\"map\"].concat(\"undefined\"!=typeof Symbol?[Symbol.iterator]:[]).forEach(function(e){try{Object.defineProperty(Lo.prototype.docChanges,e,{get:function(){return function(){throw new E(w.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like \"querySnapshot.docChanges\" should become \"querySnapshot.docChanges()\"')}()}})}catch(t){}});var Mo=function(e){function t(t,n){var r=e.call(this,qr.atPath(t),n)||this;if(t.length%2!=1)throw new E(w.INVALID_ARGUMENT,\"Invalid collection reference. Collection references must have an odd number of segments, but \"+t.canonicalString()+\" has \"+t.length);return r}return s.__extends(t,e),Object.defineProperty(t.prototype,\"id\",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"parent\",{get:function(){var e=this._query.path.popLast();return e.isEmpty()?null:new Ro(new ce(e),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"path\",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.doc=function(e){if(k(\"CollectionReference.doc\",arguments,0,1),0===arguments.length&&(e=Q.newId()),x(\"CollectionReference.doc\",\"non-empty string\",1,e),\"\"===e)throw new E(w.INVALID_ARGUMENT,\"Document path must be a non-empty string\");var t=se.fromString(e);return Ro.forPath(this._query.path.child(t),this.firestore)},t.prototype.add=function(e){R(\"CollectionReference.add\",arguments,1),x(\"CollectionReference.add\",\"object\",1,e);var t=this.doc();return t.set(e).then(function(){return t})},t}(Po);function jo(e,t){if(void 0===t)return{merge:!1};if($(e,t,[\"merge\",\"mergeFields\"]),M(e,\"boolean\",\"merge\",t.merge),\"mergeFields\",\"a string or a FieldPath\",void 0!==(n=t.mergeFields)&&function(e,t,n,r,i){if(!(r instanceof Array))throw new E(w.INVALID_ARGUMENT,\"Function \"+e+\"() requires its mergeFields option to be an array, but it was: \"+q(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new E(w.INVALID_ARGUMENT,\"Function \"+e+\"() requires all mergeFields elements to be a string or a FieldPath, but the value at index \"+o+\" was: \"+q(r[o]))}(e,0,0,n,function(e){return\"string\"==typeof e||e instanceof Wi}),void 0!==t.mergeFields&&void 0!==t.merge)throw new E(w.INVALID_ARGUMENT,\"Invalid options passed to function \"+e+'(): You cannot specify both \"merge\" and \"mergeFields\".');var n;return t}function Fo(e,t){return void 0===t?{}:($(e,t,[\"serverTimestamps\"]),j(e,0,\"serverTimestamps\",t.serverTimestamps,[\"estimate\",\"previous\",\"none\"]),t)}function Uo(e,t){P(e,\"object\",1,t),t&&($(e,t,[\"source\"]),j(e,0,\"source\",t.source,[\"default\",\"server\",\"cache\"]))}function Vo(e,t,n){if(t instanceof Ro){if(t.firestore!==n)throw new E(w.INVALID_ARGUMENT,\"Provided document reference is from a different Firestore instance.\");return t}throw z(e,\"DocumentReference\",1,t)}function qo(e){switch(e){case Sr.Added:return\"added\";case Sr.Modified:case Sr.Metadata:return\"modified\";case Sr.Removed:return\"removed\";default:return y(\"Unknown change type: \"+e)}}var Bo=C(Oo,\"Use firebase.firestore() instead.\"),$o=C(No,\"Use firebase.firestore().runTransaction() instead.\"),zo=C(Ao,\"Use firebase.firestore().batch() instead.\"),Wo=C(Ro,\"Use firebase.firestore().doc() instead.\"),Ho=C(ko),Qo=C(xo),Go=C(Po),Ko=C(Lo),Yo=C(Mo,\"Use firebase.firestore().collection() instead.\"),Xo={Firestore:Bo,GeoPoint:Vr,Timestamp:Ee,Blob:ee,Transaction:$o,WriteBatch:zo,DocumentReference:Wo,DocumentSnapshot:Ho,Query:Go,QueryDocumentSnapshot:Qo,QuerySnapshot:Ko,CollectionReference:Yo,FieldPath:Wi,FieldValue:so,setLogLevel:Oo.setLogLevel,CACHE_SIZE_UNLIMITED:To},Jo=function(){function e(){}return e.prototype.addCallback=function(e){},e.prototype.shutdown=function(){},e}(),Zo=function(){function e(){var e=this;this.networkAvailableListener=function(){return e.onNetworkAvailable()},this.networkUnavailableListener=function(){return e.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}return e.prototype.addCallback=function(e){this.callbacks.push(e)},e.prototype.shutdown=function(){window.removeEventListener(\"online\",this.networkAvailableListener),window.removeEventListener(\"offline\",this.networkUnavailableListener)},e.prototype.configureNetworkMonitoring=function(){window.addEventListener(\"online\",this.networkAvailableListener),window.addEventListener(\"offline\",this.networkUnavailableListener)},e.prototype.onNetworkAvailable=function(){p(\"ConnectivityMonitor\",\"Network connectivity changed: AVAILABLE\");for(var e=0,t=this.callbacks;e<t.length;e++)(0,t[e])(0)},e.prototype.onNetworkUnavailable=function(){p(\"ConnectivityMonitor\",\"Network connectivity changed: UNAVAILABLE\");for(var e=0,t=this.callbacks;e<t.length;e++)(0,t[e])(1)},e.isAvailable=function(){return\"undefined\"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),es=function(){function e(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}return e.prototype.onOpen=function(e){v(!this.wrappedOnOpen,\"Called onOpen on stream twice!\"),this.wrappedOnOpen=e},e.prototype.onClose=function(e){v(!this.wrappedOnClose,\"Called onClose on stream twice!\"),this.wrappedOnClose=e},e.prototype.onMessage=function(e){v(!this.wrappedOnMessage,\"Called onMessage on stream twice!\"),this.wrappedOnMessage=e},e.prototype.close=function(){this.closeFn()},e.prototype.send=function(e){this.sendFn(e)},e.prototype.callOnOpen=function(){v(void 0!==this.wrappedOnOpen,\"Cannot call onOpen because no callback was set\"),this.wrappedOnOpen()},e.prototype.callOnClose=function(e){v(void 0!==this.wrappedOnClose,\"Cannot call onClose because no callback was set\"),this.wrappedOnClose(e)},e.prototype.callOnMessage=function(e){v(void 0!==this.wrappedOnMessage,\"Cannot call onMessage because no callback was set\"),this.wrappedOnMessage(e)},e}(),ts=\"Connection\",ns={BatchGetDocuments:\"batchGet\",Commit:\"commit\"},rs=\"gl-js/ fire/\"+c,is=function(){function e(e){this.databaseId=e.databaseId,this.baseUrl=(e.ssl?\"https\":\"http\")+\"://\"+e.host,this.forceLongPolling=e.forceLongPolling}return e.prototype.modifyHeadersForRequest=function(e,t){if(t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n]);e[\"X-Goog-Api-Client\"]=rs},e.prototype.invokeRPC=function(e,t,n){var r=this,i=this.makeUrl(e);return new Promise(function(o,s){var a=new u.XhrIo;a.listenOnce(u.EventType.COMPLETE,function(){try{switch(a.getLastErrorCode()){case u.ErrorCode.NO_ERROR:var t=a.getResponseJson();p(ts,\"XHR received:\",JSON.stringify(t)),o(t);break;case u.ErrorCode.TIMEOUT:p(ts,'RPC \"'+e+'\" timed out'),s(new E(w.DEADLINE_EXCEEDED,\"Request time out\"));break;case u.ErrorCode.HTTP_ERROR:var n=a.getStatus();if(p(ts,'RPC \"'+e+'\" failed with status:',n,\"response text:\",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var i=(c=r.status.toLowerCase().replace(\"_\",\"-\"),Object.values(w).indexOf(c)>=0?c:w.UNKNOWN);s(new E(i,r.message))}else s(new E(w.UNKNOWN,\"Server responded with status \"+a.getStatus()))}else p(ts,'RPC \"'+e+'\" failed'),s(new E(w.UNAVAILABLE,\"Connection failed.\"));break;default:y('RPC \"'+e+'\" failed with unanticipated webchannel error '+a.getLastErrorCode()+\": \"+a.getLastError()+\", giving up.\")}}finally{p(ts,'RPC \"'+e+'\" completed.')}var c});var c=JSON.stringify(t);p(ts,\"XHR sending: \",i+\" \"+c);var l={\"Content-Type\":\"text/plain\"};r.modifyHeadersForRequest(l,n),a.send(i,\"POST\",c,l,15)})},e.prototype.invokeStreamingRPC=function(e,t,n){return this.invokeRPC(e,t,n)},e.prototype.openStream=function(e,t){var n=[this.baseUrl,\"/\",\"google.firestore.v1.Firestore\",\"/\",e,\"/channel\"],r=u.createWebChannelTransport(),i={backgroundChannelTest:!0,httpSessionIdParam:\"gsessionid\",initMessageHeaders:{},messageUrlParams:{database:\"projects/\"+this.databaseId.projectId+\"/databases/\"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(i.initMessageHeaders,t),a.isReactNative()||(i.httpHeadersOverwriteParam=\"$httpHeaders\");var o=n.join(\"\");p(ts,\"Creating WebChannel: \"+o+\" \"+i);var s=r.createWebChannel(o,i),c=!1,l=!1,h=new es({sendFn:function(e){l?p(ts,\"Not sending because WebChannel is closed:\",e):(c||(p(ts,\"Opening WebChannel transport.\"),s.open(),c=!0),p(ts,\"WebChannel sending:\",e),s.send(e))},closeFn:function(){return s.close()}}),d=function(e,t){s.listen(e,function(e){try{t(e)}catch(n){setTimeout(function(){throw n},0)}})};return d(u.WebChannel.EventType.OPEN,function(){l||p(ts,\"WebChannel transport opened.\")}),d(u.WebChannel.EventType.CLOSE,function(){l||(l=!0,p(ts,\"WebChannel transport closed\"),h.callOnClose())}),d(u.WebChannel.EventType.ERROR,function(e){l||(l=!0,p(ts,\"WebChannel transport errored:\",e),h.callOnClose(new E(w.UNAVAILABLE,\"The operation could not be completed\")))}),d(u.WebChannel.EventType.MESSAGE,function(e){if(!l){var t=e.data[0];v(!!t,\"Got a webchannel message without data.\");var n=t.error||t[0]&&t[0].error;if(n){p(ts,\"WebChannel received error:\",n);var r=n.status,i=function(e){var t=br[r];if(void 0!==t)return wr(t)}(),o=n.message;void 0===i&&(i=w.INTERNAL,o=\"Unknown error status: \"+r+\" with message \"+n.message),l=!0,h.callOnClose(new E(i,o)),s.close()}else p(ts,\"WebChannel received:\",t),h.callOnMessage(t)}}),setTimeout(function(){h.callOnOpen()},0),h},e.prototype.makeUrl=function(e){var t=ns[e];v(void 0!==t,\"Unknown REST mapping for: \"+e);var n=[this.baseUrl,\"/\",\"v1\"];return n.push(\"/projects/\"),n.push(this.databaseId.projectId),n.push(\"/databases/\"),n.push(this.databaseId.database),n.push(\"/documents\"),n.push(\":\"),n.push(t),n.join(\"\")},e}();function os(e){e.INTERNAL.registerService(\"firestore\",function(e){return new Oo(e)},function(e){v(e&&\"object\"==typeof e,\"shallowCopy() expects object parameter.\");var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(Xo))}b.setPlatform(new(function(){function e(){this.emptyByteString=\"\",this.base64Available=\"undefined\"!=typeof atob}return Object.defineProperty(e.prototype,\"document\",{get:function(){return\"undefined\"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"window\",{get:function(){return\"undefined\"!=typeof window?window:null},enumerable:!0,configurable:!0}),e.prototype.loadConnection=function(e){return Promise.resolve(new is(e))},e.prototype.newConnectivityMonitor=function(){return Zo.isAvailable()?new Zo:new Jo},e.prototype.newSerializer=function(e){return new pi(e,{useProto3Json:!0})},e.prototype.formatJSON=function(e){return JSON.stringify(e)},e.prototype.atob=function(e){return atob(e)},e.prototype.btoa=function(e){return btoa(e)},e}())),os(i),t.registerFirestore=os},\"7o/Q\":function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return c});var r=n(\"n6bG\"),i=n(\"gRHU\"),o=n(\"quSY\"),s=n(\"2QA8\"),a=n(\"2fFW\"),u=n(\"NJ4a\");class c extends o.a{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!e){this.destination=i.a;break}if(\"object\"==typeof e){e instanceof c?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,e,t,n)}}[s.a](){return this}static create(e,t,n){const r=new c(e,t,n);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class l extends c{constructor(e,t,n,o){let s;super(),this._parentSubscriber=e;let a=this;Object(r.a)(t)?s=t:t&&(s=t.next,n=t.error,o=t.complete,t!==i.a&&(a=Object.create(t),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):Object(u.a)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;Object(u.a)(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(e,t,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error(\"bad call\");try{t.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}},\"8Y7J\":function(e,t,n){\"use strict\";n.d(t,\"jb\",function(){return xu}),n.d(t,\"kb\",function(){return Pu}),n.d(t,\"lb\",function(){return Lu}),n.d(t,\"mb\",function(){return Mu}),n.d(t,\"ib\",function(){return Da}),n.d(t,\"hb\",function(){return ya}),n.d(t,\"g\",function(){return bu}),n.d(t,\"P\",function(){return mu}),n.d(t,\"w\",function(){return pu}),n.d(t,\"R\",function(){return Tt}),n.d(t,\"V\",function(){return St}),n.d(t,\"c\",function(){return Ra}),n.d(t,\"A\",function(){return xa}),n.d(t,\"z\",function(){return Pa}),n.d(t,\"b\",function(){return La}),n.d(t,\"d\",function(){return Na}),n.d(t,\"e\",function(){return Aa}),n.d(t,\"T\",function(){return Ru}),n.d(t,\"K\",function(){return su}),n.d(t,\"X\",function(){return cu}),n.d(t,\"s\",function(){return ja}),n.d(t,\"f\",function(){return ju}),n.d(t,\"m\",function(){return Ta}),n.d(t,\"l\",function(){return fn}),n.d(t,\"E\",function(){return Kt}),n.d(t,\"F\",function(){return Gt}),n.d(t,\"a\",function(){return oe}),n.d(t,\"N\",function(){return ae}),n.d(t,\"L\",function(){return Zi}),n.d(t,\"Ob\",function(){return g}),n.d(t,\"Q\",function(){return y}),n.d(t,\"S\",function(){return E}),n.d(t,\"p\",function(){return Q}),n.d(t,\"Pb\",function(){return q}),n.d(t,\"U\",function(){return B}),n.d(t,\"o\",function(){return A}),n.d(t,\"n\",function(){return l}),n.d(t,\"y\",function(){return h}),n.d(t,\"G\",function(){return f}),n.d(t,\"x\",function(){return Za}),n.d(t,\"B\",function(){return Xi}),n.d(t,\"C\",function(){return Ki}),n.d(t,\"D\",function(){return Yi}),n.d(t,\"i\",function(){return Wa}),n.d(t,\"j\",function(){return Vi}),n.d(t,\"k\",function(){return Hi}),n.d(t,\"t\",function(){return zi}),n.d(t,\"v\",function(){return $i}),n.d(t,\"u\",function(){return wu}),n.d(t,\"H\",function(){return Su}),n.d(t,\"I\",function(){return Eu}),n.d(t,\"J\",function(){return bo}),n.d(t,\"M\",function(){return wo}),n.d(t,\"h\",function(){return po}),n.d(t,\"q\",function(){return ho}),n.d(t,\"r\",function(){return fo}),n.d(t,\"O\",function(){return yi}),n.d(t,\"W\",function(){return ku}),n.d(t,\"wb\",function(){return vi}),n.d(t,\"ab\",function(){return Ma}),n.d(t,\"Y\",function(){return W}),n.d(t,\"Z\",function(){return qi}),n.d(t,\"db\",function(){return Ht}),n.d(t,\"eb\",function(){return Jt}),n.d(t,\"fb\",function(){return At}),n.d(t,\"ub\",function(){return N}),n.d(t,\"zb\",function(){return mi}),n.d(t,\"Ib\",function(){return _}),n.d(t,\"xb\",function(){return xi}),n.d(t,\"yb\",function(){return ki}),n.d(t,\"tb\",function(){return Ea}),n.d(t,\"sb\",function(){return Ca}),n.d(t,\"bb\",function(){return va}),n.d(t,\"cb\",function(){return ba}),n.d(t,\"Nb\",function(){return ye}),n.d(t,\"Rb\",function(){return Ti}),n.d(t,\"Qb\",function(){return Oi}),n.d(t,\"Mb\",function(){return Ni}),n.d(t,\"Sb\",function(){return Ai}),n.d(t,\"gb\",function(){return Fu}),n.d(t,\"nb\",function(){return Rs}),n.d(t,\"ob\",function(){return sl}),n.d(t,\"pb\",function(){return Vo}),n.d(t,\"qb\",function(){return ea}),n.d(t,\"rb\",function(){return Uu}),n.d(t,\"vb\",function(){return ps}),n.d(t,\"Ab\",function(){return ws}),n.d(t,\"Bb\",function(){return _s}),n.d(t,\"Cb\",function(){return Ku}),n.d(t,\"Db\",function(){return qs}),n.d(t,\"Eb\",function(){return ta}),n.d(t,\"Gb\",function(){return na}),n.d(t,\"Fb\",function(){return Xu}),n.d(t,\"Hb\",function(){return zu}),n.d(t,\"Jb\",function(){return Ju}),n.d(t,\"Kb\",function(){return jo}),n.d(t,\"Lb\",function(){return tc});var r=n(\"XNiG\"),i=n(\"quSY\"),o=n(\"HDdC\"),s=n(\"VRyK\"),a=n(\"w1tV\");const u=\"__parameters__\";function c(e,t,n){const r=function(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}(t);function i(...e){if(this instanceof i)return r.apply(this,e),this;const t=new i(...e);return n.annotation=t,n;function n(e,n,r){const i=e.hasOwnProperty(u)?e[u]:Object.defineProperty(e,u,{value:[]})[u];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(t),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i}const l=c(\"Inject\",e=>({token:e})),h=c(\"Optional\"),d=c(\"Self\"),f=c(\"SkipSelf\");var p=function(e){return e[e.Default=0]=\"Default\",e[e.Host=1]=\"Host\",e[e.Self=2]=\"Self\",e[e.SkipSelf=4]=\"SkipSelf\",e[e.Optional=8]=\"Optional\",e}({});function m(e){for(let t in e)if(e[t]===m)return t;throw Error(\"Could not find renamed property on target object.\")}function g(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}const y=g;function v(e){const t=e[b];return t&&t.token===e?t:null}const b=m({ngInjectableDef:m});function _(e){if(\"string\"==typeof e)return e;if(e instanceof Array)return\"[\"+e.map(_).join(\", \")+\"]\";if(null==e)return\"\"+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return\"\"+t;const n=t.indexOf(\"\\n\");return-1===n?t:t.substring(0,n)}const w=m({__forward_ref__:m});function E(e){return e.__forward_ref__=E,e.toString=function(){return _(this())},e}function C(e){const t=e;return\"function\"==typeof t&&t.hasOwnProperty(w)&&t.__forward_ref__===E?t():e}const S=\"undefined\"!=typeof globalThis&&globalThis,T=\"undefined\"!=typeof window&&window,I=\"undefined\"!=typeof self&&\"undefined\"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,O=\"undefined\"!=typeof global&&global,N=S||O||T||I;class A{constructor(e,t){this._desc=e,this.ngMetadataName=\"InjectionToken\",this.ngInjectableDef=void 0,\"number\"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.ngInjectableDef=g({token:this,providedIn:t.providedIn||\"root\",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const R=new A(\"INJECTOR\",-1),D=new Object,k=\"ngTempTokenPath\",x=\"ngTokenPath\",P=/\\n/gm,L=\"\\u0275\",M=\"__source\",j=m({provide:String,useValue:m});let F,U=void 0;function V(e){const t=U;return U=e,t}function q(e,t=p.Default){return(F||function(e,t=p.Default){if(void 0===U)throw new Error(\"inject() must be called from an injection context\");return null===U?function(e,t,n){const r=v(e);if(r&&\"root\"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&p.Optional)return null;throw new Error(`Injector: NOT_FOUND [${_(e)}]`)}(e,0,t):U.get(e,t&p.Optional?null:void 0,t)})(e,t)}const B=q;class ${get(e,t=D){if(t===D){const t=new Error(`NullInjectorError: No provider for ${_(e)}!`);throw t.name=\"NullInjectorError\",t}return t}}function z(e,t,n,r=null){e=e&&\"\\n\"===e.charAt(0)&&e.charAt(1)==L?e.substr(2):e;let i=_(t);if(t instanceof Array)i=t.map(_).join(\" -> \");else if(\"object\"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push(n+\":\"+(\"string\"==typeof r?JSON.stringify(r):_(r)))}i=`{${e.join(\", \")}}`}return`${n}${r?\"(\"+r+\")\":\"\"}[${i}]: ${e.replace(P,\"\\n  \")}`}const W=new A(\"The presence of this token marks an injector as being the root injector.\"),H=function(e,t,n){return new Z(e,t,n)};let Q=(()=>{class e{static create(e,t){return Array.isArray(e)?H(e,t,\"\"):H(e.providers,e.parent,e.name||\"\")}}return e.THROW_IF_NOT_FOUND=D,e.NULL=new $,e.ngInjectableDef=g({token:e,providedIn:\"any\",factory:()=>q(R)}),e.__NG_ELEMENT_ID__=-1,e})();const G=function(e){return e},K=[],Y=G,X=function(){return Array.prototype.slice.call(arguments)},J=\"\\u0275\";class Z{constructor(e,t=Q.NULL,n=null){this.parent=t,this.source=n;const r=this._records=new Map;r.set(Q,{token:Q,fn:G,deps:K,value:this,useNew:!1}),r.set(R,{token:R,fn:G,deps:K,value:this,useNew:!1}),function e(t,n){if(n)if((n=C(n))instanceof Array)for(let r=0;r<n.length;r++)e(t,n[r]);else{if(\"function\"==typeof n)throw te(\"Function/Class not supported\",n);if(!n||\"object\"!=typeof n||!n.provide)throw te(\"Unexpected provider\",n);{let e=C(n.provide);const r=function(e){const t=function(e){let t=K;const n=e.deps;if(n&&n.length){t=[];for(let e=0;e<n.length;e++){let r=6,i=C(n[e]);if(i instanceof Array)for(let e=0,t=i;e<t.length;e++){const n=t[e];n instanceof h||n==h?r|=1:n instanceof f||n==f?r&=-3:n instanceof d||n==d?r&=-5:i=n instanceof l?n.token:C(n)}t.push({token:i,options:r})}}else if(e.useExisting)t=[{token:C(e.useExisting),options:6}];else if(!(n||j in e))throw te(\"'deps' required\",e);return t}(e);let n=G,r=K,i=!1,o=C(e.provide);if(j in e)r=e.useValue;else if(e.useFactory)n=e.useFactory;else if(e.useExisting);else if(e.useClass)i=!0,n=C(e.useClass);else{if(\"function\"!=typeof o)throw te(\"StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable\",e);i=!0,n=o}return{deps:t,fn:n,useNew:i,value:r}}(n);if(!0===n.multi){let r=t.get(e);if(r){if(r.fn!==X)throw ee(e)}else t.set(e,r={token:n.provide,deps:[],useNew:!1,fn:X,value:K});r.deps.push({token:e=n,options:6})}const i=t.get(e);if(i&&i.fn==X)throw ee(e);t.set(e,r)}}}(r,e)}get(e,t,n=p.Default){const r=this._records.get(e);try{return function e(t,n,r,i,o,s){try{return function(t,n,r,i,o,s){let a;if(!n||s&p.SkipSelf)s&p.Self||(a=i.get(t,o,p.Default));else{if((a=n.value)==Y)throw Error(J+\"Circular dependency\");if(a===K){n.value=Y;let t=void 0,o=n.useNew,s=n.fn,u=n.deps,c=K;if(u.length){c=[];for(let t=0;t<u.length;t++){const n=u[t],o=n.options,s=2&o?r.get(n.token):void 0;c.push(e(n.token,s,r,s||4&o?i:Q.NULL,1&o?null:Q.THROW_IF_NOT_FOUND,p.Default))}}n.value=a=o?new s(...c):s.apply(t,c)}}return a}(t,n,r,i,o,s)}catch(a){throw a instanceof Error||(a=new Error(a)),(a[k]=a[k]||[]).unshift(t),n&&n.value==Y&&(n.value=K),a}}(e,r,this._records,this.parent,t,n)}catch(i){return function(e,t,n,r){const i=e[k];throw t[M]&&i.unshift(t[M]),e.message=z(\"\\n\"+e.message,i,\"StaticInjectorError\",r),e[x]=i,e[k]=null,e}(i,e,0,this.source)}}toString(){const e=[];return this._records.forEach((t,n)=>e.push(_(n))),`StaticInjector[${e.join(\", \")}]`}}function ee(e){return te(\"Cannot mix multi providers and regular providers\",e)}function te(e,t){return new Error(z(e,t,\"StaticInjectorError\"))}const ne=\"ngDebugContext\",re=\"ngOriginalError\",ie=\"ngErrorLogger\",oe=new A(\"AnalyzeForEntryComponents\"),se=function(){var e={OnPush:0,Default:1};return e[e.OnPush]=\"OnPush\",e[e.Default]=\"Default\",e}(),ae=function(){var e={Emulated:0,Native:1,None:2,ShadowDom:3};return e[e.Emulated]=\"Emulated\",e[e.Native]=\"Native\",e[e.None]=\"None\",e[e.ShadowDom]=\"ShadowDom\",e}(),ue={},ce=[],le=m({ngComponentDef:m}),he=m({ngDirectiveDef:m}),de=m({ngPipeDef:m});let fe=0;function pe(e){return function(e){return e[le]||null}(e)||function(e){return e[he]||null}(e)}function me(e){return function(e){return e[de]||null}(e)}function ge(e,t){if(null==e)return ue;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,t&&(t[i]=o)}return n}const ye=function(e){const t=e.type,n=t.prototype,r={},i={type:t,providersResolver:null,consts:e.consts,vars:e.vars,factory:e.factory,template:e.template||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,contentQueries:e.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:e.exportAs||null,onChanges:null,onInit:n.ngOnInit||null,doCheck:n.ngDoCheck||null,afterContentInit:n.ngAfterContentInit||null,afterContentChecked:n.ngAfterContentChecked||null,afterViewInit:n.ngAfterViewInit||null,afterViewChecked:n.ngAfterViewChecked||null,onDestroy:n.ngOnDestroy||null,onPush:e.changeDetection===se.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||ae.Emulated,id:\"c\",styles:e.styles||ce,_:null,setInput:null,schemas:e.schemas||null,tView:null};return i._=\"\"+{toString:()=>{const n=e.directives,o=e.features,s=e.pipes;i.id+=fe++,i.inputs=ge(e.inputs,r),i.outputs=ge(e.outputs),o&&o.forEach(e=>e(i)),i.directiveDefs=n?()=>(\"function\"==typeof n?n():n).map(pe):null,i.pipeDefs=s?()=>(\"function\"==typeof s?s():s).map(me):null,t.hasOwnProperty(b)||(t[b]=g({token:t,factory:e.factory}))}},i},ve=(()=>(\"undefined\"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(N))(),be=0,_e=1,we=2,Ee=3,Ce=4,Se=6,Te=7,Ie=9,Oe=11,Ne=12,Ae=13,Re=14,De=18,ke=20,xe=1,Pe=2,Le=9,Me=\"__ngContext__\";function je(e){for(;Array.isArray(e);)e=e[be];return e}function Fe(e){return Array.isArray(e)&&\"object\"==typeof e[xe]}function Ue(e){return Array.isArray(e)&&!0===e[xe]}function Ve(e){return Array.isArray(e)&&\"number\"==typeof e[xe]}function qe(e,t){return t[_e].data[e+ke]}function Be(e){const t=function(e){return e[Me]}(e);return t?Array.isArray(t)?t:t.lView:null}function $e(e){e[De]=0}function ze(e,t,n,r){n||We(e,t.preOrderHooks,t.preOrderCheckHooks,n,0,void 0!==r?r:null)}function We(e,t,n,r,i,o){if(r)return;const s=(3&e[we])===i?t:n;s&&function(e,t,n,r){const i=null!=r?r:-1;let o=0;for(let s=void 0!==r?65535&e[De]:0;s<t.length;s++)if(\"number\"==typeof t[s+1]){if(o=t[s],null!=r&&o>=r)break}else t[s]<0&&(e[De]+=65536),(o<i||-1==i)&&(He(e,n,t,s),e[De]=(4294901760&e[De])+s+2),s++}(e,s,i,o),null==o&&(3&e[we])===i&&3!==i&&(e[we]&=1023,e[we]+=1)}function He(e,t,n,r){const i=n[r]<0,o=n[r+1],s=e[i?-n[r]:n[r]];i?e[we]>>10<e[De]>>16&&(3&e[we])===t&&(e[we]+=1024,o.call(s)):o.call(s)}let Qe=null;function Ge(e){Qe=e}function Ke(){return Ze}const Ye=1;let Xe,Je,Ze,et=Ye,tt=0,nt=0;function rt(e=null){vt!==e&&(_t(null==e?-1:e),et=null==e?0:Ye,tt=0,nt=0)}function it(){return et}function ot(){return tt}function st(){return Xe}function at(e,t){Xe=e,Je=t}function ut(e=Ze){return 4==(4&e[we])}let ct=null,lt=!1;function ht(){return lt}let dt=-1;function ft(e){dt=e}let pt=0;function mt(e){pt=e}function gt(e,t){const n=Ze;return e&&(dt=e[_e].bindingStartIndex),Xe=t,Je=!0,Ze=ct=e,n}function yt(e,t){const n=Ze[_e];if(ut(Ze))Ze[we]&=-5;else try{$e(Ze),t&&We(Ze,n.viewHooks,n.viewCheckHooks,lt,2,void 0)}finally{Ze[we]&=-73,Ze[Te]=n.bindingStartIndex}Ge(null),gt(e,null)}let vt=-1;function bt(){return vt}function _t(e){vt=e,Ge(null)}let wt=null,Et=!0,Ct=!1;function St(){return Ct=!0,Et}function Tt(){if(Ct)throw new Error(\"Cannot enable prod mode after platform setup.\");Et=!1}class It{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument(\"sanitization-inert\"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){const e=this.inertDocument.createElement(\"html\");this.inertDocument.appendChild(e),this.inertBodyElement=this.inertDocument.createElement(\"body\"),e.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload=\"this.parentNode.remove()\"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector(\"svg\")?(this.inertBodyElement.innerHTML='<svg><p><style><img src=\"</style><img src=x onerror=alert(1)//\">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector(\"svg img\")&&function(){try{return!!window.DOMParser}catch(e){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}getInertBodyElement_XHR(e){e=\"<body><remove></remove>\"+e+\"</body>\";try{e=encodeURI(e)}catch(r){return null}const t=new XMLHttpRequest;t.responseType=\"document\",t.open(\"GET\",\"data:text/html;charset=utf-8,\"+e,!1),t.send(void 0);const n=t.response.body;return n.removeChild(n.firstChild),n}getInertBodyElement_DOMParser(e){e=\"<body><remove></remove>\"+e+\"</body>\";try{const n=(new window.DOMParser).parseFromString(e,\"text/html\").body;return n.removeChild(n.firstChild),n}catch(t){return null}}getInertBodyElement_InertDocument(e){const t=this.inertDocument.createElement(\"template\");return\"content\"in t?(t.innerHTML=e,t):(this.inertBodyElement.innerHTML=e,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const n=t.item(r).name;\"xmlns:ns1\"!==n&&0!==n.indexOf(\"ns1:\")||e.removeAttribute(n)}let n=e.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Ot=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,Nt=/^data:(?:image\\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\\/(?:mpeg|mp4|ogg|webm)|audio\\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\\/]+=*$/i;function At(e){return(e=String(e)).match(Ot)||e.match(Nt)?e:(St()&&console.warn(`WARNING: sanitizing unsafe URL value ${e} (see http://g.co/ng/security#xss)`),\"unsafe:\"+e)}function Rt(e){const t={};for(const n of e.split(\",\"))t[n]=!0;return t}function Dt(...e){const t={};for(const n of e)for(const e in n)n.hasOwnProperty(e)&&(t[e]=!0);return t}const kt=Rt(\"area,br,col,hr,img,wbr\"),xt=Rt(\"colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr\"),Pt=Rt(\"rp,rt\"),Lt=Dt(Pt,xt),Mt=Dt(kt,Dt(xt,Rt(\"address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul\")),Dt(Pt,Rt(\"a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video\")),Lt),jt=Rt(\"background,cite,href,itemtype,longdesc,poster,src,xlink:href\"),Ft=Rt(\"srcset\"),Ut=Dt(jt,Ft,Rt(\"abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width\"),Rt(\"aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext\")),Vt=Rt(\"script,style,template\");class qt{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,n=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let e=this.checkClobberedElement(t,t.nextSibling);if(e){t=e;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join(\"\")}startElement(e){const t=e.nodeName.toLowerCase();if(!Mt.hasOwnProperty(t))return this.sanitizedSomething=!0,!Vt.hasOwnProperty(t);this.buf.push(\"<\"),this.buf.push(t);const n=e.attributes;for(let i=0;i<n.length;i++){const e=n.item(i),t=e.name,o=t.toLowerCase();if(!Ut.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=e.value;jt[o]&&(s=At(s)),Ft[o]&&(r=s,s=(r=String(r)).split(\",\").map(e=>At(e.trim())).join(\", \")),this.buf.push(\" \",t,'=\"',zt(s),'\"')}var r;return this.buf.push(\">\"),!0}endElement(e){const t=e.nodeName.toLowerCase();Mt.hasOwnProperty(t)&&!kt.hasOwnProperty(t)&&(this.buf.push(\"</\"),this.buf.push(t),this.buf.push(\">\"))}chars(e){this.buf.push(zt(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const Bt=/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g,$t=/([^\\#-~ |!])/g;function zt(e){return e.replace(/&/g,\"&amp;\").replace(Bt,function(e){return\"&#\"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+\";\"}).replace($t,function(e){return\"&#\"+e.charCodeAt(0)+\";\"}).replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\")}let Wt;function Ht(e,t){let n=null;try{Wt=Wt||new It(e);let r=t?String(t):\"\";n=Wt.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error(\"Failed to sanitize html because the input is unstable\");i--,r=o,o=n.innerHTML,n=Wt.getInertBodyElement(r)}while(r!==o);const s=new qt,a=s.sanitizeChildren(Qt(n)||n);return St()&&s.sanitizedSomething&&console.warn(\"WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss\"),a}finally{if(n){const e=Qt(n)||n;for(;e.firstChild;)e.removeChild(e.firstChild)}}}function Qt(e){return\"content\"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&\"TEMPLATE\"===e.nodeName}(e)?e.content:null}const Gt=function(){var e={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return e[e.NONE]=\"NONE\",e[e.HTML]=\"HTML\",e[e.STYLE]=\"STYLE\",e[e.SCRIPT]=\"SCRIPT\",e[e.URL]=\"URL\",e[e.RESOURCE_URL]=\"RESOURCE_URL\",e}();class Kt{}const Yt=new RegExp(\"^([-,.\\\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\\\([-0-9.%, #a-zA-Z]+\\\\))$\",\"g\"),Xt=/^url\\(([^)]+)\\)$/;function Jt(e){if(!(e=String(e).trim()))return\"\";const t=e.match(Xt);return t&&At(t[1])===t[1]||e.match(Yt)&&function(e){let t=!0,n=!0;for(let r=0;r<e.length;r++){const i=e.charAt(r);\"'\"===i&&n?t=!t:'\"'===i&&t&&(n=!n)}return t&&n}(e)?e:(St()&&console.warn(`WARNING: sanitizing unsafe style value ${e} (see http://g.co/ng/security#xss).`),\"unsafe\")}const Zt=9,en=function(){var e={Important:1,DashCase:2};return e[e.Important]=\"Important\",e[e.DashCase]=\"DashCase\",e}();function tn(e){return!!e.listen}class nn{constructor(){this._players=[]}flushPlayers(){for(let e=0;e<this._players.length;e++){const t=this._players[e];t.parent||0!==t.state||t.play()}this._players.length=0}queuePlayer(e){this._players.push(e)}}const rn=0;function on(e,t,n,r){const i=[e||null,0,[],n||[null,null],r||[null,null],[0,0],[0],[0],null,null];return sn(i,rn),i}function sn(e,t,n=-1,r){const i=e[2],o=2*t,s=o+2;for(let u=i.length;u<s;u+=2)i.push(-1,null);const a=o+0;n>=0&&-1===i[a]&&(i[a]=n,i[o+1]=r||null)}function an(e,t,n,r,i,o){return o=o||n,i?e[i]=r:e.push(r),!!r&&(r.addEventListener(200,()=>{const t=e.indexOf(r);t&&(t<e[0]?e[t]=null:e.splice(t,1)),r.destroy()}),(t.playerHandler||(t.playerHandler=new nn)).queuePlayer(r,o),!0)}function un(e){const t=e[Ee];return Ue(t)?t[Ee]:t}function cn(e){return function(e){let t=Fe(e)?e:Be(e);for(;t&&!(512&t[we]);)t=un(t);return t}(e)[Ie]}function ln(e){return e[ne]}function hn(e){return e[re]}function dn(e,...t){e.error(...t)}class fn{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e[ie]||dn}(e);r(this._console,\"ERROR\",e),t&&r(this._console,\"ORIGINAL ERROR\",t),n&&r(this._console,\"ERROR CONTEXT\",n)}_findContext(e){return e?ln(e)?ln(e):this._findContext(hn(e)):null}_findOriginalError(e){let t=hn(e);for(;t&&hn(t);)t=hn(t);return t}}function pn(e){var t;return t=e.replace(/[$@]/g,\"_\"),`ng-reflect-${e=t.replace(mn,(...e)=>\"-\"+e[1].toLowerCase())}`}const mn=/([A-Z])/g;function gn(e){try{return null!=e?e.toString().slice(0,30):e}catch(t){return\"[ERROR] Exception while trying to serialize the value\"}}const yn={};function vn(e,t,n,r){const i=e[8];if(null!=i){const e=function(e,t){for(let n=1;n<e.length;n+=3)if(e[n+0]>t)return n;return e.length}(i,t);i.splice(e,0,t,n,r)}}class bn{constructor(e,t){this.fn=e,this.value=t}}function _n(e,t,n,r){for(let i=n;i<r;i+=4)if(zn(e,i)===t)return i;return-1}function wn(e,t,n=0){Cn(e,t,!0,n)}function En(e,t,n=0){Cn(e,t,!1,n)}function Cn(e,t,n,r=0){if(function(e,t,n,r){return!e[t?6:7][1+4*n+0]&&(r===yn||or(e,t,n)===r)}(e,n,r,t))return;const i=(t=t===yn?or(e,n,r):t)instanceof bn?new Zn(t,e[0],n?1:2):null,o=i?t.value:t,s=n?1:3;let a,u,c,l=i?s:0,h=!1;(function(e,t,n){const r=e[9];if(i){if(!r||0===s)return!0}else if(!r)return!1;return r[s]!==i})(e)&&(function(e,t,n){let r=e[9]||(e[9]=[5,null,null,null,null]);n>0?r[n]=t:(r.splice(n=r[0],0,t,null),r[0]+=2)}(e,i,s),h=!0);let d=!1;n?(\"string\"==typeof o?(c=o.split(/\\s+/),d=!0):c=o?Object.keys(o):ce,a=Pn(e),u=e.length):(a=Ln(e),u=Pn(e),c=o?Object.keys(o):ce),function(e,t,n,r,i,o,s,u,c){let l=!1;const h=1+4*t,d=e[c?6:7],f=d[h+1],p=d[h+3];let m=1===d[h+0]||!(d[h+2]||!u),g=0,y=0;const v=!0===s;let b=a,_=o.length;for(;b<f;){const r=zn(e,b);if(_)for(let i=0;i<o.length;i++){const a=o[i],u=a?c?a:sr(a):null;if(u&&r===u){const r=$n(e,b),a=er(e,b),c=!!v||s[u],h=Bn(e,b);Jn(h,r,c)&&rr(r,c,a,t)&&(jn(e,b,c),Fn(e,b,n,t),Xn(e,h,c)&&(In(e,b,!0),l=!0)),o[i]=null,_--;break}}b+=4}if(_){const r=c?null:nr(e,t);e:for(let a=0;a<o.length;a++){const u=o[a];if(!u)continue;const h=!!v||s[u],d=c?u:sr(u),p=b>=f;for(let r=b;r<i;r+=4)if(zn(e,r)===d){const i=er(e,r),o=Un(e,r),s=$n(e,r),a=Bn(e,r);rr(s,h,i,t)&&(p&&(Qn(e,b,r),g++),Jn(a,s,h)&&((null===h||void 0===h&&h!==s)&&(m=!0),jn(e,b,h),(null!==s||Xn(e,a,h))&&(In(e,b,!0),l=!0)),i===t&&n===o||Fn(e,b,n,t)),b+=4;continue e}null!=h&&(m=!0,g++,Gn(e,p?b:f+4*y,c,d,1|Yn(e,d,c,r),h,t,n),y++,i+=4,b+=4,l=!0)}}for(;b<i;){m=!0;const r=$n(e,b),i=Bn(e,b);er(e,b),null!=r&&(m=!0),Jn(i,r,null)&&(jn(e,b,null),Xn(e,i,r)&&(In(e,b,!0),l=!0),Fn(e,b,n,t)),b+=4}(function(e,t,n,r,i,o,s,a){const u=e[n?6:7],c=1+4*t;if(a){const e=i+4*s;for(let t=c+4;t<u.length;t+=4)u[t+1]=e,u[t+0]=1}u[c+0]=0,u[c+1]=i,u[c+2]=r,u[c+3]=s;let l=s;for(let h=1;h<c;h+=4)l+=u[h+3];if(!n){const t=e[6],n=o-t[2];for(let e=1;e<t.length;e+=4)t[e+1]+=n}u[0]=l})(e,t,c,u,f,i,g,m=m||p!==g),l&&Wn(e,!0)}(e,r,l,0,u,c,d||o||ue,t,n),h&&Hn(e,!0)}function Sn(e,t,n,r,i,o,s){n=i&&n?i(t,n,3):n,o||s?(o&&o.setValue(t,n),s&&s.setValue(t,n)):n?(n=n.toString(),tn(r)?r.setStyle(e,t,n,en.DashCase):e.style.setProperty(t,n)):tn(r)?r.removeStyle(e,t,en.DashCase):e.style.removeProperty(t)}function Tn(e,t,n,r,i,o){i||o?(i&&i.setValue(t,n),o&&o.setValue(t,n)):\"\"!==t&&(n?tn(r)?r.addClass(e,t):e.classList.add(t):tn(r)?r.removeClass(e,t):e.classList.remove(t))}function In(e,t,n){const r=t>=10?t+0:t;n?e[r]|=1:e[r]&=-2}function On(e,t){return 1==(1&e[t>=10?t+0:t])}function Nn(e,t){return 2==(2&e[t>=10?t+0:t])}function An(e,t){return 4==(4&e[t>=10?t+0:t])}function Rn(e,t,n){return 31&e|t<<5|n<<19}function Dn(e,t){const n=kn(t);return(2&t?e[4]:e[3])[n]}function kn(e){return e>>5&16383}function xn(e){const t=e>>19&16383;return t>=10?t:-1}function Pn(e){return e[6][2]}function Ln(e){return e[7][2]}function Mn(e,t,n){e[t+1]=n}function jn(e,t,n){e[t+2]=n}function Fn(e,t,n,r){const i=function(e,t){return n<<16|e}(r);e[t+3]=i}function Un(e,t){return e[t+3]>>16&65535}function Vn(e,t){const n=Un(e,t);if(n){const t=e[9];if(t)return t[n]}return null}function qn(e,t,n){e[1===t?t:t+0]=n}function Bn(e,t){return e[1===t?t:t+0]}function $n(e,t){return e[t+2]}function zn(e,t){return e[t+1]}function Wn(e,t){In(e,1,t)}function Hn(e,t){t?e[1]|=8:e[1]&=-9}function Qn(e,t,n){if(t===n)return;const r=$n(e,t),i=zn(e,t),o=Bn(e,t),s=Un(e,t),a=er(e,t);let u=o,c=Bn(e,n);const l=xn(u);if(l>=0){const t=Bn(e,l);qn(e,l,Rn(t,kn(t),n))}const h=xn(c);if(h>=0){const n=Bn(e,h);qn(e,h,Rn(n,kn(n),t))}jn(e,t,$n(e,n)),Mn(e,t,zn(e,n)),qn(e,t,Bn(e,n)),Fn(e,t,Un(e,n),er(e,n)),jn(e,n,r),Mn(e,n,i),qn(e,n,o),Fn(e,n,s,a)}function Gn(e,t,n,r,i,o,s,a){const u=t<e.length;e.splice(t,0,1|i|(n?2:0),r,o,0),Fn(e,t,a,s),u&&function(e,n){for(let r=t+4;r<e.length;r+=4){const t=xn(Bn(e,r));if(t>0){const n=kn(Bn(e,t));qn(e,t,Rn((On(e,t)?1:0)|(Nn(e,t)?2:0)|(An(e,t)?4:0),n,r))}}}(e)}function Kn(e,t){return null!==e}function Yn(e,t,n,r){let i,o=r&&r(t,null,1)?4:0;return n?(o|=2,i=tr(e[4],t)):i=tr(e[3],t),Rn(o,i=i>0?i+1:0,0)}function Xn(e,t,n){const r=Dn(e,t);return!r||Jn(t,r,n)}function Jn(e,t,n){return!(2&e)&&t&&n&&4&e?t.toString()!==n.toString():t!==n}class Zn{constructor(e,t,n){this._element=t,this._type=n,this._values={},this._dirty=!1,this._factory=e}setValue(e,t){this._values[e]!==t&&(this._values[e]=t,this._dirty=!0)}buildPlayer(e,t){if(this._dirty){const n=this._factory.fn(this._element,this._type,this._values,t,e||null);return this._values={},this._dirty=!1,n}}}function er(e,t){return 65535&e[t+3]}function tr(e,t){for(let n=2;n<e.length;n+=3)if(e[n]===t)return n;return-1}function nr(e,t){const n=e[2];return n[2*t+1]||n[1]||null}function rr(e,t,n,r){return null==e||(null!=t?r<=n:n===r)}function ir(e){const t=e[4];let n=t[1];if(null===n){n=\"\";for(let e=2;e<t.length;e+=3)t[e+1]&&(n+=(n.length?\" \":\"\")+t[e]);t[1]=n}return n}function or(e,t,n){return e[t?6:7][1+4*n+2]||null}function sr(e){return e.replace(/[a-z][A-Z]/g,e=>`${e.charAt(0)}-${e.charAt(1).toLowerCase()}`)}function ar(e,t,n,r,i=0){const o=e[n?6:7];if(t>0){const e=1+4*t;for(;o.length<e;)o.push(0,r,null,0)}o.push(0,r,null,i)}let ur,cr=0;function lr(){return cr>0}function hr(e){ur=e}function dr(){return ur}const fr=\"--MAP--\";function pr(e,t){e[1]=t}function mr(e){return e[0]}function gr(e,t){return e[t+2]}function yr(e,t){return 1&e[t+0]}function vr(e,t){return(1&yr(e,t))>0}function br(e,t){return e[t+0]>>1}function _r(e,t,n){const r=yr(e,t);e[t+0]=r|n<<1}function wr(e,t){return e[t+1]}function Er(e,t,n){return e[t+3+n]}function Cr(e,t){return t===e[1]}function Sr(e){!function(e,t){e[0]=t}(e,1|mr(e))}function Tr(e){return(1&mr(e))>0}function Ir(e){return 5+e[3]}function Or(e,t){return(Array.isArray(e)?e[0]:e)!==(Array.isArray(t)?t[0]:t)}function Nr(e){return null!=e&&\"\"!==e}function Ar(e){const t=dr()||e[Ae];return t&&\"function\"!=typeof t?(hr(t),Rr):t}const Rr=(e,t,n)=>{const r=dr();return r?!(2&n)||r.sanitize(Gt.STYLE,t):t},Dr=null,kr=1,xr=1,Pr=0,Lr=1;let Mr=Lr,jr=Lr,Fr=0,Ur=0,Vr=[];function qr(e,t,n,r,i,o,s,a,u){Tr(e)||(s?function(e,t,n,r,i){Vr.unshift(e,t,n,r,i)}(e,n,r,i,u):(Vr.length&&Br(),$r(e,n,r,i,u)));const c=a||Or(t[i],o);return c&&(t[i]=o),c}function Br(){let e=0;for(;e<Vr.length;)$r(Vr[e++],Vr[e++],Vr[e++],Vr[e++],Vr[e++]);Vr.length=0}function $r(e,t,n,r,i){if(n){let o=!1,s=Ir(e);for(;s<e.length;){const a=wr(e,s),u=gr(e,s);if(o=n<=u){n<u&&zr(e,s,n,i),Wr(e,!1,s,r,t);break}s+=3+a}o||(zr(e,e.length,n,i),Wr(e,!1,s,r,t))}else Wr(e,!0,2,r,t)}function zr(e,t,n,r){e.splice(t,0,r?1:0,kr,n,Dr),_r(e,t,xr)}function Wr(e,t,n,r,i){let o=n+3+wr(e,n);t||o--,\"number\"==typeof r?(e.splice(o,0,r),e[n+1]++,_r(e,n,br(e,n)|1<<i)):\"string\"==typeof r&&null==e[o]&&(e[o]=r)}function Hr(e,t,n,r,i,o,s){Vr.length&&Br();const a=!0===(u=i)?-1:!1===u?0:u;var u;const c=Qr,l=(a&br(e,2))>0?1:0;let h=Ir(e);for(;h<e.length;){const i=wr(e,h);if(a&br(e,h)){let a=!1;const u=gr(e,h),d=i-1,f=Er(e,h,d);for(let i=0;i<d;i++){const c=Er(e,h,i),l=r[c];if(Nr(l)){o(t,n,u,s&&vr(e,h)?s(u,l,2):l,c),a=!0;break}}if(c){const i=c(e,t,n,r,o,s,l|(a?4:2),u,f);a=a||i}a||o(t,n,u,f)}h+=3+i}c&&c(e,t,n,r,o,s,l)}let Qr=null;const Gr=(e,t,n,r)=>{r?(r=r.toString(),e&&tn(e)?e.setStyle(t,n,r,en.DashCase):t.style.setProperty(n,r)):e&&tn(e)?e.removeStyle(t,n,en.DashCase):t.style.removeProperty(n)},Kr=(e,t,n,r)=>{\"\"!==n&&(r?e&&tn(e)?e.addClass(t,n):t.classList.add(n):e&&tn(e)?e.removeClass(t,n):t.classList.remove(n))},Yr=(e,t,n,r,i,o,s,a,u)=>{let c=!1;if(wr(e,2)){let l=!0;const h=!a;h&&-2&s&&(l=!1,c=!0),l&&(c=function e(t,n,r,i,o,s,a,u,c,l){let h=!1;if(c<wr(t,2)){const d=Er(t,2,c),f=i[d];let p=function(e){return e>=Zr.length&&Zr.push(1),Zr[e]}(c);for(;p<f.length;){const m=ei(f,p),g=u&&m>u,y=!g&&m===u,v=f[p+1],b=Nr(v);let _=e(t,n,r,i,o,s,g?a:Xr(a,b,y),g?u:m,c+1,l);if(g)break;if(!_&&Jr(a,y)){const e=y&&!b,t=e?l:v,i=e?d:null;o(n,r,m,s?s(m,t,3):t,i),_=!0}h=_&&y,p+=2}Zr[c]=p}return h}(e,t,n,r,i,o,s,a||null,0,u||null)),h&&function(){for(let e=0;e<Zr.length;e++)Zr[e]=1}()}return c};function Xr(e,t,n){let r=e;return t||!n||4&e?(r|=4,r&=-3):(r|=2,r&=-5),r}function Jr(e,t){let n=(1&e)>0;return n?4&e&&t&&(n=!1):2&e&&(n=t),n}const Zr=[];function ei(e,t){return e[t+0]}function ti(e,t,n){e[t+1]=n}const ni=(()=>Promise.resolve(null))();function ri(e){const t=e[_e],n=ut(e);if(t.firstTemplatePass=!1,e[Te]=t.bindingStartIndex,!n){const n=ht();ze(e,t,n,void 0),function(e){for(let t=e[Re];null!==t;t=t[Ce])if(-1===t[Pe]&&Ue(t))for(let e=Le;e<t.length;e++){const n=t[e];oi(n,n[_e],n[Ie])}}(e),ii(t,e),$e(e),We(e,t.contentHooks,t.contentCheckHooks,n,1,void 0),function(e,t){const n=bt();try{if(e.expandoInstructions){let n=t[Te]=e.expandoStartIndex;ft(n);let r=-1,i=-1;for(let o=0;o<e.expandoInstructions.length;o++){const s=e.expandoInstructions[o];if(\"number\"==typeof s){if(s<=0){rt(i=-s);const t=e.expandoInstructions[++o];r=n+=Zt+t}else n+=s;ft(n)}else null!==s&&(t[Te]=n,s(2,je(t[r]),i),et+=1+nt,tt=0,nt=0),r++}}}finally{rt(n)}}(t,e)}n&&t.staticContentQueries&&ii(t,e),function(e){if(null!=e)for(let t=0;t<e.length;t++)ci(e[t])}(t.components)}function ii(e,t){if(null!=e.contentQueries){mt(0);for(let n=0;n<e.contentQueries.length;n++){const r=e.contentQueries[n];e.data[r].contentQueries(2,t[r],r)}}}function oi(e,t,n){const r=Je,i=st();let o;if(512&e[we])li(cn(e));else{let s=!1;try{at(null,!0),o=gt(e,e[Se]),$e(e),ai(e,t.template,ui(e),n),e[_e].firstTemplatePass=!1,ri(e),s=!0}finally{yt(o,s),at(i,r)}}}function si(e,t,n){const r=e[Oe],i=gt(e,e[Se]),o=!ht(),s=ut(e);let a=!1;try{o&&!s&&r.begin&&r.begin(),s&&(n&&ai(e,n,1,t),ri(e),e[we]&=-5),$e(e),n&&ai(e,n,2,t),ri(e),a=!0}finally{o&&!s&&r.end&&r.end(),yt(i,a)}}function ai(e,t,n,r){wt=null;const i=bt();try{rt(null),2&n&&function(e,t){ze(e,e[_e],ht(),0),_t(0)}(e),t(n,r)}finally{_t(i)}}function ui(e){return ut(e)?1:2}function ci(e){const t=Ke(),n=function(n,r){const i=t[e];return Fe(i)?i:i[be]}();(128==(128&n[we])||ut(t))&&80&n[we]&&(function(e){const t=e[_e];for(let n=e.length;n<t.blueprint.length;n++)e[n]=t.blueprint[n]}(n),function(e,t){const n=e[_e],r=gt(e,e[Se]),i=n.template,o=ut(e);let s=!1;try{$e(e),o&&hi(1,n,t),ai(e,i,ui(e),t),ri(e),o&&!n.staticViewQueries||hi(2,n,t),s=!0}finally{yt(r,s)}}(n,n[Ie]))}function li(e){for(let t=0;t<e.components.length;t++){const n=e.components[t];si(Be(n),n)}}function hi(e,t,n){const r=t.viewQuery;r&&(mt(t.viewQueryStartIndex),r(e,n))}function di(e,t,n){const r=e[_e];for(let i=0;i<t.length;){const o=t[i++],s=t[i++],a=t[i++],u=e[o],c=r.data[o];c.setInput?c.setInput(u,n,s,a):u[a]=n}}let fi=null;function pi(){if(!fi){const e=N.Symbol;if(e&&e.iterator)fi=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];\"entries\"!==n&&\"size\"!==n&&Map.prototype[n]===Map.prototype.entries&&(fi=n)}}}return fi}function mi(e,t){return e===t||\"number\"==typeof e&&\"number\"==typeof t&&isNaN(e)&&isNaN(t)}function gi(e,t){const n=vi(e),r=vi(t);if(n&&r)return function(e,t,n){const r=e[pi()](),i=t[pi()]();for(;;){const e=r.next(),t=i.next();if(e.done&&t.done)return!0;if(e.done||t.done)return!1;if(!n(e.value,t.value))return!1}}(e,t,gi);{const i=e&&(\"object\"==typeof e||\"function\"==typeof e),o=t&&(\"object\"==typeof t||\"function\"==typeof t);return!(n||!i||r||!o)||mi(e,t)}}class yi{constructor(e){this.wrapped=e}static wrap(e){return new yi(e)}static unwrap(e){return yi.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof yi}}function vi(e){return!!bi(e)&&(Array.isArray(e)||!(e instanceof Map)&&pi()in e)}function bi(e){return null!==e&&(\"function\"==typeof e||\"object\"==typeof e)}function _i(e,t){Qr=Yr;const n=bt(),r=Ke(),i=r[Te]++;if(e!==yn){const o=qe(n,r),s=nt>0,a=r[i],u=Or(a,e),c=function(e,t){const n=Array.isArray(e)?e:[null];n[0]=t||null;for(let s=1;s<n.length;s+=2)ti(n,s,null);let r,i=null,o=!1;if(\"string\"==typeof t?t.length&&(i=t.split(/\\s+/),o=!0):(i=t?Object.keys(t):null,r=t),i)e:for(let s=0;s<i.length;s++){const e=i[s],t=!!o||r[e];for(let r=1;r<n.length;r+=2){const i=ei(n,r);if(e<=i){i===e?ti(n,r,t):n.splice(r,0,e,t);continue e}}n.push(e,t)}return n}(a,e);if(t)!function(e,t,n,i,o,a,u){const l=Pr;(qr(e,r,l,null,i,c,s,u,!1)||u)&&(Ur|=1<<l)}(Ci(o),0,0,i,0,0,u);else{Ar(r);!function(e,t,n,i,o,a,u,l){const h=Pr;(qr(e,r,h,null,i,c,s,l,!0)||l)&&(Fr|=1<<h)}(Ei(o),0,0,i,0,0,0,u)}}}function wi(){return it()+ot()}function Ei(e){return Si(e,!1)}function Ci(e){return Si(e,!0)}function Si(e,t){let n=t?e.newClasses:e.newStyles;return n||(n=[0,0,1,0,fr],t?e.newClasses=n:e.newStyles=n),n}function Ti(e,t,n){const r=st();r.stylingTemplate||(r.stylingTemplate=on());const i=Ri();i?(lr()&&function(){const e=Ke();var t,n;t=qe(bt(),e),n=wi(),pr(Ci(t),n),pr(Ei(t),n)}(),sn(r.stylingTemplate,i),(r.onElementCreationFns=r.onElementCreationFns||[]).push(()=>{Ii(r,e,t,n,i),function(e,t){let n=e[8];n||(n=e[8]=[rn]),n[0]=t}(r.stylingTemplate,i)})):Ii(r,e,t,n,rn)}function Ii(e,t,n,r,i){!function(e,t,n,r,i){if(16&e[1])return;if(!function(e,t,n,r){const i=e[2],o=2*t;return!(o<i.length&&i[o+0]>=0||(sn(e,t,e[5].length,r),0))}(e,t,0,i))return;r&&(r=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(sr(e[n]));return t}(r));const o=e[5],s=o[1],a=o[0],u=e[6],c=e[7],l=4*a;let h=10+l,d=h+4*s,f=d+l;const p=o.length;o.push(r?r.length:0,n?n.length:0);let m=0;const g=[];if(r&&r.length)for(let D=0;D<r.length;D++){const t=r[D];let n=_n(e,t,10,h);-1==n&&(n=h+m,m+=4,g.push(t)),o.push(n)}const y=[];if(n&&n.length)for(let D=0;D<n.length;D++){const t=n[D];let r=_n(e,t,h,d);-1==r?(r=d+m,m+=4,y.push(t)):r+=4*g.length,o.push(r)}let v=2;if(g.length)for(;v<p;){const e=o[v+0],t=o[v+1];if(t){const n=v+2+e;for(let e=n;e<n+t;e++)o[e]+=4*g.length}v+=2+(e+t)}const b=y.length+g.length;for(let D=10;D<e.length;D+=4){const t=D>=d,n=D>=(t?f:h),r=Bn(e,D),i=kn(r);let o=xn(r);qn(e,D,Rn(r,i,o+=t?n?4*g.length:0:4*b+4*(n?g.length:0)))}for(let D=0;D<4*g.length;D++)e.splice(f,0,null),e.splice(h,0,null),h++,d++,f+=2;for(let D=0;D<4*y.length;D++)e.splice(d,0,null),e.push(null),d++,f++;const _=e[4],w=e[3];for(let D=0;D<b;D++){const n=D>=g.length,r=n?D-g.length:D,o=n?y[r]:g[r];let u,c;n?(u=f+4*(s+r),c=h+4*(s+r)):(u=d+4*(a+r),c=10+4*(a+r));let l=n?_:w,p=tr(l,o);-1===p?(C=l,S=o,T=!n&&null,I=t,null===(E=null)&&(E=C.length,C.push(null,null,null),C[E+0]=S),C[E+1]=T,C[E+2]=I,p=E+1):p+=1;const m=Yn(e,o,n,i||null);qn(e,c,Rn(m,p,u)),Mn(e,c,o),jn(e,c,null),Fn(e,c,0,t),qn(e,u,Rn(m,p,c)),Mn(e,u,o),jn(e,u,null),Fn(e,u,0,t)}var E,C,S,T,I;o[1]=s+y.length,o[0]=a+g.length,u[0]+=y.length,c[0]+=g.length;const O=4*g.length,N=4*y.length,A=c.length;ar(e,t,!1,d+4*a,g.length);for(let D=1;D<A;D+=4)c[D+1]+=N+O;const R=u.length;ar(e,t,!0,f+4*s,y.length);for(let D=1;D<R;D+=4)u[D+1]+=2*O+N;qn(e,1,Rn(0,0,d))}(e.stylingTemplate,i,t,n,r)}function Oi(e){const t=bt(),n=Ke(),r=Di(t,n),i=Ri();if(i)vn(r,i,En,[r,e,i]);else{const i=qe(t,n);if(function(e){return 0!=(16&e.flags)}(i)&&e!==yn){const t=ir(r),o=(t.length?t+\" \":\"\")+function(e){let t=\"\";if(e){const n=Object.keys(e);for(let r=0;r<n.length;r++){const i=n[r];t+=(r?\";\":\"\")+`${i}:${e[i]}`}}return t}(e);di(n,i.inputs.style,o),e=yn}En(r,e)}lr()&&function(e){_i(e,!1)}(e)}function Ni(e){const t=bt(),n=Ke(),r=Di(t,n),i=Ri();if(i)vn(r,i,wn,[r,e,i]);else{const i=qe(t,n);if(function(e){return 0!=(8&e.flags)}(i)&&e!==yn){const t=ir(r),o=(t.length?t+\" \":\"\")+function(e){return e&&\"string\"!=typeof e&&(e=Object.keys(e).join(\" \")),e||\"\"}(e);di(n,i.inputs.class,o),e=yn}wn(r,e)}lr()&&function(e){_i(e,!0)}(e)}function Ai(){const e=bt(),t=Ri()||rn,n=Ke(),r=3===qe(e,n).type?n[Ne]:null,i=0!=(8&n[we]),o=Di(e,n);cr<2&&function(e,t,n,r,i,o,s=0){let a=0;if(function(e,t){const n=e[8];return!n||n[0]===t}(e,s)&&(function(e){const t=e[8];if(t){for(let e=1;e<t.length;e+=3)t[e+1].apply(this,t[e+2]);t.length=1}}(e),function(e){return On(e,1)}(e))){const i=e[0],o=8&e[1],s=Ln(e);for(let n=10;n<e.length;n+=4)if(On(e,n)){const o=Bn(e,n),a=er(e,n),u=zn(e,n),c=$n(e,n),l=4&o?nr(e,a):null,h=Vn(e,n),d=!!(2&o);let f=c;n<s&&!Kn(f)&&(f=$n(e,xn(o))),Kn(f)||(f=Dn(e,o)),t&&(!r||f)&&(d?Tn(i,u,!!f,t,null,h):Sn(i,u,f,t,l,null,h)),In(e,n,!1)}if(o){const t=Array.isArray(n)?cn(n):n,o=e[9],s=o[0];for(let e=1;e<s;e+=2){const n=o[e],s=e+1,u=o[s];if(n){const e=n.buildPlayer(u,r);void 0!==e&&(null!=e&&an(o,t,i,e,s)&&a++,u&&u.destroy())}else u&&u.destroy()}Hn(e,!1)}Wn(e,!1)}return a}(o,r,n,i,0,0,t)>0&&function(e,t){const n=0===e.flags;if(e.flags|=2,n&&e.clean==ni){let t;e.clean=new Promise(e=>t=e),e.scheduler(()=>{if(1&e.flags&&(e.flags&=-2,li(e)),2&e.flags){e.flags&=-3;const t=e.playerHandler;t&&t.flushPlayers()}e.clean=ni,t(null)})}}(cn(n)),Ge(null),lr()&&function(){const e=bt(),t=Ke(),n=qe(e,t),r=function(e,t){return 3===e.type?t[Ne]:null}(n,t),i=function(e,n){let r=t[e+ke],i=t;for(;Array.isArray(r);)i=r,r=r[be];return Ve(i)?i[0]:r}(e),o=wi();!function(e,t,n,r,i){Cr(n,i)&&(!Tr(n)&&Sr(n),Ur&&(Hr(n,e,r,t,Ur,Kr,null),Ur=0),jr=Lr)}(r,t,Ci(n),i,o);const s=Ar(t);!function(e,t,n,r,i,o){Cr(n,i)&&(!Tr(n)&&Sr(n),Fr&&(Hr(n,e,r,t,Fr,Gr,o),Fr=0),Mr=Lr)}(r,t,Ei(n),i,o,s),hr(null)}()}function Ri(){return it()+ot()}function Di(e,t){let n=Qe;return n||Ge(n=function(e,t){let n=e,r=t[n],i=t;for(;Array.isArray(r);)i=r,r=r[be];if(Ve(i))return i;{const o=qe(e-ke,t).stylingTemplate;return i!==t&&(n=be),i[n]=o?function(e,t){const n=t.slice();for(let r=0;r<10;r++){const e=t[r];Array.isArray(e)&&(n[r]=e.slice())}return n[0]=e,n[1]|=16,n}(r,o):on(r)}}(e+ke,t)),n}function ki(e){return!!e&&\"function\"==typeof e.then}function xi(e){return!!e&&\"function\"==typeof e.subscribe}class Pi{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}class Li{}class Mi{}function ji(e){const t=Error(`No component factory found for ${_(e)}. Did you add it to @NgModule.entryComponents?`);return t[Fi]=e,t}const Fi=\"ngComponent\";class Ui{resolveComponentFactory(e){throw ji(e)}}let Vi=(()=>{class e{}return e.NULL=new Ui,e})();class qi{constructor(e,t,n){this._parent=t,this._ngModule=n,this._factories=new Map;for(let r=0;r<e.length;r++){const t=e[r];this._factories.set(t.componentType,t)}}resolveComponentFactory(e){let t=this._factories.get(e);if(!t&&this._parent&&(t=this._parent.resolveComponentFactory(e)),!t)throw ji(e);return new Bi(t,this._ngModule)}}class Bi extends Mi{constructor(e,t){super(),this.factory=e,this.ngModule=t,this.selector=e.selector,this.componentType=e.componentType,this.ngContentSelectors=e.ngContentSelectors,this.inputs=e.inputs,this.outputs=e.outputs}create(e,t,n,r){return this.factory.create(e,t,n,r||this.ngModule)}}class $i{}class zi{}function Wi(...e){}let Hi=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=()=>Qi(e),e})();const Qi=Wi;class Gi{}class Ki{}const Yi=function(){var e={Important:1,DashCase:2};return e[e.Important]=\"Important\",e[e.DashCase]=\"DashCase\",e}();let Xi=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Ji(),e})();const Ji=Wi;class Zi{constructor(e){this.full=e,this.major=e.split(\".\")[0],this.minor=e.split(\".\")[1],this.patch=e.split(\".\").slice(2).join(\".\")}}const eo=new Zi(\"8.1.3\");class to{constructor(){}supports(e){return vi(e)}create(e){return new ro(e)}}const no=(e,t)=>t;class ro{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||no}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,i=null;for(;t||n;){const o=!n||t&&t.currentIndex<ao(n,r,i)?t:n,s=ao(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{i||(i=[]);const e=s-r,t=a-r;if(e!=t){for(let n=0;n<e;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;t<=o&&o<e&&(i[n]=r+1)}i[o.previousIndex]=t-e}}s!==a&&e(o,s,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!vi(e))throw new Error(`Error trying to diff '${_(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,r,i=this._itHead,o=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)r=this._trackByFn(t,n=e[t]),null!==i&&mi(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,t)),mi(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,t),o=!0),i=i._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[pi()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(e,e=>{r=this._trackByFn(t,e),null!==i&&mi(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,e,r,t)),mi(i.item,e)||this._addIdentityChange(i,e)):(i=this._mismatch(i,e,r,t),o=!0),i=i._next,t++}),this.length=t;return this._truncate(i),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e,t;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=t)e.previousIndex=e.currentIndex,t=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(mi(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(mi(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):e=this._addAfter(new io(t,n),i,r),e}_verifyReinsertion(e,t,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new so),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t?e:(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e,e)}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new so),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class io{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class oo{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&mi(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class so{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new oo,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ao(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}class uo{constructor(){}supports(e){return e instanceof Map||bi(e)}create(){return new co}}class co{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||bi(e)))throw new Error(`Error trying to diff '${_(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const r=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,r)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new lo(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){mi(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class lo{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let ho=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(null!=n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>{if(!n)throw new Error(\"Cannot extend IterableDiffers without a parent injector\");return e.create(t,n)},deps:[[e,new f,new h]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${n=e,n.name||typeof n}'`);var n}}return e.ngInjectableDef=g({token:e,providedIn:\"root\",factory:()=>new e([new to])}),e})(),fo=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>{if(!n)throw new Error(\"Cannot extend KeyValueDiffers without a parent injector\");return e.create(t,n)},deps:[[e,new f,new h]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.ngInjectableDef=g({token:e,providedIn:\"root\",factory:()=>new e([new uo])}),e})(),po=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>mo(),e})();const mo=(...e)=>{},go=[new uo],yo=new ho([new to]),vo=new fo(go);let bo=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>_o(e,Hi),e})();const _o=Wi;let wo=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Eo(e,Hi),e})();const Eo=Wi;function Co(e,t,n,r){let i=`ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '${t}'. Current value: '${n}'.`;return r&&(i+=\" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?\"),function(e,t){const n=new Error(e);return So(n,t),n}(i,e)}function So(e,t){e[ne]=t,e[ie]=t.logError.bind(t)}function To(e){return new Error(`ViewDestroyedError: Attempt to use a destroyed view: ${e}`)}function Io(e,t,n){const r=e.state,i=1792&r;return i===t?(e.state=-1793&r|n,e.initIndex=-1,!0):i===n}function Oo(e,t,n){return(1792&e.state)===t&&e.initIndex<=n&&(e.initIndex=n+1,!0)}function No(e,t){return e.nodes[t]}function Ao(e,t){return e.nodes[t]}function Ro(e,t){return e.nodes[t]}function Do(e,t){return e.nodes[t]}function ko(e,t){return e.nodes[t]}const xo={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0},Po=()=>{},Lo=new Map;function Mo(e){let t=Lo.get(e);return t||(t=_(e)+\"_\"+Lo.size,Lo.set(e,t)),t}function jo(e,t,n,r){if(yi.isWrapped(r)){r=yi.unwrap(r);const i=e.def.nodes[t].bindingIndex+n,o=yi.unwrap(e.oldValues[i]);e.oldValues[i]=new yi(o)}return r}const Fo=\"$$undefined\",Uo=\"$$empty\";function Vo(e){return{id:Fo,styles:e.styles,encapsulation:e.encapsulation,data:e.data}}let qo=0;function Bo(e,t,n,r){return!(!(2&e.state)&&mi(e.oldValues[t.bindingIndex+n],r))}function $o(e,t,n,r){return!!Bo(e,t,n,r)&&(e.oldValues[t.bindingIndex+n]=r,!0)}function zo(e,t,n,r){const i=e.oldValues[t.bindingIndex+n];if(1&e.state||!gi(i,r)){const o=t.bindings[n].name;throw Co(xo.createDebugContext(e,t.nodeIndex),`${o}: ${i}`,`${o}: ${r}`,0!=(1&e.state))}}function Wo(e){let t=e;for(;t;)2&t.def.flags&&(t.state|=8),t=t.viewContainerParent||t.parent}function Ho(e,t){let n=e;for(;n&&n!==t;)n.state|=64,n=n.viewContainerParent||n.parent}function Qo(e,t,n,r){try{return Wo(33554432&e.def.nodes[t].flags?Ao(e,t).componentView:e),xo.handleEvent(e,t,n,r)}catch(i){e.root.errorHandler.handleError(i)}}function Go(e){return e.parent?Ao(e.parent,e.parentNodeDef.nodeIndex):null}function Ko(e){return e.parent?e.parentNodeDef.parent:null}function Yo(e,t){switch(201347067&t.flags){case 1:return Ao(e,t.nodeIndex).renderElement;case 2:return No(e,t.nodeIndex).renderText}}function Xo(e,t){return e?`${e}:${t}`:t}function Jo(e){return!!e.parent&&!!(32768&e.parentNodeDef.flags)}function Zo(e){return!(!e.parent||32768&e.parentNodeDef.flags)}function es(e){return 1<<e%32}function ts(e){const t={};let n=0;const r={};return e&&e.forEach(([e,i])=>{\"number\"==typeof e?(t[e]=i,n|=es(e)):r[e]=i}),{matchedQueries:t,references:r,matchedQueryIds:n}}function ns(e,t){return e.map(e=>{let n,r;return Array.isArray(e)?[r,n]=e:(r=0,n=e),n&&(\"function\"==typeof n||\"object\"==typeof n)&&t&&Object.defineProperty(n,M,{value:t,configurable:!0}),{flags:r,token:n,tokenKey:Mo(n)}})}function rs(e,t,n){let r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===ae.Native?Ao(e,n.renderParent.nodeIndex).renderElement:void 0:t}const is=new WeakMap;function os(e){let t=is.get(e);return t||((t=e(()=>Po)).factory=e,is.set(e,t)),t}function ss(e,t,n,r,i){3===t&&(n=e.renderer.parentNode(Yo(e,e.def.lastRenderRootNode))),as(e,t,0,e.def.nodes.length-1,n,r,i)}function as(e,t,n,r,i,o,s){for(let a=n;a<=r;a++){const n=e.def.nodes[a];11&n.flags&&cs(e,n,t,i,o,s),a+=n.childCount}}function us(e,t,n,r,i,o){let s=e;for(;s&&!Jo(s);)s=s.parent;const a=s.parent,u=Ko(s),c=u.nodeIndex+u.childCount;for(let l=u.nodeIndex+1;l<=c;l++){const e=a.def.nodes[l];e.ngContentIndex===t&&cs(a,e,n,r,i,o),l+=e.childCount}if(!a.parent){const s=e.root.projectableNodes[t];if(s)for(let t=0;t<s.length;t++)ls(e,s[t],n,r,i,o)}}function cs(e,t,n,r,i,o){if(8&t.flags)us(e,t.ngContent.index,n,r,i,o);else{const s=Yo(e,t);if(3===n&&33554432&t.flags&&48&t.bindingFlags?(16&t.bindingFlags&&ls(e,s,n,r,i,o),32&t.bindingFlags&&ls(Ao(e,t.nodeIndex).componentView,s,n,r,i,o)):ls(e,s,n,r,i,o),16777216&t.flags){const s=Ao(e,t.nodeIndex).viewContainer._embeddedViews;for(let e=0;e<s.length;e++)ss(s[e],n,r,i,o)}1&t.flags&&!t.element.name&&as(e,n,t.nodeIndex+1,t.nodeIndex+t.childCount,r,i,o)}}function ls(e,t,n,r,i,o){const s=e.renderer;switch(n){case 1:s.appendChild(r,t);break;case 2:s.insertBefore(r,t,i);break;case 3:s.removeChild(r,t);break;case 0:o.push(t)}}const hs=/^:([^:]+):(.+)$/;function ds(e){if(\":\"===e[0]){const t=e.match(hs);return[t[1],t[2]]}return[\"\",e]}function fs(e){let t=0;for(let n=0;n<e.length;n++)t|=e[n].flags;return t}function ps(e,t,n,r,i,o,s,a,u,c,l,h,d,f,p,m,g,y,v,b){switch(e){case 1:return t+ms(n)+r;case 2:return t+ms(n)+r+ms(i)+o;case 3:return t+ms(n)+r+ms(i)+o+ms(s)+a;case 4:return t+ms(n)+r+ms(i)+o+ms(s)+a+ms(u)+c;case 5:return t+ms(n)+r+ms(i)+o+ms(s)+a+ms(u)+c+ms(l)+h;case 6:return t+ms(n)+r+ms(i)+o+ms(s)+a+ms(u)+c+ms(l)+h+ms(d)+f;case 7:return t+ms(n)+r+ms(i)+o+ms(s)+a+ms(u)+c+ms(l)+h+ms(d)+f+ms(p)+m;case 8:return t+ms(n)+r+ms(i)+o+ms(s)+a+ms(u)+c+ms(l)+h+ms(d)+f+ms(p)+m+ms(g)+y;case 9:return t+ms(n)+r+ms(i)+o+ms(s)+a+ms(u)+c+ms(l)+h+ms(d)+f+ms(p)+m+ms(g)+y+ms(v)+b;default:throw new Error(\"Does not support more than 9 expressions\")}}function ms(e){return null!=e?e.toString():\"\"}const gs=new Object,ys=Mo(Q),vs=Mo(R),bs=Mo($i);function _s(e,t,n,r){return n=C(n),{index:-1,deps:ns(r,_(t)),flags:e,token:t,value:n}}function ws(e){const t={},n=[];let r=!1;for(let i=0;i<e.length;i++){const o=e[i];o.token===W&&!0===o.value&&(r=!0),1073741824&o.flags&&n.push(o.token),o.index=i,t[Mo(o.token)]=o}return{factory:null,providersByKey:t,providers:e,modules:n,isRoot:r}}function Es(e,t,n=Q.THROW_IF_NOT_FOUND){const r=V(e);try{if(8&t.flags)return t.token;if(2&t.flags&&(n=null),1&t.flags)return e._parent.get(t.token,n);const s=t.tokenKey;switch(s){case ys:case vs:case bs:return e}const a=e._def.providersByKey[s];let u;if(a){let t=e._providers[a.index];return void 0===t&&(t=e._providers[a.index]=Cs(e,a)),t===gs?void 0:t}if((u=v(t.token))&&(i=e,null!=(o=u).providedIn&&(function(e,t){return e._def.modules.indexOf(o.providedIn)>-1}(i)||\"root\"===o.providedIn&&i._def.isRoot))){const n=e._providers.length;return e._def.providers[n]=e._def.providersByKey[t.tokenKey]={flags:5120,value:u.factory,deps:[],index:n,token:t.token},e._providers[n]=gs,e._providers[n]=Cs(e,e._def.providersByKey[t.tokenKey])}return 4&t.flags?n:e._parent.get(t.token,n)}finally{V(r)}var i,o}function Cs(e,t){let n;switch(201347067&t.flags){case 512:n=function(e,t,n){const r=n.length;switch(r){case 0:return new t;case 1:return new t(Es(e,n[0]));case 2:return new t(Es(e,n[0]),Es(e,n[1]));case 3:return new t(Es(e,n[0]),Es(e,n[1]),Es(e,n[2]));default:const i=new Array(r);for(let t=0;t<r;t++)i[t]=Es(e,n[t]);return new t(...i)}}(e,t.value,t.deps);break;case 1024:n=function(e,t,n){const r=n.length;switch(r){case 0:return t();case 1:return t(Es(e,n[0]));case 2:return t(Es(e,n[0]),Es(e,n[1]));case 3:return t(Es(e,n[0]),Es(e,n[1]),Es(e,n[2]));default:const i=Array(r);for(let t=0;t<r;t++)i[t]=Es(e,n[t]);return t(...i)}}(e,t.value,t.deps);break;case 2048:n=Es(e,t.deps[0]);break;case 256:n=t.value}return n===gs||null===n||\"object\"!=typeof n||131072&t.flags||\"function\"!=typeof n.ngOnDestroy||(t.flags|=131072),void 0===n?gs:n}function Ss(e,t){const n=e.viewContainer._embeddedViews;if((null==t||t>=n.length)&&(t=n.length-1),t<0)return null;const r=n[t];return r.viewContainerParent=null,Ns(n,t),xo.dirtyParentQueries(r),Is(r),r}function Ts(e,t,n){const r=t?Yo(t,t.def.lastRenderRootNode):e.renderElement,i=n.renderer.parentNode(r),o=n.renderer.nextSibling(r);ss(n,2,i,o,void 0)}function Is(e){ss(e,3,null,null,void 0)}function Os(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Ns(e,t){t>=e.length-1?e.pop():e.splice(t,1)}const As=new Object;function Rs(e,t,n,r,i,o){return new Ds(e,t,n,r,i,o)}class Ds extends Mi{constructor(e,t,n,r,i,o){super(),this.selector=e,this.componentType=t,this._inputs=r,this._outputs=i,this.ngContentSelectors=o,this.viewDefFactory=n}get inputs(){const e=[],t=this._inputs;for(let n in t)e.push({propName:n,templateName:t[n]});return e}get outputs(){const e=[];for(let t in this._outputs)e.push({propName:t,templateName:this._outputs[t]});return e}create(e,t,n,r){if(!r)throw new Error(\"ngModule should be provided\");const i=os(this.viewDefFactory),o=i.nodes[0].element.componentProvider.nodeIndex,s=xo.createRootView(e,t||[],n,i,r,As),a=Ro(s,o).instance;return n&&s.renderer.setAttribute(Ao(s,0).renderElement,\"ng-version\",eo.full),new ks(s,new Ms(s),a)}}class ks extends Li{constructor(e,t,n){super(),this._view=e,this._viewRef=t,this._component=n,this._elDef=this._view.def.nodes[0],this.hostView=t,this.changeDetectorRef=t,this.instance=n}get location(){return new Hi(Ao(this._view,this._elDef.nodeIndex).renderElement)}get injector(){return new Vs(this._view,this._elDef)}get componentType(){return this._component.constructor}destroy(){this._viewRef.destroy()}onDestroy(e){this._viewRef.onDestroy(e)}}function xs(e,t,n){return new Ps(e,t,n)}class Ps{constructor(e,t,n){this._view=e,this._elDef=t,this._data=n,this._embeddedViews=[]}get element(){return new Hi(this._data.renderElement)}get injector(){return new Vs(this._view,this._elDef)}get parentInjector(){let e=this._view,t=this._elDef.parent;for(;!t&&e;)t=Ko(e),e=e.parent;return e?new Vs(e,t):new Vs(this._view,null)}clear(){for(let e=this._embeddedViews.length-1;e>=0;e--){const t=Ss(this._data,e);xo.destroyView(t)}}get(e){const t=this._embeddedViews[e];if(t){const e=new Ms(t);return e.attachToViewContainerRef(this),e}return null}get length(){return this._embeddedViews.length}createEmbeddedView(e,t,n){const r=e.createEmbeddedView(t||{});return this.insert(r,n),r}createComponent(e,t,n,r,i){const o=n||this.parentInjector;i||e instanceof Bi||(i=o.get($i));const s=e.create(o,r,void 0,i);return this.insert(s.hostView,t),s}insert(e,t){if(e.destroyed)throw new Error(\"Cannot insert a destroyed View in a ViewContainer!\");const n=e;return function(e,t,n,r){let i=t.viewContainer._embeddedViews;null==n&&(n=i.length),r.viewContainerParent=e,Os(i,n,r),function(e,t){const n=Go(t);if(!n||n===e||16&t.state)return;t.state|=16;let r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(t),function(e,n){if(4&n.flags)return;t.parent.def.nodeFlags|=4,n.flags|=4;let r=n.parent;for(;r;)r.childFlags|=4,r=r.parent}(0,t.parentNodeDef)}(t,r),xo.dirtyParentQueries(r),Ts(t,n>0?i[n-1]:null,r)}(this._view,this._data,t,n._view),n.attachToViewContainerRef(this),e}move(e,t){if(e.destroyed)throw new Error(\"Cannot move a destroyed View in a ViewContainer!\");const n=this._embeddedViews.indexOf(e._view);return function(e,t,r){const i=e.viewContainer._embeddedViews,o=i[n];Ns(i,n),null==r&&(r=i.length),Os(i,r,o),xo.dirtyParentQueries(o),Is(o),Ts(e,r>0?i[r-1]:null,o)}(this._data,0,t),e}indexOf(e){return this._embeddedViews.indexOf(e._view)}remove(e){const t=Ss(this._data,e);t&&xo.destroyView(t)}detach(e){const t=Ss(this._data,e);return t?new Ms(t):null}}function Ls(e){return new Ms(e)}class Ms{constructor(e){this._view=e,this._viewContainerRef=null,this._appRef=null}get rootNodes(){return function(e){const t=[];return ss(e,0,void 0,void 0,t),t}(this._view)}get context(){return this._view.context}get destroyed(){return 0!=(128&this._view.state)}markForCheck(){Wo(this._view)}detach(){this._view.state&=-5}detectChanges(){const e=this._view.root.rendererFactory;e.begin&&e.begin();try{xo.checkAndUpdateView(this._view)}finally{e.end&&e.end()}}checkNoChanges(){xo.checkNoChangesView(this._view)}reattach(){this._view.state|=4}onDestroy(e){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(e)}destroy(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),xo.destroyView(this._view)}detachFromAppRef(){this._appRef=null,Is(this._view),xo.dirtyParentQueries(this._view)}attachToAppRef(e){if(this._viewContainerRef)throw new Error(\"This view is already attached to a ViewContainer!\");this._appRef=e}attachToViewContainerRef(e){if(this._appRef)throw new Error(\"This view is already attached directly to the ApplicationRef!\");this._viewContainerRef=e}}function js(e,t){return new Fs(e,t)}class Fs extends bo{constructor(e,t){super(),this._parentView=e,this._def=t}createEmbeddedView(e){return new Ms(xo.createEmbeddedView(this._parentView,this._def,this._def.element.template,e))}get elementRef(){return new Hi(Ao(this._parentView,this._def.nodeIndex).renderElement)}}function Us(e,t){return new Vs(e,t)}class Vs{constructor(e,t){this.view=e,this.elDef=t}get(e,t=Q.THROW_IF_NOT_FOUND){return xo.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:e,tokenKey:Mo(e)},t)}}function qs(e,t){const n=e.def.nodes[t];if(1&n.flags){const t=Ao(e,n.nodeIndex);return n.element.template?t.template:t.renderElement}if(2&n.flags)return No(e,n.nodeIndex).renderText;if(20240&n.flags)return Ro(e,n.nodeIndex).instance;throw new Error(`Illegal state: read nodeValue for node index ${t}`)}function Bs(e){return new $s(e.renderer)}class $s{constructor(e){this.delegate=e}selectRootElement(e){return this.delegate.selectRootElement(e)}createElement(e,t){const[n,r]=ds(t),i=this.delegate.createElement(r,n);return e&&this.delegate.appendChild(e,i),i}createViewRoot(e){return e}createTemplateAnchor(e){const t=this.delegate.createComment(\"\");return e&&this.delegate.appendChild(e,t),t}createText(e,t){const n=this.delegate.createText(t);return e&&this.delegate.appendChild(e,n),n}projectNodes(e,t){for(let n=0;n<t.length;n++)this.delegate.appendChild(e,t[n])}attachViewAfter(e,t){const n=this.delegate.parentNode(e),r=this.delegate.nextSibling(e);for(let i=0;i<t.length;i++)this.delegate.insertBefore(n,t[i],r)}detachView(e){for(let t=0;t<e.length;t++){const n=e[t],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}}destroyView(e,t){for(let n=0;n<t.length;n++)this.delegate.destroyNode(t[n])}listen(e,t,n){return this.delegate.listen(e,t,n)}listenGlobal(e,t,n){return this.delegate.listen(e,t,n)}setElementProperty(e,t,n){this.delegate.setProperty(e,t,n)}setElementAttribute(e,t,n){const[r,i]=ds(t);null!=n?this.delegate.setAttribute(e,i,n,r):this.delegate.removeAttribute(e,i,r)}setBindingDebugInfo(e,t,n){}setElementClass(e,t,n){n?this.delegate.addClass(e,t):this.delegate.removeClass(e,t)}setElementStyle(e,t,n){null!=n?this.delegate.setStyle(e,t,n):this.delegate.removeStyle(e,t)}invokeElementMethod(e,t,n){e[t].apply(e,n)}setText(e,t){this.delegate.setValue(e,t)}animate(){throw new Error(\"Renderer.animate is no longer supported!\")}}function zs(e,t,n,r){return new Ws(e,t,n,r)}class Ws{constructor(e,t,n,r){this._moduleType=e,this._parent=t,this._bootstrapComponents=n,this._def=r,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(e){const t=e._def,n=e._providers=new Array(t.providers.length);for(let r=0;r<t.providers.length;r++){const i=t.providers[r];4096&i.flags||void 0===n[r]&&(n[r]=Cs(e,i))}}(this)}get(e,t=Q.THROW_IF_NOT_FOUND,n=p.Default){let r=0;return n&p.SkipSelf?r|=1:n&p.Self&&(r|=4),Es(this,{token:e,tokenKey:Mo(e),flags:r},t)}get instance(){return this.get(this._moduleType)}get componentFactoryResolver(){return this.get(Vi)}destroy(){if(this._destroyed)throw new Error(`The ng module ${_(this.instance.constructor)} has already been destroyed.`);this._destroyed=!0,function(e,t){const n=e._def,r=new Set;for(let i=0;i<n.providers.length;i++)if(131072&n.providers[i].flags){const t=e._providers[i];if(t&&t!==gs){const e=t.ngOnDestroy;\"function\"!=typeof e||r.has(t)||(e.apply(t),r.add(t))}}}(this),this._destroyListeners.forEach(e=>e())}onDestroy(e){this._destroyListeners.push(e)}}const Hs=Mo(Gi),Qs=Mo(Xi),Gs=Mo(Hi),Ks=Mo(wo),Ys=Mo(bo),Xs=Mo(po),Js=Mo(Q),Zs=Mo(R);function ea(e,t,n,r,i,o,s,a){const u=[];if(s)for(let l in s){const[e,t]=s[l];u[e]={flags:8,name:l,nonMinifiedName:t,ns:null,securityContext:null,suffix:null}}const c=[];if(a)for(let l in a)c.push({type:1,propName:l,target:null,eventName:a[l]});return ra(e,t|=16384,n,r,i,i,o,u,c)}function ta(e,t,n){return ra(-1,e|=16,null,0,t,t,n)}function na(e,t,n,r,i){return ra(-1,e,t,0,n,r,i)}function ra(e,t,n,r,i,o,s,a,u){const{matchedQueries:c,references:l,matchedQueryIds:h}=ts(n);u||(u=[]),a||(a=[]),o=C(o);const d=ns(s,_(i));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:c,matchedQueryIds:h,references:l,ngContentIndex:-1,childCount:r,bindings:a,bindingFlags:fs(a),outputs:u,element:null,provider:{token:i,value:o,deps:d},text:null,query:null,ngContent:null}}function ia(e,t){return ua(e,t)}function oa(e,t){let n=e;for(;n.parent&&!Jo(n);)n=n.parent;return ca(n.parent,Ko(n),!0,t.provider.value,t.provider.deps)}function sa(e,t){const n=ca(e,t.parent,(32768&t.flags)>0,t.provider.value,t.provider.deps);if(t.outputs.length)for(let r=0;r<t.outputs.length;r++){const i=t.outputs[r],o=n[i.propName];if(!xi(o))throw new Error(`@Output ${i.propName} not initialized in '${n.constructor.name}'.`);{const n=o.subscribe(aa(e,t.parent.nodeIndex,i.eventName));e.disposables[t.outputIndex+r]=n.unsubscribe.bind(n)}}return n}function aa(e,t,n){return r=>Qo(e,t,n,r)}function ua(e,t){const n=(8192&t.flags)>0,r=t.provider;switch(201347067&t.flags){case 512:return ca(e,t.parent,n,r.value,r.deps);case 1024:return function(e,t,n,r,i){const o=i.length;switch(o){case 0:return r();case 1:return r(ha(e,t,n,i[0]));case 2:return r(ha(e,t,n,i[0]),ha(e,t,n,i[1]));case 3:return r(ha(e,t,n,i[0]),ha(e,t,n,i[1]),ha(e,t,n,i[2]));default:const s=Array(o);for(let r=0;r<o;r++)s[r]=ha(e,t,n,i[r]);return r(...s)}}(e,t.parent,n,r.value,r.deps);case 2048:return ha(e,t.parent,n,r.deps[0]);case 256:return r.value}}function ca(e,t,n,r,i){const o=i.length;switch(o){case 0:return new r;case 1:return new r(ha(e,t,n,i[0]));case 2:return new r(ha(e,t,n,i[0]),ha(e,t,n,i[1]));case 3:return new r(ha(e,t,n,i[0]),ha(e,t,n,i[1]),ha(e,t,n,i[2]));default:const s=new Array(o);for(let r=0;r<o;r++)s[r]=ha(e,t,n,i[r]);return new r(...s)}}const la={};function ha(e,t,n,r,i=Q.THROW_IF_NOT_FOUND){if(8&r.flags)return r.token;const o=e;2&r.flags&&(i=null);const s=r.tokenKey;s===Xs&&(n=!(!t||!t.element.componentView)),t&&1&r.flags&&(n=!1,t=t.parent);let a=e;for(;a;){if(t)switch(s){case Hs:return Bs(da(a,t,n));case Qs:return da(a,t,n).renderer;case Gs:return new Hi(Ao(a,t.nodeIndex).renderElement);case Ks:return Ao(a,t.nodeIndex).viewContainer;case Ys:if(t.element.template)return Ao(a,t.nodeIndex).template;break;case Xs:return Ls(da(a,t,n));case Js:case Zs:return Us(a,t);default:const e=(n?t.element.allProviders:t.element.publicProviders)[s];if(e){let t=Ro(a,e.nodeIndex);return t||(t={instance:ua(a,e)},a.nodes[e.nodeIndex]=t),t.instance}}n=Jo(a),t=Ko(a),a=a.parent,4&r.flags&&(a=null)}const u=o.root.injector.get(r.token,la);return u!==la||i===la?u:o.root.ngModule.injector.get(r.token,i)}function da(e,t,n){let r;if(n)r=Ao(e,t.nodeIndex).componentView;else for(r=e;r.parent&&!Jo(r);)r=r.parent;return r}function fa(e,t,n,r,i,o){if(32768&n.flags){const t=Ao(e,n.parent.nodeIndex).componentView;2&t.def.flags&&(t.state|=8)}if(t.instance[n.bindings[r].name]=i,524288&n.flags){o=o||{};const t=yi.unwrap(e.oldValues[n.bindingIndex+r]);o[n.bindings[r].nonMinifiedName]=new Pi(t,i,0!=(2&e.state))}return e.oldValues[n.bindingIndex+r]=i,o}function pa(e,t){if(!(e.def.nodeFlags&t))return;const n=e.def.nodes;let r=0;for(let i=0;i<n.length;i++){const o=n[i];let s=o.parent;for(!s&&o.flags&t&&ga(e,i,o.flags&t,r++),0==(o.childFlags&t)&&(i+=o.childCount);s&&1&s.flags&&i===s.nodeIndex+s.childCount;)s.directChildFlags&t&&(r=ma(e,s,t,r)),s=s.parent}}function ma(e,t,n,r){for(let i=t.nodeIndex+1;i<=t.nodeIndex+t.childCount;i++){const t=e.def.nodes[i];t.flags&n&&ga(e,i,t.flags&n,r++),i+=t.childCount}return r}function ga(e,t,n,r){const i=Ro(e,t);if(!i)return;const o=i.instance;o&&(xo.setCurrentNode(e,t),1048576&n&&Oo(e,512,r)&&o.ngAfterContentInit(),2097152&n&&o.ngAfterContentChecked(),4194304&n&&Oo(e,768,r)&&o.ngAfterViewInit(),8388608&n&&o.ngAfterViewChecked(),131072&n&&o.ngOnDestroy())}const ya=new A(\"SCHEDULER_TOKEN\",{providedIn:\"root\",factory:()=>ve}),va={},ba=function(){var e={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencySymbol:15,CurrencyName:16,Currencies:17,PluralCase:18,ExtraData:19};return e[e.LocaleId]=\"LocaleId\",e[e.DayPeriodsFormat]=\"DayPeriodsFormat\",e[e.DayPeriodsStandalone]=\"DayPeriodsStandalone\",e[e.DaysFormat]=\"DaysFormat\",e[e.DaysStandalone]=\"DaysStandalone\",e[e.MonthsFormat]=\"MonthsFormat\",e[e.MonthsStandalone]=\"MonthsStandalone\",e[e.Eras]=\"Eras\",e[e.FirstDayOfWeek]=\"FirstDayOfWeek\",e[e.WeekendRange]=\"WeekendRange\",e[e.DateFormat]=\"DateFormat\",e[e.TimeFormat]=\"TimeFormat\",e[e.DateTimeFormat]=\"DateTimeFormat\",e[e.NumberSymbols]=\"NumberSymbols\",e[e.NumberFormats]=\"NumberFormats\",e[e.CurrencySymbol]=\"CurrencySymbol\",e[e.CurrencyName]=\"CurrencyName\",e[e.Currencies]=\"Currencies\",e[e.PluralCase]=\"PluralCase\",e[e.ExtraData]=\"ExtraData\",e}(),_a=void 0;var wa=[\"en\",[[\"a\",\"p\"],[\"AM\",\"PM\"],_a],[[\"AM\",\"PM\"],_a,_a],[[\"S\",\"M\",\"T\",\"W\",\"T\",\"F\",\"S\"],[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],[\"Su\",\"Mo\",\"Tu\",\"We\",\"Th\",\"Fr\",\"Sa\"]],_a,[[\"J\",\"F\",\"M\",\"A\",\"M\",\"J\",\"J\",\"A\",\"S\",\"O\",\"N\",\"D\"],[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"]],_a,[[\"B\",\"A\"],[\"BC\",\"AD\"],[\"Before Christ\",\"Anno Domini\"]],0,[6,0],[\"M/d/yy\",\"MMM d, y\",\"MMMM d, y\",\"EEEE, MMMM d, y\"],[\"h:mm a\",\"h:mm:ss a\",\"h:mm:ss a z\",\"h:mm:ss a zzzz\"],[\"{1}, {0}\",_a,\"{1} 'at' {0}\",_a],[\".\",\",\",\";\",\"%\",\"+\",\"-\",\"E\",\"\\xd7\",\"\\u2030\",\"\\u221e\",\"NaN\",\":\"],[\"#,##0.###\",\"#,##0%\",\"\\xa4#,##0.00\",\"#E0\"],\"$\",\"US Dollar\",{},function(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\\.?/,\"\").length;return 1===t&&0===n?1:5}];function Ea(e){return Ca(e)[ba.PluralCase]}function Ca(e){const t=e.toLowerCase().replace(/_/g,\"-\");let n=va[t];if(n)return n;const r=t.split(\"-\")[0];if(n=va[r])return n;if(\"en\"===r)return wa;throw new Error(`Missing locale data for the locale \"${e}\".`)}let Sa=\"en-US\";class Ta extends r.a{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){let r,o=e=>null,s=()=>null;e&&\"object\"==typeof e?(r=this.__isAsync?t=>{setTimeout(()=>e.next(t))}:t=>{e.next(t)},e.error&&(o=this.__isAsync?t=>{setTimeout(()=>e.error(t))}:t=>{e.error(t)}),e.complete&&(s=this.__isAsync?()=>{setTimeout(()=>e.complete())}:()=>{e.complete()})):(r=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)},t&&(o=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return e instanceof i.a&&e.add(a),a}}function Ia(){return this._results[pi()]()}class Oa{constructor(){this.dirty=!0,this._results=[],this.changes=new Ta,this.length=0;const e=pi(),t=Oa.prototype;t[e]||(t[e]=Ia)}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e){this._results=function e(t,n){void 0===n&&(n=t);for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?(n===t&&(n=t.slice(0,r)),e(i,n)):n!==t&&n.push(i)}return n}(e),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}const Na=new A(\"Application Initializer\");let Aa=(()=>(class{constructor(e){this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const t=this.appInits[n]();ki(t)&&e.push(t)}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}))();const Ra=new A(\"AppId\");function Da(){return`${ka()}${ka()}${ka()}`}function ka(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const xa=new A(\"Platform Initializer\"),Pa=new A(\"Platform ID\"),La=new A(\"appBootstrapListener\");let Ma=(()=>(class{log(e){console.log(e)}warn(e){console.warn(e)}}))();const ja=new A(\"LocaleId\");function Fa(){throw new Error(\"Runtime compiler is not loaded\")}const Ua=Fa,Va=Fa,qa=Fa,Ba=Fa;let $a,za,Wa=(()=>(class{constructor(){this.compileModuleSync=Ua,this.compileModuleAsync=Va,this.compileModuleAndAllComponentsSync=qa,this.compileModuleAndAllComponentsAsync=Ba}clearCache(){}clearCacheFor(e){}getModuleId(e){}}))();class Ha{}function Qa(){const e=N.wtf;return!(!e||!($a=e.trace)||(za=$a.events,0))}const Ga=Qa(),Ka=Ga?function(e,t=null){return za.createScope(e,t)}:(e,t)=>(function(e,t){return null}),Ya=Ga?function(e,t){return $a.leaveScope(e,t),t}:(e,t)=>t,Xa=(()=>Promise.resolve(0))();function Ja(e){\"undefined\"==typeof Zone?Xa.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask(\"scheduleMicrotask\",e)}class Za{constructor({enableLongStackTrace:e=!1}){if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ta(!1),this.onMicrotaskEmpty=new Ta(!1),this.onStable=new Ta(!1),this.onError=new Ta(!1),\"undefined\"==typeof Zone)throw new Error(\"In this configuration Angular requires Zone.js\");var t;Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(t=this)._inner=t._inner.fork({name:\"angular\",properties:{isAngularZone:!0},onInvokeTask:(e,n,r,i,o,s)=>{try{return ru(t),e.invokeTask(r,i,o,s)}finally{iu(t)}},onInvoke:(e,n,r,i,o,s,a)=>{try{return ru(t),e.invoke(r,i,o,s,a)}finally{iu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&(\"microTask\"==i.change?(t.hasPendingMicrotasks=i.microTask,nu(t)):\"macroTask\"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}static isInAngularZone(){return!0===Zone.current.get(\"isAngularZone\")}static assertInAngularZone(){if(!Za.isInAngularZone())throw new Error(\"Expected to be in Angular Zone, but it is not!\")}static assertNotInAngularZone(){if(Za.isInAngularZone())throw new Error(\"Expected to not be in Angular Zone, but it is!\")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const i=this._inner,o=i.scheduleEventTask(\"NgZoneEvent: \"+r,e,tu,eu,eu);try{return i.runTask(o,t,n)}finally{i.cancelTask(o)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}function eu(){}const tu={};function nu(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function ru(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function iu(e){e._nesting--,nu(e)}class ou{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ta,this.onMicrotaskEmpty=new Ta,this.onStable=new Ta,this.onError=new Ta}run(e){return e()}runGuarded(e){return e()}runOutsideAngular(e){return e()}runTask(e){return e()}}let su=(()=>(class{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=\"undefined\"==typeof Zone?null:Zone.current.get(\"TaskTrackingZone\")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Za.assertNotInAngularZone(),Ja(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error(\"pending async requests below zero\");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ja(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let r=-1;t&&t>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==r),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is \"zone.js/dist/task-tracking.js\" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}))(),au=(()=>{class e{constructor(){this._applications=new Map,hu.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return hu.findTestabilityInTree(this,e,t)}}return e.ctorParameters=()=>[],e})();class uu{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}function cu(e){hu=e}let lu,hu=new uu,du=function(e){return e instanceof Bi};const fu=new A(\"AllowMultipleToken\");class pu{constructor(e,t){this.name=e,this.token=t}}function mu(e,t,n=[]){const r=`Platform: ${t}`,i=new A(r);return(t=[])=>{let o=gu();if(!o||o.injector.get(fu,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{const e=n.concat(t).concat({provide:i,useValue:!0});!function(e){if(lu&&!lu.destroyed&&!lu.injector.get(fu,!1))throw new Error(\"There can be only one platform. Destroy the previous one to create a new one.\");lu=e.get(yu);const t=e.get(xa,null);t&&t.forEach(e=>e())}(Q.create({providers:e,name:r}))}return function(e){const t=gu();if(!t)throw new Error(\"No platform exists!\");if(!t.injector.get(e,null))throw new Error(\"A platform with a different configuration has been created. Please destroy it first.\");return t}(i)}}function gu(){return lu&&!lu.destroyed?lu:null}let yu=(()=>(class{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n=\"noop\"===(i=t?t.ngZone:void 0)?new ou:(\"zone.js\"===i?void 0:i)||new Za({enableLongStackTrace:St()}),r=[{provide:Za,useValue:n}];var i;return n.run(()=>{const t=Q.create({providers:r,parent:this.injector,name:e.moduleType.name}),i=e.create(t),o=i.injector.get(fn,null);if(!o)throw new Error(\"No ErrorHandler. Is platform module (BrowserModule) included?\");return function(e){Sa=e.toLowerCase().replace(/_/g,\"-\")}(i.injector.get(ja,\"en-US\")),i.onDestroy(()=>_u(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:e=>{o.handleError(e)}})),function(e,t,n){try{const i=n();return ki(i)?i.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):i}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(o,n,()=>{const e=i.injector.get(Aa);return e.runInitializers(),e.donePromise.then(()=>(this._moduleDoBootstrap(i),i))})})}bootstrapModule(e,t=[]){const n=vu({},t);return function(e,t,n){return e.get(Ha).createCompiler([t]).compileModuleAsync(n)}(this.injector,n,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(bu);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${_(e.instance.constructor)} was bootstrapped, but it does not declare \"@NgModule.bootstrap\" components nor a \"ngDoBootstrap\" method. `+\"Please define one of these.\");e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error(\"The platform has already been destroyed!\");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}))();function vu(e,t){return Array.isArray(t)?t.reduce(vu,e):Object.assign({},e,t)}let bu=(()=>{class e{constructor(e,t,n,r,i,u){this._zone=e,this._console=t,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=St(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new o.a(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),l=new o.a(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{Za.assertNotInAngularZone(),Ja(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Za.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(c,l.pipe(Object(a.a)()))}bootstrap(e,t){if(!this._initStatus.done)throw new Error(\"Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.\");let n;n=e instanceof Mi?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const r=du(n)?null:this._injector.get($i),i=n.create(Q.NULL,[],t||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const o=i.injector.get(su,null);return o&&i.injector.get(au).registerApplication(i.location.nativeElement,o),this._loadComponent(i),St()&&this._console.log(\"Angular is running in the development mode. Call enableProdMode() to enable the production mode.\"),i}tick(){if(this._runningTick)throw new Error(\"ApplicationRef.tick is called recursively\");const t=e._tickScope();try{this._runningTick=!0;for(let e of this._views)e.detectChanges();if(this._enforceNoNewChanges)for(let e of this._views)e.checkNoChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1,Ya(t)}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;_u(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(La,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}_unloadComponent(e){this.detachView(e.hostView),_u(this.components,e)}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy())}get viewCount(){return this._views.length}}return e._tickScope=Ka(\"ApplicationRef#tick()\"),e})();function _u(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class wu{}class Eu{}const Cu={factoryPathPrefix:\"\",factoryPathSuffix:\".ngfactory\"};let Su=(()=>(class{constructor(e,t){this._compiler=e,this._config=t||Cu}load(e){return this._compiler instanceof Wa?this.loadFactory(e):this.loadAndCompile(e)}loadAndCompile(e){let[t,r]=e.split(\"#\");return void 0===r&&(r=\"default\"),n(\"zn8P\")(t).then(e=>e[r]).then(e=>Tu(e,t,r)).then(e=>this._compiler.compileModuleAsync(e))}loadFactory(e){let[t,r]=e.split(\"#\"),i=\"NgFactory\";return void 0===r&&(r=\"default\",i=\"\"),n(\"zn8P\")(this._config.factoryPathPrefix+t+this._config.factoryPathSuffix).then(e=>e[r+i]).then(e=>Tu(e,t,r))}}))();function Tu(e,t,n){if(!e)throw new Error(`Cannot find '${n}' in '${t}'`);return e}class Iu{constructor(e,t){this.name=e,this.callback=t}}class Ou{constructor(e,t,n){this.listeners=[],this.parent=null,this._debugContext=n,this.nativeNode=e,t&&t instanceof Nu&&t.addChild(this)}get injector(){return this._debugContext.injector}get componentInstance(){return this._debugContext.component}get context(){return this._debugContext.context}get references(){return this._debugContext.references}get providerTokens(){return this._debugContext.providerTokens}}class Nu extends Ou{constructor(e,t,n){super(e,t,n),this.properties={},this.attributes={},this.classes={},this.styles={},this.childNodes=[],this.nativeElement=e}addChild(e){e&&(this.childNodes.push(e),e.parent=this)}removeChild(e){const t=this.childNodes.indexOf(e);-1!==t&&(e.parent=null,this.childNodes.splice(t,1))}insertChildrenAfter(e,t){const n=this.childNodes.indexOf(e);-1!==n&&(this.childNodes.splice(n+1,0,...t),t.forEach(t=>{t.parent&&t.parent.removeChild(t),e.parent=this}))}insertBefore(e,t){const n=this.childNodes.indexOf(e);-1===n?this.addChild(t):(t.parent&&t.parent.removeChild(t),t.parent=this,this.childNodes.splice(n,0,t))}query(e){return this.queryAll(e)[0]||null}queryAll(e){const t=[];return function e(t,n,r){t.childNodes.forEach(t=>{t instanceof Nu&&(n(t)&&r.push(t),e(t,n,r))})}(this,e,t),t}queryAllNodes(e){const t=[];return function e(t,n,r){t instanceof Nu&&t.childNodes.forEach(t=>{n(t)&&r.push(t),t instanceof Nu&&e(t,n,r)})}(this,e,t),t}get children(){return this.childNodes.filter(e=>e instanceof Nu)}triggerEventHandler(e,t){this.listeners.forEach(n=>{n.name==e&&n.callback(t)})}}const Au=new Map,Ru=function(e){return Au.get(e)||null};function Du(e){Au.set(e.nativeNode,e)}const ku=mu(null,\"core\",[{provide:Pa,useValue:\"unknown\"},{provide:yu,deps:[Q]},{provide:au,deps:[]},{provide:Ma,deps:[]}]);function xu(){return yo}function Pu(){return vo}function Lu(e){return e||\"en-US\"}function Mu(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}let ju=(()=>(class{constructor(e){}}))();function Fu(e,t,n,r,i,o){e|=1;const{matchedQueries:s,references:a,matchedQueryIds:u}=ts(t);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:e,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:s,matchedQueryIds:u,references:a,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:o?os(o):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:i||Po},provider:null,text:null,query:null,ngContent:null}}function Uu(e,t,n,r,i,o,s=[],a,u,c,l,h){c||(c=Po);const{matchedQueries:d,references:f,matchedQueryIds:p}=ts(n);let m=null,g=null;o&&([m,g]=ds(o)),a=a||[];const y=new Array(a.length);for(let _=0;_<a.length;_++){const[e,t,n]=a[_],[r,i]=ds(t);let o=void 0,s=void 0;switch(15&e){case 4:s=n;break;case 1:case 8:o=n}y[_]={flags:e,ns:r,name:i,nonMinifiedName:i,securityContext:o,suffix:s}}u=u||[];const v=new Array(u.length);for(let _=0;_<u.length;_++){const[e,t]=u[_];v[_]={type:0,target:e,eventName:t,propName:null}}const b=(s=s||[]).map(([e,t])=>{const[n,r]=ds(e);return[n,r,t]});return h=function(e){if(e&&e.id===Fo){const t=null!=e.encapsulation&&e.encapsulation!==ae.None||e.styles.length||Object.keys(e.data).length;e.id=t?`c${qo++}`:Uo}return e&&e.id===Uo&&(e=null),e||null}(h),l&&(t|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:d,matchedQueryIds:p,references:f,ngContentIndex:r,childCount:i,bindings:y,bindingFlags:fs(y),outputs:v,element:{ns:m,name:g,attrs:b,template:null,componentProvider:null,componentView:l||null,componentRendererType:h,publicProviders:null,allProviders:null,handleEvent:c||Po},provider:null,text:null,query:null,ngContent:null}}function Vu(e,t,n){const r=n.element,i=e.root.selectorOrNode,o=e.renderer;let s;if(e.parent||!i){s=r.name?o.createElement(r.name,r.ns):o.createComment(\"\");const i=rs(e,t,n);i&&o.appendChild(i,s)}else s=o.selectRootElement(i,!!r.componentRendererType&&r.componentRendererType.encapsulation===ae.ShadowDom);if(r.attrs)for(let a=0;a<r.attrs.length;a++){const[e,t,n]=r.attrs[a];o.setAttribute(s,t,n,e)}return s}function qu(e,t,n,r){for(let i=0;i<n.outputs.length;i++){const o=n.outputs[i],s=Bu(e,n.nodeIndex,Xo(o.target,o.eventName));let a=o.target,u=e;\"component\"===o.target&&(a=null,u=t);const c=u.renderer.listen(a||r,o.eventName,s);e.disposables[n.outputIndex+i]=c}}function Bu(e,t,n){return r=>Qo(e,t,n,r)}function $u(e,t,n,r){if(!$o(e,t,n,r))return!1;const i=t.bindings[n],o=Ao(e,t.nodeIndex),s=o.renderElement,a=i.name;switch(15&i.flags){case 1:!function(e,t,n,r,i,o){const s=t.securityContext;let a=s?e.root.sanitizer.sanitize(s,o):o;a=null!=a?a.toString():null;const u=e.renderer;null!=o?u.setAttribute(n,i,a,r):u.removeAttribute(n,i,r)}(e,i,s,i.ns,a,r);break;case 2:!function(e,t,n,r){const i=e.renderer;r?i.addClass(t,n):i.removeClass(t,n)}(e,s,a,r);break;case 4:!function(e,t,n,r,i){let o=e.root.sanitizer.sanitize(Gt.STYLE,i);if(null!=o){o=o.toString();const e=t.suffix;null!=e&&(o+=e)}else o=null;const s=e.renderer;null!=o?s.setStyle(n,r,o):s.removeStyle(n,r)}(e,i,s,a,r);break;case 8:!function(e,t,n,r,i){const o=t.securityContext;let s=o?e.root.sanitizer.sanitize(o,i):i;e.renderer.setProperty(n,r,s)}(33554432&t.flags&&32&i.flags?o.componentView:e,i,s,a,r)}return!0}function zu(e,t,n){let r=[];for(let i in n)r.push({propName:i,bindingType:n[i]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:t,filterId:es(t),bindings:r},ngContent:null}}function Wu(e){const t=e.def.nodeMatchedQueries;for(;e.parent&&Zo(e);){let n=e.parentNodeDef;e=e.parent;const r=n.nodeIndex+n.childCount;for(let i=0;i<=r;i++){const r=e.def.nodes[i];67108864&r.flags&&536870912&r.flags&&(r.query.filterId&t)===r.query.filterId&&ko(e,i).setDirty(),!(1&r.flags&&i+r.childCount<n.nodeIndex)&&67108864&r.childFlags&&536870912&r.childFlags||(i+=r.childCount)}}if(134217728&e.def.nodeFlags)for(let n=0;n<e.def.nodes.length;n++){const t=e.def.nodes[n];134217728&t.flags&&536870912&t.flags&&ko(e,n).setDirty(),n+=t.childCount}}function Hu(e,t){const n=ko(e,t.nodeIndex);if(!n.dirty)return;let r,i=void 0;if(67108864&t.flags){const n=t.parent.parent;i=Qu(e,n.nodeIndex,n.nodeIndex+n.childCount,t.query,[]),r=Ro(e,t.parent.nodeIndex).instance}else 134217728&t.flags&&(i=Qu(e,0,e.def.nodes.length-1,t.query,[]),r=e.component);n.reset(i);const o=t.query.bindings;let s=!1;for(let a=0;a<o.length;a++){const e=o[a];let t;switch(e.bindingType){case 0:t=n.first;break;case 1:t=n,s=!0}r[e.propName]=t}s&&n.notifyOnChanges()}function Qu(e,t,n,r,i){for(let o=t;o<=n;o++){const t=e.def.nodes[o],n=t.matchedQueries[r.id];if(null!=n&&i.push(Gu(e,t,n)),1&t.flags&&t.element.template&&(t.element.template.nodeMatchedQueries&r.filterId)===r.filterId){const n=Ao(e,o);if((t.childMatchedQueries&r.filterId)===r.filterId&&(Qu(e,o+1,o+t.childCount,r,i),o+=t.childCount),16777216&t.flags){const e=n.viewContainer._embeddedViews;for(let t=0;t<e.length;t++){const o=e[t],s=Go(o);s&&s===n&&Qu(o,0,o.def.nodes.length-1,r,i)}}const s=n.template._projectedViews;if(s)for(let e=0;e<s.length;e++){const t=s[e];Qu(t,0,t.def.nodes.length-1,r,i)}}(t.childMatchedQueries&r.filterId)!==r.filterId&&(o+=t.childCount)}return i}function Gu(e,t,n){if(null!=n)switch(n){case 1:return Ao(e,t.nodeIndex).renderElement;case 0:return new Hi(Ao(e,t.nodeIndex).renderElement);case 2:return Ao(e,t.nodeIndex).template;case 3:return Ao(e,t.nodeIndex).viewContainer;case 4:return Ro(e,t.nodeIndex).instance}}function Ku(e,t){return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:t}}}function Yu(e,t,n){const r=rs(e,t,n);r&&us(e,n.ngContent.index,1,r,null,void 0)}function Xu(e,t){const n=Object.keys(t),r=n.length,i=new Array(r);for(let o=0;o<r;o++){const e=n[o];i[t[e]]=e}return function(e,t,n){const r=new Array(n.length);for(let i=0;i<n.length;i++){const e=n[i];r[i]={flags:8,name:e,ns:null,nonMinifiedName:e,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:64,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:r,bindingFlags:fs(r),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}(0,e,i)}function Ju(e,t,n){const r=new Array(n.length-1);for(let i=1;i<n.length;i++)r[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function Zu(e,t,n){let r;const i=e.renderer;r=i.createText(n.text.prefix);const o=rs(e,t,n);return o&&i.appendChild(o,r),{renderText:r}}function ec(e,t){return(null!=e?e.toString():\"\")+t.suffix}function tc(e,t,n,r){let i=0,o=0,s=0,a=0,u=0,c=null,l=null,h=!1,d=!1,f=null;for(let p=0;p<t.length;p++){const e=t[p];if(e.nodeIndex=p,e.parent=c,e.bindingIndex=i,e.outputIndex=o,e.renderParent=l,s|=e.flags,u|=e.matchedQueryIds,e.element){const t=e.element;t.publicProviders=c?c.element.publicProviders:Object.create(null),t.allProviders=t.publicProviders,h=!1,d=!1,e.element.template&&(u|=e.element.template.nodeMatchedQueries)}if(rc(c,e,t.length),i+=e.bindings.length,o+=e.outputs.length,!l&&3&e.flags&&(f=e),20224&e.flags){h||(h=!0,c.element.publicProviders=Object.create(c.element.publicProviders),c.element.allProviders=c.element.publicProviders);const t=0!=(32768&e.flags);0==(8192&e.flags)||t?c.element.publicProviders[Mo(e.provider.token)]=e:(d||(d=!0,c.element.allProviders=Object.create(c.element.publicProviders)),c.element.allProviders[Mo(e.provider.token)]=e),t&&(c.element.componentProvider=e)}if(c?(c.childFlags|=e.flags,c.directChildFlags|=e.flags,c.childMatchedQueries|=e.matchedQueryIds,e.element&&e.element.template&&(c.childMatchedQueries|=e.element.template.nodeMatchedQueries)):a|=e.flags,e.childCount>0)c=e,nc(e)||(l=e);else for(;c&&p===c.nodeIndex+c.childCount;){const e=c.parent;e&&(e.childFlags|=c.childFlags,e.childMatchedQueries|=c.childMatchedQueries),l=(c=e)&&nc(c)?c.renderParent:c}}return{factory:null,nodeFlags:s,rootNodeFlags:a,nodeMatchedQueries:u,flags:e,nodes:t,updateDirectives:n||Po,updateRenderer:r||Po,handleEvent:(e,n,r,i)=>t[n].element.handleEvent(e,r,i),bindingCount:i,outputCount:o,lastRenderRootNode:f}}function nc(e){return 0!=(1&e.flags)&&null===e.element.name}function rc(e,t,n){const r=t.element&&t.element.template;if(r){if(!r.lastRenderRootNode)throw new Error(\"Illegal State: Embedded templates without nodes are not allowed!\");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error(`Illegal State: Last root node of a template can't have embedded views, at index ${t.nodeIndex}!`)}if(20224&t.flags&&0==(1&(e?e.flags:0)))throw new Error(`Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index ${t.nodeIndex}!`);if(t.query){if(67108864&t.flags&&(!e||0==(16384&e.flags)))throw new Error(`Illegal State: Content Query nodes need to be children of directives, at index ${t.nodeIndex}!`);if(134217728&t.flags&&e)throw new Error(`Illegal State: View Query nodes have to be top level nodes, at index ${t.nodeIndex}!`)}if(t.childCount){const r=e?e.nodeIndex+e.childCount:n-1;if(t.nodeIndex<=r&&t.nodeIndex+t.childCount>r)throw new Error(`Illegal State: childCount of node leads outside of parent, at index ${t.nodeIndex}!`)}}function ic(e,t,n,r){const i=ac(e.root,e.renderer,e,t,n);return uc(i,e.component,r),cc(i),i}function oc(e,t,n){const r=ac(e,e.renderer,null,null,t);return uc(r,n,n),cc(r),r}function sc(e,t,n,r){const i=t.element.componentRendererType;let o;return o=i?e.root.rendererFactory.createRenderer(r,i):e.root.renderer,ac(e.root,o,e,t.element.componentProvider,n)}function ac(e,t,n,r,i){const o=new Array(i.nodes.length),s=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:o,state:13,root:e,renderer:t,oldValues:new Array(i.bindingCount),disposables:s,initIndex:-1}}function uc(e,t,n){e.component=t,e.context=n}function cc(e){let t;Jo(e)&&(t=Ao(e.parent,e.parentNodeDef.parent.nodeIndex).renderElement);const n=e.def,r=e.nodes;for(let i=0;i<n.nodes.length;i++){const o=n.nodes[i];let s;switch(xo.setCurrentNode(e,i),201347067&o.flags){case 1:const n=Vu(e,t,o);let a=void 0;if(33554432&o.flags){const t=os(o.element.componentView);a=xo.createComponentView(e,o,t,n)}qu(e,a,o,n),s={renderElement:n,componentView:a,viewContainer:null,template:o.element.template?js(e,o):void 0},16777216&o.flags&&(s.viewContainer=xs(e,o,s));break;case 2:s=Zu(e,t,o);break;case 512:case 1024:case 2048:case 256:(s=r[i])||4096&o.flags||(s={instance:ia(e,o)});break;case 16:s={instance:oa(e,o)};break;case 16384:(s=r[i])||(s={instance:sa(e,o)}),32768&o.flags&&uc(Ao(e,o.parent.nodeIndex).componentView,s.instance,s.instance);break;case 32:case 64:case 128:s={value:void 0};break;case 67108864:case 134217728:s=new Oa;break;case 8:Yu(e,t,o),s=void 0}r[i]=s}vc(e,yc.CreateViewNodes),Ec(e,201326592,268435456,0)}function lc(e){fc(e),xo.updateDirectives(e,1),bc(e,yc.CheckNoChanges),xo.updateRenderer(e,1),vc(e,yc.CheckNoChanges),e.state&=-97}function hc(e){1&e.state?(e.state&=-2,e.state|=2):e.state&=-3,Io(e,0,256),fc(e),xo.updateDirectives(e,0),bc(e,yc.CheckAndUpdate),Ec(e,67108864,536870912,0);let t=Io(e,256,512);pa(e,2097152|(t?1048576:0)),xo.updateRenderer(e,0),vc(e,yc.CheckAndUpdate),Ec(e,134217728,536870912,0),pa(e,8388608|((t=Io(e,512,768))?4194304:0)),2&e.def.flags&&(e.state&=-9),e.state&=-97,Io(e,768,1024)}function dc(e,t,n,r,i,o,s,a,u,c,l,h,d){return 0===n?function(e,t,n,r,i,o,s,a,u,c,l,h){switch(201347067&t.flags){case 1:return function(e,t,n,r,i,o,s,a,u,c,l,h){const d=t.bindings.length;let f=!1;return d>0&&$u(e,t,0,n)&&(f=!0),d>1&&$u(e,t,1,r)&&(f=!0),d>2&&$u(e,t,2,i)&&(f=!0),d>3&&$u(e,t,3,o)&&(f=!0),d>4&&$u(e,t,4,s)&&(f=!0),d>5&&$u(e,t,5,a)&&(f=!0),d>6&&$u(e,t,6,u)&&(f=!0),d>7&&$u(e,t,7,c)&&(f=!0),d>8&&$u(e,t,8,l)&&(f=!0),d>9&&$u(e,t,9,h)&&(f=!0),f}(e,t,n,r,i,o,s,a,u,c,l,h);case 2:return function(e,t,n,r,i,o,s,a,u,c,l,h){let d=!1;const f=t.bindings,p=f.length;if(p>0&&$o(e,t,0,n)&&(d=!0),p>1&&$o(e,t,1,r)&&(d=!0),p>2&&$o(e,t,2,i)&&(d=!0),p>3&&$o(e,t,3,o)&&(d=!0),p>4&&$o(e,t,4,s)&&(d=!0),p>5&&$o(e,t,5,a)&&(d=!0),p>6&&$o(e,t,6,u)&&(d=!0),p>7&&$o(e,t,7,c)&&(d=!0),p>8&&$o(e,t,8,l)&&(d=!0),p>9&&$o(e,t,9,h)&&(d=!0),d){let d=t.text.prefix;p>0&&(d+=ec(n,f[0])),p>1&&(d+=ec(r,f[1])),p>2&&(d+=ec(i,f[2])),p>3&&(d+=ec(o,f[3])),p>4&&(d+=ec(s,f[4])),p>5&&(d+=ec(a,f[5])),p>6&&(d+=ec(u,f[6])),p>7&&(d+=ec(c,f[7])),p>8&&(d+=ec(l,f[8])),p>9&&(d+=ec(h,f[9]));const m=No(e,t.nodeIndex).renderText;e.renderer.setValue(m,d)}return d}(e,t,n,r,i,o,s,a,u,c,l,h);case 16384:return function(e,t,n,r,i,o,s,a,u,c,l,h){const d=Ro(e,t.nodeIndex),f=d.instance;let p=!1,m=void 0;const g=t.bindings.length;return g>0&&Bo(e,t,0,n)&&(p=!0,m=fa(e,d,t,0,n,m)),g>1&&Bo(e,t,1,r)&&(p=!0,m=fa(e,d,t,1,r,m)),g>2&&Bo(e,t,2,i)&&(p=!0,m=fa(e,d,t,2,i,m)),g>3&&Bo(e,t,3,o)&&(p=!0,m=fa(e,d,t,3,o,m)),g>4&&Bo(e,t,4,s)&&(p=!0,m=fa(e,d,t,4,s,m)),g>5&&Bo(e,t,5,a)&&(p=!0,m=fa(e,d,t,5,a,m)),g>6&&Bo(e,t,6,u)&&(p=!0,m=fa(e,d,t,6,u,m)),g>7&&Bo(e,t,7,c)&&(p=!0,m=fa(e,d,t,7,c,m)),g>8&&Bo(e,t,8,l)&&(p=!0,m=fa(e,d,t,8,l,m)),g>9&&Bo(e,t,9,h)&&(p=!0,m=fa(e,d,t,9,h,m)),m&&f.ngOnChanges(m),65536&t.flags&&Oo(e,256,t.nodeIndex)&&f.ngOnInit(),262144&t.flags&&f.ngDoCheck(),p}(e,t,n,r,i,o,s,a,u,c,l,h);case 32:case 64:case 128:return function(e,t,n,r,i,o,s,a,u,c,l,h){const d=t.bindings;let f=!1;const p=d.length;if(p>0&&$o(e,t,0,n)&&(f=!0),p>1&&$o(e,t,1,r)&&(f=!0),p>2&&$o(e,t,2,i)&&(f=!0),p>3&&$o(e,t,3,o)&&(f=!0),p>4&&$o(e,t,4,s)&&(f=!0),p>5&&$o(e,t,5,a)&&(f=!0),p>6&&$o(e,t,6,u)&&(f=!0),p>7&&$o(e,t,7,c)&&(f=!0),p>8&&$o(e,t,8,l)&&(f=!0),p>9&&$o(e,t,9,h)&&(f=!0),f){const f=Do(e,t.nodeIndex);let m;switch(201347067&t.flags){case 32:m=new Array(d.length),p>0&&(m[0]=n),p>1&&(m[1]=r),p>2&&(m[2]=i),p>3&&(m[3]=o),p>4&&(m[4]=s),p>5&&(m[5]=a),p>6&&(m[6]=u),p>7&&(m[7]=c),p>8&&(m[8]=l),p>9&&(m[9]=h);break;case 64:m={},p>0&&(m[d[0].name]=n),p>1&&(m[d[1].name]=r),p>2&&(m[d[2].name]=i),p>3&&(m[d[3].name]=o),p>4&&(m[d[4].name]=s),p>5&&(m[d[5].name]=a),p>6&&(m[d[6].name]=u),p>7&&(m[d[7].name]=c),p>8&&(m[d[8].name]=l),p>9&&(m[d[9].name]=h);break;case 128:const e=n;switch(p){case 1:m=e.transform(n);break;case 2:m=e.transform(r);break;case 3:m=e.transform(r,i);break;case 4:m=e.transform(r,i,o);break;case 5:m=e.transform(r,i,o,s);break;case 6:m=e.transform(r,i,o,s,a);break;case 7:m=e.transform(r,i,o,s,a,u);break;case 8:m=e.transform(r,i,o,s,a,u,c);break;case 9:m=e.transform(r,i,o,s,a,u,c,l);break;case 10:m=e.transform(r,i,o,s,a,u,c,l,h)}}f.value=m}return f}(e,t,n,r,i,o,s,a,u,c,l,h);default:throw\"unreachable\"}}(e,t,r,i,o,s,a,u,c,l,h,d):function(e,t,n){switch(201347067&t.flags){case 1:return function(e,t,n){let r=!1;for(let i=0;i<n.length;i++)$u(e,t,i,n[i])&&(r=!0);return r}(e,t,n);case 2:return function(e,t,n){const r=t.bindings;let i=!1;for(let o=0;o<n.length;o++)$o(e,t,o,n[o])&&(i=!0);if(i){let i=\"\";for(let e=0;e<n.length;e++)i+=ec(n[e],r[e]);i=t.text.prefix+i;const o=No(e,t.nodeIndex).renderText;e.renderer.setValue(o,i)}return i}(e,t,n);case 16384:return function(e,t,n){const r=Ro(e,t.nodeIndex),i=r.instance;let o=!1,s=void 0;for(let a=0;a<n.length;a++)Bo(e,t,a,n[a])&&(o=!0,s=fa(e,r,t,a,n[a],s));return s&&i.ngOnChanges(s),65536&t.flags&&Oo(e,256,t.nodeIndex)&&i.ngOnInit(),262144&t.flags&&i.ngDoCheck(),o}(e,t,n);case 32:case 64:case 128:return function(e,t,n){const r=t.bindings;let i=!1;for(let o=0;o<n.length;o++)$o(e,t,o,n[o])&&(i=!0);if(i){const i=Do(e,t.nodeIndex);let o;switch(201347067&t.flags){case 32:o=n;break;case 64:o={};for(let t=0;t<n.length;t++)o[r[t].name]=n[t];break;case 128:const e=n[0],i=n.slice(1);o=e.transform(...i)}i.value=o}return i}(e,t,n);default:throw\"unreachable\"}}(e,t,r)}function fc(e){const t=e.def;if(4&t.nodeFlags)for(let n=0;n<t.nodes.length;n++){const r=t.nodes[n];if(4&r.flags){const t=Ao(e,n).template._projectedViews;if(t)for(let n=0;n<t.length;n++){const r=t[n];r.state|=32,Ho(r,e)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function pc(e,t,n,r,i,o,s,a,u,c,l,h,d){return 0===n?function(e,t,n,r,i,o,s,a,u,c,l,h){const d=t.bindings.length;d>0&&zo(e,t,0,n),d>1&&zo(e,t,1,r),d>2&&zo(e,t,2,i),d>3&&zo(e,t,3,o),d>4&&zo(e,t,4,s),d>5&&zo(e,t,5,a),d>6&&zo(e,t,6,u),d>7&&zo(e,t,7,c),d>8&&zo(e,t,8,l),d>9&&zo(e,t,9,h)}(e,t,r,i,o,s,a,u,c,l,h,d):function(e,t,n){for(let r=0;r<n.length;r++)zo(e,t,r,n[r])}(e,t,r),!1}function mc(e,t){if(ko(e,t.nodeIndex).dirty)throw Co(xo.createDebugContext(e,t.nodeIndex),`Query ${t.query.id} not dirty`,`Query ${t.query.id} dirty`,0!=(1&e.state))}function gc(e){if(!(128&e.state)){if(bc(e,yc.Destroy),vc(e,yc.Destroy),pa(e,131072),e.disposables)for(let t=0;t<e.disposables.length;t++)e.disposables[t]();!function(e){if(!(16&e.state))return;const t=Go(e);if(t){const n=t.template._projectedViews;n&&(Ns(n,n.indexOf(e)),xo.dirtyParentQueries(e))}}(e),e.renderer.destroyNode&&function(e){const t=e.def.nodes.length;for(let n=0;n<t;n++){const t=e.def.nodes[n];1&t.flags?e.renderer.destroyNode(Ao(e,n).renderElement):2&t.flags?e.renderer.destroyNode(No(e,n).renderText):(67108864&t.flags||134217728&t.flags)&&ko(e,n).destroy()}}(e),Jo(e)&&e.renderer.destroy(),e.state|=128}}const yc=function(){var e={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};return e[e.CreateViewNodes]=\"CreateViewNodes\",e[e.CheckNoChanges]=\"CheckNoChanges\",e[e.CheckNoChangesProjectedViews]=\"CheckNoChangesProjectedViews\",e[e.CheckAndUpdate]=\"CheckAndUpdate\",e[e.CheckAndUpdateProjectedViews]=\"CheckAndUpdateProjectedViews\",e[e.Destroy]=\"Destroy\",e}();function vc(e,t){const n=e.def;if(33554432&n.nodeFlags)for(let r=0;r<n.nodes.length;r++){const i=n.nodes[r];33554432&i.flags?_c(Ao(e,r).componentView,t):0==(33554432&i.childFlags)&&(r+=i.childCount)}}function bc(e,t){const n=e.def;if(16777216&n.nodeFlags)for(let r=0;r<n.nodes.length;r++){const i=n.nodes[r];if(16777216&i.flags){const n=Ao(e,r).viewContainer._embeddedViews;for(let e=0;e<n.length;e++)_c(n[e],t)}else 0==(16777216&i.childFlags)&&(r+=i.childCount)}}function _c(e,t){const n=e.state;switch(t){case yc.CheckNoChanges:0==(128&n)&&(12==(12&n)?lc(e):64&n&&wc(e,yc.CheckNoChangesProjectedViews));break;case yc.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?lc(e):64&n&&wc(e,t));break;case yc.CheckAndUpdate:0==(128&n)&&(12==(12&n)?hc(e):64&n&&wc(e,yc.CheckAndUpdateProjectedViews));break;case yc.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?hc(e):64&n&&wc(e,t));break;case yc.Destroy:gc(e);break;case yc.CreateViewNodes:cc(e)}}function wc(e,t){bc(e,t),vc(e,t)}function Ec(e,t,n,r){if(!(e.def.nodeFlags&t&&e.def.nodeFlags&n))return;const i=e.def.nodes.length;for(let o=0;o<i;o++){const i=e.def.nodes[o];if(i.flags&t&&i.flags&n)switch(xo.setCurrentNode(e,i.nodeIndex),r){case 0:Hu(e,i);break;case 1:mc(e,i)}i.childFlags&t&&i.childFlags&n||(o+=i.childCount)}}let Cc=!1;function Sc(e,t,n,r,i,o){const s=i.injector.get(Ki);return oc(Ic(e,i,s,t,n),r,o)}function Tc(e,t,n,r,i,o){const s=i.injector.get(Ki),a=Ic(e,i,new il(s),t,n),u=Mc(r);return nl(Bc.create,oc,null,[a,u,o])}function Ic(e,t,n,r,i){const o=t.injector.get(Kt),s=t.injector.get(fn),a=n.createRenderer(null,null);return{ngModule:t,injector:e,projectableNodes:r,selectorOrNode:i,sanitizer:o,rendererFactory:n,renderer:a,errorHandler:s}}function Oc(e,t,n,r){const i=Mc(n);return nl(Bc.create,ic,null,[e,t,i,r])}function Nc(e,t,n,r){return n=kc.get(t.element.componentProvider.provider.token)||Mc(n),nl(Bc.create,sc,null,[e,t,n,r])}function Ac(e,t,n,r){return zs(e,t,n,function(e){const{hasOverrides:t,hasDeprecatedOverrides:n}=function(e){let t=!1,n=!1;return 0===Rc.size?{hasOverrides:t,hasDeprecatedOverrides:n}:(e.providers.forEach(e=>{const r=Rc.get(e.token);3840&e.flags&&r&&(t=!0,n=n||r.deprecatedBehavior)}),e.modules.forEach(e=>{Dc.forEach((r,i)=>{v(i).providedIn===e&&(t=!0,n=n||r.deprecatedBehavior)})}),{hasOverrides:t,hasDeprecatedOverrides:n})}(e);return t?(function(e){for(let t=0;t<e.providers.length;t++){const r=e.providers[t];n&&(r.flags|=4096);const i=Rc.get(r.token);i&&(r.flags=-3841&r.flags|i.flags,r.deps=ns(i.deps),r.value=i.value)}if(Dc.size>0){let t=new Set(e.modules);Dc.forEach((r,i)=>{if(t.has(v(i).providedIn)){let t={token:i,flags:r.flags|(n?4096:0),deps:ns(r.deps),value:r.value,index:e.providers.length};e.providers.push(t),e.providersByKey[Mo(i)]=t}})}}(e=e.factory(()=>Po)),e):e}(r))}const Rc=new Map,Dc=new Map,kc=new Map;function xc(e){let t;Rc.set(e.token,e),\"function\"==typeof e.token&&(t=v(e.token))&&\"function\"==typeof t.providedIn&&Dc.set(e.token,e)}function Pc(e,t){const n=os(t.viewDefFactory),r=os(n.nodes[0].element.componentView);kc.set(e,r)}function Lc(){Rc.clear(),Dc.clear(),kc.clear()}function Mc(e){if(0===Rc.size)return e;const t=function(e){const t=[];let n=null;for(let r=0;r<e.nodes.length;r++){const i=e.nodes[r];1&i.flags&&(n=i),n&&3840&i.flags&&Rc.has(i.provider.token)&&(t.push(n.nodeIndex),n=null)}return t}(e);if(0===t.length)return e;e=e.factory(()=>Po);for(let r=0;r<t.length;r++)n(e,t[r]);return e;function n(e,t){for(let n=t+1;n<e.nodes.length;n++){const t=e.nodes[n];if(1&t.flags)return;if(3840&t.flags){const e=t.provider,n=Rc.get(e.token);n&&(t.flags=-3841&t.flags|n.flags,e.deps=ns(n.deps),e.value=n.value)}}}}function jc(e,t,n,r,i,o,s,a,u,c,l,h,d){const f=e.def.nodes[t];return dc(e,f,n,r,i,o,s,a,u,c,l,h,d),224&f.flags?Do(e,t).value:void 0}function Fc(e,t,n,r,i,o,s,a,u,c,l,h,d){const f=e.def.nodes[t];return pc(e,f,n,r,i,o,s,a,u,c,l,h,d),224&f.flags?Do(e,t).value:void 0}function Uc(e){return nl(Bc.detectChanges,hc,null,[e])}function Vc(e){return nl(Bc.checkNoChanges,lc,null,[e])}function qc(e){return nl(Bc.destroy,gc,null,[e])}const Bc=function(){var e={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};return e[e.create]=\"create\",e[e.detectChanges]=\"detectChanges\",e[e.checkNoChanges]=\"checkNoChanges\",e[e.destroy]=\"destroy\",e[e.handleEvent]=\"handleEvent\",e}();let $c,zc,Wc;function Hc(e,t){zc=e,Wc=t}function Qc(e,t,n,r){return Hc(e,t),nl(Bc.handleEvent,e.def.handleEvent,null,[e,t,n,r])}function Gc(e,t){if(128&e.state)throw To(Bc[$c]);return Hc(e,Jc(e,0)),e.def.updateDirectives(function(e,n,r,...i){const o=e.def.nodes[n];return 0===t?Yc(e,o,r,i):Xc(e,o,r,i),16384&o.flags&&Hc(e,Jc(e,n)),224&o.flags?Do(e,o.nodeIndex).value:void 0},e)}function Kc(e,t){if(128&e.state)throw To(Bc[$c]);return Hc(e,Zc(e,0)),e.def.updateRenderer(function(e,n,r,...i){const o=e.def.nodes[n];return 0===t?Yc(e,o,r,i):Xc(e,o,r,i),3&o.flags&&Hc(e,Zc(e,n)),224&o.flags?Do(e,o.nodeIndex).value:void 0},e)}function Yc(e,t,n,r){if(dc(e,t,n,...r)){const i=1===n?r[0]:r;if(16384&t.flags){const n={};for(let e=0;e<t.bindings.length;e++){const r=t.bindings[e],o=i[e];8&r.flags&&(n[pn(r.nonMinifiedName)]=gn(o))}const r=t.parent,o=Ao(e,r.nodeIndex).renderElement;if(r.element.name)for(let t in n){const r=n[t];null!=r?e.renderer.setAttribute(o,t,r):e.renderer.removeAttribute(o,t)}else e.renderer.setValue(o,`bindings=${JSON.stringify(n,null,2)}`)}}}function Xc(e,t,n,r){pc(e,t,n,...r)}function Jc(e,t){for(let n=t;n<e.def.nodes.length;n++){const t=e.def.nodes[n];if(16384&t.flags&&t.bindings&&t.bindings.length)return n}return null}function Zc(e,t){for(let n=t;n<e.def.nodes.length;n++){const t=e.def.nodes[n];if(3&t.flags&&t.bindings&&t.bindings.length)return n}return null}class el{constructor(e,t){this.view=e,this.nodeIndex=t,null==t&&(this.nodeIndex=t=0),this.nodeDef=e.def.nodes[t];let n=this.nodeDef,r=e;for(;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&r;)n=Ko(r),r=r.parent;this.elDef=n,this.elView=r}get elOrCompView(){return Ao(this.elView,this.elDef.nodeIndex).componentView||this.view}get injector(){return Us(this.elView,this.elDef)}get component(){return this.elOrCompView.component}get context(){return this.elOrCompView.context}get providerTokens(){const e=[];if(this.elDef)for(let t=this.elDef.nodeIndex+1;t<=this.elDef.nodeIndex+this.elDef.childCount;t++){const n=this.elView.def.nodes[t];20224&n.flags&&e.push(n.provider.token),t+=n.childCount}return e}get references(){const e={};if(this.elDef){tl(this.elView,this.elDef,e);for(let t=this.elDef.nodeIndex+1;t<=this.elDef.nodeIndex+this.elDef.childCount;t++){const n=this.elView.def.nodes[t];20224&n.flags&&tl(this.elView,n,e),t+=n.childCount}}return e}get componentRenderElement(){const e=function(e){for(;e&&!Jo(e);)e=e.parent;return e.parent?Ao(e.parent,Ko(e).nodeIndex):null}(this.elOrCompView);return e?e.renderElement:void 0}get renderNode(){return 2&this.nodeDef.flags?Yo(this.view,this.nodeDef):Yo(this.elView,this.elDef)}logError(e,...t){let n,r;2&this.nodeDef.flags?(n=this.view.def,r=this.nodeDef.nodeIndex):(n=this.elView.def,r=this.elDef.nodeIndex);const i=function(e,t){let n=-1;for(let r=0;r<=t;r++)3&e.nodes[r].flags&&n++;return n}(n,r);let o=-1;n.factory(()=>++o===i?e.error.bind(e,...t):Po),o<i&&(e.error(\"Illegal state: the ViewDefinitionFactory did not call the logger!\"),e.error(...t))}}function tl(e,t,n){for(let r in t.references)n[r]=Gu(e,t,t.references[r])}function nl(e,t,n,r){const i=$c,o=zc,s=Wc;try{$c=e;const u=t.apply(n,r);return zc=o,Wc=s,$c=i,u}catch(a){if(ln(a)||!zc)throw a;throw function(e,t){return e instanceof Error||(e=new Error(e.toString())),So(e,t),e}(a,rl())}}function rl(){return zc?new el(zc,Wc):null}class il{constructor(e){this.delegate=e}createRenderer(e,t){return new ol(this.delegate.createRenderer(e,t))}begin(){this.delegate.begin&&this.delegate.begin()}end(){this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)}}class ol{constructor(e){this.delegate=e,this.debugContextFactory=rl,this.data=this.delegate.data}createDebugContext(e){return this.debugContextFactory(e)}destroyNode(e){!function(e){Au.delete(e.nativeNode)}(Ru(e)),this.delegate.destroyNode&&this.delegate.destroyNode(e)}destroy(){this.delegate.destroy()}createElement(e,t){const n=this.delegate.createElement(e,t),r=this.createDebugContext(n);if(r){const t=new Nu(n,null,r);t.name=e,Du(t)}return n}createComment(e){const t=this.delegate.createComment(e),n=this.createDebugContext(t);return n&&Du(new Ou(t,null,n)),t}createText(e){const t=this.delegate.createText(e),n=this.createDebugContext(t);return n&&Du(new Ou(t,null,n)),t}appendChild(e,t){const n=Ru(e),r=Ru(t);n&&r&&n instanceof Nu&&n.addChild(r),this.delegate.appendChild(e,t)}insertBefore(e,t,n){const r=Ru(e),i=Ru(t),o=Ru(n);r&&i&&r instanceof Nu&&r.insertBefore(o,i),this.delegate.insertBefore(e,t,n)}removeChild(e,t){const n=Ru(e),r=Ru(t);n&&r&&n instanceof Nu&&n.removeChild(r),this.delegate.removeChild(e,t)}selectRootElement(e,t){const n=this.delegate.selectRootElement(e,t),r=rl();return r&&Du(new Nu(n,null,r)),n}setAttribute(e,t,n,r){const i=Ru(e);i&&i instanceof Nu&&(i.attributes[r?r+\":\"+t:t]=n),this.delegate.setAttribute(e,t,n,r)}removeAttribute(e,t,n){const r=Ru(e);r&&r instanceof Nu&&(r.attributes[n?n+\":\"+t:t]=null),this.delegate.removeAttribute(e,t,n)}addClass(e,t){const n=Ru(e);n&&n instanceof Nu&&(n.classes[t]=!0),this.delegate.addClass(e,t)}removeClass(e,t){const n=Ru(e);n&&n instanceof Nu&&(n.classes[t]=!1),this.delegate.removeClass(e,t)}setStyle(e,t,n,r){const i=Ru(e);i&&i instanceof Nu&&(i.styles[t]=n),this.delegate.setStyle(e,t,n,r)}removeStyle(e,t,n){const r=Ru(e);r&&r instanceof Nu&&(r.styles[t]=null),this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){const r=Ru(e);r&&r instanceof Nu&&(r.properties[t]=n),this.delegate.setProperty(e,t,n)}listen(e,t,n){if(\"string\"!=typeof e){const r=Ru(e);r&&r.listeners.push(new Iu(t,n))}return this.delegate.listen(e,t,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setValue(e,t){return this.delegate.setValue(e,t)}}function sl(e,t,n){return new al(e,t,n)}class al extends zi{constructor(e,t,n){super(),this.moduleType=e,this._bootstrapComponents=t,this._ngModuleDefFactory=n}create(e){!function(){if(Cc)return;Cc=!0;const e=St()?{setCurrentNode:Hc,createRootView:Tc,createEmbeddedView:Oc,createComponentView:Nc,createNgModuleRef:Ac,overrideProvider:xc,overrideComponentView:Pc,clearOverrides:Lc,checkAndUpdateView:Uc,checkNoChangesView:Vc,destroyView:qc,createDebugContext:(e,t)=>new el(e,t),handleEvent:Qc,updateDirectives:Gc,updateRenderer:Kc}:{setCurrentNode:()=>{},createRootView:Sc,createEmbeddedView:ic,createComponentView:sc,createNgModuleRef:zs,overrideProvider:Po,overrideComponentView:Po,clearOverrides:Po,checkAndUpdateView:hc,checkNoChangesView:lc,destroyView:gc,createDebugContext:(e,t)=>new el(e,t),handleEvent:(e,t,n,r)=>e.def.handleEvent(e,t,n,r),updateDirectives:(e,t)=>e.def.updateDirectives(0===t?jc:Fc,e),updateRenderer:(e,t)=>e.def.updateRenderer(0===t?jc:Fc,e)};xo.setCurrentNode=e.setCurrentNode,xo.createRootView=e.createRootView,xo.createEmbeddedView=e.createEmbeddedView,xo.createComponentView=e.createComponentView,xo.createNgModuleRef=e.createNgModuleRef,xo.overrideProvider=e.overrideProvider,xo.overrideComponentView=e.overrideComponentView,xo.clearOverrides=e.clearOverrides,xo.checkAndUpdateView=e.checkAndUpdateView,xo.checkNoChangesView=e.checkNoChangesView,xo.destroyView=e.destroyView,xo.resolveDep=ha,xo.createDebugContext=e.createDebugContext,xo.handleEvent=e.handleEvent,xo.updateDirectives=e.updateDirectives,xo.updateRenderer=e.updateRenderer,xo.dirtyParentQueries=Wu}();const t=function(e){const t=Array.from(e.providers),n=Array.from(e.modules),r={};for(const i in e.providersByKey)r[i]=e.providersByKey[i];return{factory:e.factory,isRoot:e.isRoot,providers:t,modules:n,providersByKey:r}}(os(this._ngModuleDefFactory));return xo.createNgModuleRef(this.moduleType,e||Q.NULL,this._bootstrapComponents,t)}}},\"8aff\":function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return c});var r=n(\"lJxs\"),i=(n(\"CqG3\"),n(\"ZZ/e\")),o=n(\"8Y7J\"),s=n(\"xgBC\"),a=n(\"IheW\"),u=n(\"Xr7G\");let c=(()=>{class e{constructor(e,t,n,r,i){this.storage=e,this.toast=t,this.http=n,this.afs=r,this.platform=i}getProfile(e,t){return this.http.get(e,{params:{email:t,type:\"profile\"}}).pipe(Object(r.a)(e=>(console.log(\"Results\",e),e.Response)))}getProfilePlaylists(e,t){return this.http.get(e,{params:{email:t,type:\"profile\"}}).pipe(Object(r.a)(e=>(console.log(\"Results\",e),e.posts)))}GetPost(e,t,n){return this.http.get(e,{params:{post:t,email:n,type:\"getPost\"}}).pipe(Object(r.a)(e=>(console.log(\"Post data\",e),e.post)))}getSearchResults(e,t,n){return this.http.get(e,{params:{Term:t,type:\"search\",email:n}}).pipe(Object(r.a)(e=>(console.log(\"Results\",e),e.Response)))}getSearchPlacesResult(e,t,n){return this.http.get(e,{params:{Term:t,type:\"searchPlaces\",email:n}}).pipe(Object(r.a)(e=>(console.log(\"Results\",e),e.Response)))}getFollowing(e,t){return this.http.get(e,{params:{type:\"getFollowing\",username:t}}).pipe(Object(r.a)(e=>(console.log(\"Results\",e),e.Response)))}updateProfile(e,t,n,i,o,s,a,u){let c=new FormData;return c.append(\"type\",\"updateProfile\"),c.append(\"email\",t),c.append(\"user_name\",n),c.append(\"first_name\",i),c.append(\"website\",o),c.append(\"location\",a),c.append(\"bio\",s),c.append(\"file\",u),this.http.post(e,c).pipe(Object(r.a)(e=>(console.log(\"Results\",e),e.Response)))}getFeed(e,t){return this.http.get(e,{params:{type:\"feed\",email:t}}).pipe(Object(r.a)(e=>(console.log(\"Results\",e),e.Response)))}getPlaces(e,t){return this.http.get(e,{params:{type:\"places\",input:t}}).pipe(Object(r.a)(e=>(console.log(\"Results\",e),e.data)))}Repost(e,t,n){return this.http.get(e,{params:{type:\"repost\",email:t,post:n}}).pipe(Object(r.a)(e=>(console.log(\"Repost\",e),e)))}getUserProfile(e,t,n){return this.http.get(e,{params:{type:\"getUser_UD\",user_id:t,email:n}}).pipe(Object(r.a)(e=>(console.log(\"Results\",e),e.Response)))}Follow(e,t,n){return this.http.get(e,{params:{type:\"Follow\",user_id:t,email:n}}).pipe(Object(r.a)(e=>(console.log(\"Results\",e),e.Response)))}Like(e,t,n){return this.http.get(e,{params:{type:\"like\",email:t,post:n}}).pipe(Object(r.a)(e=>(console.log(\"Results\",e),e.Response)))}Upload(e,t,n,i,o,s,a,u,c){let l=new FormData;return l.append(\"file\",n),l.append(\"type\",\"upload\"),l.append(\"email\",t),l.append(\"description\",i),l.append(\"genre\",o),l.append(\"playlisted\",s),l.append(\"publish\",a),l.append(\"tags\",u),l.append(\"duration\",c),this.http.post(e,l).pipe(Object(r.a)(e=>(console.log(\"Results\",e),e[\"newly created post_id\"])))}Login(e,t,n){return this.http.get(e,{params:{type:\"login\",email:t,password:n}}).pipe(Object(r.a)(e=>(console.log(\"Results\",e),e)))}deletePost(e,t){return this.http.get(e,{params:{type:\"deletePost\",id:t}}).pipe(Object(r.a)(e=>(console.log(\"Results\",e),e)))}getUserFeed(e,t,n){return this.http.get(e,{params:{type:\"getUserFeed\",username:t,email:n}}).pipe(Object(r.a)(e=>(console.log(\"Results\",e),e.Response)))}registerDevice(e,t,n){return this.http.get(e,{params:{type:\"registerDevice\",userId:t,email:n}}).pipe(Object(r.a)(e=>(console.log(\"Results\",e),e)))}sendMessageNotification(e,t,n,i){return this.http.get(e,{params:{type:\"sendMessageNotif\",to:t,sender:n,message:i}}).pipe(Object(r.a)(e=>(console.log(\"Results\",e),e)))}sendCommentNotification(e,t,n,i){return this.http.get(e,{params:{type:\"sendCommentNotification\",post:t,sender:n,message:i}}).pipe(Object(r.a)(e=>(console.log(\"Results\",e),e)))}UpdateNotifications(e,t,n){return this.http.get(e,{params:{type:\"updateNotifications\",user:t,notificationInfo:n}}).pipe(Object(r.a)(e=>(console.log(\"Results\",e),e)))}UpdateIndividualNotifications(e,t,n,i){return this.http.get(e,{params:{type:\"updateIndividualNotifications\",user:t,notificationInfo:n,NotificationsValue:i}}).pipe(Object(r.a)(e=>(console.log(\"Results\",e),e)))}getNotificationSettings(e,t){return this.http.get(e,{params:{type:\"getNotificationSettings\",user:t}}).pipe(Object(r.a)(e=>(console.log(\"Results\",e),e)))}searchPage(e){return this.http.get(e,{params:{type:\"searchPage\"}}).pipe(Object(r.a)(e=>(console.log(\"Results\",e),e.Response)))}searchPageOneBig(e){return this.http.get(e,{params:{type:\"searchPage\"}}).pipe(Object(r.a)(e=>(console.log(\"Results\",e.One),e.One)))}getDuration(e,t){return this.http.get(e,{params:{type:\"getDuration\",post:t}}).pipe(Object(r.a)(e=>(console.log(\"Results\",e),e.Response)))}resetPost(e,t){return this.http.get(e,{params:{type:\"resetPost\",post:t}}).pipe(Object(r.a)(e=>(console.log(\"Results\",e),e.Response)))}UploadCoverImage(e,t,n){let i=new FormData;return i.append(\"file\",n),i.append(\"type\",\"uploadCover\"),i.append(\"email\",t),this.http.post(e,i).pipe(Object(r.a)(e=>(console.log(\"Results\",e),e.Response)))}UploadCroppedCoverImage(e,t,n){let i=new FormData;return i.append(\"file\",n),i.append(\"type\",\"uploadCroppedCover\"),i.append(\"email\",t),this.http.post(e,i).pipe(Object(r.a)(e=>(console.log(\"Results\",e),e.Response)))}UploadChatFile(e,t,n){let i=new FormData;return i.append(\"file\",n),i.append(\"type\",\"chatFileUpload\"),i.append(\"id\",t),this.http.post(e,i).pipe(Object(r.a)(e=>(console.log(\"Results\",e),e.Response)))}}return e.ngInjectableDef=o.Ob({factory:function(){return new e(o.Pb(s.b),o.Pb(i.Mb),o.Pb(a.c),o.Pb(u.a),o.Pb(i.Ib))},token:e,providedIn:\"root\"}),e})()},\"9ppp\":function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return r});const r=(()=>{function e(){return Error.call(this),this.message=\"object unsubscribed\",this.name=\"ObjectUnsubscribedError\",this}return e.prototype=Object.create(Error.prototype),e})()},Cfvw:function(e,t,n){\"use strict\";var r=n(\"HDdC\"),i=n(\"SeVD\"),o=n(\"quSY\"),s=n(\"kJWO\"),a=n(\"jZKg\"),u=n(\"Lhse\"),c=n(\"c2HN\"),l=n(\"I55L\");function h(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&\"function\"==typeof e[s.a]}(e))return function(e,t){return new r.a(n=>{const r=new o.a;return r.add(t.schedule(()=>{const i=e[s.a]();r.add(i.subscribe({next(e){r.add(t.schedule(()=>n.next(e)))},error(e){r.add(t.schedule(()=>n.error(e)))},complete(){r.add(t.schedule(()=>n.complete()))}}))})),r})}(e,t);if(Object(c.a)(e))return function(e,t){return new r.a(n=>{const r=new o.a;return r.add(t.schedule(()=>e.then(e=>{r.add(t.schedule(()=>{n.next(e),r.add(t.schedule(()=>n.complete()))}))},e=>{r.add(t.schedule(()=>n.error(e)))}))),r})}(e,t);if(Object(l.a)(e))return Object(a.a)(e,t);if(function(e){return e&&\"function\"==typeof e[u.a]}(e)||\"string\"==typeof e)return function(e,t){if(!e)throw new Error(\"Iterable cannot be null\");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&\"function\"==typeof i.return&&i.return()}),r.add(t.schedule(()=>{i=e[u.a](),r.add(t.schedule(function(){if(n.closed)return;let e,t;try{const o=i.next();e=o.value,t=o.done}catch(r){return void n.error(r)}t?n.complete():(n.next(e),this.schedule())}))})),r})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+\" is not observable\")}(e,t):e instanceof r.a?e:new r.a(Object(i.a)(e))}n.d(t,\"a\",function(){return h})},CjQN:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return o});var r=n(\"mrSG\"),i=n(\"a3Cf\"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.share=function(e,t,n,r){return Object(i.cordova)(this,\"share\",{successIndex:4,errorIndex:5},arguments)},t.prototype.shareWithOptions=function(e){return Object(i.cordova)(this,\"shareWithOptions\",{platforms:[\"iOS\",\"Android\"]},arguments)},t.prototype.canShareVia=function(e,t,n,r,o){return Object(i.cordova)(this,\"canShareVia\",{successIndex:5,errorIndex:6,platforms:[\"iOS\",\"Android\"]},arguments)},t.prototype.shareViaTwitter=function(e,t,n){return Object(i.cordova)(this,\"shareViaTwitter\",{successIndex:3,errorIndex:4,platforms:[\"iOS\",\"Android\"]},arguments)},t.prototype.shareViaFacebook=function(e,t,n){return Object(i.cordova)(this,\"shareViaFacebook\",{successIndex:3,errorIndex:4,platforms:[\"iOS\",\"Android\"]},arguments)},t.prototype.shareViaFacebookWithPasteMessageHint=function(e,t,n,r){return Object(i.cordova)(this,\"shareViaFacebookWithPasteMessageHint\",{successIndex:4,errorIndex:5,platforms:[\"iOS\",\"Android\"]},arguments)},t.prototype.shareViaInstagram=function(e,t){return Object(i.cordova)(this,\"shareViaInstagram\",{platforms:[\"iOS\",\"Android\"]},arguments)},t.prototype.shareViaWhatsApp=function(e,t,n){return Object(i.cordova)(this,\"shareViaWhatsApp\",{successIndex:3,errorIndex:4,platforms:[\"iOS\",\"Android\"]},arguments)},t.prototype.shareViaWhatsAppToReceiver=function(e,t,n,r){return Object(i.cordova)(this,\"shareViaWhatsAppToReceiver\",{successIndex:4,errorIndex:5,platforms:[\"iOS\",\"Android\"]},arguments)},t.prototype.shareViaSMS=function(e,t){return Object(i.cordova)(this,\"shareViaSMS\",{platforms:[\"iOS\",\"Android\"]},arguments)},t.prototype.canShareViaEmail=function(){return Object(i.cordova)(this,\"canShareViaEmail\",{platforms:[\"iOS\",\"Android\"]},arguments)},t.prototype.shareViaEmail=function(e,t,n,r,o,s){return Object(i.cordova)(this,\"shareViaEmail\",{platforms:[\"iOS\",\"Android\"],successIndex:6,errorIndex:7},arguments)},t.prototype.shareVia=function(e,t,n,r,o){return Object(i.cordova)(this,\"shareVia\",{successIndex:5,errorIndex:6,platforms:[\"iOS\",\"Android\"]},arguments)},t.prototype.setIPadPopupCoordinates=function(e){return Object(i.cordova)(this,\"setIPadPopupCoordinates\",{sync:!0,platforms:[\"iOS\"]},arguments)},t.prototype.saveToPhotoAlbum=function(e){return Object(i.cordova)(this,\"saveToPhotoAlbum\",{platforms:[\"iOS\"]},arguments)},t.pluginName=\"SocialSharing\",t.plugin=\"cordova-plugin-x-socialsharing\",t.pluginRef=\"plugins.socialsharing\",t.repo=\"https://github.com/EddyVerbruggen/SocialSharing-PhoneGap-Plugin\",t.platforms=[\"Android\",\"Browser\",\"iOS\",\"Windows\",\"Windows Phone\"],t}(i.IonicNativePlugin)},CqG3:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(\"g+7Q\"))},D0XW:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return i});var r=n(\"3N8a\");const i=new(n(\"IjjT\").a)(r.a)},DH7j:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return r});const r=(()=>Array.isArray||(e=>e&&\"number\"==typeof e.length))()},DJEK:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return o});var r=n(\"mrSG\"),i=n(\"a3Cf\"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.captureAudio=function(e){return Object(i.cordova)(this,\"captureAudio\",{callbackOrder:\"reverse\"},arguments)},t.prototype.captureImage=function(e){return Object(i.cordova)(this,\"captureImage\",{callbackOrder:\"reverse\"},arguments)},t.prototype.captureVideo=function(e){return Object(i.cordova)(this,\"captureVideo\",{callbackOrder:\"reverse\"},arguments)},t.prototype.onPendingCaptureResult=function(){return Object(i.cordova)(this,\"onPendingCaptureResult\",{eventObservable:!0,event:\"pendingcaptureresult\"},arguments)},t.prototype.onPendingCaptureError=function(){return Object(i.cordova)(this,\"onPendingCaptureError\",{eventObservable:!0,event:\"pendingcaptureerror\"},arguments)},Object.defineProperty(t.prototype,\"supportedImageModes\",{get:function(){return Object(i.cordovaPropertyGet)(this,\"supportedImageModes\")},set:function(e){Object(i.cordovaPropertySet)(this,\"supportedImageModes\",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"supportedAudioModes\",{get:function(){return Object(i.cordovaPropertyGet)(this,\"supportedAudioModes\")},set:function(e){Object(i.cordovaPropertySet)(this,\"supportedAudioModes\",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"supportedVideoModes\",{get:function(){return Object(i.cordovaPropertyGet)(this,\"supportedVideoModes\")},set:function(e){Object(i.cordovaPropertySet)(this,\"supportedVideoModes\",e)},enumerable:!0,configurable:!0}),t.pluginName=\"MediaCapture\",t.plugin=\"cordova-plugin-media-capture\",t.pluginRef=\"navigator.device.capture\",t.repo=\"https://github.com/apache/cordova-plugin-media-capture\",t.platforms=[\"Android\",\"Browser\",\"iOS\",\"Windows\"],t}(i.IonicNativePlugin)},EY2u:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return i}),n.d(t,\"b\",function(){return o});var r=n(\"HDdC\");const i=new r.a(e=>e.complete());function o(e){return e?function(e){return new r.a(t=>e.schedule(()=>t.complete()))}(e):i}},GIw4:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return i});var r=n(\"kDjp\");function i(e){return(Object(r.c)(e)||0===e.length)&&(e=[\"child_added\",\"child_removed\",\"child_changed\",\"child_moved\"]),e}},HDdC:function(e,t,n){\"use strict\";var r=n(\"7o/Q\"),i=n(\"2QA8\"),o=n(\"gRHU\"),s=n(\"kJWO\"),a=n(\"mCNh\"),u=n(\"2fFW\");n.d(t,\"a\",function(){return c});let c=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const n=new e;return n.source=this,n.operator=t,n}subscribe(e,t,n){const{operator:s}=this,a=function(e,t,n){if(e){if(e instanceof r.a)return e;if(e[i.a])return e[i.a]()}return e||t||n?new r.a(e,t,n):new r.a(o.a)}(e,t,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(e){try{return this._subscribe(e)}catch(t){u.a.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:n,isStopped:i}=e;if(t||i)return!1;e=n&&n instanceof r.a?n:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=l(t))((t,n)=>{let r;r=this.subscribe(t=>{try{e(t)}catch(i){n(i),r&&r.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[s.a](){return this}pipe(...e){return 0===e.length?this:Object(a.b)(e)(this)}toPromise(e){return new(e=l(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}return e.create=t=>new e(t),e})();function l(e){if(e||(e=u.a.Promise||Promise),!e)throw new Error(\"no Promise impl found\");return e}},HPGL:function(e,t,n){\"use strict\";function r(){if(\"undefined\"==typeof process){var e=\"undefined\"!=typeof window?window:{},t=Date.now(),n=!1;e.document.addEventListener(\"deviceready\",function(){console.log(\"Ionic Native: deviceready event fired after \"+(Date.now()-t)+\" ms\"),n=!0}),setTimeout(function(){!n&&e.cordova&&console.warn(\"Ionic Native: deviceready did not fire within 5000ms. This can happen when plugins are in an inconsistent state. Try removing plugins from plugins/ and reinstalling them.\")},5e3)}}n.d(t,\"a\",function(){return r})},I1TF:function(e,t,n){\"use strict\";var r=n(\"sDu7\"),i=n(\"WEwH\"),o=n(\"b/LO\"),s=n(\"kDjp\");function a(e,t){return function(n,r){return Object(s.a)(n,{stringCase:()=>e.child(n)[t](r),firebaseCase:()=>n[t](r),snapshotCase:()=>n.ref[t](r)})}}var u=n(\"lJxs\");function c(e,t){return{query:e,update:a(e.ref,\"update\"),set:a(e.ref,\"set\"),push:t=>e.ref.push(t),remove:(n=e.ref,function(e){return e?Object(s.a)(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}),snapshotChanges(n){const i=Object(r.a)(e,n);return t.scheduler.keepUnstableUntilFirst(t.scheduler.runOutsideAngular(i))},stateChanges(n){const r=Object(i.a)(e,n);return t.scheduler.keepUnstableUntilFirst(t.scheduler.runOutsideAngular(r))},auditTrail(n){const r=Object(o.a)(e,n);return t.scheduler.keepUnstableUntilFirst(t.scheduler.runOutsideAngular(r))},valueChanges(n){const i=Object(r.a)(e,n);return t.scheduler.keepUnstableUntilFirst(t.scheduler.runOutsideAngular(i)).pipe(Object(u.a)(e=>e.map(e=>e.payload.val())))}};var n}n.d(t,\"a\",function(){return c})},I55L:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return r});const r=e=>e&&\"number\"==typeof e.length&&\"function\"!=typeof e},IheW:function(e,t,n){\"use strict\";n.d(t,\"k\",function(){return k}),n.d(t,\"n\",function(){return j}),n.d(t,\"o\",function(){return F}),n.d(t,\"l\",function(){return P}),n.d(t,\"m\",function(){return L}),n.d(t,\"b\",function(){return h}),n.d(t,\"f\",function(){return l}),n.d(t,\"c\",function(){return I}),n.d(t,\"a\",function(){return N}),n.d(t,\"d\",function(){return q}),n.d(t,\"e\",function(){return V}),n.d(t,\"j\",function(){return U}),n.d(t,\"g\",function(){return x}),n.d(t,\"i\",function(){return D}),n.d(t,\"h\",function(){return M});var r=n(\"8Y7J\"),i=n(\"LRne\"),o=n(\"HDdC\"),s=n(\"bOdf\"),a=n(\"pLZG\"),u=n(\"lJxs\"),c=n(\"SVse\");class l{}class h{}class d{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit=\"string\"==typeof e?()=>{this.headers=new Map,e.split(\"\\n\").forEach(e=>{const t=e.indexOf(\":\");if(t>0){const n=e.slice(0,t),r=n.toLowerCase(),i=e.slice(t+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let n=e[t];const r=t.toLowerCase();\"string\"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:\"a\"})}set(e,t){return this.clone({name:e,value:t,op:\"s\"})}delete(e,t){return this.clone({name:e,value:t,op:\"d\"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof d?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new d;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof d?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case\"a\":case\"s\":let n=e.value;if(\"string\"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);const r=(\"a\"===e.op?this.headers.get(t):void 0)||[];r.push(...n),this.headers.set(t,r);break;case\"d\":const i=e.value;if(i){let e=this.headers.get(t);if(!e)return;0===(e=e.filter(e=>-1===i.indexOf(e))).length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,e)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class f{encodeKey(e){return p(e)}encodeValue(e){return p(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}function p(e){return encodeURIComponent(e).replace(/%40/gi,\"@\").replace(/%3A/gi,\":\").replace(/%24/gi,\"$\").replace(/%2C/gi,\",\").replace(/%3B/gi,\";\").replace(/%2B/gi,\"+\").replace(/%3D/gi,\"=\").replace(/%3F/gi,\"?\").replace(/%2F/gi,\"/\")}class m{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new f,e.fromString){if(e.fromObject)throw new Error(\"Cannot specify both fromString and fromObject.\");this.map=function(e,t){const n=new Map;return e.length>0&&e.split(\"&\").forEach(e=>{const r=e.indexOf(\"=\"),[i,o]=-1==r?[t.decodeKey(e),\"\"]:[t.decodeKey(e.slice(0,r)),t.decodeValue(e.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const n=e.fromObject[t];this.map.set(t,Array.isArray(n)?n:[n])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:\"a\"})}set(e,t){return this.clone({param:e,value:t,op:\"s\"})}delete(e,t){return this.clone({param:e,value:t,op:\"d\"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(e=>t+\"=\"+this.encoder.encodeValue(e)).join(\"&\")}).join(\"&\")}clone(e){const t=new m({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat([e]),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case\"a\":case\"s\":const t=(\"a\"===e.op?this.map.get(e.param):void 0)||[];t.push(e.value),this.map.set(e.param,t);break;case\"d\":if(void 0===e.value){this.map.delete(e.param);break}{let t=this.map.get(e.param)||[];const n=t.indexOf(e.value);-1!==n&&t.splice(n,1),t.length>0?this.map.set(e.param,t):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}function g(e){return\"undefined\"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function y(e){return\"undefined\"!=typeof Blob&&e instanceof Blob}function v(e){return\"undefined\"!=typeof FormData&&e instanceof FormData}class b{constructor(e,t,n,r){let i;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType=\"json\",this.method=e.toUpperCase(),function(e){switch(e){case\"DELETE\":case\"GET\":case\"HEAD\":case\"OPTIONS\":case\"JSONP\":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new d),this.params){const e=this.params.toString();if(0===e.length)this.urlWithParams=t;else{const n=t.indexOf(\"?\");this.urlWithParams=t+(-1===n?\"?\":n<t.length-1?\"&\":\"\")+e}}else this.params=new m,this.urlWithParams=t}serializeBody(){return null===this.body?null:g(this.body)||y(this.body)||v(this.body)||\"string\"==typeof this.body?this.body:this.body instanceof m?this.body.toString():\"object\"==typeof this.body||\"boolean\"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body?null:v(this.body)?null:y(this.body)?this.body.type||null:g(this.body)?null:\"string\"==typeof this.body?\"text/plain\":this.body instanceof m?\"application/x-www-form-urlencoded;charset=UTF-8\":\"object\"==typeof this.body||\"number\"==typeof this.body||Array.isArray(this.body)?\"application/json\":null}clone(e={}){const t=e.method||this.method,n=e.url||this.url,r=e.responseType||this.responseType,i=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,s=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let a=e.headers||this.headers,u=e.params||this.params;return void 0!==e.setHeaders&&(a=Object.keys(e.setHeaders).reduce((t,n)=>t.set(n,e.setHeaders[n]),a)),e.setParams&&(u=Object.keys(e.setParams).reduce((t,n)=>t.set(n,e.setParams[n]),u)),new b(t,n,i,{params:u,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}const _=function(){var e={Sent:0,UploadProgress:1,ResponseHeader:2,DownloadProgress:3,Response:4,User:5};return e[e.Sent]=\"Sent\",e[e.UploadProgress]=\"UploadProgress\",e[e.ResponseHeader]=\"ResponseHeader\",e[e.DownloadProgress]=\"DownloadProgress\",e[e.Response]=\"Response\",e[e.User]=\"User\",e}();class w{constructor(e,t=200,n=\"OK\"){this.headers=e.headers||new d,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class E extends w{constructor(e={}){super(e),this.type=_.ResponseHeader}clone(e={}){return new E({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class C extends w{constructor(e={}){super(e),this.type=_.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new C({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class S extends w{constructor(e){super(e,0,\"Unknown Error\"),this.name=\"HttpErrorResponse\",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||\"(unknown url)\"}`:`Http failure response for ${e.url||\"(unknown url)\"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function T(e,t){return{body:t,headers:e.headers,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let I=(()=>(class{constructor(e){this.handler=e}request(e,t,n={}){let r;if(e instanceof b)r=e;else{let i=void 0;i=n.headers instanceof d?n.headers:new d(n.headers);let o=void 0;n.params&&(o=n.params instanceof m?n.params:new m({fromObject:n.params})),r=new b(e,t,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||\"json\",withCredentials:n.withCredentials})}const o=Object(i.a)(r).pipe(Object(s.a)(e=>this.handler.handle(e)));if(e instanceof b||\"events\"===n.observe)return o;const c=o.pipe(Object(a.a)(e=>e instanceof C));switch(n.observe||\"body\"){case\"body\":switch(r.responseType){case\"arraybuffer\":return c.pipe(Object(u.a)(e=>{if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error(\"Response is not an ArrayBuffer.\");return e.body}));case\"blob\":return c.pipe(Object(u.a)(e=>{if(null!==e.body&&!(e.body instanceof Blob))throw new Error(\"Response is not a Blob.\");return e.body}));case\"text\":return c.pipe(Object(u.a)(e=>{if(null!==e.body&&\"string\"!=typeof e.body)throw new Error(\"Response is not a string.\");return e.body}));case\"json\":default:return c.pipe(Object(u.a)(e=>e.body))}case\"response\":return c;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(e,t={}){return this.request(\"DELETE\",e,t)}get(e,t={}){return this.request(\"GET\",e,t)}head(e,t={}){return this.request(\"HEAD\",e,t)}jsonp(e,t){return this.request(\"JSONP\",e,{params:(new m).append(t,\"JSONP_CALLBACK\"),observe:\"body\",responseType:\"json\"})}options(e,t={}){return this.request(\"OPTIONS\",e,t)}patch(e,t,n={}){return this.request(\"PATCH\",e,T(n,t))}post(e,t,n={}){return this.request(\"POST\",e,T(n,t))}put(e,t,n={}){return this.request(\"PUT\",e,T(n,t))}}))();class O{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const N=new r.o(\"HTTP_INTERCEPTORS\");let A=(()=>(class{intercept(e,t){return t.handle(e)}}))();const R=/^\\)\\]\\}',?\\n/;class D{}let k=(()=>(class{constructor(){}build(){return new XMLHttpRequest}}))(),x=(()=>(class{constructor(e){this.xhrFactory=e}handle(e){if(\"JSONP\"===e.method)throw new Error(\"Attempted to construct Jsonp request without JsonpClientModule installed.\");return new o.a(t=>{const n=this.xhrFactory.build();if(n.open(e.method,e.urlWithParams),e.withCredentials&&(n.withCredentials=!0),e.headers.forEach((e,t)=>n.setRequestHeader(e,t.join(\",\"))),e.headers.has(\"Accept\")||n.setRequestHeader(\"Accept\",\"application/json, text/plain, */*\"),!e.headers.has(\"Content-Type\")){const t=e.detectContentTypeHeader();null!==t&&n.setRequestHeader(\"Content-Type\",t)}if(e.responseType){const t=e.responseType.toLowerCase();n.responseType=\"json\"!==t?t:\"text\"}const r=e.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const t=1223===n.status?204:n.status,r=n.statusText||\"OK\",o=new d(n.getAllResponseHeaders()),s=function(e){return\"responseURL\"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader(\"X-Request-URL\"):null}(n)||e.url;return i=new E({headers:o,status:t,statusText:r,url:s})},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if(\"json\"===e.responseType&&\"string\"==typeof u){const e=u;u=u.replace(R,\"\");try{u=\"\"!==u?JSON.parse(u):null}catch(l){u=e,c&&(c=!1,u={error:l,text:u})}}c?(t.next(new C({body:u,headers:r,status:i,statusText:s,url:a||void 0})),t.complete()):t.error(new S({error:u,headers:r,status:i,statusText:s,url:a||void 0}))},a=e=>{const{url:r}=o(),i=new S({error:e,status:n.status||0,statusText:n.statusText||\"Unknown Error\",url:r||void 0});t.error(i)};let u=!1;const c=r=>{u||(t.next(o()),u=!0);let i={type:_.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),\"text\"===e.responseType&&n.responseText&&(i.partialText=n.responseText),t.next(i)},l=e=>{let n={type:_.UploadProgress,loaded:e.loaded};e.lengthComputable&&(n.total=e.total),t.next(n)};return n.addEventListener(\"load\",s),n.addEventListener(\"error\",a),e.reportProgress&&(n.addEventListener(\"progress\",c),null!==r&&n.upload&&n.upload.addEventListener(\"progress\",l)),n.send(r),t.next({type:_.Sent}),()=>{n.removeEventListener(\"error\",a),n.removeEventListener(\"load\",s),e.reportProgress&&(n.removeEventListener(\"progress\",c),null!==r&&n.upload&&n.upload.removeEventListener(\"progress\",l)),n.abort()}})}}))();const P=new r.o(\"XSRF_COOKIE_NAME\"),L=new r.o(\"XSRF_HEADER_NAME\");class M{}let j=(()=>(class{constructor(e,t,n){this.doc=e,this.platform=t,this.cookieName=n,this.lastCookieString=\"\",this.lastToken=null,this.parseCount=0}getToken(){if(\"server\"===this.platform)return null;const e=this.doc.cookie||\"\";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Object(c.v)(e,this.cookieName),this.lastCookieString=e),this.lastToken}}))(),F=(()=>(class{constructor(e,t){this.tokenService=e,this.headerName=t}intercept(e,t){const n=e.url.toLowerCase();if(\"GET\"===e.method||\"HEAD\"===e.method||n.startsWith(\"http://\")||n.startsWith(\"https://\"))return t.handle(e);const r=this.tokenService.getToken();return null===r||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,r)})),t.handle(e)}}))(),U=(()=>(class{constructor(e,t){this.backend=e,this.injector=t,this.chain=null}handle(e){if(null===this.chain){const e=this.injector.get(N,[]);this.chain=e.reduceRight((e,t)=>new O(e,t),this.backend)}return this.chain.handle(e)}}))(),V=(()=>{class e{static disable(){return{ngModule:e,providers:[{provide:F,useClass:A}]}}static withOptions(t={}){return{ngModule:e,providers:[t.cookieName?{provide:P,useValue:t.cookieName}:[],t.headerName?{provide:L,useValue:t.headerName}:[]]}}}return e})(),q=(()=>(class{}))()},IjjT:function(e,t,n){\"use strict\";let r=(()=>{class e{constructor(t,n=e.now){this.SchedulerAction=t,this.now=n}schedule(e,t=0,n){return new this.SchedulerAction(this,e).schedule(n,t)}}return e.now=()=>Date.now(),e})();n.d(t,\"a\",function(){return i});class i extends r{constructor(e,t=r.now){super(e,()=>i.delegate&&i.delegate!==this?i.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(e,t,n):super.schedule(e,t,n)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}},Ioyb:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return a});var r=n(\"mrSG\"),i=n(\"a3Cf\"),o=n(\"HDdC\"),s=function(){function e(e){var t=this;this._objectInstance=e,this.onSuccess=new o.a(function(e){return t.successCallback=e.next.bind(e),function(){return t.successCallback=function(){}}}),this.onError=new o.a(function(e){return t.errorCallback=e.next.bind(e),function(){return t.errorCallback=function(){}}}),this.onStatusUpdate=new o.a(function(e){return t.statusCallback=e.next.bind(e),function(){return t.statusCallback=function(){}}})}return e.prototype.getCurrentAmplitude=function(){return Object(i.cordovaInstance)(this,\"getCurrentAmplitude\",{},arguments)},e.prototype.getCurrentPosition=function(){return Object(i.cordovaInstance)(this,\"getCurrentPosition\",{},arguments)},e.prototype.getDuration=function(){return Object(i.cordovaInstance)(this,\"getDuration\",{sync:!0},arguments)},e.prototype.play=function(e){return Object(i.cordovaInstance)(this,\"play\",{sync:!0},arguments)},e.prototype.pause=function(){return Object(i.cordovaInstance)(this,\"pause\",{sync:!0},arguments)},e.prototype.release=function(){return Object(i.cordovaInstance)(this,\"release\",{sync:!0},arguments)},e.prototype.seekTo=function(e){return Object(i.cordovaInstance)(this,\"seekTo\",{sync:!0},arguments)},e.prototype.setVolume=function(e){return Object(i.cordovaInstance)(this,\"setVolume\",{sync:!0},arguments)},e.prototype.setRate=function(e){return Object(i.cordovaInstance)(this,\"setRate\",{sync:!0},arguments)},e.prototype.startRecord=function(){return Object(i.cordovaInstance)(this,\"startRecord\",{sync:!0},arguments)},e.prototype.stopRecord=function(){return Object(i.cordovaInstance)(this,\"stopRecord\",{sync:!0},arguments)},e.prototype.pauseRecord=function(){return Object(i.cordovaInstance)(this,\"pauseRecord\",{sync:!0},arguments)},e.prototype.resumeRecord=function(){return Object(i.cordovaInstance)(this,\"resumeRecord\",{sync:!0},arguments)},e.prototype.stop=function(){return Object(i.cordovaInstance)(this,\"stop\",{sync:!0},arguments)},Object.defineProperty(e.prototype,\"successCallback\",{get:function(){return Object(i.instancePropertyGet)(this,\"successCallback\")},set:function(e){Object(i.instancePropertySet)(this,\"successCallback\",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"errorCallback\",{get:function(){return Object(i.instancePropertyGet)(this,\"errorCallback\")},set:function(e){Object(i.instancePropertySet)(this,\"errorCallback\",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"statusCallback\",{get:function(){return Object(i.instancePropertyGet)(this,\"statusCallback\")},set:function(e){Object(i.instancePropertySet)(this,\"statusCallback\",e)},enumerable:!0,configurable:!0}),e}(),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.MEDIA_NONE=0,t.MEDIA_STARTING=1,t.MEDIA_RUNNING=2,t.MEDIA_PAUSED=3,t.MEDIA_STOPPED=4,t.MEDIA_ERR_ABORTED=1,t.MEDIA_ERR_NETWORK=2,t.MEDIA_ERR_DECODE=3,t.MEDIA_ERR_NONE_SUPPORTED=4,t}return Object(r.__extends)(t,e),t.prototype.create=function(e){var n;return!0===Object(i.checkAvailability)(t.getPluginRef(),null,t.getPluginName())&&(n=new(t.getPlugin())(e)),new s(n)},t.pluginName=\"Media\",t.repo=\"https://github.com/apache/cordova-plugin-media\",t.plugin=\"cordova-plugin-media\",t.pluginRef=\"Media\",t.platforms=[\"Android\",\"Browser\",\"iOS\",\"Windows\"],t}(i.IonicNativePlugin)},Ji5e:function(e,t,n){\"use strict\";function r(e,t){return e._objectInstance&&e._objectInstance[t]?e._objectInstance[t]:null}function i(e,t,n){e._objectInstance&&(e._objectInstance[t]=n)}n.d(t,\"a\",function(){return r}),n.d(t,\"b\",function(){return i})},\"KOl+\":function(e,t,n){\"use strict\";n.d(t,\"c\",function(){return a}),n.d(t,\"a\",function(){return d}),n.d(t,\"b\",function(){return g}),n.d(t,\"d\",function(){return v}),n.d(t,\"e\",function(){return b});var r=n(\"HDdC\"),i=n(\"xgIS\"),o={error:\"cordova_not_available\"},s={error:\"plugin_not_installed\"};function a(e){if(\"undefined\"!=typeof window&&window.angular){var t=window.document,n=window.angular.element(t.querySelector(\"[ng-app]\")||t.body).injector();if(n)return n.get(\"$q\")(function(t,n){e(t,n)});console.warn(\"Angular 1 was detected but $q couldn't be retrieved. This is usually when the app is not bootstrapped on the html or body tag. Falling back to native promises which won't trigger an automatic digest when promises resolve.\")}return function(){if(Promise)return new Promise(function(t,n){e(t,n)});console.error(\"No Promise support or polyfill found. To enable Ionic Native support, please add the es6-promise polyfill before this script, or run with a library like Angular or on a recent browser.\")}()}function u(e,t,n,r){var i,o;void 0===r&&(r={});var s=a(function(s,a){i=r.destruct?p(e,t,n,r,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return s(e)},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a(e)}):p(e,t,n,r,s,a),o=a});return i&&i.error&&(s.catch(function(){}),\"function\"==typeof o&&o(i.error)),s}function c(e,t,n,r){return void 0===r&&(r={}),a(function(i,o){var s=p(e,t,n,r);s?s.error?o(s.error):s.then&&s.then(i).catch(o):o({error:\"unexpected_error\"})})}function l(e,t,n,i){return void 0===i&&(i={}),new r.a(function(r){var o;return(o=i.destruct?p(e,t,n,i,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.next(e)},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.error(e)}):p(e,t,n,i,r.next.bind(r),r.error.bind(r)))&&o.error&&(r.error(o.error),r.complete()),function(){try{if(i.clearFunction)return i.clearWithArgs?p(e,i.clearFunction,n,i,r.next.bind(r),r.error.bind(r)):p(e,i.clearFunction,[])}catch(o){console.warn(\"Unable to clear the previous observable watch for\",e.constructor.getPluginName(),t),console.warn(o)}}})}function h(e,t){return t=\"undefined\"!=typeof window&&t?y(window,t):t||\"undefined\"!=typeof window||{},Object(i.a)(t,e)}function d(e,t,n){var r,i,a;return\"string\"==typeof e?r=e:(r=e.constructor.getPluginRef(),n=e.constructor.getPluginName(),a=e.constructor.getPluginInstallName()),!(!(i=g(r))||t&&void 0===i[t])||(\"undefined\"!=typeof window&&window.cordova?(function(e,n,r){t?console.warn(\"Native: tried calling \"+e+\".\"+t+\", but the \"+e+\" plugin is not installed.\"):console.warn(\"Native: tried accessing the \"+e+\" plugin but it's not installed.\"),n&&console.warn(\"Install the \"+e+\" plugin: 'ionic cordova plugin add \"+n+\"'\")}(n,a),s):(function(e,n){\"undefined\"==typeof process&&(t?console.warn(\"Native: tried calling \"+e+\".\"+t+\", but Cordova is not available. Make sure to include cordova.js or run in a device/simulator\"):console.warn(\"Native: tried accessing the \"+e+\" plugin but Cordova is not available. Make sure to include cordova.js or run in a device/simulator\"))}(n),o))}function f(e,t,n,r){if(void 0===t&&(t={}),t.sync)return e;if(\"reverse\"===t.callbackOrder)e.unshift(r),e.unshift(n);else if(\"node\"===t.callbackStyle)e.push(function(e,t){e?r(e):n(t)});else if(\"object\"===t.callbackStyle&&t.successName&&t.errorName){var i={};i[t.successName]=n,i[t.errorName]=r,e.push(i)}else if(void 0!==t.successIndex||void 0!==t.errorIndex){var o=function(){t.successIndex>e.length?e[t.successIndex]=n:e.splice(t.successIndex,0,n)},s=function(){t.errorIndex>e.length?e[t.errorIndex]=r:e.splice(t.errorIndex,0,r)};t.successIndex>t.errorIndex?(s(),o()):(o(),s())}else e.push(n),e.push(r);return e}function p(e,t,n,r,i,o){void 0===r&&(r={}),n=f(n,r,i,o);var s=d(e,t);if(!0===s){var a=g(e.constructor.getPluginRef());return a[t].apply(a,n)}return s}function m(e,t,n,r,i,o){if(void 0===r&&(r={}),n=f(n,r,i,o),function(e,t){return e._objectInstance&&(!t||void 0!==e._objectInstance[t])}(e,t))return e._objectInstance[t].apply(e._objectInstance,n)}function g(e){return\"undefined\"!=typeof window?y(window,e):null}function y(e,t){for(var n=t.split(\".\"),r=e,i=0;i<n.length;i++){if(!r)return null;r=r[n[i]]}return r}var v=function(e,t,n){return void 0===n&&(n={}),function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return n.sync?p(e,t,r,n):n.observable?l(e,t,r,n):n.eventObservable&&n.event?h(n.event,n.element):n.otherPromise?c(e,t,r,n):u(e,t,r,n)}};function b(e,t,n){return void 0===n&&(n={}),function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(n.sync)return m(e,t,i,n);if(n.observable)return new r.a(function(r){var o;return(o=n.destruct?m(e,t,i,n,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.next(e)},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.error(e)}):m(e,t,i,n,r.next.bind(r),r.error.bind(r)))&&o.error&&r.error(o.error),function(){try{return n.clearWithArgs?m(e,n.clearFunction,i,n,r.next.bind(r),r.error.bind(r)):m(e,n.clearFunction,[])}catch(o){console.warn(\"Unable to clear the previous observable watch for\",e.constructor.getPluginName(),t),console.warn(o)}}});if(n.otherPromise)return a(function(r,o){var s;(s=n.destruct?m(e,t,i,n,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r(e)},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o(e)}):m(e,t,i,n,r,o))&&s.then?s.then(r,o):o()});var s,u,c=a(function(r,o){s=n.destruct?m(e,t,i,n,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r(e)},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o(e)}):m(e,t,i,n,r,o),u=o});return s&&s.error&&(c.catch(function(){}),\"function\"==typeof u&&u(s.error)),c}}},Kqap:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return i});var r=n(\"7o/Q\");function i(e,t){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new o(e,t,n))}}class o{constructor(e,t,n=!1){this.accumulator=e,this.seed=t,this.hasSeed=n}call(e,t){return t.subscribe(new s(e,this.accumulator,this.seed,this.hasSeed))}}class s extends r.a{constructor(e,t,n,r){super(e),this.accumulator=t,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let n;try{n=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}},KqfI:function(e,t,n){\"use strict\";function r(){}n.d(t,\"a\",function(){return r})},\"LG6+\":function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return o});var r=n(\"mrSG\"),i=n(\"a3Cf\"),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.DestinationType={DATA_URL:0,FILE_URI:1,NATIVE_URI:2},t.EncodingType={JPEG:0,PNG:1},t.MediaType={PICTURE:0,VIDEO:1,ALLMEDIA:2},t.PictureSourceType={PHOTOLIBRARY:0,CAMERA:1,SAVEDPHOTOALBUM:2},t.PopoverArrowDirection={ARROW_UP:1,ARROW_DOWN:2,ARROW_LEFT:4,ARROW_RIGHT:8,ARROW_ANY:15},t.Direction={BACK:0,FRONT:1},t}return Object(r.__extends)(t,e),t.prototype.getPicture=function(e){return Object(i.cordova)(this,\"getPicture\",{callbackOrder:\"reverse\"},arguments)},t.prototype.cleanup=function(){return Object(i.cordova)(this,\"cleanup\",{platforms:[\"iOS\"]},arguments)},t.pluginName=\"Camera\",t.plugin=\"cordova-plugin-camera\",t.pluginRef=\"navigator.camera\",t.repo=\"https://github.com/apache/cordova-plugin-camera\",t.platforms=[\"Android\",\"Browser\",\"iOS\",\"Windows\"],t}(i.IonicNativePlugin)},LRne:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return s});var r=n(\"z+Ro\"),i=n(\"yCtX\"),o=n(\"jZKg\");function s(...e){let t=e[e.length-1];return Object(r.a)(t)?(e.pop(),Object(o.a)(e,t)):Object(i.a)(e)}},Lhse:function(e,t,n){\"use strict\";function r(){return\"function\"==typeof Symbol&&Symbol.iterator?Symbol.iterator:\"@@iterator\"}n.d(t,\"a\",function(){return i});const i=r()},Lq6m:function(e,t,n){\"use strict\";var r=n(\"KOl+\");n.d(t,\"a\",function(){return i});var i=function(){function e(){}return e.installed=function(){return!0===Object(r.a)(this.pluginRef)},e.getPlugin=function(){return\"undefined\"!=typeof window?function(e,t){for(var n=t.split(\".\"),r=e,i=0;i<n.length;i++){if(!r)return null;r=r[n[i]]}return r}(window,this.pluginRef):null},e.getPluginName=function(){return this.pluginName},e.getPluginRef=function(){return this.pluginRef},e.getPluginInstallName=function(){return this.plugin},e.getSupportedPlatforms=function(){return this.platforms||[]},e}()},NJ4a:function(e,t,n){\"use strict\";function r(e){setTimeout(()=>{throw e},0)}n.d(t,\"a\",function(){return r})},NSPt:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r,i,o=(r=n(\"wj3C\"))&&\"object\"==typeof r&&\"default\"in r?r.default:r,s=n(\"mrSG\"),a=n(\"zVF4\"),u=n(\"q/0M\"),c=function(){function e(e){this.domStorage_=e,this.prefix_=\"firebase:\"}return e.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),a.stringify(t))},e.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:a.jsonEval(t)},e.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},e.prototype.prefixedName_=function(e){return this.prefix_+e},e.prototype.toString=function(){return this.domStorage_.toString()},e}(),l=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},e.prototype.get=function(e){return a.contains(this.cache_,e)?this.cache_[e]:null},e.prototype.remove=function(e){delete this.cache_[e]},e}(),h=function(e){try{if(\"undefined\"!=typeof window&&void 0!==window[e]){var t=window[e];return t.setItem(\"firebase:sentinel\",\"cache\"),t.removeItem(\"firebase:sentinel\"),new c(t)}}catch(n){}return new l},d=h(\"localStorage\"),f=h(\"sessionStorage\"),p=new u.Logger(\"@firebase/database\"),m=\"FIREBASE_DATABASE_EMULATOR_HOST\",g=(i=1,function(){return i++}),y=function(e){var t=a.stringToByteArray(e),n=new a.Sha1;n.update(t);var r=n.digest();return a.base64.encodeByteArray(r)},v=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=\"\",r=0;r<e.length;r++)Array.isArray(e[r])||e[r]&&\"object\"==typeof e[r]&&\"number\"==typeof e[r].length?n+=v.apply(null,e[r]):n+=\"object\"==typeof e[r]?a.stringify(e[r]):e[r],n+=\" \";return n},b=null,_=!0,w=function(e,t){a.assert(!t||!0===e||!1===e,\"Can't turn on custom loggers persistently.\"),!0===e?(p.logLevel=u.LogLevel.VERBOSE,b=p.log.bind(p),t&&f.set(\"logging_enabled\",!0)):\"function\"==typeof e?b=e:(b=null,f.remove(\"logging_enabled\"))},E=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!0===_&&(_=!1,null===b&&!0===f.get(\"logging_enabled\")&&w(!0)),b){var n=v.apply(null,e);b(n)}},C=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];E.apply(void 0,s.__spread([e],t))}},S=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=\"FIREBASE INTERNAL ERROR: \"+v.apply(void 0,s.__spread(e));p.error(n)},T=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=\"FIREBASE FATAL ERROR: \"+v.apply(void 0,s.__spread(e));throw p.error(n),new Error(n)},I=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=\"FIREBASE WARNING: \"+v.apply(void 0,s.__spread(e));p.warn(n)},O=function(e){return\"number\"==typeof e&&(e!=e||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY)},N=\"[MIN_NAME]\",A=\"[MAX_NAME]\",R=function(e,t){if(e===t)return 0;if(e===N||t===A)return-1;if(t===N||e===A)return 1;var n=G(e),r=G(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},D=function(e,t){return e===t?0:e<t?-1:1},k=function(e,t){if(t&&e in t)return t[e];throw new Error(\"Missing required key (\"+e+\") in object: \"+a.stringify(t))},x=function(e){if(\"object\"!=typeof e||null===e)return a.stringify(e);var t=[];for(var n in e)t.push(n);t.sort();for(var r=\"{\",i=0;i<t.length;i++)0!==i&&(r+=\",\"),r+=a.stringify(t[i]),r+=\":\",r+=x(e[t[i]]);return r+\"}\"},P=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)r.push(e.substring(i,i+t>n?n:i+t));return r};function L(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var M,j,F,U,V,q,B,$,z,W,H=function(e){var t,n,r,i,o,s,u;for(a.assert(!O(e),\"Invalid JSON number\"),0===e?(n=0,r=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),1023))+1023,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074)))),s=[],o=52;o;o-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse(),u=s.join(\"\");var c=\"\";for(o=0;o<64;o+=8){var l=parseInt(u.substr(o,8),2).toString(16);1===l.length&&(l=\"0\"+l),c+=l}return c.toLowerCase()},Q=new RegExp(\"^-?\\\\d{1,10}$\"),G=function(e){if(Q.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},K=function(e){try{e()}catch(t){setTimeout(function(){throw I(\"Exception was thrown by user callback.\",t.stack||\"\"),t},Math.floor(0))}},Y=function(){return(\"object\"==typeof window&&window.navigator&&window.navigator.userAgent||\"\").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},X=function(e,t){var n=setTimeout(e,t);return\"object\"==typeof n&&n.unref&&n.unref(),n},J=function(){function e(e,t){if(void 0===t){this.pieces_=e.split(\"/\");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}return Object.defineProperty(e,\"Empty\",{get:function(){return new e(\"\")},enumerable:!0,configurable:!0}),e.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},e.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},e.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new e(this.pieces_,t)},e.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},e.prototype.toString=function(){for(var e=\"\",t=this.pieceNum_;t<this.pieces_.length;t++)\"\"!==this.pieces_[t]&&(e+=\"/\"+this.pieces_[t]);return e||\"/\"},e.prototype.toUrlEncodedString=function(){for(var e=\"\",t=this.pieceNum_;t<this.pieces_.length;t++)\"\"!==this.pieces_[t]&&(e+=\"/\"+encodeURIComponent(String(this.pieces_[t])));return e||\"/\"},e.prototype.slice=function(e){return void 0===e&&(e=0),this.pieces_.slice(this.pieceNum_+e)},e.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)t.push(this.pieces_[n]);return new e(t,0)},e.prototype.child=function(t){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(t instanceof e)for(r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{var i=t.split(\"/\");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new e(n,0)},e.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},e.relativePath=function(t,n){var r=t.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return e.relativePath(t.popFront(),n.popFront());throw new Error(\"INTERNAL ERROR: innerPath (\"+n+\") is not within outerPath (\"+t+\")\")},e.comparePaths=function(e,t){for(var n=e.slice(),r=t.slice(),i=0;i<n.length&&i<r.length;i++){var o=R(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},e.prototype.equals=function(e){if(this.getLength()!==e.getLength())return!1;for(var t=this.pieceNum_,n=e.pieceNum_;t<=this.pieces_.length;t++,n++)if(this.pieces_[t]!==e.pieces_[n])return!1;return!0},e.prototype.contains=function(e){var t=this.pieceNum_,n=e.pieceNum_;if(this.getLength()>e.getLength())return!1;for(;t<this.pieces_.length;){if(this.pieces_[t]!==e.pieces_[n])return!1;++t,++n}return!0},e}(),Z=function(){function e(e,t){this.errorPrefix_=t,this.parts_=e.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=a.stringLength(this.parts_[n]);this.checkValid_()}return Object.defineProperty(e,\"MAX_PATH_DEPTH\",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(e,\"MAX_PATH_LENGTH_BYTES\",{get:function(){return 768},enumerable:!0,configurable:!0}),e.prototype.push=function(e){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(e),this.byteLength_+=a.stringLength(e),this.checkValid_()},e.prototype.pop=function(){var e=this.parts_.pop();this.byteLength_-=a.stringLength(e),this.parts_.length>0&&(this.byteLength_-=1)},e.prototype.checkValid_=function(){if(this.byteLength_>e.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+\"has a key path longer than \"+e.MAX_PATH_LENGTH_BYTES+\" bytes (\"+this.byteLength_+\").\");if(this.parts_.length>e.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+\"path specified exceeds the maximum depth that can be written (\"+e.MAX_PATH_DEPTH+\") or object contains a cycle \"+this.toErrorString())},e.prototype.toErrorString=function(){return 0==this.parts_.length?\"\":\"in property '\"+this.parts_.join(\".\")+\"'\"},e}(),ee=\"long_polling\",te=function(){function e(e,t,n,r,i,o){void 0===i&&(i=\"\"),void 0===o&&(o=!1),this.secure=t,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this.host=e.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(\".\")+1),this.internalHost=d.get(\"host:\"+e)||this.host}return e.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},e.prototype.isCacheableHost=function(){return\"s-\"===this.internalHost.substr(0,2)},e.prototype.isDemoHost=function(){return\"firebaseio-demo.com\"===this.domain},e.prototype.isCustomHost=function(){return\"firebaseio.com\"!==this.domain&&\"firebaseio-demo.com\"!==this.domain},e.prototype.updateHost=function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&d.set(\"host:\"+this.host,this.internalHost))},e.prototype.connectionURL=function(e,t){var n;if(a.assert(\"string\"==typeof e,\"typeof type must == string\"),a.assert(\"object\"==typeof t,\"typeof params must == object\"),\"websocket\"===e)n=(this.secure?\"wss://\":\"ws://\")+this.internalHost+\"/.ws?\";else{if(e!==ee)throw new Error(\"Unknown connection type: \"+e);n=(this.secure?\"https://\":\"http://\")+this.internalHost+\"/.lp?\"}this.needsQueryParam()&&(t.ns=this.namespace);var r=[];return L(t,function(e,t){r.push(e+\"=\"+t)}),n+r.join(\"&\")},e.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+=\"<\"+this.persistenceKey+\">\"),e},e.prototype.toURLString=function(){return(this.secure?\"https://\":\"http://\")+this.host},e}(),ne=function(e){var t=re(e),n=t.namespace;return\"firebase\"===t.domain&&T(t.host+\" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead\"),n&&\"undefined\"!=n||\"localhost\"===t.domain||T(\"Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com\"),t.secure||\"undefined\"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf(\"https:\")&&I(\"Insecure Firebase access from a secure page. Please use https in calls to new Firebase().\"),{repoInfo:new te(t.host,t.secure,n,\"ws\"===t.scheme||\"wss\"===t.scheme,\"\",n!=t.subdomain),path:new J(t.pathString)}},re=function(e){var t=\"\",n=\"\",r=\"\",i=\"\",o=\"\",a=!0,u=\"https\",c=443;if(\"string\"==typeof e){var l=e.indexOf(\"//\");l>=0&&(u=e.substring(0,l-1),e=e.substring(l+2));var h=e.indexOf(\"/\");-1===h&&(h=e.length);var d=e.indexOf(\"?\");-1===d&&(d=e.length),t=e.substring(0,Math.min(h,d)),h<d&&(i=function(t){for(var n=\"\",r=e.substring(h,d).split(\"/\"),i=0;i<r.length;i++)if(r[i].length>0){var o=r[i];try{o=decodeURIComponent(o.replace(/\\+/g,\" \"))}catch(s){}n+=\"/\"+o}return n}());var f=function(e){var t,n,r={};\"?\"===e.charAt(0)&&(e=e.substring(1));try{for(var i=s.__values(e.split(\"&\")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var u=a.split(\"=\");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):I(\"Invalid query segment '\"+a+\"' in query '\"+e+\"'\")}}}catch(c){t={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(e.substring(Math.min(e.length,d)));(l=t.indexOf(\":\"))>=0?(a=\"https\"===u||\"wss\"===u,c=parseInt(t.substring(l+1),10)):l=e.length;var p=t.split(\".\");3===p.length?(n=p[1],o=r=p[0].toLowerCase()):2===p.length?n=p[0]:\"localhost\"===p[0].slice(0,l).toLowerCase()&&(n=\"localhost\"),\"ns\"in f&&(o=f.ns)}return{host:t,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:i,namespace:o}},ie=/[\\[\\].#$\\/\\u0000-\\u001F\\u007F]/,oe=/[\\[\\].#$\\u0000-\\u001F\\u007F]/,se=function(e){return\"string\"==typeof e&&0!==e.length&&!ie.test(e)},ae=function(e){return\"string\"==typeof e&&0!==e.length&&!oe.test(e)},ue=function(e){return null===e||\"string\"==typeof e||\"number\"==typeof e&&!O(e)||e&&\"object\"==typeof e&&a.contains(e,\".sv\")},ce=function(e,t,n,r,i){i&&void 0===n||le(a.errorPrefix(e,t,i),n,r)},le=function(e,t,n){var r=n instanceof J?new Z(n,e):n;if(void 0===t)throw new Error(e+\"contains undefined \"+r.toErrorString());if(\"function\"==typeof t)throw new Error(e+\"contains a function \"+r.toErrorString()+\" with contents = \"+t.toString());if(O(t))throw new Error(e+\"contains \"+t.toString()+\" \"+r.toErrorString());if(\"string\"==typeof t&&t.length>10485760/3&&a.stringLength(t)>10485760)throw new Error(e+\"contains a string greater than 10485760 utf8 bytes \"+r.toErrorString()+\" ('\"+t.substring(0,50)+\"...')\");if(t&&\"object\"==typeof t){var i=!1,o=!1;if(L(t,function(t,n){if(\".value\"===t)i=!0;else if(\".priority\"!==t&&\".sv\"!==t&&(o=!0,!se(t)))throw new Error(e+\" contains an invalid key (\"+t+\") \"+r.toErrorString()+'.  Keys must be non-empty strings and can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\"');r.push(t),le(e,n,r),r.pop()}),i&&o)throw new Error(e+' contains \".value\" child '+r.toErrorString()+\" in addition to actual children.\")}},he=function(e,t,n,r,i){if(!i||void 0!==n){var o=a.errorPrefix(e,t,i);if(!n||\"object\"!=typeof n||Array.isArray(n))throw new Error(o+\" must be an object containing the children to replace.\");var s=[];L(n,function(e,t){var n=new J(e);if(le(o,t,r.child(n)),\".priority\"===n.getBack()&&!ue(t))throw new Error(o+\"contains an invalid value for '\"+n.toString()+\"', which must be a valid Firebase priority (a string, finite number, server value, or null).\");s.push(n)}),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=(r=t[n]).slice(),o=0;o<i.length;o++)if(\".priority\"===i[o]&&o===i.length-1);else if(!se(i[o]))throw new Error(e+\"contains an invalid key (\"+i[o]+\") in path \"+r.toString()+'. Keys must be non-empty strings and can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\"');t.sort(J.comparePaths);var s=null;for(n=0;n<t.length;n++){if(r=t[n],null!==s&&s.contains(r))throw new Error(e+\"contains a path \"+s.toString()+\" that is ancestor of another path \"+r.toString());s=r}}(o,s)}},de=function(e,t,n,r){if(!r||void 0!==n){if(O(n))throw new Error(a.errorPrefix(e,t,r)+\"is \"+n.toString()+\", but must be a valid Firebase priority (a string, finite number, server value, or null).\");if(!ue(n))throw new Error(a.errorPrefix(e,t,r)+\"must be a valid Firebase priority (a string, finite number, server value, or null).\")}},fe=function(e,t,n,r){if(!r||void 0!==n)switch(n){case\"value\":case\"child_added\":case\"child_removed\":case\"child_changed\":case\"child_moved\":break;default:throw new Error(a.errorPrefix(e,t,r)+'must be a valid event type = \"value\", \"child_added\", \"child_removed\", \"child_changed\", or \"child_moved\".')}},pe=function(e,t,n,r){if(!(r&&void 0===n||se(n)))throw new Error(a.errorPrefix(e,t,r)+'was an invalid key = \"'+n+'\".  Firebase keys must be non-empty strings and can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\").')},me=function(e,t,n,r){if(!(r&&void 0===n||ae(n)))throw new Error(a.errorPrefix(e,t,r)+'was an invalid path = \"'+n+'\". Paths must be non-empty strings and can\\'t contain \".\", \"#\", \"$\", \"[\", or \"]\"')},ge=function(e,t,n,r){n&&(n=n.replace(/^\\/*\\.info(\\/|$)/,\"/\")),me(e,t,n,r)},ye=function(e,t){if(\".info\"===t.getFront())throw new Error(e+\" failed = Can't modify data under /.info/\")},ve=function(e,t,n){var r=n.path.toString();if(\"string\"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!se(n.repoInfo.namespace)&&\"localhost\"!==n.repoInfo.host.split(\":\")[0]||0!==r.length&&!function(e){return e&&(e=e.replace(/^\\/*\\.info(\\/|$)/,\"/\")),ae(e)}(r))throw new Error(a.errorPrefix(e,t,!1)+'must be a valid firebase URL and the path can\\'t contain \".\", \"#\", \"$\", \"[\", or \"]\".')},be=function(e,t,n,r){if((!r||void 0!==n)&&\"boolean\"!=typeof n)throw new Error(a.errorPrefix(e,t,r)+\"must be a boolean.\")},_e=function(){function e(e,t){this.repo_=e,this.path_=t}return e.prototype.cancel=function(e){a.validateArgCount(\"OnDisconnect.cancel\",0,1,arguments.length),a.validateCallback(\"OnDisconnect.cancel\",1,e,!0);var t=new a.Deferred;return this.repo_.onDisconnectCancel(this.path_,t.wrapCallback(e)),t.promise},e.prototype.remove=function(e){a.validateArgCount(\"OnDisconnect.remove\",0,1,arguments.length),ye(\"OnDisconnect.remove\",this.path_),a.validateCallback(\"OnDisconnect.remove\",1,e,!0);var t=new a.Deferred;return this.repo_.onDisconnectSet(this.path_,null,t.wrapCallback(e)),t.promise},e.prototype.set=function(e,t){a.validateArgCount(\"OnDisconnect.set\",1,2,arguments.length),ye(\"OnDisconnect.set\",this.path_),ce(\"OnDisconnect.set\",1,e,this.path_,!1),a.validateCallback(\"OnDisconnect.set\",2,t,!0);var n=new a.Deferred;return this.repo_.onDisconnectSet(this.path_,e,n.wrapCallback(t)),n.promise},e.prototype.setWithPriority=function(e,t,n){a.validateArgCount(\"OnDisconnect.setWithPriority\",2,3,arguments.length),ye(\"OnDisconnect.setWithPriority\",this.path_),ce(\"OnDisconnect.setWithPriority\",1,e,this.path_,!1),de(\"OnDisconnect.setWithPriority\",2,t,!1),a.validateCallback(\"OnDisconnect.setWithPriority\",3,n,!0);var r=new a.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,e,t,r.wrapCallback(n)),r.promise},e.prototype.update=function(e,t){if(a.validateArgCount(\"OnDisconnect.update\",1,2,arguments.length),ye(\"OnDisconnect.update\",this.path_),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[\"\"+r]=e[r];e=n,I(\"Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.\")}he(\"OnDisconnect.update\",1,e,this.path_,!1),a.validateCallback(\"OnDisconnect.update\",2,t,!0);var i=new a.Deferred;return this.repo_.onDisconnectUpdate(this.path_,e,i.wrapCallback(t)),i.promise},e}(),we=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return a.validateArgCount(\"TransactionResult.toJSON\",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}(),Ee=(M=\"-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz\",j=0,F=[],function(e){var t,n=e===j;j=e;var r=new Array(8);for(t=7;t>=0;t--)r[t]=M.charAt(e%64),e=Math.floor(e/64);a.assert(0===e,\"Cannot push at time == 0\");var i=r.join(\"\");if(n){for(t=11;t>=0&&63===F[t];t--)F[t]=0;F[t]++}else for(t=0;t<12;t++)F[t]=Math.floor(64*Math.random());for(t=0;t<12;t++)i+=M.charAt(F[t]);return a.assert(20===i.length,\"nextPushId: Length should be 20.\"),i}),Ce=function(){function e(e,t){this.name=e,this.node=t}return e.Wrap=function(t,n){return new e(t,n)},e}(),Se=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(e,t){var n=new Ce(N,e),r=new Ce(N,t);return 0!==this.compare(n,r)},e.prototype.minPost=function(){return Ce.MIN},e}(),Te=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),Object.defineProperty(t,\"__EMPTY_NODE\",{get:function(){return U},set:function(e){U=e},enumerable:!0,configurable:!0}),t.prototype.compare=function(e,t){return R(e.name,t.name)},t.prototype.isDefinedOn=function(e){throw a.assertionError(\"KeyIndex.isDefinedOn not expected to be called.\")},t.prototype.indexedValueChanged=function(e,t){return!1},t.prototype.minPost=function(){return Ce.MIN},t.prototype.maxPost=function(){return new Ce(A,U)},t.prototype.makePost=function(e,t){return a.assert(\"string\"==typeof e,\"KeyIndex indexValue must always be a string.\"),new Ce(e,U)},t.prototype.toString=function(){return\".key\"},t}(Se),Ie=new Te,Oe=function(e){return\"number\"==typeof e?\"number:\"+H(e):\"string:\"+e},Ne=function(e){if(e.isLeafNode()){var t=e.val();a.assert(\"string\"==typeof t||\"number\"==typeof t||\"object\"==typeof t&&a.contains(t,\".sv\"),\"Priority must be a string or number.\")}else a.assert(e===V||e.isEmpty(),\"priority of unexpected type.\");a.assert(e===V||e.getPriority().isEmpty(),\"Priority nodes can't have a priority of their own.\")},Ae=function(){function e(t,n){void 0===n&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,a.assert(null!=this.value_,\"LeafNode shouldn't be created with null/undefined value.\"),Ne(this.priorityNode_)}return Object.defineProperty(e,\"__childrenNodeConstructor\",{get:function(){return q},set:function(e){q=e},enumerable:!0,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return\".priority\"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return t.isEmpty()?this:\".priority\"===t.getFront()?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(e,t){return null},e.prototype.updateImmediateChild=function(t,n){return\".priority\"===t?this.updatePriority(n):n.isEmpty()&&\".priority\"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var r=t.getFront();return null===r?n:n.isEmpty()&&\".priority\"!==r?this:(a.assert(\".priority\"!==r||1===t.getLength(),\".priority must be the last token in a path\"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(e,t){return!1},e.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{\".value\":this.getValue(),\".priority\":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(null===this.lazyHash_){var e=\"\";this.priorityNode_.isEmpty()||(e+=\"priority:\"+Oe(this.priorityNode_.val())+\":\");var t=typeof this.value_;e+=t+\":\",e+=\"number\"===t?H(this.value_):this.value_,this.lazyHash_=y(e)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(a.assert(t.isLeafNode(),\"Unknown node type\"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),o=e.VALUE_TYPE_ORDER.indexOf(r);return a.assert(i>=0,\"Unknown leaf type: \"+n),a.assert(o>=0,\"Unknown leaf type: \"+r),i===o?\"object\"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-i},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(e){return e===this||!!e.isLeafNode()&&this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)},e.VALUE_TYPE_ORDER=[\"object\",\"boolean\",\"number\",\"string\"],e}(),Re=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.compare=function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?R(e.name,t.name):i},t.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},t.prototype.minPost=function(){return Ce.MIN},t.prototype.maxPost=function(){return new Ce(A,new Ae(\"[PRIORITY-POST]\",$))},t.prototype.makePost=function(e,t){var n=B(e);return new Ce(t,new Ae(\"[PRIORITY-POST]\",n))},t.prototype.toString=function(){return\".priority\"},t}(Se)),De=function(){function e(e,t,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!e.isEmpty();)if(e=e,o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}return e.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},e}(),ke=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:Pe.EMPTY_NODE,this.right=null!=o?o:Pe.EMPTY_NODE}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r,i;return(i=(r=n(e,(i=this).key))<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n))).fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return Pe.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()},e.prototype.remove=function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Pe.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},e.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e},e.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1},e.prototype.check_=function(){var e;if(this.isRed_()&&this.left.isRed_())throw new Error(\"Red node has red child(\"+this.key+\",\"+this.value+\")\");if(this.right.isRed_())throw new Error(\"Right child of (\"+this.key+\",\"+this.value+\") is red\");if((e=this.left.check_())!==this.right.check_())throw new Error(\"Black depths differ\");return e+(this.isRed_()?0:1)},e.RED=!0,e.BLACK=!1,e}(),xe=function(){function e(){}return e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new ke(e,t,null)},e.prototype.remove=function(e,t){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}(),Pe=function(){function e(t,n){void 0===n&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,ke.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,ke.BLACK,null,null))},e.prototype.get=function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null},e.prototype.getPredecessorKey=function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error(\"Attempted to find predecessor key for a nonexistent key.  What gives?\")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},e.prototype.getIterator=function(e){return new De(this.root_,null,this.comparator_,!1,e)},e.prototype.getIteratorFrom=function(e,t){return new De(this.root_,e,this.comparator_,!1,t)},e.prototype.getReverseIteratorFrom=function(e,t){return new De(this.root_,e,this.comparator_,!0,t)},e.prototype.getReverseIterator=function(e){return new De(this.root_,null,this.comparator_,!0,e)},e.EMPTY_NODE=new xe,e}(),Le=Math.log(2),Me=function(){function e(e){this.count=parseInt(Math.log(e+1)/Le,10),this.current_=this.count-1;var t=parseInt(Array(this.count+1).join(\"1\"),2);this.bits_=e+1&t}return e.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},e}(),je=function(e,t,n,r){e.sort(t);var i=function(t,r){var o,s,a=r-t;if(0==a)return null;if(1==a)return o=e[t],s=n?n(o):o,new ke(s,o.node,ke.BLACK,null,null);var u=parseInt(a/2,10)+t,c=i(t,u),l=i(u+1,r);return o=e[u],s=n?n(o):o,new ke(s,o.node,ke.BLACK,c,l)},o=function(t){for(var r=null,o=null,s=e.length,a=function(t,r){var o=s-t,a=s;s-=t;var c=i(o+1,a),l=e[o],h=n?n(l):l;u(new ke(h,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(o=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?a(h,ke.BLACK):(a(h,ke.BLACK),a(h,ke.RED))}return o}(new Me(e.length));return new Pe(r||t,o)},Fe={},Ue=function(){function e(e,t){this.indexes_=e,this.indexSet_=t}return Object.defineProperty(e,\"Default\",{get:function(){return a.assert(Fe&&Re,\"ChildrenNode.ts has not been loaded\"),z=z||new e({\".priority\":Fe},{\".priority\":Re})},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var t=a.safeGet(this.indexes_,e);if(!t)throw new Error(\"No index defined for \"+e);return t instanceof Pe?t:null},e.prototype.hasIndex=function(e){return a.contains(this.indexSet_,e.toString())},e.prototype.addIndex=function(t,n){a.assert(t!==Ie,\"KeyIndex always exists and isn't meant to be added to the IndexMap.\");for(var r,i=[],o=!1,u=n.getIterator(Ce.Wrap),c=u.getNext();c;)o=o||t.isDefinedOn(c.node),i.push(c),c=u.getNext();r=o?je(i,t.getCompare()):Fe;var l=t.toString(),h=s.__assign({},this.indexSet_);h[l]=t;var d=s.__assign({},this.indexes_);return d[l]=r,new e(d,h)},e.prototype.addToIndexes=function(t,n){var r=this;return new e(a.map(this.indexes_,function(e,i){var o=a.safeGet(r.indexSet_,i);if(a.assert(o,\"Missing index implementation for \"+i),e===Fe){if(o.isDefinedOn(t.node)){for(var s=[],u=n.getIterator(Ce.Wrap),c=u.getNext();c;)c.name!=t.name&&s.push(c),c=u.getNext();return s.push(t),je(s,o.getCompare())}return Fe}var l=n.get(t.name),h=e;return l&&(h=h.remove(new Ce(t.name,l))),h.insert(t,t.node)}),this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){return new e(a.map(this.indexes_,function(e){if(e===Fe)return e;var r=n.get(t.name);return r?e.remove(new Ce(t.name,r)):e}),this.indexSet_)},e}();function Ve(e,t){return R(e.name,t.name)}function qe(e,t){return R(e,t)}var Be=function(){function e(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Ne(this.priorityNode_),this.children_.isEmpty()&&a.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),\"An empty node cannot have a priority\")}return Object.defineProperty(e,\"EMPTY_NODE\",{get:function(){return W||(W=new e(new Pe(qe),null,Ue.Default))},enumerable:!0,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||W},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(e){if(\".priority\"===e)return this.getPriority();var t=this.children_.get(e);return null===t?W:t},e.prototype.getChild=function(e){var t=e.getFront();return null===t?this:this.getImmediateChild(t).getChild(e.popFront())},e.prototype.hasChild=function(e){return null!==this.children_.get(e)},e.prototype.updateImmediateChild=function(t,n){if(a.assert(n,\"We should always be passing snapshot nodes\"),\".priority\"===t)return this.updatePriority(n);var r,i=new Ce(t,n),o=void 0,s=void 0;return n.isEmpty()?(o=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,n),s=this.indexMap_.addToIndexes(i,this.children_)),r=o.isEmpty()?W:this.priorityNode_,new e(o,r,s)},e.prototype.updateChild=function(e,t){var n=e.getFront();if(null===n)return t;a.assert(\".priority\"!==e.getFront()||1===e.getLength(),\".priority must be the last token in a path\");var r=this.getImmediateChild(n).updateChild(e.popFront(),t);return this.updateImmediateChild(n,r)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Re,function(s,a){n[s]=a.val(t),r++,o&&e.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!t&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return t&&!this.getPriority().isEmpty()&&(n[\".priority\"]=this.getPriority().val()),n},e.prototype.hash=function(){if(null===this.lazyHash_){var e=\"\";this.getPriority().isEmpty()||(e+=\"priority:\"+Oe(this.getPriority().val())+\":\"),this.forEachChild(Re,function(t,n){var r=n.hash();\"\"!==r&&(e+=\":\"+t+\":\"+r)}),this.lazyHash_=\"\"===e?\"\":y(e)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Ce(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)},e.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()},e.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new Ce(t,this.children_.get(t)):null},e.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()},e.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new Ce(t,this.children_.get(t)):null},e.prototype.forEachChild=function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal(function(e){return t(e.name,e.node)}):this.children_.inorderTraversal(t)},e.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},e.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,function(e){return e});for(var r=this.children_.getIteratorFrom(e.name,Ce.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r},e.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},e.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,function(e){return e});for(var r=this.children_.getReverseIteratorFrom(e.name,Ce.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r},e.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===$e?-1:0},e.prototype.withIndex=function(t){if(t===Ie||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(e){return e===Ie||this.indexMap_.hasIndex(e)},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(Re),r=t.getIterator(Re),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},e.prototype.resolveIndex_=function(e){return e===Ie?null:this.indexMap_.get(e.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\\d*)$/,e}(),$e=new(function(e){function t(){return e.call(this,new Pe(qe),Be.EMPTY_NODE,Ue.Default)||this}return s.__extends(t,e),t.prototype.compareTo=function(e){return e===this?0:1},t.prototype.equals=function(e){return e===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(e){return Be.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(Be));Object.defineProperties(Ce,{MIN:{value:new Ce(N,Be.EMPTY_NODE)},MAX:{value:new Ce(A,$e)}}),Te.__EMPTY_NODE=Be.EMPTY_NODE,Ae.__childrenNodeConstructor=Be,V=$e,$=$e;var ze=!0;function We(e,t){if(void 0===t&&(t=null),null===e)return Be.EMPTY_NODE;if(\"object\"==typeof e&&\".priority\"in e&&(t=e[\".priority\"]),a.assert(null===t||\"string\"==typeof t||\"number\"==typeof t||\"object\"==typeof t&&\".sv\"in t,\"Invalid priority type found: \"+typeof t),\"object\"==typeof e&&\".value\"in e&&null!==e[\".value\"]&&(e=e[\".value\"]),\"object\"!=typeof e||\".sv\"in e)return new Ae(e,We(t));if(e instanceof Array||!ze){var n=Be.EMPTY_NODE;return L(e,function(t,r){if(a.contains(e,t)&&\".\"!==t.substring(0,1)){var i=We(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}}),n.updatePriority(We(t))}var r=[],i=!1;if(L(e,function(e,t){if(\".\"!==e.substring(0,1)){var n=We(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Ce(e,n)))}}),0==r.length)return Be.EMPTY_NODE;var o=je(r,Ve,function(e){return e.name},qe);if(i){var s=je(r,Re.getCompare());return new Be(o,We(t),new Ue({\".priority\":s},{\".priority\":Re}))}return new Be(o,We(t),Ue.Default)}B=We;var He,Qe,Ge,Ke=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.compare=function(e,t){var n=e.node.compareTo(t.node);return 0===n?R(e.name,t.name):n},t.prototype.isDefinedOn=function(e){return!0},t.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},t.prototype.minPost=function(){return Ce.MIN},t.prototype.maxPost=function(){return Ce.MAX},t.prototype.makePost=function(e,t){var n=We(e);return new Ce(t,n)},t.prototype.toString=function(){return\".value\"},t}(Se)),Ye=function(e){function t(t){var n=e.call(this)||this;return n.indexPath_=t,a.assert(!t.isEmpty()&&\".priority\"!==t.getFront(),\"Can't create PathIndex with empty path or .priority key\"),n}return s.__extends(t,e),t.prototype.extractChild=function(e){return e.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?R(e.name,t.name):i},t.prototype.makePost=function(e,t){var n=We(e),r=Be.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ce(t,r)},t.prototype.maxPost=function(){var e=Be.EMPTY_NODE.updateChild(this.indexPath_,$e);return new Ce(A,e)},t.prototype.toString=function(){return this.indexPath_.slice().join(\"/\")},t}(Se),Xe=function(){function e(e,t,n){this.node_=e,this.ref_=t,this.index_=n}return e.prototype.val=function(){return a.validateArgCount(\"DataSnapshot.val\",0,0,arguments.length),this.node_.val()},e.prototype.exportVal=function(){return a.validateArgCount(\"DataSnapshot.exportVal\",0,0,arguments.length),this.node_.val(!0)},e.prototype.toJSON=function(){return a.validateArgCount(\"DataSnapshot.toJSON\",0,1,arguments.length),this.exportVal()},e.prototype.exists=function(){return a.validateArgCount(\"DataSnapshot.exists\",0,0,arguments.length),!this.node_.isEmpty()},e.prototype.child=function(t){a.validateArgCount(\"DataSnapshot.child\",0,1,arguments.length),t=String(t),me(\"DataSnapshot.child\",1,t,!1);var n=new J(t),r=this.ref_.child(n);return new e(this.node_.getChild(n),r,Re)},e.prototype.hasChild=function(e){a.validateArgCount(\"DataSnapshot.hasChild\",1,1,arguments.length),me(\"DataSnapshot.hasChild\",1,e,!1);var t=new J(e);return!this.node_.getChild(t).isEmpty()},e.prototype.getPriority=function(){return a.validateArgCount(\"DataSnapshot.getPriority\",0,0,arguments.length),this.node_.getPriority().val()},e.prototype.forEach=function(t){var n=this;if(a.validateArgCount(\"DataSnapshot.forEach\",1,1,arguments.length),a.validateCallback(\"DataSnapshot.forEach\",1,t,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,function(r,i){return t(new e(i,n.ref_.child(r),Re))})},e.prototype.hasChildren=function(){return a.validateArgCount(\"DataSnapshot.hasChildren\",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(e.prototype,\"key\",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),e.prototype.numChildren=function(){return a.validateArgCount(\"DataSnapshot.numChildren\",0,0,arguments.length),this.node_.numChildren()},e.prototype.getRef=function(){return a.validateArgCount(\"DataSnapshot.ref\",0,0,arguments.length),this.ref_},Object.defineProperty(e.prototype,\"ref\",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),e}(),Je=function(){function e(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}return e.prototype.getPath=function(){var e=this.snapshot.getRef();return\"value\"===this.eventType?e.path:e.getParent().path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+\":\"+this.eventType+\":\"+a.stringify(this.snapshot.exportVal())},e}(),Ze=function(){function e(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return\"cancel\"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+\":cancel\"},e}(),et=function(){function e(e,t,n){this.callback_=e,this.cancelCallback_=t,this.context_=n}return e.prototype.respondsTo=function(e){return\"value\"===e},e.prototype.createEvent=function(e,t){var n=t.getQueryParams().getIndex();return new Je(\"value\",this,new Xe(e.snapshotNode,t.getRef(),n))},e.prototype.getEventRunner=function(e){var t=this.context_;if(\"cancel\"===e.getEventType()){a.assert(this.cancelCallback_,\"Raising a cancel event on a listener with no cancel callback\");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callback_;return function(){r.call(t,e.snapshot)}},e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new Ze(this,e,t):null},e.prototype.matches=function(t){return t instanceof e&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},e.prototype.hasAnyCallback=function(){return null!==this.callback_},e}(),tt=function(){function e(e,t,n){this.callbacks_=e,this.cancelCallback_=t,this.context_=n}return e.prototype.respondsTo=function(e){var t=\"children_added\"===e?\"child_added\":e;return a.contains(this.callbacks_,t=\"children_removed\"===t?\"child_removed\":t)},e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new Ze(this,e,t):null},e.prototype.createEvent=function(e,t){a.assert(null!=e.childName,\"Child events should have a childName.\");var n=t.getRef().child(e.childName),r=t.getQueryParams().getIndex();return new Je(e.type,this,new Xe(e.snapshotNode,n,r),e.prevName)},e.prototype.getEventRunner=function(e){var t=this.context_;if(\"cancel\"===e.getEventType()){a.assert(this.cancelCallback_,\"Raising a cancel event on a listener with no cancel callback\");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callbacks_[e.eventType];return function(){r.call(t,e.snapshot,e.prevName)}},e.prototype.matches=function(t){var n=this;if(t instanceof e){if(!this.callbacks_||!t.callbacks_)return!0;if(this.context_===t.context_){var r=Object.keys(t.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||t.callbacks_[s]&&this.callbacks_[a]&&t.callbacks_[s]!==this.callbacks_[a])}return i.every(function(e){return t.callbacks_[e]===n.callbacks_[e]})}}}return!1},e.prototype.hasAnyCallback=function(){return null!==this.callbacks_},e}(),nt=function(){function e(e,t,n,r){this.repo=e,this.path=t,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(e,\"__referenceConstructor\",{get:function(){return a.assert(He,\"Reference.ts has not been loaded\"),He},set:function(e){He=e},enumerable:!0,configurable:!0}),e.validateQueryEndpoints_=function(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Ie){var r=\"Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().\",i=\"Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.\";if(e.hasStart()){if(e.getIndexStartName()!=N)throw new Error(r);if(\"string\"!=typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!=A)throw new Error(r);if(\"string\"!=typeof n)throw new Error(i)}}else if(e.getIndex()===Re){if(null!=t&&!ue(t)||null!=n&&!ue(n))throw new Error(\"Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).\")}else if(a.assert(e.getIndex()instanceof Ye||e.getIndex()===Ke,\"unknown index type.\"),null!=t&&\"object\"==typeof t||null!=n&&\"object\"==typeof n)throw new Error(\"Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.\")},e.validateLimit_=function(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error(\"Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.\")},e.prototype.validateNoPreviousOrderByCall_=function(e){if(!0===this.orderByCalled_)throw new Error(e+\": You can't combine multiple orderBy calls.\")},e.prototype.getQueryParams=function(){return this.queryParams_},e.prototype.getRef=function(){return a.validateArgCount(\"Query.ref\",0,0,arguments.length),new e.__referenceConstructor(this.repo,this.path)},e.prototype.on=function(t,n,r,i){a.validateArgCount(\"Query.on\",2,4,arguments.length),fe(\"Query.on\",1,t,!1),a.validateCallback(\"Query.on\",2,n,!1);var o=e.getCancelAndContextArgs_(\"Query.on\",r,i);if(\"value\"===t)this.onValueEvent(n,o.cancel,o.context);else{var s={};s[t]=n,this.onChildEvent(s,o.cancel,o.context)}return n},e.prototype.onValueEvent=function(e,t,n){var r=new et(e,t||null,n||null);this.repo.addEventCallbackForQuery(this,r)},e.prototype.onChildEvent=function(e,t,n){var r=new tt(e,t,n);this.repo.addEventCallbackForQuery(this,r)},e.prototype.off=function(e,t,n){a.validateArgCount(\"Query.off\",0,3,arguments.length),fe(\"Query.off\",1,e,!0),a.validateCallback(\"Query.off\",2,t,!0),a.validateContextObject(\"Query.off\",3,n,!0);var r=null,i=null;if(\"value\"===e){var o=t||null;r=new et(o,null,n||null)}else e&&(t&&((i={})[e]=t),r=new tt(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},e.prototype.once=function(t,n,r,i){var o=this;a.validateArgCount(\"Query.once\",1,4,arguments.length),fe(\"Query.once\",1,t,!1),a.validateCallback(\"Query.once\",2,n,!0);var s=e.getCancelAndContextArgs_(\"Query.once\",r,i),u=!0,c=new a.Deferred;c.promise.catch(function(){});var l=function(e){u&&(u=!1,o.off(t,l),n&&n.bind(s.context)(e),c.resolve(e))};return this.on(t,l,function(e){o.off(t,l),s.cancel&&s.cancel.bind(s.context)(e),c.reject(e)}),c.promise},e.prototype.limitToFirst=function(t){if(a.validateArgCount(\"Query.limitToFirst\",1,1,arguments.length),\"number\"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error(\"Query.limitToFirst: First argument must be a positive integer.\");if(this.queryParams_.hasLimit())throw new Error(\"Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).\");return new e(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},e.prototype.limitToLast=function(t){if(a.validateArgCount(\"Query.limitToLast\",1,1,arguments.length),\"number\"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error(\"Query.limitToLast: First argument must be a positive integer.\");if(this.queryParams_.hasLimit())throw new Error(\"Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).\");return new e(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},e.prototype.orderByChild=function(t){if(a.validateArgCount(\"Query.orderByChild\",1,1,arguments.length),\"$key\"===t)throw new Error('Query.orderByChild: \"$key\" is invalid.  Use Query.orderByKey() instead.');if(\"$priority\"===t)throw new Error('Query.orderByChild: \"$priority\" is invalid.  Use Query.orderByPriority() instead.');if(\"$value\"===t)throw new Error('Query.orderByChild: \"$value\" is invalid.  Use Query.orderByValue() instead.');me(\"Query.orderByChild\",1,t,!1),this.validateNoPreviousOrderByCall_(\"Query.orderByChild\");var n=new J(t);if(n.isEmpty())throw new Error(\"Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.\");var r=new Ye(n),i=this.queryParams_.orderBy(r);return e.validateQueryEndpoints_(i),new e(this.repo,this.path,i,!0)},e.prototype.orderByKey=function(){a.validateArgCount(\"Query.orderByKey\",0,0,arguments.length),this.validateNoPreviousOrderByCall_(\"Query.orderByKey\");var t=this.queryParams_.orderBy(Ie);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByPriority=function(){a.validateArgCount(\"Query.orderByPriority\",0,0,arguments.length),this.validateNoPreviousOrderByCall_(\"Query.orderByPriority\");var t=this.queryParams_.orderBy(Re);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByValue=function(){a.validateArgCount(\"Query.orderByValue\",0,0,arguments.length),this.validateNoPreviousOrderByCall_(\"Query.orderByValue\");var t=this.queryParams_.orderBy(Ke);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.startAt=function(t,n){void 0===t&&(t=null),a.validateArgCount(\"Query.startAt\",0,2,arguments.length),ce(\"Query.startAt\",1,t,this.path,!0),pe(\"Query.startAt\",2,n,!0);var r=this.queryParams_.startAt(t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error(\"Query.startAt: Starting point was already set (by another call to startAt or equalTo).\");return void 0===t&&(t=null,n=null),new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.endAt=function(t,n){void 0===t&&(t=null),a.validateArgCount(\"Query.endAt\",0,2,arguments.length),ce(\"Query.endAt\",1,t,this.path,!0),pe(\"Query.endAt\",2,n,!0);var r=this.queryParams_.endAt(t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error(\"Query.endAt: Ending point was already set (by another call to endAt or equalTo).\");return new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.equalTo=function(e,t){if(a.validateArgCount(\"Query.equalTo\",1,2,arguments.length),ce(\"Query.equalTo\",1,e,this.path,!1),pe(\"Query.equalTo\",2,t,!0),this.queryParams_.hasStart())throw new Error(\"Query.equalTo: Starting point was already set (by another call to startAt or equalTo).\");if(this.queryParams_.hasEnd())throw new Error(\"Query.equalTo: Ending point was already set (by another call to endAt or equalTo).\");return this.startAt(e,t).endAt(e,t)},e.prototype.toString=function(){return a.validateArgCount(\"Query.toString\",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},e.prototype.toJSON=function(){return a.validateArgCount(\"Query.toJSON\",0,1,arguments.length),this.toString()},e.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},e.prototype.queryIdentifier=function(){var e=this.queryObject(),t=x(e);return\"{}\"===t?\"default\":t},e.prototype.isEqual=function(t){if(a.validateArgCount(\"Query.isEqual\",1,1,arguments.length),!(t instanceof e)){var n=\"Query.isEqual failed: First argument must be an instance of firebase.database.Query.\";throw new Error(n)}var r=this.repo===t.repo,i=this.path.equals(t.path),o=this.queryIdentifier()===t.queryIdentifier();return r&&i&&o},e.getCancelAndContextArgs_=function(e,t,n){var r={cancel:null,context:null};if(t&&n)r.cancel=t,a.validateCallback(e,3,r.cancel,!0),r.context=n,a.validateContextObject(e,4,r.context,!0);else if(t)if(\"object\"==typeof t&&null!==t)r.context=t;else{if(\"function\"!=typeof t)throw new Error(a.errorPrefix(e,3,!0)+\" must either be a cancel callback or a context object.\");r.cancel=t}return r},Object.defineProperty(e.prototype,\"ref\",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),e}(),rt=function(){function e(){this.value=null,this.children=new Map}return e.prototype.find=function(e){if(null!=this.value)return this.value.getChild(e);if(!e.isEmpty()&&this.children.size>0){var t=e.getFront();return e=e.popFront(),this.children.has(t)?this.children.get(t).find(e):null}return null},e.prototype.remember=function(t,n){if(t.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(t,n);else{var r=t.getFront();this.children.has(r)||this.children.set(r,new e);var i=this.children.get(r);t=t.popFront(),i.remember(t,n)}},e.prototype.forget=function(e){if(e.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var t=this.value;this.value=null;var n=this;return t.forEachChild(Re,function(e,t){n.remember(new J(e),t)}),this.forget(e)}if(this.children.size>0){var r=e.getFront();return e=e.popFront(),this.children.has(r)&&this.children.get(r).forget(e)&&this.children.delete(r),0===this.children.size}return!0},e.prototype.forEachTree=function(e,t){null!==this.value?t(e,this.value):this.forEachChild(function(n,r){var i=new J(e.toString()+\"/\"+n);r.forEachTree(i,t)})},e.prototype.forEachChild=function(e){this.children.forEach(function(t,n){e(n,t)})},e}(),it=function(e,t){return e&&\"object\"==typeof e?(a.assert(\".sv\"in e,\"Unexpected leaf node or priority contents\"),t[e[\".sv\"]]):e},ot=function(e,t){var n,r=e.getPriority().val(),i=it(r,t);if(e.isLeafNode()){var o=e,s=it(o.getValue(),t);return s!==o.getValue()||i!==o.getPriority().val()?new Ae(s,We(i)):e}var a=e;return n=a,i!==a.getPriority().val()&&(n=n.updatePriority(new Ae(i))),a.forEachChild(Re,function(e,r){var i=ot(r,t);i!==r&&(n=n.updateImmediateChild(e,i))}),n},st=function(e){return e[e.OVERWRITE=0]=\"OVERWRITE\",e[e.MERGE=1]=\"MERGE\",e[e.ACK_USER_WRITE=2]=\"ACK_USER_WRITE\",e[e.LISTEN_COMPLETE=3]=\"LISTEN_COMPLETE\",e}({}),at=function(){function e(e,t,n,r){this.fromUser=e,this.fromServer=t,this.queryId=n,this.tagged=r,a.assert(!r||t,\"Tagged queries must be from server.\")}return e.User=new e(!0,!1,null,!1),e.Server=new e(!1,!0,null,!1),e.forServerTaggedQuery=function(t){return new e(!1,!0,t,!0)},e}(),ut=function(){function e(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=st.ACK_USER_WRITE,this.source=at.User}return e.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return a.assert(this.affectedTree.children.isEmpty(),\"affectedTree should not have overlapping affected paths.\"),this;var n=this.affectedTree.subtree(new J(t));return new e(J.Empty,n,this.revert)}return a.assert(this.path.getFront()===t,\"operationForChild called for unrelated child.\"),new e(this.path.popFront(),this.affectedTree,this.revert)},e}(),ct=function(){return Qe||(Qe=new Pe(D)),Qe},lt=function(){function e(e,t){void 0===t&&(t=ct()),this.value=e,this.children=t}return e.fromObject=function(t){var n=e.Empty;return L(t,function(e,t){n=n.set(new J(e),t)}),n},e.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:J.Empty,value:this.value};if(e.isEmpty())return null;var n=e.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(e.popFront(),t);return null!=i?{path:new J(n).child(i.path),value:i.value}:null}return null},e.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,function(){return!0})},e.prototype.subtree=function(t){if(t.isEmpty())return this;var n=t.getFront(),r=this.children.get(n);return null!==r?r.subtree(t.popFront()):e.Empty},e.prototype.set=function(t,n){if(t.isEmpty())return new e(n,this.children);var r=t.getFront(),i=(this.children.get(r)||e.Empty).set(t.popFront(),n),o=this.children.insert(r,i);return new e(this.value,o)},e.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?e.Empty:new e(null,this.children);var n=t.getFront(),r=this.children.get(n);if(r){var i=r.remove(t.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?e.Empty:new e(this.value,o)}return this},e.prototype.get=function(e){if(e.isEmpty())return this.value;var t=e.getFront(),n=this.children.get(t);return n?n.get(e.popFront()):null},e.prototype.setTree=function(t,n){if(t.isEmpty())return n;var r,i=t.getFront(),o=(this.children.get(i)||e.Empty).setTree(t.popFront(),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new e(this.value,r)},e.prototype.fold=function(e){return this.fold_(J.Empty,e)},e.prototype.fold_=function(e,t){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(e.child(r),t)}),t(e,this.value,n)},e.prototype.findOnPath=function(e,t){return this.findOnPath_(e,J.Empty,t)},e.prototype.findOnPath_=function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(e.isEmpty())return null;var i=e.getFront(),o=this.children.get(i);return o?o.findOnPath_(e.popFront(),t.child(i),n):null},e.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,J.Empty,t)},e.prototype.foreachOnPath_=function(t,n,r){if(t.isEmpty())return this;this.value&&r(n,this.value);var i=t.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(t.popFront(),n.child(i),r):e.Empty},e.prototype.foreach=function(e){this.foreach_(J.Empty,e)},e.prototype.foreach_=function(e,t){this.children.inorderTraversal(function(n,r){r.foreach_(e.child(n),t)}),this.value&&t(e,this.value)},e.prototype.foreachChild=function(e){this.children.inorderTraversal(function(t,n){n.value&&e(t,n.value)})},e.Empty=new e(null),e}(),ht=function(){function e(e,t){this.source=e,this.path=t,this.type=st.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,J.Empty):new e(this.source,this.path.popFront())},e}(),dt=function(){function e(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=st.OVERWRITE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,J.Empty,this.snap.getImmediateChild(t)):new e(this.source,this.path.popFront(),this.snap)},e}(),ft=function(){function e(e,t,n){this.source=e,this.path=t,this.children=n,this.type=st.MERGE}return e.prototype.operationForChild=function(t){if(this.path.isEmpty()){var n=this.children.subtree(new J(t));return n.isEmpty()?null:n.value?new dt(this.source,J.Empty,n.value):new e(this.source,J.Empty,n)}return a.assert(this.path.getFront()===t,\"Can't get a merge for a child not on the path of the operation\"),new e(this.source,this.path.popFront(),this.children)},e.prototype.toString=function(){return\"Operation(\"+this.path+\": \"+this.source.toString()+\" merge: \"+this.children.toString()+\")\"},e}(),pt=function(){function e(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(e){if(e.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var t=e.getFront();return this.isCompleteForChild(t)},e.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},e.prototype.getNode=function(){return this.node_},e}(),mt=function(){function e(e,t){this.eventCache_=e,this.serverCache_=t}return e.prototype.updateEventSnap=function(t,n,r){return new e(new pt(t,n,r),this.serverCache_)},e.prototype.updateServerSnap=function(t,n,r){return new e(this.eventCache_,new pt(t,n,r))},e.prototype.getEventCache=function(){return this.eventCache_},e.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},e.prototype.getServerCache=function(){return this.serverCache_},e.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},e.Empty=new e(new pt(Be.EMPTY_NODE,!1,!1),new pt(Be.EMPTY_NODE,!1,!1)),e}(),gt=function(){function e(e,t,n,r,i){this.type=e,this.snapshotNode=t,this.childName=n,this.oldSnap=r,this.prevName=i}return e.valueChange=function(t){return new e(e.VALUE,t)},e.childAddedChange=function(t,n){return new e(e.CHILD_ADDED,n,t)},e.childRemovedChange=function(t,n){return new e(e.CHILD_REMOVED,n,t)},e.childChangedChange=function(t,n,r){return new e(e.CHILD_CHANGED,n,t,r)},e.childMovedChange=function(t,n){return new e(e.CHILD_MOVED,n,t)},e.CHILD_ADDED=\"child_added\",e.CHILD_REMOVED=\"child_removed\",e.CHILD_CHANGED=\"child_changed\",e.CHILD_MOVED=\"child_moved\",e.VALUE=\"value\",e}(),yt=function(){function e(e){this.index_=e}return e.prototype.updateChild=function(e,t,n,r,i,o){a.assert(e.isIndexed(this.index_),\"A node must be indexed if only a child is updated\");var s=e.getImmediateChild(t);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()==n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(gt.childRemovedChange(t,s)):a.assert(e.isLeafNode(),\"A child remove without an old child only makes sense on a leaf node\"):s.isEmpty()?o.trackChildChange(gt.childAddedChange(t,n)):o.trackChildChange(gt.childChangedChange(t,n,s))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))},e.prototype.updateFullNode=function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Re,function(e,r){t.hasChild(e)||n.trackChildChange(gt.childRemovedChange(e,r))}),t.isLeafNode()||t.forEachChild(Re,function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(gt.childChangedChange(t,r,i))}else n.trackChildChange(gt.childAddedChange(t,r))})),t.withIndex(this.index_)},e.prototype.updatePriority=function(e,t){return e.isEmpty()?Be.EMPTY_NODE:e.updatePriority(t)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}(),vt=function(){function e(){this.changeMap=new Map}return e.prototype.trackChildChange=function(e){var t=e.type,n=e.childName;a.assert(t==gt.CHILD_ADDED||t==gt.CHILD_CHANGED||t==gt.CHILD_REMOVED,\"Only child changes supported for tracking\"),a.assert(\".priority\"!==n,\"Only non-priority child changes can be tracked.\");var r=this.changeMap.get(n);if(r){var i=r.type;if(t==gt.CHILD_ADDED&&i==gt.CHILD_REMOVED)this.changeMap.set(n,gt.childChangedChange(n,e.snapshotNode,r.snapshotNode));else if(t==gt.CHILD_REMOVED&&i==gt.CHILD_ADDED)this.changeMap.delete(n);else if(t==gt.CHILD_REMOVED&&i==gt.CHILD_CHANGED)this.changeMap.set(n,gt.childRemovedChange(n,r.oldSnap));else if(t==gt.CHILD_CHANGED&&i==gt.CHILD_ADDED)this.changeMap.set(n,gt.childAddedChange(n,e.snapshotNode));else{if(t!=gt.CHILD_CHANGED||i!=gt.CHILD_CHANGED)throw a.assertionError(\"Illegal combination of changes: \"+e+\" occurred after \"+r);this.changeMap.set(n,gt.childChangedChange(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)},e.prototype.getChanges=function(){return Array.from(this.changeMap.values())},e}(),bt=new(function(){function e(){}return e.prototype.getCompleteChild=function(e){return null},e.prototype.getChildAfterChild=function(e,t,n){return null},e}()),_t=function(){function e(e,t,n){void 0===n&&(n=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}return e.prototype.getCompleteChild=function(e){var t=this.viewCache_.getEventCache();if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new pt(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(e,n)},e.prototype.getChildAfterChild=function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,t,1,n,e);return 0===i.length?null:i[0]},e}(),wt=function(){return function(e,t){this.viewCache=e,this.changes=t}}(),Et=function(){function e(e){this.filter_=e}return e.prototype.assertIndexed=function(e){a.assert(e.getEventCache().getNode().isIndexed(this.filter_.getIndex()),\"Event snap not indexed\"),a.assert(e.getServerCache().getNode().isIndexed(this.filter_.getIndex()),\"Server snap not indexed\")},e.prototype.applyOperation=function(t,n,r,i){var o,s,u=new vt;if(n.type===st.OVERWRITE){var c=n;c.source.fromUser?o=this.applyUserOverwrite_(t,c.path,c.snap,r,i,u):(a.assert(c.source.fromServer,\"Unknown source.\"),s=c.source.tagged||t.getServerCache().isFiltered()&&!c.path.isEmpty(),o=this.applyServerOverwrite_(t,c.path,c.snap,r,i,s,u))}else if(n.type===st.MERGE){var l=n;l.source.fromUser?o=this.applyUserMerge_(t,l.path,l.children,r,i,u):(a.assert(l.source.fromServer,\"Unknown source.\"),s=l.source.tagged||t.getServerCache().isFiltered(),o=this.applyServerMerge_(t,l.path,l.children,r,i,s,u))}else if(n.type===st.ACK_USER_WRITE){var h=n;o=h.revert?this.revertUserWrite_(t,h.path,r,i,u):this.ackUserWrite_(t,h.path,h.affectedTree,r,i,u)}else{if(n.type!==st.LISTEN_COMPLETE)throw a.assertionError(\"Unknown operation type: \"+n.type);o=this.listenComplete_(t,n.path,r,u)}var d=u.getChanges();return e.maybeAddValueEvent_(t,o,d),new wt(o,d)},e.maybeAddValueEvent_=function(e,t,n){var r=t.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=e.getCompleteEventSnap();(n.length>0||!e.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(gt.valueChange(t.getCompleteEventSnap()))}},e.prototype.generateEventCacheAfterServerEvent_=function(e,t,n,r,i){var o=e.getEventCache();if(null!=n.shadowingWrite(t))return e;var s=void 0,u=void 0;if(t.isEmpty())if(a.assert(e.getServerCache().isFullyInitialized(),\"If change path is empty, we must have complete server data\"),e.getServerCache().isFiltered()){var c=e.getCompleteServerSnap(),l=n.calcCompleteEventChildren(c instanceof Be?c:Be.EMPTY_NODE);s=this.filter_.updateFullNode(e.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(e.getCompleteServerSnap());s=this.filter_.updateFullNode(e.getEventCache().getNode(),h,i)}else{var d=t.getFront();if(\".priority\"==d){a.assert(1==t.getLength(),\"Can't have a priority with additional path components\");var f=o.getNode();u=e.getServerCache().getNode();var p=n.calcEventCacheAfterServerOverwrite(t,f,u);s=null!=p?this.filter_.updatePriority(f,p):o.getNode()}else{var m=t.popFront(),g=void 0;if(o.isCompleteForChild(d)){u=e.getServerCache().getNode();var y=n.calcEventCacheAfterServerOverwrite(t,o.getNode(),u);g=null!=y?o.getNode().getImmediateChild(d).updateChild(m,y):o.getNode().getImmediateChild(d)}else g=n.calcCompleteChild(d,e.getServerCache());s=null!=g?this.filter_.updateChild(o.getNode(),d,g,m,r,i):o.getNode()}}return e.updateEventSnap(s,o.isFullyInitialized()||t.isEmpty(),this.filter_.filtersNodes())},e.prototype.applyServerOverwrite_=function(e,t,n,r,i,o,s){var a,u=e.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(t.isEmpty())a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(t,n);a=c.updateFullNode(u.getNode(),l,null)}else{var h=t.getFront();if(!u.isCompleteForPath(t)&&t.getLength()>1)return e;var d=t.popFront(),f=u.getNode().getImmediateChild(h).updateChild(d,n);a=\".priority\"==h?c.updatePriority(u.getNode(),f):c.updateChild(u.getNode(),h,f,d,bt,null)}var p=e.updateServerSnap(a,u.isFullyInitialized()||t.isEmpty(),c.filtersNodes()),m=new _t(r,p,i);return this.generateEventCacheAfterServerEvent_(p,t,r,m,s)},e.prototype.applyUserOverwrite_=function(e,t,n,r,i,o){var s,a,u=e.getEventCache(),c=new _t(r,e,i);if(t.isEmpty())a=this.filter_.updateFullNode(e.getEventCache().getNode(),n,o),s=e.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var l=t.getFront();if(\".priority\"===l)a=this.filter_.updatePriority(e.getEventCache().getNode(),n),s=e.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var h=t.popFront(),d=u.getNode().getImmediateChild(l),f=void 0;if(h.isEmpty())f=n;else{var p=c.getCompleteChild(l);f=null!=p?\".priority\"===h.getBack()&&p.getChild(h.parent()).isEmpty()?p:p.updateChild(h,n):Be.EMPTY_NODE}if(d.equals(f))s=e;else{var m=this.filter_.updateChild(u.getNode(),l,f,h,c,o);s=e.updateEventSnap(m,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},e.cacheHasChild_=function(e,t){return e.getEventCache().isCompleteForChild(t)},e.prototype.applyUserMerge_=function(t,n,r,i,o,s){var a=this,u=t;return r.foreach(function(r,c){var l=n.child(r);e.cacheHasChild_(t,l.getFront())&&(u=a.applyUserOverwrite_(u,l,c,i,o,s))}),r.foreach(function(r,c){var l=n.child(r);e.cacheHasChild_(t,l.getFront())||(u=a.applyUserOverwrite_(u,l,c,i,o,s))}),u},e.prototype.applyMerge_=function(e,t){return t.foreach(function(t,n){e=e.updateChild(t,n)}),e},e.prototype.applyServerMerge_=function(e,t,n,r,i,o,s){var a=this;if(e.getServerCache().getNode().isEmpty()&&!e.getServerCache().isFullyInitialized())return e;var u,c=e;u=t.isEmpty()?n:lt.Empty.setTree(t,n);var l=e.getServerCache().getNode();return u.children.inorderTraversal(function(t,n){if(l.hasChild(t)){var u=e.getServerCache().getNode().getImmediateChild(t),h=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new J(t),h,r,i,o,s)}}),u.children.inorderTraversal(function(t,n){var u=!e.getServerCache().isCompleteForChild(t)&&null==n.value;if(!l.hasChild(t)&&!u){var h=e.getServerCache().getNode().getImmediateChild(t),d=a.applyMerge_(h,n);c=a.applyServerOverwrite_(c,new J(t),d,r,i,o,s)}}),c},e.prototype.ackUserWrite_=function(e,t,n,r,i,o){if(null!=r.shadowingWrite(t))return e;var s=e.getServerCache().isFiltered(),a=e.getServerCache();if(null!=n.value){if(t.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(t))return this.applyServerOverwrite_(e,t,a.getNode().getChild(t),r,i,s,o);if(t.isEmpty()){var u=lt.Empty;return a.getNode().forEachChild(Ie,function(e,t){u=u.set(new J(e),t)}),this.applyServerMerge_(e,t,u,r,i,s,o)}return e}var c=lt.Empty;return n.foreach(function(e,n){var r=t.child(e);a.isCompleteForPath(r)&&(c=c.set(e,a.getNode().getChild(r)))}),this.applyServerMerge_(e,t,c,r,i,s,o)},e.prototype.listenComplete_=function(e,t,n,r){var i=e.getServerCache(),o=e.updateServerSnap(i.getNode(),i.isFullyInitialized()||t.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,t,n,bt,r)},e.prototype.revertUserWrite_=function(e,t,n,r,i){var o;if(null!=n.shadowingWrite(t))return e;var s=new _t(n,e,r),u=e.getEventCache().getNode(),c=void 0;if(t.isEmpty()||\".priority\"===t.getFront()){var l=void 0;if(e.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(e.getCompleteServerSnap());else{var h=e.getServerCache().getNode();a.assert(h instanceof Be,\"serverChildren would be complete if leaf node\"),l=n.calcCompleteEventChildren(h)}c=this.filter_.updateFullNode(u,l=l,i)}else{var d=t.getFront(),f=n.calcCompleteChild(d,e.getServerCache());null==f&&e.getServerCache().isCompleteForChild(d)&&(f=u.getImmediateChild(d)),(c=null!=f?this.filter_.updateChild(u,d,f,t.popFront(),s,i):e.getEventCache().getNode().hasChild(d)?this.filter_.updateChild(u,d,Be.EMPTY_NODE,t.popFront(),s,i):u).isEmpty()&&e.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(e.getCompleteServerSnap())).isLeafNode()&&(c=this.filter_.updateFullNode(c,o,i))}return o=e.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(J.Empty),e.updateEventSnap(c,o,this.filter_.filtersNodes())},e}(),Ct=function(){function e(e){this.query_=e,this.index_=this.query_.getQueryParams().getIndex()}return e.prototype.generateEventsForChanges=function(e,t,n){var r=this,i=[],o=[];return e.forEach(function(e){e.type===gt.CHILD_CHANGED&&r.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push(gt.childMovedChange(e.childName,e.snapshotNode))}),this.generateEventsForType_(i,gt.CHILD_REMOVED,e,n,t),this.generateEventsForType_(i,gt.CHILD_ADDED,e,n,t),this.generateEventsForType_(i,gt.CHILD_MOVED,o,n,t),this.generateEventsForType_(i,gt.CHILD_CHANGED,e,n,t),this.generateEventsForType_(i,gt.VALUE,e,n,t),i},e.prototype.generateEventsForType_=function(e,t,n,r,i){var o=this,s=n.filter(function(e){return e.type===t});s.sort(this.compareChanges_.bind(this)),s.forEach(function(t){var n=o.materializeSingleChange_(t,i);r.forEach(function(r){r.respondsTo(t.type)&&e.push(r.createEvent(n,o.query_))})})},e.prototype.materializeSingleChange_=function(e,t){return\"value\"===e.type||\"child_removed\"===e.type?e:(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,this.index_),e)},e.prototype.compareChanges_=function(e,t){if(null==e.childName||null==t.childName)throw a.assertionError(\"Should only compare child_ events.\");var n=new Ce(e.childName,e.snapshotNode),r=new Ce(t.childName,t.snapshotNode);return this.index_.compare(n,r)},e}(),St=function(){function e(e,t){this.query_=e,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new yt(n.getIndex()),i=n.getNodeFilter();this.processor_=new Et(i);var o=t.getServerCache(),s=t.getEventCache(),a=r.updateFullNode(Be.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Be.EMPTY_NODE,s.getNode(),null),c=new pt(a,o.isFullyInitialized(),r.filtersNodes()),l=new pt(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new mt(l,c),this.eventGenerator_=new Ct(this.query_)}return e.prototype.getQuery=function(){return this.query_},e.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},e.prototype.getCompleteServerCache=function(e){var t=this.viewCache_.getCompleteServerSnap();return t&&(this.query_.getQueryParams().loadsAllData()||!e.isEmpty()&&!t.getImmediateChild(e.getFront()).isEmpty())?t.getChild(e):null},e.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},e.prototype.addEventRegistration=function(e){this.eventRegistrations_.push(e)},e.prototype.removeEventRegistration=function(e,t){var n=[];if(t){a.assert(null==e,\"A cancel should cancel all event registrations.\");var r=this.query_.path;this.eventRegistrations_.forEach(function(e){var i=e.createCancelEvent(t=t,r);i&&n.push(i)})}if(e){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(e)){if(e.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(s)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},e.prototype.applyOperation=function(e,t,n){e.type===st.MERGE&&null!==e.source.queryId&&(a.assert(this.viewCache_.getCompleteServerSnap(),\"We should always have a full cache before handling merges\"),a.assert(this.viewCache_.getCompleteEventSnap(),\"Missing event cache, even though we have a server cache\"));var r=this.viewCache_,i=this.processor_.applyOperation(r,e,t,n);return this.processor_.assertIndexed(i.viewCache),a.assert(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),\"Once a server snap is complete, it should never go back\"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},e.prototype.getInitialEvents=function(e){var t=this.viewCache_.getEventCache(),n=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Re,function(e,t){n.push(gt.childAddedChange(e,t))}),t.isFullyInitialized()&&n.push(gt.valueChange(t.getNode())),this.generateEventsForChanges_(n,t.getNode(),e)},e.prototype.generateEventsForChanges_=function(e,t,n){return this.eventGenerator_.generateEventsForChanges(e,t,n?[n]:this.eventRegistrations_)},e}(),Tt=function(){function e(){this.views=new Map}return Object.defineProperty(e,\"__referenceConstructor\",{get:function(){return a.assert(Ge,\"Reference.ts has not been loaded\"),Ge},set:function(e){a.assert(!Ge,\"__referenceConstructor has already been defined\"),Ge=e},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return 0===this.views.size},e.prototype.applyOperation=function(e,t,n){var r,i,o=e.source.queryId;if(null!==o){var u=this.views.get(o);return a.assert(null!=u,\"SyncTree gave us an op for an invalid query.\"),u.applyOperation(e,t,n)}var c=[];try{for(var l=s.__values(this.views.values()),h=l.next();!h.done;h=l.next())c=c.concat((u=h.value).applyOperation(e,t,n))}catch(d){r={error:d}}finally{try{h&&!h.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return c},e.prototype.addEventRegistration=function(e,t,n,r,i){var o=e.queryIdentifier(),s=this.views.get(o);if(!s){var a=n.calcCompleteEventCache(i?r:null),u=!1;a?u=!0:r instanceof Be?(a=n.calcCompleteEventChildren(r),u=!1):(a=Be.EMPTY_NODE,u=!1);var c=new mt(new pt(a,u,!1),new pt(r,i,!1));s=new St(e,c),this.views.set(o,s)}return s.addEventRegistration(t),s.getInitialEvents(t)},e.prototype.removeEventRegistration=function(t,n,r){var i,o,a=t.queryIdentifier(),u=[],c=[],l=this.hasCompleteView();if(\"default\"===a)try{for(var h=s.__values(this.views.entries()),d=h.next();!d.done;d=h.next()){var f,p=s.__read(d.value,2),m=p[0];c=c.concat((f=p[1]).removeEventRegistration(n,r)),f.isEmpty()&&(this.views.delete(m),f.getQuery().getQueryParams().loadsAllData()||u.push(f.getQuery()))}}catch(g){i={error:g}}finally{try{d&&!d.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}else(f=this.views.get(a))&&(c=c.concat(f.removeEventRegistration(n,r)),f.isEmpty()&&(this.views.delete(a),f.getQuery().getQueryParams().loadsAllData()||u.push(f.getQuery())));return l&&!this.hasCompleteView()&&u.push(new e.__referenceConstructor(t.repo,t.path)),{removed:u,events:c}},e.prototype.getQueryViews=function(){var e,t,n=[];try{for(var r=s.__values(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(a){e={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},e.prototype.getCompleteServerCache=function(e){var t,n,r=null;try{for(var i=s.__values(this.views.values()),o=i.next();!o.done;o=i.next())r=r||o.value.getCompleteServerCache(e)}catch(a){t={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},e.prototype.viewForQuery=function(e){if(e.getQueryParams().loadsAllData())return this.getCompleteView();var t=e.queryIdentifier();return this.views.get(t)},e.prototype.viewExistsForQuery=function(e){return null!=this.viewForQuery(e)},e.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},e.prototype.getCompleteView=function(){var e,t;try{for(var n=s.__values(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(o){e={error:o}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return null},e}(),It=function(){function e(e){this.writeTree_=e}return e.prototype.addWrite=function(t,n){if(t.isEmpty())return new e(new lt(n));var r=this.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,o=r.value,s=J.relativePath(i,t);return o=o.updateChild(s,n),new e(this.writeTree_.set(i,o))}var a=new lt(n);return new e(this.writeTree_.setTree(t,a))},e.prototype.addWrites=function(e,t){var n=this;return L(t,function(t,r){n=n.addWrite(e.child(t),r)}),n},e.prototype.removeWrite=function(t){return t.isEmpty()?e.Empty:new e(this.writeTree_.setTree(t,lt.Empty))},e.prototype.hasCompleteWrite=function(e){return null!=this.getCompleteNode(e)},e.prototype.getCompleteNode=function(e){var t=this.writeTree_.findRootMostValueAndPath(e);return null!=t?this.writeTree_.get(t.path).getChild(J.relativePath(t.path,e)):null},e.prototype.getCompleteChildren=function(){var e=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Re,function(t,n){e.push(new Ce(t,n))}):this.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new Ce(t,n.value))}),e},e.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var n=this.getCompleteNode(t);return new e(null!=n?new lt(n):this.writeTree_.subtree(t))},e.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},e.prototype.apply=function(e){return function e(t,n,r){if(null!=n.value)return r.updateChild(t,n.value);var i=null;return n.children.inorderTraversal(function(n,o){\".priority\"===n?(a.assert(null!==o.value,\"Priority writes must always be leaf nodes\"),i=o.value):r=e(t.child(n),o,r)}),r.getChild(t).isEmpty()||null===i||(r=r.updateChild(t.child(\".priority\"),i)),r}(J.Empty,this.writeTree_,e)},e.Empty=new e(new lt(null)),e}(),Ot=function(){function e(){this.visibleWrites_=It.Empty,this.allWrites_=[],this.lastWriteId_=-1}return e.prototype.childWrites=function(e){return new Nt(e,this)},e.prototype.addOverwrite=function(e,t,n,r){a.assert(n>this.lastWriteId_,\"Stacking an older write on top of newer ones\"),void 0===r&&(r=!0),this.allWrites_.push({path:e,snap:t,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(e,t)),this.lastWriteId_=n},e.prototype.addMerge=function(e,t,n){a.assert(n>this.lastWriteId_,\"Stacking an older merge on top of newer ones\"),this.allWrites_.push({path:e,children:t,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(e,t),this.lastWriteId_=n},e.prototype.getWrite=function(e){for(var t=0;t<this.allWrites_.length;t++){var n=this.allWrites_[t];if(n.writeId===e)return n}return null},e.prototype.removeWrite=function(e){var t=this,n=this.allWrites_.findIndex(function(t){return t.writeId===e});a.assert(n>=0,\"removeWrite called with nonexistent writeId.\");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&s>=0;){var u=this.allWrites_[s];u.visible&&(s>=n&&this.recordContainsPath_(u,r.path)?i=!1:r.path.contains(u.path)&&(o=!0)),s--}return!!i&&(o?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):L(r.children,function(e){t.visibleWrites_=t.visibleWrites_.removeWrite(r.path.child(e))}),!0))},e.prototype.getCompleteWriteData=function(e){return this.visibleWrites_.getCompleteNode(e)},e.prototype.calcCompleteEventCache=function(t,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(t);return!i&&o.isEmpty()?n:i||null!=n||o.hasCompleteWrite(J.Empty)?e.layerTree_(this.allWrites_,function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(e.path.contains(t)||t.contains(e.path))},t).apply(n||Be.EMPTY_NODE):null}var s=this.visibleWrites_.getCompleteNode(t);if(null!=s)return s;var a=this.visibleWrites_.childCompoundWrite(t);return a.isEmpty()?n:null!=n||a.hasCompleteWrite(J.Empty)?a.apply(n||Be.EMPTY_NODE):null},e.prototype.calcCompleteEventChildren=function(e,t){var n=Be.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(e);if(r)return r.isLeafNode()||r.forEachChild(Re,function(e,t){n=n.updateImmediateChild(e,t)}),n;if(t){var i=this.visibleWrites_.childCompoundWrite(e);return t.forEachChild(Re,function(e,t){var r=i.childCompoundWrite(new J(e)).apply(t);n=n.updateImmediateChild(e,r)}),i.getCompleteChildren().forEach(function(e){n=n.updateImmediateChild(e.name,e.node)}),n}return this.visibleWrites_.childCompoundWrite(e).getCompleteChildren().forEach(function(e){n=n.updateImmediateChild(e.name,e.node)}),n},e.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n,r){a.assert(n||r,\"Either existingEventSnap or existingServerSnap must exist\");var i=e.child(t);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(t):o.apply(r.getChild(t))},e.prototype.calcCompleteChild=function(e,t,n){var r=e.child(t),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(t)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(t)):null},e.prototype.shadowingWrite=function(e){return this.visibleWrites_.getCompleteNode(e)},e.prototype.calcIndexedSlice=function(e,t,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(e),u=a.getCompleteNode(J.Empty);if(null!=u)s=u;else{if(null==t)return[];s=a.apply(t)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),d=h.getNext();d&&c.length<r;)0!==l(d,n)&&c.push(d),d=h.getNext();return c},e.prototype.recordContainsPath_=function(e,t){if(e.snap)return e.path.contains(t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&e.path.child(n).contains(t))return!0;return!1},e.prototype.resetTree_=function(){this.visibleWrites_=e.layerTree_(this.allWrites_,e.DefaultFilter_,J.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},e.DefaultFilter_=function(e){return e.visible},e.layerTree_=function(e,t,n){for(var r=It.Empty,i=0;i<e.length;++i){var o=e[i];if(t(o)){var s=o.path,u=void 0;if(o.snap)n.contains(s)?(u=J.relativePath(n,s),r=r.addWrite(u,o.snap)):s.contains(n)&&(u=J.relativePath(s,n),r=r.addWrite(J.Empty,o.snap.getChild(u)));else{if(!o.children)throw a.assertionError(\"WriteRecord should have .snap or .children\");if(n.contains(s))u=J.relativePath(n,s),r=r.addWrites(u,o.children);else if(s.contains(n))if((u=J.relativePath(s,n)).isEmpty())r=r.addWrites(J.Empty,o.children);else{var c=a.safeGet(o.children,u.getFront());if(c){var l=c.getChild(u.popFront());r=r.addWrite(J.Empty,l)}}}}}return r},e}(),Nt=function(){function e(e,t){this.treePath_=e,this.writeTree_=t}return e.prototype.calcCompleteEventCache=function(e,t,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,e,t,n)},e.prototype.calcCompleteEventChildren=function(e){return this.writeTree_.calcCompleteEventChildren(this.treePath_,e)},e.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,e,t,n)},e.prototype.shadowingWrite=function(e){return this.writeTree_.shadowingWrite(this.treePath_.child(e))},e.prototype.calcIndexedSlice=function(e,t,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,e,t,n,r,i)},e.prototype.calcCompleteChild=function(e,t){return this.writeTree_.calcCompleteChild(this.treePath_,e,t)},e.prototype.child=function(t){return new e(this.treePath_.child(t),this.writeTree_)},e}(),At=function(){function e(e){this.listenProvider_=e,this.syncPointTree_=lt.Empty,this.pendingWriteTree_=new Ot,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return e.prototype.applyUserOverwrite=function(e,t,n,r){return this.pendingWriteTree_.addOverwrite(e,t,n,r),r?this.applyOperationToSyncPoints_(new dt(at.User,e,t)):[]},e.prototype.applyUserMerge=function(e,t,n){this.pendingWriteTree_.addMerge(e,t,n);var r=lt.fromObject(t);return this.applyOperationToSyncPoints_(new ft(at.User,e,r))},e.prototype.ackUserWrite=function(e,t){void 0===t&&(t=!1);var n=this.pendingWriteTree_.getWrite(e);if(this.pendingWriteTree_.removeWrite(e)){var r=lt.Empty;return null!=n.snap?r=r.set(J.Empty,!0):L(n.children,function(e,t){r=r.set(new J(e),t)}),this.applyOperationToSyncPoints_(new ut(n.path,r,t))}return[]},e.prototype.applyServerOverwrite=function(e,t){return this.applyOperationToSyncPoints_(new dt(at.Server,e,t))},e.prototype.applyServerMerge=function(e,t){var n=lt.fromObject(t);return this.applyOperationToSyncPoints_(new ft(at.Server,e,n))},e.prototype.applyListenComplete=function(e){return this.applyOperationToSyncPoints_(new ht(at.Server,e))},e.prototype.applyTaggedQueryOverwrite=function(t,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=e.parseQueryKey_(i),s=o.path,a=o.queryId,u=J.relativePath(s,t),c=new dt(at.forServerTaggedQuery(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},e.prototype.applyTaggedQueryMerge=function(t,n,r){var i=this.queryKeyForTag_(r);if(i){var o=e.parseQueryKey_(i),s=o.path,a=o.queryId,u=J.relativePath(s,t),c=lt.fromObject(n),l=new ft(at.forServerTaggedQuery(a),u,c);return this.applyTaggedOperation_(s,l)}return[]},e.prototype.applyTaggedListenComplete=function(t,n){var r=this.queryKeyForTag_(n);if(r){var i=e.parseQueryKey_(r),o=i.path,s=i.queryId,a=J.relativePath(o,t),u=new ht(at.forServerTaggedQuery(s),a);return this.applyTaggedOperation_(o,u)}return[]},e.prototype.addEventRegistration=function(t,n){var r=t.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,function(e,t){var n=J.relativePath(e,r);i=i||t.getCompleteServerCache(n),o=o||t.hasCompleteView()});var s,u=this.syncPointTree_.get(r);u?(o=o||u.hasCompleteView(),i=i||u.getCompleteServerCache(J.Empty)):(u=new Tt,this.syncPointTree_=this.syncPointTree_.set(r,u)),null!=i?s=!0:(s=!1,i=Be.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(e,t){var n=t.getCompleteServerCache(J.Empty);n&&(i=i.updateImmediateChild(e,n))}));var c=u.viewExistsForQuery(t);if(!c&&!t.getQueryParams().loadsAllData()){var l=e.makeQueryKey_(t);a.assert(!this.queryToTagMap.has(l),\"View does not exist, but we have a tag\");var h=e.getNextQueryTag_();this.queryToTagMap.set(l,h),this.tagToQueryMap.set(h,l)}var d=this.pendingWriteTree_.childWrites(r),f=u.addEventRegistration(t,n,d,i,s);if(!c&&!o){var p=u.viewForQuery(t);f=f.concat(this.setupListener_(t,p))}return f},e.prototype.removeEventRegistration=function(t,n,r){var i=this,o=t.path,s=this.syncPointTree_.get(o),a=[];if(s&&(\"default\"===t.queryIdentifier()||s.viewExistsForQuery(t))){var u=s.removeEventRegistration(t,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var l=-1!==c.findIndex(function(e){return e.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(o,function(e,t){return t.hasCompleteView()});if(l&&!h){var d=this.syncPointTree_.subtree(o);if(!d.isEmpty())for(var f=this.collectDistinctViewsForSubTree_(d),p=0;p<f.length;++p){var m=f[p],g=m.getQuery(),y=this.createListenerForView_(m);this.listenProvider_.startListening(e.queryForListening_(g),this.tagForQuery_(g),y.hashFn,y.onComplete)}}!h&&c.length>0&&!r&&(l?this.listenProvider_.stopListening(e.queryForListening_(t),null):c.forEach(function(t){var n=i.queryToTagMap.get(e.makeQueryKey_(t));i.listenProvider_.stopListening(e.queryForListening_(t),n)})),this.removeTags_(c)}return a},e.prototype.calcCompleteEventCache=function(e,t){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(e,function(t,n){var r=J.relativePath(t,e),i=n.getCompleteServerCache(r);if(i)return i});return n.calcCompleteEventCache(e,r,t,!0)},e.prototype.collectDistinctViewsForSubTree_=function(e){return e.fold(function(e,t,n){if(t&&t.hasCompleteView())return[t.getCompleteView()];var r=[];return t&&(r=t.getQueryViews()),L(n,function(e,t){r=r.concat(t)}),r})},e.prototype.removeTags_=function(t){for(var n=0;n<t.length;++n){var r=t[n];if(!r.getQueryParams().loadsAllData()){var i=e.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},e.queryForListening_=function(e){return e.getQueryParams().loadsAllData()&&!e.getQueryParams().isDefault()?e.getRef():e},e.prototype.setupListener_=function(t,n){var r=t.path,i=this.tagForQuery_(t),o=this.createListenerForView_(n),s=this.listenProvider_.startListening(e.queryForListening_(t),i,o.hashFn,o.onComplete),u=this.syncPointTree_.subtree(r);if(i)a.assert(!u.value.hasCompleteView(),\"If we're adding a query, it shouldn't be shadowed\");else for(var c=u.fold(function(e,t,n){if(!e.isEmpty()&&t&&t.hasCompleteView())return[t.getCompleteView().getQuery()];var r=[];return t&&(r=r.concat(t.getQueryViews().map(function(e){return e.getQuery()}))),L(n,function(e,t){r=r.concat(t)}),r}),l=0;l<c.length;++l){var h=c[l];this.listenProvider_.stopListening(e.queryForListening_(h),this.tagForQuery_(h))}return s},e.prototype.createListenerForView_=function(e){var t=this,n=e.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(e.getServerCache()||Be.EMPTY_NODE).hash()},onComplete:function(e){if(\"ok\"===e)return r?t.applyTaggedListenComplete(n.path,r):t.applyListenComplete(n.path);var i=function(e,t){var n=\"Unknown Error\";\"too_big\"===e?n=\"The data requested exceeds the maximum size that can be accessed with a single request.\":\"permission_denied\"==e?n=\"Client doesn't have permission to access the desired data.\":\"unavailable\"==e&&(n=\"The service is unavailable\");var r=new Error(e+\" at \"+t.path.toString()+\": \"+n);return r.code=e.toUpperCase(),r}(e,n);return t.removeEventRegistration(n,null,i)}}},e.makeQueryKey_=function(e){return e.path.toString()+\"$\"+e.queryIdentifier()},e.parseQueryKey_=function(e){var t=e.indexOf(\"$\");return a.assert(-1!==t&&t<e.length-1,\"Bad queryKey.\"),{queryId:e.substr(t+1),path:new J(e.substr(0,t))}},e.prototype.queryKeyForTag_=function(e){return this.tagToQueryMap.get(e)},e.prototype.tagForQuery_=function(t){var n=e.makeQueryKey_(t);return this.queryToTagMap.get(n)},e.getNextQueryTag_=function(){return e.nextQueryTag_++},e.prototype.applyTaggedOperation_=function(e,t){var n=this.syncPointTree_.get(e);a.assert(n,\"Missing sync point for query tag that we're tracking\");var r=this.pendingWriteTree_.childWrites(e);return n.applyOperation(t,r,null)},e.prototype.applyOperationToSyncPoints_=function(e){return this.applyOperationHelper_(e,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(J.Empty))},e.prototype.applyOperationHelper_=function(e,t,n,r){if(e.path.isEmpty())return this.applyOperationDescendantsHelper_(e,t,n,r);var i=t.get(J.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(J.Empty));var o=[],s=e.path.getFront(),a=e.operationForChild(s),u=t.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,l))}return i&&(o=o.concat(i.applyOperation(e,r,n))),o},e.prototype.applyOperationDescendantsHelper_=function(e,t,n,r){var i=this,o=t.get(J.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(J.Empty));var s=[];return t.children.inorderTraversal(function(t,o){var a=n?n.getImmediateChild(t):null,u=r.child(t),c=e.operationForChild(t);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))}),o&&(s=s.concat(o.applyOperation(e,r,n))),s},e.nextQueryTag_=1,e}(),Rt=function(){function e(){this.rootNode_=Be.EMPTY_NODE}return e.prototype.getNode=function(e){return this.rootNode_.getChild(e)},e.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},e}(),Dt=function(){function e(e){this.app_=e}return e.prototype.getToken=function(e){return this.app_.INTERNAL.getToken(e).then(null,function(e){return e&&\"auth/token-not-initialized\"===e.code?(E(\"Got auth/token-not-initialized error.  Treating as null token.\"),null):Promise.reject(e)})},e.prototype.addTokenChangeListener=function(e){this.app_.INTERNAL.addAuthTokenListener(e)},e.prototype.removeTokenChangeListener=function(e){this.app_.INTERNAL.removeAuthTokenListener(e)},e.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named \"'+this.app_.name+'\" are invalid. This usually indicates your app was not initialized correctly. ';I(e+=\"credential\"in this.app_.options?'Make sure the \"credential\" property provided to initializeApp() is authorized to access the specified \"databaseURL\" and is from the correct project.':\"serviceAccount\"in this.app_.options?'Make sure the \"serviceAccount\" property provided to initializeApp() is authorized to access the specified \"databaseURL\" and is from the correct project.':'Make sure the \"apiKey\" and \"databaseURL\" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},e}(),kt=function(){return function(e){this.accessToken=e}}(),xt=function(){function e(e){this.app_=e}return e.prototype.getToken=function(e){return Promise.resolve(new kt(\"owner\"))},e.prototype.addTokenChangeListener=function(e){},e.prototype.removeTokenChangeListener=function(e){},e.prototype.notifyForInvalidToken=function(){I('Database emulator unexpectedly rejected fake \"owner\" credentials.')},e}(),Pt=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(e,t){void 0===t&&(t=1),a.contains(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},e.prototype.get=function(){return a.deepCopy(this.counters_)},e}(),Lt=function(){function e(){}return e.getCollection=function(e){var t=e.toString();return this.collections_[t]||(this.collections_[t]=new Pt),this.collections_[t]},e.getOrCreateReporter=function(e,t){var n=e.toString();return this.reporters_[n]||(this.reporters_[n]=t()),this.reporters_[n]},e.collections_={},e.reporters_={},e}(),Mt=function(){function e(e){this.collection_=e,this.last_=null}return e.prototype.get=function(){var e=this.collection_.get(),t=s.__assign({},e);return this.last_&&L(this.last_,function(e,n){t[e]=t[e]-n}),this.last_=e,t},e}(),jt=1e4,Ft=3e4,Ut=function(){function e(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Mt(e);var n=jt+(Ft-jt)*Math.random();X(this.reportStats_.bind(this),Math.floor(n))}return e.prototype.includeStat=function(e){this.statsToReport_[e]=!0},e.prototype.reportStats_=function(){var e=this,t=this.statsListener_.get(),n={},r=!1;L(t,function(t,i){i>0&&a.contains(e.statsToReport_,t)&&(n[t]=i,r=!0)}),r&&this.server_.reportStats(n),X(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},e}(),Vt=function(){function e(){this.eventLists_=[],this.recursionDepth_=0}return e.prototype.queueEvents=function(e){for(var t=null,n=0;n<e.length;n++){var r=e[n],i=r.getPath();null===t||i.equals(t.getPath())||(this.eventLists_.push(t),t=null),null===t&&(t=new qt(i)),t.add(r)}t&&this.eventLists_.push(t)},e.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.equals(e)})},e.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.contains(e)||e.contains(t)})},e.prototype.raiseQueuedEventsMatchingPredicate_=function(e){this.recursionDepth_++;for(var t=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(e(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):t=!1)}t&&(this.eventLists_=[]),this.recursionDepth_--},e}(),qt=function(){function e(e){this.path_=e,this.events_=[]}return e.prototype.add=function(e){this.events_.push(e)},e.prototype.raise=function(){for(var e=0;e<this.events_.length;e++){var t=this.events_[e];if(null!==t){this.events_[e]=null;var n=t.getEventRunner();b&&E(\"event: \"+t.toString()),K(n)}}},e.prototype.getPath=function(){return this.path_},e}(),Bt=function(){function e(e){this.allowedEvents_=e,this.listeners_={},a.assert(Array.isArray(e)&&e.length>0,\"Requires a non-empty array\")}return e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Array.isArray(this.listeners_[e]))for(var r=s.__spread(this.listeners_[e]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)},e.prototype.on=function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)},e.prototype.off=function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)},e.prototype.validateEventType_=function(e){a.assert(this.allowedEvents_.find(function(t){return t===e}),\"Unknown event: \"+e)},e}(),$t=function(e){function t(){var t,n,r=e.call(this,[\"visible\"])||this;return\"undefined\"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n=\"visibilitychange\",t=\"hidden\"):void 0!==document.mozHidden?(n=\"mozvisibilitychange\",t=\"mozHidden\"):void 0!==document.msHidden?(n=\"msvisibilitychange\",t=\"msHidden\"):void 0!==document.webkitHidden&&(n=\"webkitvisibilitychange\",t=\"webkitHidden\")),r.visible_=!0,n&&document.addEventListener(n,function(){var e=!document[t];e!==r.visible_&&(r.visible_=e,r.trigger(\"visible\",e))},!1),r}return s.__extends(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return a.assert(\"visible\"===e,\"Unknown event type: \"+e),[this.visible_]},t}(Bt),zt=function(e){function t(){var t=e.call(this,[\"online\"])||this;return t.online_=!0,\"undefined\"==typeof window||void 0===window.addEventListener||a.isMobileCordova()||(window.addEventListener(\"online\",function(){t.online_||(t.online_=!0,t.trigger(\"online\",!0))},!1),window.addEventListener(\"offline\",function(){t.online_&&(t.online_=!1,t.trigger(\"online\",!1))},!1)),t}return s.__extends(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return a.assert(\"online\"===e,\"Unknown event type: \"+e),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(Bt),Wt=function(){function e(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var t=function(t){e[t]&&K(function(){n.onMessage_(e[t])})},r=0;r<e.length;++r)t(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),\"break\";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&\"break\"!==r(););},e}(),Ht=\"pLPCommand\",Qt=\"pRTLPCB\",Gt=function(){function e(e,t,n,r){this.connId=e,this.repoInfo=t,this.transportSessionId=n,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=C(e),this.stats_=Lt.getCollection(t),this.urlFn=function(e){return t.connectionURL(ee,e)}}return e.prototype.open=function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Wt(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_(\"Timed out trying to connect.\"),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(e){if(a.isNodeSdk()||\"complete\"===document.readyState)e();else{var t=!1,n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener(\"DOMContentLoaded\",n,!1),window.addEventListener(\"load\",n,!1)):document.attachEvent&&(document.attachEvent(\"onreadystatechange\",function(){\"complete\"===document.readyState&&n()}),window.attachEvent(\"onload\",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new Kt(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=s.__read(e,5),i=r[0],o=r[1],a=r[2];if(n.incrementIncomingBytes_(e),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,\"start\"==i)n.id=o,n.password=a;else{if(\"close\"!==i)throw new Error(\"Unrecognized command received: \"+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=s.__read(e,2),i=r[0],o=r[1];n.incrementIncomingBytes_(e),n.myPacketOrderer.handleResponse(i,o)},function(){n.onClosed_()},n.urlFn);var e={start:\"t\"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=\"5\",n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),\"undefined\"!=typeof location&&location.href&&-1!==location.href.indexOf(\"firebaseio.com\")&&(e.r=\"f\");var t=n.urlFn(e);n.log_(\"Connecting via long-poll to \"+t),n.scriptTagHolder.addTag(t,function(){})}})},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return!(a.isNodeSdk()||!e.forceAllow_&&(e.forceDisallow_||\"undefined\"==typeof document||null==document.createElement||\"object\"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||\"object\"==typeof Windows&&\"object\"==typeof Windows.UI))},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_(\"Longpoll is closing itself\"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_(\"Longpoll is being closed.\"),this.shutdown_())},e.prototype.send=function(e){var t=a.stringify(e);this.bytesSent+=t.length,this.stats_.incrementCounter(\"bytes_sent\",t.length);for(var n=a.base64Encode(t),r=P(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(e,t){if(!a.isNodeSdk()){this.myDisconnFrame=document.createElement(\"iframe\");var n={dframe:\"t\"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display=\"none\",document.body.appendChild(this.myDisconnFrame)}},e.prototype.incrementIncomingBytes_=function(e){var t=a.stringify(e).length;this.bytesReceived+=t,this.stats_.incrementCounter(\"bytes_received\",t)},e}(),Kt=function(){function e(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,a.isNodeSdk())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=g(),window[Ht+this.uniqueCallbackIdentifier]=t,window[Qt+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var o=\"\";this.myIFrame.src&&\"javascript:\"===this.myIFrame.src.substr(0,\"javascript:\".length)&&(o='<script>document.domain=\"'+document.domain+'\";<\\/script>');var s=\"<html><body>\"+o+\"</body></html>\";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(u){E(\"frame writing exception\"),u.stack&&E(u.stack),E(u)}}}return e.createIFrame_=function(){var e=document.createElement(\"iframe\");if(e.style.display=\"none\",!document.body)throw\"Document body has not initialized. Wait to initialize Firebase until after the document is ready.\";document.body.appendChild(e);try{e.contentWindow.document||E(\"No IE domain setting required\")}catch(n){var t=document.domain;e.src=\"javascript:void((function(){document.open();document.domain='\"+t+\"';document.close();})())\"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},e.prototype.close=function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML=\"\",setTimeout(function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)},Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())},e.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n=\"\",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+\"&seg\"+r+\"=\"+i.seg+\"&ts\"+r+\"=\"+i.ts+\"&d\"+r+\"=\"+i.d,r++}return this.addLongPollTag_(t+=n,this.currentSerial),!0}return!1},e.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,function(){clearTimeout(i),r()})},e.prototype.addTag=function(e,t){var n=this;a.isNodeSdk()?this.doNodeLongPoll(e,t):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement(\"script\");r.type=\"text/javascript\",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&\"loaded\"!==e&&\"complete\"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){E(\"Long-poll script failed to load: \"+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},e}(),Yt=\"\",Xt=null;\"undefined\"!=typeof MozWebSocket?Xt=MozWebSocket:\"undefined\"!=typeof WebSocket&&(Xt=WebSocket);var Jt=function(){function e(t,n,r,i){this.connId=t,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=C(this.connId),this.stats_=Lt.getCollection(n),this.connURL=e.connectionURL_(n,r,i)}return e.connectionURL_=function(e,t,n){var r={v:\"5\"};return!a.isNodeSdk()&&\"undefined\"!=typeof location&&location.href&&-1!==location.href.indexOf(\"firebaseio.com\")&&(r.r=\"f\"),t&&(r.s=t),n&&(r.ls=n),e.connectionURL(\"websocket\",r)},e.prototype.open=function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_(\"Websocket connecting to \"+this.connURL),this.everConnected_=!1,d.set(\"previous_websocket_failure\",!0);try{if(a.isNodeSdk()){var r={headers:{\"User-Agent\":\"Firebase/5/\"+Yt+\"/\"+process.platform+\"/\"+(a.CONSTANTS.NODE_ADMIN?\"AdminNode\":\"Node\")}},i=process.env,o=0==this.connURL.indexOf(\"wss://\")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;o&&(r.proxy={origin:o}),this.mySock=new Xt(this.connURL,[],r)}else this.mySock=new Xt(this.connURL)}catch(u){this.log_(\"Error instantiating WebSocket.\");var s=u.message||u.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_(\"Websocket connected.\"),n.everConnected_=!0},this.mySock.onclose=function(){n.log_(\"Websocket connection was disconnected.\"),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_(\"WebSocket error.  Closing connection.\");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if(\"undefined\"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==Xt&&!e.forceDisallow_},e.previouslyFailed=function(){return d.isInMemoryStorage||!0===d.get(\"previous_websocket_failure\")},e.prototype.markConnectionHealthy=function(){d.remove(\"previous_websocket_failure\")},e.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length==this.totalFrames){var t=this.frames.join(\"\");this.frames=null;var n=a.jsonEval(t);this.onMessage(n)}},e.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},e.prototype.extractFrameCount_=function(e){if(a.assert(null===this.frames,\"We already have a frame buffer\"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},e.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter(\"bytes_received\",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}},e.prototype.send=function(e){this.resetKeepAlive();var t=a.stringify(e);this.bytesSent+=t.length,this.stats_.incrementCounter(\"bytes_sent\",t.length);var n=P(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_(\"WebSocket is closing itself\"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_(\"WebSocket is being closed\"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){e.mySock&&e.sendString_(\"0\"),e.resetKeepAlive()},Math.floor(45e3))},e.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(t){this.log_(\"Exception thrown from WebSocket.send():\",t.message||t.data,\"Closing connection.\"),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}(),Zt=function(){function e(e){this.initTransports_(e)}return Object.defineProperty(e,\"ALL_TRANSPORTS\",{get:function(){return[Gt,Jt]},enumerable:!0,configurable:!0}),e.prototype.initTransports_=function(t){var n,r,i=Jt&&Jt.isAvailable(),o=i&&!Jt.previouslyFailed();if(t.webSocketOnly&&(i||I(\"wss:// URL used, but browser isn't known to support websockets.  Trying anyway.\"),o=!0),o)this.transports_=[Jt];else{var a=this.transports_=[];try{for(var u=s.__values(e.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error(\"No transports available\")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}(),en=function(){function e(e,t,n,r,i,o,s){this.id=e,this.repoInfo_=t,this.onMessage_=n,this.onReady_=r,this.onDisconnect_=i,this.onKill_=o,this.lastSessionId=s,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=C(\"c:\"+this.id+\":\"),this.transportManager_=new Zt(t),this.log_(\"Connection created\"),this.start_()}return e.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){e.conn_&&e.conn_.open(n,r)},Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=X(function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_(\"Connection exceeded healthy timeout but has received \"+e.conn_.bytesReceived+\" bytes.  Marking connection healthy.\"),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_(\"Connection exceeded healthy timeout but has sent \"+e.conn_.bytesSent+\" bytes.  Leaving connection alive.\"):(e.log_(\"Closing unhealthy connection after timeout.\"),e.close()))},Math.floor(i)))},e.prototype.nextTransportId_=function(){return\"c:\"+this.id+\":\"+this.connectionCount++},e.prototype.disconnReceiver_=function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_(\"Secondary connection lost.\"),t.onSecondaryConnectionLost_()):t.log_(\"closing an old connection\")}},e.prototype.connReceiver_=function(e){var t=this;return function(n){2!=t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_(\"message on old connection\"))}},e.prototype.sendRequest=function(e){this.sendData_({t:\"d\",d:e})},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_(\"cleaning up and promoting a connection: \"+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(e){if(\"t\"in e){var t=e.t;\"a\"===t?this.upgradeIfSecondaryHealthy_():\"r\"===t?(this.log_(\"Got a reset on secondary, closing it\"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):\"o\"===t&&(this.log_(\"got pong on secondary.\"),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(e){var t=k(\"t\",e),n=k(\"d\",e);if(\"c\"==t)this.onSecondaryControl_(n);else{if(\"d\"!=t)throw new Error(\"Unknown protocol layer: \"+t);this.pendingDataMessages.push(n)}},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_(\"Secondary connection is healthy.\"),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_(\"sending ping on secondary.\"),this.secondaryConn_.send({t:\"c\",d:{t:\"p\",d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_(\"sending client ack on secondary\"),this.secondaryConn_.send({t:\"c\",d:{t:\"a\",d:{}}}),this.log_(\"Ending transmission on primary\"),this.conn_.send({t:\"c\",d:{t:\"n\",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(e){var t=k(\"t\",e),n=k(\"d\",e);\"c\"==t?this.onControl_(n):\"d\"==t&&this.onDataMessage_(n)},e.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_(\"Primary connection is healthy.\"),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},e.prototype.onControl_=function(e){var t=k(\"t\",e);if(\"d\"in e){var n=e.d;if(\"h\"===t)this.onHandshake_(n);else if(\"n\"===t){this.log_(\"recvd end transmission on primary\"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else\"s\"===t?this.onConnectionShutdown_(n):\"r\"===t?this.onReset_(n):\"e\"===t?S(\"Server Error: \"+n):\"o\"===t?(this.log_(\"got pong on primary.\"),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):S(\"Unknown control packet command: \"+t)}},e.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.updateHost(r),0==this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),\"5\"!==n&&I(\"Protocol version mismatch detected\"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},e.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),X(function(){t.secondaryConn_&&(t.log_(\"Timed out trying to upgrade.\"),t.secondaryConn_.close())},Math.floor(6e4))},e.prototype.onReset_=function(e){this.log_(\"Reset packet received.  New host: \"+e),this.repoInfo_.updateHost(e),1===this.state_?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(e,t){var n=this;this.log_(\"Realtime connection established.\"),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_(\"Primary connection is healthy.\"),this.isHealthy_=!0):X(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_(\"sending ping on primary.\"),this.sendData_({t:\"c\",d:{t:\"p\",d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()},e.prototype.onConnectionLost_=function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_(\"Realtime connection lost.\"):(this.log_(\"Realtime connection failed.\"),this.repoInfo_.isCacheableHost()&&(d.remove(\"host:\"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},e.prototype.onConnectionShutdown_=function(e){this.log_(\"Connection shutdown command received. Shutting down...\"),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(e){if(1!==this.state_)throw\"Connection is not connected\";this.tx_.send(e)},e.prototype.close=function(){2!==this.state_&&(this.log_(\"Closing realtime connection.\"),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_(\"Shutting down all connections\"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}(),tn=function(){function e(){}return e.prototype.put=function(e,t,n,r){},e.prototype.merge=function(e,t,n,r){},e.prototype.refreshAuthToken=function(e){},e.prototype.onDisconnectPut=function(e,t,n){},e.prototype.onDisconnectMerge=function(e,t,n){},e.prototype.onDisconnectCancel=function(e,t){},e.prototype.reportStats=function(e){},e}(),nn=1e3,rn=3e5,on=function(e){function t(n,r,i,o,s,u){var c=e.call(this)||this;if(c.repoInfo_=n,c.onDataUpdate_=r,c.onConnectStatus_=i,c.onServerInfoUpdate_=o,c.authTokenProvider_=s,c.authOverride_=u,c.id=t.nextPersistentConnectionId_++,c.log_=C(\"p:\"+c.id+\":\"),c.interruptReasons_={},c.listens=new Map,c.outstandingPuts_=[],c.outstandingPutCount_=0,c.onDisconnectRequestQueue_=[],c.connected_=!1,c.reconnectDelay_=nn,c.maxReconnectDelay_=rn,c.securityDebugCallback_=null,c.lastSessionId=null,c.establishConnectionTimer_=null,c.visible_=!1,c.requestCBHash_={},c.requestNumber_=0,c.realtime_=null,c.authToken_=null,c.forceTokenRefresh_=!1,c.invalidAuthTokenCount_=0,c.firstConnection_=!0,c.lastConnectionAttemptTime_=null,c.lastConnectionEstablishedTime_=null,u&&!a.isNodeSdk())throw new Error(\"Auth override specified in options, but not supported on non Node.js platforms\");return c.scheduleConnect_(0),$t.getInstance().on(\"visible\",c.onVisible_,c),-1===n.host.indexOf(\"fblocal\")&&zt.getInstance().on(\"online\",c.onOnline_,c),c}return s.__extends(t,e),t.prototype.sendRequest=function(e,t,n){var r=++this.requestNumber_,i={r,a:e,b:t};this.log_(a.stringify(i)),a.assert(this.connected_,\"sendRequest call when we're not connected not allowed.\"),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},t.prototype.listen=function(e,t,n,r){var i=e.queryIdentifier(),o=e.path.toString();this.log_(\"Listen called for \"+o+\" \"+i),this.listens.has(o)||this.listens.set(o,new Map),a.assert(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),\"listen() called for non-default but complete query\"),a.assert(!this.listens.get(o).has(i),\"listen() called twice for same path/queryId.\");var s={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)},t.prototype.sendListen_=function(e){var n=this,r=e.query,i=r.path.toString(),o=r.queryIdentifier();this.log_(\"Listen on \"+i+\" for \"+o);var s={p:i};e.tag&&(s.q=r.queryObject(),s.t=e.tag),s.h=e.hashFn(),this.sendRequest(\"q\",s,function(s){var a=s.d,u=s.s;t.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===e&&(n.log_(\"listen response\",s),\"ok\"!==u&&n.removeListen_(i,o),e.onComplete&&e.onComplete(u,a))})},t.warnOnListenWarnings_=function(e,t){if(e&&\"object\"==typeof e&&a.contains(e,\"w\")){var n=a.safeGet(e,\"w\");if(Array.isArray(n)&&~n.indexOf(\"no_index\")){var r='\".indexOn\": \"'+t.getQueryParams().getIndex().toString()+'\"',i=t.path.toString();I(\"Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding \"+r+\" at \"+i+\" to your security rules for better performance.\")}}},t.prototype.refreshAuthToken=function(e){this.authToken_=e,this.log_(\"Auth token refreshed\"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest(\"unauth\",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(e)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(e){(e&&40===e.length||a.isAdmin(e))&&(this.log_(\"Admin auth credential detected.  Reducing max reconnect time.\"),this.maxReconnectDelay_=3e4)},t.prototype.tryAuth=function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=a.isValidFormat(t)?\"auth\":\"gauth\",r={cred:t};null===this.authOverride_?r.noauth=!0:\"object\"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||\"error\";e.authToken_===t&&(\"ok\"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))})}},t.prototype.unlisten=function(e,t){var n=e.path.toString(),r=e.queryIdentifier();this.log_(\"Unlisten called for \"+n+\" \"+r),a.assert(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),\"unlisten() called for non-default but complete query\"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e.queryObject(),t)},t.prototype.sendUnlisten_=function(e,t,n,r){this.log_(\"Unlisten on \"+e+\" for \"+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest(\"n\",i)},t.prototype.onDisconnectPut=function(e,t,n){this.connected_?this.sendOnDisconnect_(\"o\",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:\"o\",data:t,onComplete:n})},t.prototype.onDisconnectMerge=function(e,t,n){this.connected_?this.sendOnDisconnect_(\"om\",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:\"om\",data:t,onComplete:n})},t.prototype.onDisconnectCancel=function(e,t){this.connected_?this.sendOnDisconnect_(\"oc\",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:\"oc\",data:null,onComplete:t})},t.prototype.sendOnDisconnect_=function(e,t,n,r){var i={p:t,d:n};this.log_(\"onDisconnect \"+e,i),this.sendRequest(e,i,function(e){r&&setTimeout(function(){r(e.s,e.d)},Math.floor(0))})},t.prototype.put=function(e,t,n,r){this.putInternal(\"p\",e,t,n,r)},t.prototype.merge=function(e,t,n,r){this.putInternal(\"m\",e,t,n,r)},t.prototype.putInternal=function(e,t,n,r,i){var o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_(\"Buffering put: \"+t)},t.prototype.sendPut_=function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,function(r){t.log_(n+\" response\",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)})},t.prototype.reportStats=function(e){var t=this;if(this.connected_){var n={c:e};this.log_(\"reportStats\",n),this.sendRequest(\"s\",n,function(e){\"ok\"!==e.s&&t.log_(\"reportStats\",\"Error sending stats: \"+e.d)})}},t.prototype.onDataMessage_=function(e){if(\"r\"in e){this.log_(\"from server: \"+a.stringify(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if(\"error\"in e)throw\"A server-side error has occurred: \"+e.error;\"a\"in e&&this.onDataPush_(e.a,e.b)}},t.prototype.onDataPush_=function(e,t){this.log_(\"handleServerMessage\",e,t),\"d\"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):\"m\"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):\"c\"===e?this.onListenRevoked_(t.p,t.q):\"ac\"===e?this.onAuthRevoked_(t.s,t.d):\"sd\"===e?this.onSecurityDebugPacket_(t):S(\"Unrecognized action received from server: \"+a.stringify(e)+\"\\nAre you using the latest client?\")},t.prototype.onReady_=function(e,t){this.log_(\"connection ready\"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(e){var t=this;a.assert(!this.realtime_,\"Scheduling a connect when we're already connected/ing?\"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){t.establishConnectionTimer_=null,t.establishConnection_()},Math.floor(e))},t.prototype.onVisible_=function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_(\"Window became visible.  Reducing delay.\"),this.reconnectDelay_=nn,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},t.prototype.onOnline_=function(e){e?(this.log_(\"Browser went online.\"),this.reconnectDelay_=nn,this.realtime_||this.scheduleConnect_(0)):(this.log_(\"Browser went offline.  Killing connection.\"),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_(\"data client disconnected\"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=nn),this.lastConnectionEstablishedTime_=null):(this.log_(\"Window isn't visible.  Delaying reconnect.\"),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_(\"Trying to reconnect in \"+t+\"ms\"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_(\"Making a connection attempt\"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+\":\"+t.nextConnectionId_++,o=this,s=this.lastSessionId,u=!1,c=null,l=function(){c?c.close():(u=!0,r())};this.realtime_={close:l,sendRequest:function(e){a.assert(c,\"sendRequest call when we're not connected not allowed.\"),c.sendRequest(e)}};var h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(h).then(function(t){u?E(\"getToken() completed but was canceled\"):(E(\"getToken() completed. Creating connection.\"),o.authToken_=t&&t.accessToken,c=new en(i,o.repoInfo_,e,n,r,function(e){I(e+\" (\"+o.repoInfo_.toString()+\")\"),o.interrupt(\"server_kill\")},s))}).then(null,function(e){o.log_(\"Failed to get token: \"+e),u||(a.CONSTANTS.NODE_ADMIN&&I(e),l())})}},t.prototype.interrupt=function(e){E(\"Interrupting connection for reason: \"+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(e){E(\"Resuming connection for reason: \"+e),delete this.interruptReasons_[e],a.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=nn,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},t.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&\"h\"in t.request&&t.queued&&(t.onComplete&&t.onComplete(\"disconnect\"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(e,t){var n;n=t?t.map(function(e){return x(e)}).join(\"$\"):\"default\";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete(\"permission_denied\")},t.prototype.removeListen_=function(e,t){var n,r=new J(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n},t.prototype.onAuthRevoked_=function(e,t){E(\"Auth token revoked: \"+e+\"/\"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),\"invalid_token\"!==e&&\"permission_denied\"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},t.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):\"msg\"in e&&console.log(\"FIREBASE: \"+e.msg.replace(\"\\n\",\"\\nFIREBASE: \"))},t.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth();try{for(var i=s.__values(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var u=(n=void 0,s.__values(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(d){n={error:d}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}},t.prototype.sendConnectStats_=function(){var e={},t=\"js\";a.CONSTANTS.NODE_ADMIN?t=\"admin_node\":a.CONSTANTS.NODE_CLIENT&&(t=\"node\"),e[\"sdk.\"+t+\".\"+Yt.replace(/\\./g,\"-\")]=1,a.isMobileCordova()?e[\"framework.cordova\"]=1:a.isReactNative()&&(e[\"framework.reactnative\"]=1),this.reportStats(e)},t.prototype.shouldReconnect_=function(){var e=zt.getInstance().currentlyOnline();return a.isEmpty(this.interruptReasons_)&&e},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(tn),sn=function(e){function t(t,n,r){var i=e.call(this)||this;return i.repoInfo_=t,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=C(\"p:rest:\"),i.listens_={},i}return s.__extends(t,e),t.prototype.reportStats=function(e){throw new Error(\"Method not implemented.\")},t.getListenId_=function(e,t){return void 0!==t?\"tag$\"+t:(a.assert(e.getQueryParams().isDefault(),\"should have a tag if it's not a default query.\"),e.path.toString())},t.prototype.listen=function(e,n,r,i){var o=this,s=e.path.toString();this.log_(\"Listen called for \"+s+\" \"+e.queryIdentifier());var u=t.getListenId_(e,r),c={};this.listens_[u]=c;var l=e.getQueryParams().toRestQueryStringParameters();this.restRequest_(s+\".json\",l,function(e,t){var n=t;404===e&&(n=null,e=null),null===e&&o.onDataUpdate_(s,n,!1,r),a.safeGet(o.listens_,u)===c&&i(e?401==e?\"permission_denied\":\"rest_error:\"+e:\"ok\",null)})},t.prototype.unlisten=function(e,n){var r=t.getListenId_(e,n);delete this.listens_[r]},t.prototype.refreshAuthToken=function(e){},t.prototype.restRequest_=function(e,t,n){var r=this;void 0===t&&(t={}),t.format=\"export\",this.authTokenProvider_.getToken(!1).then(function(i){var o=i&&i.accessToken;o&&(t.auth=o);var s=(r.repoInfo_.secure?\"https://\":\"http://\")+r.repoInfo_.host+e+\"?ns=\"+r.repoInfo_.namespace+a.querystring(t);r.log_(\"Sending REST request for \"+s);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_(\"REST Response for \"+s+\" received. status:\",u.status,\"response:\",u.responseText);var e=null;if(u.status>=200&&u.status<300){try{e=a.jsonEval(u.responseText)}catch(t){I(\"Failed to parse JSON response for \"+s+\": \"+u.responseText)}n(null,e)}else 401!==u.status&&404!==u.status&&I(\"Got unsuccessful REST response for \"+s+\" Status: \"+u.status),n(u.status);n=null}},u.open(\"GET\",s,!0),u.send()})},t}(tn),an=function(){function e(e,t,n){var r,i=this;if(this.repoInfo_=e,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Vt,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new rt,this.persistentConnection_=null,r=\"undefined\"!=typeof process&&process.env[m]?new xt(n):new Dt(n),this.stats_=Lt.getCollection(e),t||Y())this.server_=new sn(this.repoInfo_,this.onDataUpdate_.bind(this),r),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var o=n.options.databaseAuthVariableOverride;if(null!=o){if(\"object\"!=typeof o)throw new Error(\"Only objects are supported for option databaseAuthVariableOverride\");try{a.stringify(o)}catch(s){throw new Error(\"Invalid authOverride provided: \"+s)}}this.persistentConnection_=new on(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),r,o),this.server_=this.persistentConnection_}r.addTokenChangeListener(function(e){i.server_.refreshAuthToken(e)}),this.statsReporter_=Lt.getOrCreateReporter(e,function(){return new Ut(i.stats_,i.server_)}),this.transactions_init_(),this.infoData_=new Rt,this.infoSyncTree_=new At({startListening:function(e,t,n,r){var o=[],s=i.infoData_.getNode(e.path);return s.isEmpty()||(o=i.infoSyncTree_.applyServerOverwrite(e.path,s),setTimeout(function(){r(\"ok\")},0)),o},stopListening:function(){}}),this.updateInfo_(\"connected\",!1),this.serverSyncTree_=new At({startListening:function(e,t,n,r){return i.server_.listen(e,n,t,function(t,n){var o=r(t,n);i.eventQueue_.raiseEventsForChangedPath(e.path,o)}),[]},stopListening:function(e,t){i.server_.unlisten(e,t)}})}return e.prototype.toString=function(){return(this.repoInfo_.secure?\"https://\":\"http://\")+this.repoInfo_.host},e.prototype.name=function(){return this.repoInfo_.namespace},e.prototype.serverTime=function(){var e=this.infoData_.getNode(new J(\".info/serverTimeOffset\")).val()||0;return(new Date).getTime()+e},e.prototype.generateServerValues=function(){return(e=(e={timestamp:this.serverTime()})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e},e.prototype.onDataUpdate_=function(e,t,n,r){this.dataUpdateCount++;var i=new J(e);t=this.interceptServerDataCallback_?this.interceptServerDataCallback_(e,t):t;var o=[];if(r)if(n){var s=a.map(t,function(e){return We(e)});o=this.serverSyncTree_.applyTaggedQueryMerge(i,s,r)}else{var u=We(t);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,u,r)}else if(n){var c=a.map(t,function(e){return We(e)});o=this.serverSyncTree_.applyServerMerge(i,c)}else{var l=We(t);o=this.serverSyncTree_.applyServerOverwrite(i,l)}var h=i;o.length>0&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,o)},e.prototype.interceptServerData_=function(e){this.interceptServerDataCallback_=e},e.prototype.onConnectStatus_=function(e){this.updateInfo_(\"connected\",e),!1===e&&this.runOnDisconnectEvents_()},e.prototype.onServerInfoUpdate_=function(e){var t=this;L(e,function(e,n){t.updateInfo_(e,n)})},e.prototype.updateInfo_=function(e,t){var n=new J(\"/.info/\"+e),r=We(t);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},e.prototype.getNextWriteId_=function(){return this.nextWriteId_++},e.prototype.setWithPriority=function(e,t,n,r){var i=this;this.log_(\"set\",{path:e.toString(),value:t,priority:n});var o=this.generateServerValues(),s=We(t,n),a=ot(s,o),u=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserOverwrite(e,a,u,!0);this.eventQueue_.queueEvents(c),this.server_.put(e.toString(),s.val(!0),function(t,n){var o=\"ok\"===t;o||I(\"set at \"+e+\" failed: \"+t);var s=i.serverSyncTree_.ackUserWrite(u,!o);i.eventQueue_.raiseEventsForChangedPath(e,s),i.callOnCompleteCallback(r,t,n)});var l=this.abortTransactions_(e);this.rerunTransactions_(l),this.eventQueue_.raiseEventsForChangedPath(l,[])},e.prototype.update=function(e,t,n){var r=this;this.log_(\"update\",{path:e.toString(),value:t});var i=!0,o=this.generateServerValues(),s={};if(L(t,function(e,t){i=!1;var n=We(t);s[e]=ot(n,o)}),i)E(\"update() called with empty data.  Don't do anything.\"),this.callOnCompleteCallback(n,\"ok\");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(e,s,a);this.eventQueue_.queueEvents(u),this.server_.merge(e.toString(),t,function(t,i){var o=\"ok\"===t;o||I(\"update at \"+e+\" failed: \"+t);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(e):e;r.eventQueue_.raiseEventsForChangedPath(u,s),r.callOnCompleteCallback(n,t,i)}),L(t,function(t){var n=r.abortTransactions_(e.child(t));r.rerunTransactions_(n)}),this.eventQueue_.raiseEventsForChangedPath(e,[])}},e.prototype.runOnDisconnectEvents_=function(){var e=this;this.log_(\"onDisconnectEvents\");var t=this.generateServerValues(),n=function(e,t){var n=new rt;return e.forEachTree(new J(\"\"),function(e,r){n.remember(e,ot(r,t))}),n}(this.onDisconnect_,t),r=[];n.forEachTree(J.Empty,function(t,n){r=r.concat(e.serverSyncTree_.applyServerOverwrite(t,n));var i=e.abortTransactions_(t);e.rerunTransactions_(i)}),this.onDisconnect_=new rt,this.eventQueue_.raiseEventsForChangedPath(J.Empty,r)},e.prototype.onDisconnectCancel=function(e,t){var n=this;this.server_.onDisconnectCancel(e.toString(),function(r,i){\"ok\"===r&&n.onDisconnect_.forget(e),n.callOnCompleteCallback(t,r,i)})},e.prototype.onDisconnectSet=function(e,t,n){var r=this,i=We(t);this.server_.onDisconnectPut(e.toString(),i.val(!0),function(t,o){\"ok\"===t&&r.onDisconnect_.remember(e,i),r.callOnCompleteCallback(n,t,o)})},e.prototype.onDisconnectSetWithPriority=function(e,t,n,r){var i=this,o=We(t,n);this.server_.onDisconnectPut(e.toString(),o.val(!0),function(t,n){\"ok\"===t&&i.onDisconnect_.remember(e,o),i.callOnCompleteCallback(r,t,n)})},e.prototype.onDisconnectUpdate=function(e,t,n){var r=this;if(a.isEmpty(t))return E(\"onDisconnect().update() called with empty data.  Don't do anything.\"),void this.callOnCompleteCallback(n,\"ok\");this.server_.onDisconnectMerge(e.toString(),t,function(i,o){\"ok\"===i&&L(t,function(t,n){var i=We(n);r.onDisconnect_.remember(e.child(t),i)}),r.callOnCompleteCallback(n,i,o)})},e.prototype.addEventCallbackForQuery=function(e,t){var n;n=\".info\"===e.path.getFront()?this.infoSyncTree_.addEventRegistration(e,t):this.serverSyncTree_.addEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},e.prototype.removeEventCallbackForQuery=function(e,t){var n;n=\".info\"===e.path.getFront()?this.infoSyncTree_.removeEventRegistration(e,t):this.serverSyncTree_.removeEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},e.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(\"repo_interrupt\")},e.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(\"repo_interrupt\")},e.prototype.stats=function(e){if(void 0===e&&(e=!1),\"undefined\"!=typeof console){var t;e?(this.statsListener_||(this.statsListener_=new Mt(this.stats_)),t=this.statsListener_.get()):t=this.stats_.get();var n=Object.keys(t).reduce(function(e,t){return Math.max(t.length,e)},0);L(t,function(e,t){for(var r=e,i=e.length;i<n+2;i++)r+=\" \";console.log(r+t)})}},e.prototype.statsIncrementCounter=function(e){this.stats_.incrementCounter(e),this.statsReporter_.includeStat(e)},e.prototype.log_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=\"\";this.persistentConnection_&&(n=this.persistentConnection_.id+\":\"),E.apply(void 0,s.__spread([n],e))},e.prototype.callOnCompleteCallback=function(e,t,n){e&&K(function(){if(\"ok\"==t)e(null);else{var r=(t||\"error\").toUpperCase(),i=r;n&&(i+=\": \"+n);var o=new Error(i);o.code=r,e(o)}})},Object.defineProperty(e.prototype,\"database\",{get:function(){return this.__database||(this.__database=new yn(this))},enumerable:!0,configurable:!0}),e}(),un=function(){function e(t){this.indexedFilter_=new yt(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},e.prototype.updateChild=function(e,t,n,r,i,o){return this.matches(new Ce(t,n))||(n=Be.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)},e.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=Be.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(Be.EMPTY_NODE);var i=this;return t.forEachChild(Re,function(e,t){i.matches(new Ce(e,t))||(r=r.updateImmediateChild(e,Be.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},e.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},e}(),cn=function(){function e(e){this.rangedFilter_=new un(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}return e.prototype.updateChild=function(e,t,n,r,i,o){return this.rangedFilter_.matches(new Ce(t,n))||(n=Be.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)},e.prototype.updateFullNode=function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=Be.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){r=Be.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=t.withIndex(this.index_)).updatePriority(Be.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(e,t){return l(t,e)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,Be.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(e,t,n,r,i){var o;if(this.reverse_){var s=this.index_.getCompare();o=function(e,t){return s(t,e)}}else o=this.index_.getCompare();var u=e;a.assert(u.numChildren()==this.limit_,\"\");var c=new Ce(t,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(t)){for(var d=u.getImmediateChild(t),f=r.getChildAfterChild(this.index_,l,this.reverse_);null!=f&&(f.name==t||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:o(f,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(gt.childChangedChange(t,n,d)),u.updateImmediateChild(t,n);null!=i&&i.trackChildChange(gt.childRemovedChange(t,d));var m=u.updateImmediateChild(t,Be.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(gt.childAddedChange(f.name,f.node)),m.updateImmediateChild(f.name,f.node)):m}return n.isEmpty()?e:h&&o(l,c)>=0?(null!=i&&(i.trackChildChange(gt.childRemovedChange(l.name,l.node)),i.trackChildChange(gt.childAddedChange(t,n))),u.updateImmediateChild(t,n).updateImmediateChild(l.name,Be.EMPTY_NODE)):e},e}(),ln=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_=\"\",this.indexStartValue_=null,this.indexStartName_=\"\",this.indexEndValue_=null,this.indexEndName_=\"\",this.index_=Re}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.isViewFromLeft=function(){return\"\"===this.viewFrom_?this.startSet_:this.viewFrom_===e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},e.prototype.getIndexStartValue=function(){return a.assert(this.startSet_,\"Only valid if start has been set\"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return a.assert(this.startSet_,\"Only valid if start has been set\"),this.startNameSet_?this.indexStartName_:N},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return a.assert(this.endSet_,\"Only valid if end has been set\"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return a.assert(this.endSet_,\"Only valid if end has been set\"),this.endNameSet_?this.indexEndName_:A},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&\"\"!==this.viewFrom_},e.prototype.getLimit=function(){return a.assert(this.limitSet_,\"Only valid if limit has been set\"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.copy_=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e.prototype.limit=function(e){var t=this.copy_();return t.limitSet_=!0,t.limit_=e,t.viewFrom_=\"\",t},e.prototype.limitToFirst=function(t){var n=this.copy_();return n.limitSet_=!0,n.limit_=t,n.viewFrom_=e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},e.prototype.limitToLast=function(t){var n=this.copy_();return n.limitSet_=!0,n.limit_=t,n.viewFrom_=e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},e.prototype.startAt=function(e,t){var n=this.copy_();return n.startSet_=!0,void 0===e&&(e=null),n.indexStartValue_=e,null!=t?(n.startNameSet_=!0,n.indexStartName_=t):(n.startNameSet_=!1,n.indexStartName_=\"\"),n},e.prototype.endAt=function(e,t){var n=this.copy_();return n.endSet_=!0,void 0===e&&(e=null),n.indexEndValue_=e,void 0!==t?(n.endNameSet_=!0,n.indexEndName_=t):(n.endNameSet_=!1,n.indexEndName_=\"\"),n},e.prototype.orderBy=function(e){var t=this.copy_();return t.index_=e,t},e.prototype.getQueryObject=function(){var t=e.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[t.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[t.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[t.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[t.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[t.LIMIT]=this.limit_;var r=this.viewFrom_;\"\"===r&&(r=this.isViewFromLeft()?t.VIEW_FROM_LEFT:t.VIEW_FROM_RIGHT),n[t.VIEW_FROM]=r}return this.index_!==Re&&(n[t.INDEX]=this.index_.toString()),n},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_==Re},e.prototype.getNodeFilter=function(){return this.loadsAllData()?new yt(this.getIndex()):this.hasLimit()?new cn(this):new un(this)},e.prototype.toRestQueryStringParameters=function(){var t,n=e.REST_QUERY_CONSTANTS_,r={};return this.isDefault()?r:(this.index_===Re?t=n.PRIORITY_INDEX:this.index_===Ke?t=n.VALUE_INDEX:this.index_===Ie?t=n.KEY_INDEX:(a.assert(this.index_ instanceof Ye,\"Unrecognized index type!\"),t=this.index_.toString()),r[n.ORDER_BY]=a.stringify(t),this.startSet_&&(r[n.START_AT]=a.stringify(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=\",\"+a.stringify(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=a.stringify(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=\",\"+a.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_),r)},e.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:\"sp\",INDEX_START_NAME:\"sn\",INDEX_END_VALUE:\"ep\",INDEX_END_NAME:\"en\",LIMIT:\"l\",VIEW_FROM:\"vf\",VIEW_FROM_LEFT:\"l\",VIEW_FROM_RIGHT:\"r\",INDEX:\"i\"},e.REST_QUERY_CONSTANTS_={ORDER_BY:\"orderBy\",PRIORITY_INDEX:\"$priority\",VALUE_INDEX:\"$value\",KEY_INDEX:\"$key\",START_AT:\"startAt\",END_AT:\"endAt\",LIMIT_TO_FIRST:\"limitToFirst\",LIMIT_TO_LAST:\"limitToLast\"},e.DEFAULT=new e,e}(),hn=function(e){function t(t,n){if(!(t instanceof an))throw new Error(\"new Reference() no longer supported - use app.database().\");return e.call(this,t,n,ln.DEFAULT,!1)||this}return s.__extends(t,e),t.prototype.getKey=function(){return a.validateArgCount(\"Reference.key\",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},t.prototype.child=function(e){return a.validateArgCount(\"Reference.child\",1,1,arguments.length),\"number\"==typeof e?e=String(e):e instanceof J||(null===this.path.getFront()?ge(\"Reference.child\",1,e,!1):me(\"Reference.child\",1,e,!1)),new t(this.repo,this.path.child(e))},t.prototype.getParent=function(){a.validateArgCount(\"Reference.parent\",0,0,arguments.length);var e=this.path.parent();return null===e?null:new t(this.repo,e)},t.prototype.getRoot=function(){a.validateArgCount(\"Reference.root\",0,0,arguments.length);for(var e=this;null!==e.getParent();)e=e.getParent();return e},t.prototype.databaseProp=function(){return this.repo.database},t.prototype.set=function(e,t){a.validateArgCount(\"Reference.set\",1,2,arguments.length),ye(\"Reference.set\",this.path),ce(\"Reference.set\",1,e,this.path,!1),a.validateCallback(\"Reference.set\",2,t,!0);var n=new a.Deferred;return this.repo.setWithPriority(this.path,e,null,n.wrapCallback(t)),n.promise},t.prototype.update=function(e,t){if(a.validateArgCount(\"Reference.update\",1,2,arguments.length),ye(\"Reference.update\",this.path),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[\"\"+r]=e[r];e=n,I(\"Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.\")}he(\"Reference.update\",1,e,this.path,!1),a.validateCallback(\"Reference.update\",2,t,!0);var i=new a.Deferred;return this.repo.update(this.path,e,i.wrapCallback(t)),i.promise},t.prototype.setWithPriority=function(e,t,n){if(a.validateArgCount(\"Reference.setWithPriority\",2,3,arguments.length),ye(\"Reference.setWithPriority\",this.path),ce(\"Reference.setWithPriority\",1,e,this.path,!1),de(\"Reference.setWithPriority\",2,t,!1),a.validateCallback(\"Reference.setWithPriority\",3,n,!0),\".length\"===this.getKey()||\".keys\"===this.getKey())throw\"Reference.setWithPriority failed: \"+this.getKey()+\" is a read-only object.\";var r=new a.Deferred;return this.repo.setWithPriority(this.path,e,t,r.wrapCallback(n)),r.promise},t.prototype.remove=function(e){return a.validateArgCount(\"Reference.remove\",0,1,arguments.length),ye(\"Reference.remove\",this.path),a.validateCallback(\"Reference.remove\",1,e,!0),this.set(null,e)},t.prototype.transaction=function(e,t,n){if(a.validateArgCount(\"Reference.transaction\",1,3,arguments.length),ye(\"Reference.transaction\",this.path),a.validateCallback(\"Reference.transaction\",1,e,!1),a.validateCallback(\"Reference.transaction\",2,t,!0),be(\"Reference.transaction\",3,n,!0),\".length\"===this.getKey()||\".keys\"===this.getKey())throw\"Reference.transaction failed: \"+this.getKey()+\" is a read-only object.\";void 0===n&&(n=!0);var r=new a.Deferred;\"function\"==typeof t&&r.promise.catch(function(){});var i=function(e,n,i){e?r.reject(e):r.resolve(new we(n,i)),\"function\"==typeof t&&t(e,n,i)};return this.repo.startTransaction(this.path,e,i,n),r.promise},t.prototype.setPriority=function(e,t){a.validateArgCount(\"Reference.setPriority\",1,2,arguments.length),ye(\"Reference.setPriority\",this.path),de(\"Reference.setPriority\",1,e,!1),a.validateCallback(\"Reference.setPriority\",2,t,!0);var n=new a.Deferred;return this.repo.setWithPriority(this.path.child(\".priority\"),e,null,n.wrapCallback(t)),n.promise},t.prototype.push=function(e,t){a.validateArgCount(\"Reference.push\",0,2,arguments.length),ye(\"Reference.push\",this.path),ce(\"Reference.push\",1,e,this.path,!0),a.validateCallback(\"Reference.push\",2,t,!0);var n,r=this.repo.serverTime(),i=Ee(r),o=this.child(i),s=this.child(i);return n=null!=e?o.set(e,t).then(function(){return s}):Promise.resolve(s),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),\"function\"==typeof t&&n.catch(function(){}),o},t.prototype.onDisconnect=function(){return ye(\"Reference.onDisconnect\",this.path),new _e(this.repo,this.path)},Object.defineProperty(t.prototype,\"database\",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"key\",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"parent\",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"root\",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),t}(nt);nt.__referenceConstructor=hn,Tt.__referenceConstructor=hn;var dn=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),fn=function(){function e(e,t,n){void 0===e&&(e=\"\"),void 0===t&&(t=null),void 0===n&&(n=new dn),this.name_=e,this.parent_=t,this.node_=n}return e.prototype.subTree=function(t){for(var n,r=t instanceof J?t:new J(t),i=this;null!==(n=r.getFront());)i=new e(n,i,a.safeGet(i.node_.children,n)||new dn),r=r.popFront();return i},e.prototype.getValue=function(){return this.node_.value},e.prototype.setValue=function(e){a.assert(void 0!==e,\"Cannot set value to undefined\"),this.node_.value=e,this.updateParents_()},e.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},e.prototype.hasChildren=function(){return this.node_.childCount>0},e.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},e.prototype.forEachChild=function(t){var n=this;L(this.node_.children,function(r,i){t(new e(r,n,i))})},e.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild(function(t){t.forEachDescendant(e,!0,n)}),t&&n&&e(this)},e.prototype.forEachAncestor=function(e,t){for(var n=t?this:this.parent();null!==n;){if(e(n))return!0;n=n.parent()}return!1},e.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild(function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)})},e.prototype.path=function(){return new J(null===this.parent_?this.name_:this.parent_.path()+\"/\"+this.name_)},e.prototype.name=function(){return this.name_},e.prototype.parent=function(){return this.parent_},e.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},e.prototype.updateChild_=function(e,t){var n=t.isEmpty(),r=a.contains(this.node_.children,e);n&&r?(delete this.node_.children[e],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[e]=t.node_,this.node_.childCount++,this.updateParents_())},e}(),pn=function(e){return e[e.RUN=0]=\"RUN\",e[e.SENT=1]=\"SENT\",e[e.COMPLETED=2]=\"COMPLETED\",e[e.SENT_NEEDS_ABORT=3]=\"SENT_NEEDS_ABORT\",e[e.NEEDS_ABORT=4]=\"NEEDS_ABORT\",e}({});an.MAX_TRANSACTION_RETRIES_=25,an.prototype.transactions_init_=function(){this.transactionQueueTree_=new fn},an.prototype.startTransaction=function(e,t,n,r){this.log_(\"transaction on \"+e);var i=function(){},o=new hn(this,e);o.on(\"value\",i);var s={path:e,update:t,onComplete:n,status:null,order:g(),applyLocally:r,retryCount:0,unwatcher:function(){o.off(\"value\",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(e);s.currentInputSnapshot=u;var c=s.update(u.val());if(void 0===c){if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var l=new Xe(s.currentInputSnapshot,new hn(this,s.path),Re);s.onComplete(null,!1,l)}}else{le(\"transaction failed: Data returned \",c,s.path),s.status=pn.RUN;var h=this.transactionQueueTree_.subTree(e),d=h.getValue()||[];d.push(s),h.setValue(d);var f=void 0;\"object\"==typeof c&&null!==c&&a.contains(c,\".priority\")?(f=a.safeGet(c,\".priority\"),a.assert(ue(f),\"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.\")):f=(this.serverSyncTree_.calcCompleteEventCache(e)||Be.EMPTY_NODE).getPriority().val(),f=f;var p=this.generateServerValues(),m=We(c,f),y=ot(m,p);s.currentOutputSnapshotRaw=m,s.currentOutputSnapshotResolved=y,s.currentWriteId=this.getNextWriteId_();var v=this.serverSyncTree_.applyUserOverwrite(e,y,s.currentWriteId,s.applyLocally);this.eventQueue_.raiseEventsForChangedPath(e,v),this.sendReadyTransactions_()}},an.prototype.getLatestState_=function(e,t){return this.serverSyncTree_.calcCompleteEventCache(e,t)||Be.EMPTY_NODE},an.prototype.sendReadyTransactions_=function(e){var t=this;if(void 0===e&&(e=this.transactionQueueTree_),e||this.pruneCompletedTransactionsBelowNode_(e),null!==e.getValue()){var n=this.buildTransactionQueue_(e);a.assert(n.length>0,\"Sending zero length transaction queue\"),n.every(function(e){return e.status===pn.RUN})&&this.sendTransactionQueue_(e.path(),n)}else e.hasChildren()&&e.forEachChild(function(e){t.sendReadyTransactions_(e)})},an.prototype.sendTransactionQueue_=function(e,t){for(var n=this,r=t.map(function(e){return e.currentWriteId}),i=this.getLatestState_(e,r),o=i,s=i.hash(),u=0;u<t.length;u++){var c=t[u];a.assert(c.status===pn.RUN,\"tryToSendTransactionQueue_: items in queue should all be run.\"),c.status=pn.SENT,c.retryCount++;var l=J.relativePath(e,c.path);o=o.updateChild(l,c.currentOutputSnapshotRaw)}var h=o.val(!0),d=e;this.server_.put(d.toString(),h,function(r){n.log_(\"transaction put response\",{path:d.toString(),status:r});var i=[];if(\"ok\"===r){for(var o=[],s=0;s<t.length;s++){if(t[s].status=pn.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(t[s].currentWriteId)),t[s].onComplete){var a=t[s].currentOutputSnapshotResolved,u=new hn(n,t[s].path),c=new Xe(a,u,Re);o.push(t[s].onComplete.bind(null,null,!0,c))}t[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(e)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(e,i),s=0;s<o.length;s++)K(o[s])}else{if(\"datastale\"===r)for(s=0;s<t.length;s++)t[s].status=t[s].status===pn.SENT_NEEDS_ABORT?pn.NEEDS_ABORT:pn.RUN;else for(I(\"transaction at \"+d.toString()+\" failed: \"+r),s=0;s<t.length;s++)t[s].status=pn.NEEDS_ABORT,t[s].abortReason=r;n.rerunTransactions_(e)}},s)},an.prototype.rerunTransactions_=function(e){var t=this.getAncestorTransactionNode_(e),n=t.path(),r=this.buildTransactionQueue_(t);return this.rerunTransactionQueue_(r,n),n},an.prototype.rerunTransactionQueue_=function(e,t){if(0!==e.length){for(var n=[],r=[],i=e.filter(function(e){return e.status===pn.RUN}).map(function(e){return e.currentWriteId}),o=0;o<e.length;o++){var s=e[o],u=J.relativePath(t,s.path),c=!1,l=void 0;if(a.assert(null!==u,\"rerunTransactionsUnderNode_: relativePath should not be null.\"),s.status===pn.NEEDS_ABORT)c=!0,l=s.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else if(s.status===pn.RUN)if(s.retryCount>=an.MAX_TRANSACTION_RETRIES_)c=!0,l=\"maxretry\",r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else{var h=this.getLatestState_(s.path,i);s.currentInputSnapshot=h;var d=e[o].update(h.val());if(void 0!==d){le(\"transaction failed: Data returned \",d,s.path);var f=We(d);\"object\"==typeof d&&null!=d&&a.contains(d,\".priority\")||(f=f.updatePriority(h.getPriority()));var p=s.currentWriteId,m=this.generateServerValues(),g=ot(f,m);s.currentOutputSnapshotRaw=f,s.currentOutputSnapshotResolved=g,s.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(p),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(s.path,g,s.currentWriteId,s.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(p,!0))}else c=!0,l=\"nodata\",r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(t,r),r=[],c&&(e[o].status=pn.COMPLETED,setTimeout(e[o].unwatcher,Math.floor(0)),e[o].onComplete))if(\"nodata\"===l){var y=new hn(this,e[o].path),v=new Xe(e[o].currentInputSnapshot,y,Re);n.push(e[o].onComplete.bind(null,null,!1,v))}else n.push(e[o].onComplete.bind(null,new Error(l),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),o=0;o<n.length;o++)K(n[o]);this.sendReadyTransactions_()}},an.prototype.getAncestorTransactionNode_=function(e){for(var t,n=this.transactionQueueTree_;null!==(t=e.getFront())&&null===n.getValue();)n=n.subTree(t),e=e.popFront();return n},an.prototype.buildTransactionQueue_=function(e){var t=[];return this.aggregateTransactionQueuesForNode_(e,t),t.sort(function(e,t){return e.order-t.order}),t},an.prototype.aggregateTransactionQueuesForNode_=function(e,t){var n=this,r=e.getValue();if(null!==r)for(var i=0;i<r.length;i++)t.push(r[i]);e.forEachChild(function(e){n.aggregateTransactionQueuesForNode_(e,t)})},an.prototype.pruneCompletedTransactionsBelowNode_=function(e){var t=this,n=e.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==pn.COMPLETED&&(n[r]=n[i],r++);n.length=r,e.setValue(n.length>0?n:null)}e.forEachChild(function(e){t.pruneCompletedTransactionsBelowNode_(e)})},an.prototype.abortTransactions_=function(e){var t=this,n=this.getAncestorTransactionNode_(e).path(),r=this.transactionQueueTree_.subTree(e);return r.forEachAncestor(function(e){t.abortTransactionsOnNode_(e)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(e){t.abortTransactionsOnNode_(e)}),n},an.prototype.abortTransactionsOnNode_=function(e){var t=e.getValue();if(null!==t){for(var n=[],r=[],i=-1,o=0;o<t.length;o++)t[o].status===pn.SENT_NEEDS_ABORT||(t[o].status===pn.SENT?(a.assert(i===o-1,\"All SENT items should be at beginning of queue.\"),i=o,t[o].status=pn.SENT_NEEDS_ABORT,t[o].abortReason=\"set\"):(a.assert(t[o].status===pn.RUN,\"Unexpected transaction status in abort\"),t[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(t[o].currentWriteId,!0)),t[o].onComplete&&n.push(t[o].onComplete.bind(null,new Error(\"set\"),!1,null))));for(-1===i?e.setValue(null):t.length=i+1,this.eventQueue_.raiseEventsForChangedPath(e.path(),r),o=0;o<n.length;o++)K(n[o])}};var mn,gn=function(){function e(){this.repos_={},this.useRestClient_=!1}return e.getInstance=function(){return mn||(mn=new e),mn},e.prototype.interrupt=function(){for(var e in this.repos_)for(var t in this.repos_[e])this.repos_[e][t].interrupt()},e.prototype.resume=function(){for(var e in this.repos_)for(var t in this.repos_[e])this.repos_[e][t].resume()},e.prototype.databaseFromApp=function(e,t){var n=t||e.options.databaseURL;void 0===n&&T(\"Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.initializeApp().\");var r=ne(n),i=r.repoInfo,o=void 0;return\"undefined\"!=typeof process&&(o=process.env[m]),o&&(i=(r=ne(n=\"http://\"+o+\"?ns=\"+i.namespace)).repoInfo),ve(\"Invalid Firebase Database URL\",1,r),r.path.isEmpty()||T(\"Database URL must point to the root of a Firebase Database (not including a child path).\"),this.createRepo(i,e).database},e.prototype.deleteRepo=function(e){var t=a.safeGet(this.repos_,e.app.name);t&&a.safeGet(t,e.repoInfo_.toURLString())===e||T(\"Database \"+e.app.name+\"(\"+e.repoInfo_+\") has already been deleted.\"),e.interrupt(),delete t[e.repoInfo_.toURLString()]},e.prototype.createRepo=function(e,t){var n=a.safeGet(this.repos_,t.name);n||(this.repos_[t.name]=n={});var r=a.safeGet(n,e.toURLString());return r&&T(\"Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.\"),r=new an(e,this.useRestClient_,t),n[e.toURLString()]=r,r},e.prototype.forceRestClient=function(e){this.useRestClient_=e},e}(),yn=function(){function e(e){this.repo_=e,e instanceof an||T(\"Don't call new Database() directly - please use firebase.database().\"),this.root_=new hn(e,J.Empty),this.INTERNAL=new vn(this)}return Object.defineProperty(e.prototype,\"app\",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),e.prototype.ref=function(e){return this.checkDeleted_(\"ref\"),a.validateArgCount(\"database.ref\",0,1,arguments.length),e instanceof hn?this.refFromURL(e.toString()):void 0!==e?this.root_.child(e):this.root_},e.prototype.refFromURL=function(e){var t=\"database.refFromURL\";this.checkDeleted_(t),a.validateArgCount(t,1,1,arguments.length);var n=ne(e);ve(t,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&T(t+\": Host name does not match the current database: (found \"+r.host+\" but expected \"+this.repo_.repoInfo_.host+\")\"),this.ref(n.path.toString())},e.prototype.checkDeleted_=function(e){null===this.repo_&&T(\"Cannot call \"+e+\" on a deleted database.\")},e.prototype.goOffline=function(){a.validateArgCount(\"database.goOffline\",0,0,arguments.length),this.checkDeleted_(\"goOffline\"),this.repo_.interrupt()},e.prototype.goOnline=function(){a.validateArgCount(\"database.goOnline\",0,0,arguments.length),this.checkDeleted_(\"goOnline\"),this.repo_.resume()},e.ServerValue={TIMESTAMP:{\".sv\":\"timestamp\"}},e}(),vn=function(){function e(e){this.database=e}return e.prototype.delete=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){return this.database.checkDeleted_(\"delete\"),gn.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},e}(),bn=Object.freeze({forceLongPolling:function(){Jt.forceDisallow(),Gt.forceAllow()},forceWebSockets:function(){Gt.forceDisallow()},isWebSocketsAvailable:function(){return Jt.isAvailable()},setSecurityDebugCallback:function(e,t){e.repo.persistentConnection_.securityDebugCallback_=t},stats:function(e,t){e.repo.stats(t)},statsIncrementCounter:function(e,t){e.repo.statsIncrementCounter(t)},dataUpdateCount:function(e){return e.repo.dataUpdateCount},interceptServerData:function(e,t){return e.repo.interceptServerData_(t)}}),_n=on;on.prototype.simpleListen=function(e,t){this.sendRequest(\"q\",{p:e},t)},on.prototype.echo=function(e,t){this.sendRequest(\"echo\",{d:e},t)};var wn=Object.freeze({DataConnection:_n,RealTimeConnection:en,hijackHash:function(e){var t=on.prototype.put;return on.prototype.put=function(n,r,i,o){void 0!==o&&(o=e()),t.call(this,n,r,i,o)},function(){on.prototype.put=t}},ConnectionTarget:te,queryIdentifier:function(e){return e.queryIdentifier()},forceRestClient:function(e){gn.getInstance().forceRestClient(e)}}),En=yn.ServerValue;function Cn(t){Yt=t.SDK_VERSION;var n=t.INTERNAL.registerService(\"database\",function(e,t,n){return gn.getInstance().databaseFromApp(e,n)},{Reference:hn,Query:nt,Database:yn,DataSnapshot:Xe,enableLogging:w,INTERNAL:bn,ServerValue:En,TEST_ACCESS:wn},null,!0);a.isNodeSdk()&&(e.exports=n)}Cn(o),t.DataSnapshot=Xe,t.Database=yn,t.OnDisconnect=_e,t.Query=nt,t.Reference=hn,t.ServerValue=En,t.enableLogging=w,t.registerDatabase=Cn},\"NhF+\":function(e,t,n){\"use strict\";var r=n(\"mrSG\"),i=n(\"wj3C\"),o=n.n(i),s=\"firebasestorage.googleapis.com\",a=\"storageBucket\",u=12e4,c=6e4,l=-9007199254740991,h=function(){function e(e,t){this.code_=f(e),this.message_=\"Firebase Storage: \"+t,this.serverResponse_=null,this.name_=\"FirebaseError\"}return e.prototype.codeProp=function(){return this.code},e.prototype.codeEquals=function(e){return f(e)===this.codeProp()},e.prototype.serverResponseProp=function(){return this.serverResponse_},e.prototype.setServerResponseProp=function(e){this.serverResponse_=e},Object.defineProperty(e.prototype,\"name\",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"code\",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"message\",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"serverResponse\",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),e}(),d={UNKNOWN:\"unknown\",OBJECT_NOT_FOUND:\"object-not-found\",BUCKET_NOT_FOUND:\"bucket-not-found\",PROJECT_NOT_FOUND:\"project-not-found\",QUOTA_EXCEEDED:\"quota-exceeded\",UNAUTHENTICATED:\"unauthenticated\",UNAUTHORIZED:\"unauthorized\",RETRY_LIMIT_EXCEEDED:\"retry-limit-exceeded\",INVALID_CHECKSUM:\"invalid-checksum\",CANCELED:\"canceled\",INVALID_EVENT_NAME:\"invalid-event-name\",INVALID_URL:\"invalid-url\",INVALID_DEFAULT_BUCKET:\"invalid-default-bucket\",NO_DEFAULT_BUCKET:\"no-default-bucket\",CANNOT_SLICE_BLOB:\"cannot-slice-blob\",SERVER_FILE_WRONG_SIZE:\"server-file-wrong-size\",NO_DOWNLOAD_URL:\"no-download-url\",INVALID_ARGUMENT:\"invalid-argument\",INVALID_ARGUMENT_COUNT:\"invalid-argument-count\",APP_DELETED:\"app-deleted\",INVALID_ROOT_OPERATION:\"invalid-root-operation\",INVALID_FORMAT:\"invalid-format\",INTERNAL_ERROR:\"internal-error\"};function f(e){return\"storage/\"+e}function p(){return new h(d.UNKNOWN,\"An unknown error occurred, please check the error payload for server response.\")}function m(){return new h(d.CANCELED,\"User canceled the upload/download.\")}function g(){return new h(d.CANNOT_SLICE_BLOB,\"Cannot slice blob for upload. Please retry the upload.\")}function y(){return new h(d.NO_DOWNLOAD_URL,\"The given file does not have any download URLs.\")}function v(e,t,n){return new h(d.INVALID_ARGUMENT,\"Invalid argument in `\"+t+\"` at index \"+e+\": \"+n)}function b(){return new h(d.APP_DELETED,\"The Firebase app was deleted.\")}function _(e,t){return new h(d.INVALID_FORMAT,\"String does not match format '\"+e+\"': \"+t)}function w(e){throw new h(d.INTERNAL_ERROR,\"Internal error: \"+e)}var E={RAW:\"raw\",BASE64:\"base64\",BASE64URL:\"base64url\",DATA_URL:\"data_url\"};function C(e){switch(e){case E.RAW:case E.BASE64:case E.BASE64URL:case E.DATA_URL:return;default:throw\"Expected one of the event types: [\"+E.RAW+\", \"+E.BASE64+\", \"+E.BASE64URL+\", \"+E.DATA_URL+\"].\"}}var S=function(){return function(e,t){this.data=e,this.contentType=t||null}}();function T(e,t){switch(e){case E.RAW:return new S(I(t));case E.BASE64:case E.BASE64URL:return new S(O(e,t));case E.DATA_URL:return new S((n=new N(t)).base64?O(E.BASE64,n.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw _(E.DATA_URL,\"Malformed data URL.\")}return I(t)}(n.rest),new N(t).contentType)}var n;throw p()}function I(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<e.length-1&&56320==(64512&e.charCodeAt(n+1))){var i=r,o=e.charCodeAt(++n);t.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189);else 56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function O(e,t){switch(e){case E.BASE64:var n=-1!==t.indexOf(\"-\"),r=-1!==t.indexOf(\"_\");if(n||r)throw _(e,\"Invalid character '\"+(n?\"-\":\"_\")+\"' found: is it base64url encoded?\");break;case E.BASE64URL:var i=-1!==t.indexOf(\"+\"),o=-1!==t.indexOf(\"/\");if(i||o)throw _(e,\"Invalid character '\"+(i?\"+\":\"/\")+\"' found: is it base64 encoded?\");t=t.replace(/-/g,\"+\").replace(/_/g,\"/\")}var s;try{s=atob(t)}catch(c){throw _(e,\"Invalid character found\")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var N=function(){return function(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw _(E.DATA_URL,\"Must be formatted 'data:[<mediatype>][;base64],<data>\");var n,r=t[1]||null;null!=r&&(this.base64=(n=r).length>=\";base64\".length&&\";base64\"===n.substring(n.length-\";base64\".length),this.contentType=this.base64?r.substring(0,r.length-\";base64\".length):r),this.rest=e.substring(e.indexOf(\",\")+1)}}(),A={STATE_CHANGED:\"state_changed\"},R={RUNNING:\"running\",PAUSING:\"pausing\",PAUSED:\"paused\",SUCCESS:\"success\",CANCELING:\"canceling\",CANCELED:\"canceled\",ERROR:\"error\"},D={RUNNING:\"running\",PAUSED:\"paused\",SUCCESS:\"success\",CANCELED:\"canceled\",ERROR:\"error\"};function k(e){switch(e){case R.RUNNING:case R.PAUSING:case R.CANCELING:return D.RUNNING;case R.PAUSED:return D.PAUSED;case R.SUCCESS:return D.SUCCESS;case R.CANCELED:return D.CANCELED;case R.ERROR:default:return D.ERROR}}function x(e){return null!=e}function P(e){return void 0!==e}function L(e){return\"function\"==typeof e}function M(e){return\"object\"==typeof e}function j(e){return M(e)&&null!==e}function F(e){return\"string\"==typeof e||e instanceof String}function U(e){return V(e)&&Number.isInteger(e)}function V(e){return\"number\"==typeof e||e instanceof Number}function q(e){return B()&&e instanceof Blob}function B(){return\"undefined\"!=typeof Blob}var $=function(e){return e[e.NO_ERROR=0]=\"NO_ERROR\",e[e.NETWORK_ERROR=1]=\"NETWORK_ERROR\",e[e.ABORT=2]=\"ABORT\",e}({}),z=function(){function e(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=$.NO_ERROR,this.sendPromise_=new Promise(function(t){e.xhr_.addEventListener(\"abort\",function(){e.errorCode_=$.ABORT,t(e)}),e.xhr_.addEventListener(\"error\",function(){e.errorCode_=$.NETWORK_ERROR,t(e)}),e.xhr_.addEventListener(\"load\",function(){t(e)})})}return e.prototype.send=function(e,t,n,r){if(this.sent_)throw w(\"cannot .send() more than once\");if(this.sent_=!0,this.xhr_.open(t,e,!0),x(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return x(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw w(\"cannot .getErrorCode() before sending\");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw w(\"cannot .getStatus() before sending\");try{return this.xhr_.status}catch(e){return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw w(\"cannot .getResponseText() before sending\");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},e.prototype.addUploadProgressListener=function(e){x(this.xhr_.upload)&&this.xhr_.upload.addEventListener(\"progress\",e)},e.prototype.removeUploadProgressListener=function(e){x(this.xhr_.upload)&&this.xhr_.upload.removeEventListener(\"progress\",e)},e}(),W=function(){function e(){}return e.prototype.createXhrIo=function(){return new z},e}();function H(){return\"undefined\"!=typeof BlobBuilder?BlobBuilder:\"undefined\"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Q(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=H();if(void 0!==n){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}if(B())return new Blob(e);throw Error(\"This browser doesn't seem to support creating Blobs\")}var G=function(){function e(e,t){var n=0,r=\"\";q(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(q(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}return new e(new Uint8Array(this.data_.buffer,t,n-t),!0)},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(B()){var r=t.map(function(t){return t instanceof e?t.data_:t});return new e(Q.apply(null,r))}var i=t.map(function(e){return F(e)?T(E.RAW,e).data:e.data_}),o=0;i.forEach(function(e){o+=e.byteLength});var s=new Uint8Array(o),a=0;return i.forEach(function(e){for(var t=0;t<e.length;t++)s[a++]=e[t]}),new e(s,!0)},e.prototype.uploadData=function(){return this.data_},e}(),K=function(){function e(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(e.prototype,\"path\",{get:function(){return this.path_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"isRoot\",{get:function(){return 0===this.path.length},enumerable:!0,configurable:!0}),e.prototype.fullServerUrl=function(){var e=encodeURIComponent;return\"/b/\"+e(this.bucket)+\"/o/\"+e(this.path)},e.prototype.bucketOnlyServerUrl=function(){return\"/b/\"+encodeURIComponent(this.bucket)+\"/o\"},e.makeFromBucketSpec=function(t){var n;try{n=e.makeFromUrl(t)}catch(r){return new e(t,\"\")}if(\"\"===n.path)return n;throw new h(d.INVALID_DEFAULT_BUCKET,\"Invalid default bucket '\"+t+\"'.\")},e.makeFromUrl=function(t){for(var n=null,r=new RegExp(\"^gs://([A-Za-z0-9.\\\\-_]+)(/(.*))?$\",\"i\"),i=s.replace(/[.]/g,\"\\\\.\"),o=[{regex:r,indices:{bucket:1,path:3},postModify:function(e){\"/\"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(\"^https?://\"+i+\"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\\\-_]+)/o(/([^?#]*).*)?$\",\"i\"),indices:{bucket:1,path:3},postModify:function(e){e.path_=decodeURIComponent(e.path)}}],a=0;a<o.length;a++){var u=o[a],c=u.regex.exec(t);if(c){var l=c[u.indices.path];l||(l=\"\"),n=new e(c[u.indices.bucket],l),u.postModify(n);break}}if(null==n)throw function(e){return new h(d.INVALID_URL,\"Invalid URL '\"+e+\"'.\")}(t);return n},e}();function Y(e){var t,n;try{t=JSON.parse(e)}catch(r){return null}return M(n=t)&&!Array.isArray(n)?t:null}function X(e,t){var n=t.split(\"/\").filter(function(e){return e.length>0}).join(\"/\");return 0===e.length?n:e+\"/\"+n}function J(e){var t=e.lastIndexOf(\"/\",e.length-2);return-1===t?e:e.slice(t+1)}function Z(e){return\"https://\"+s+\"/v0\"+e}function ee(e){var t=encodeURIComponent,n=\"?\";for(var r in e)e.hasOwnProperty(r)&&(n=n+(t(r)+\"=\")+t(e[r])+\"&\");return n.slice(0,-1)}function te(e,t){return t}var ne=function(){return function(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||te}}(),re=null;function ie(e,t,n){var r=Y(t);return null===r?null:function(e,t,n){for(var r={type:\"file\"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,t[s.server])}return function(e,t){Object.defineProperty(e,\"ref\",{get:function(){var n=new K(e.bucket,e.fullPath);return t.makeStorageReference(n)}})}(r,e),r}(e,r,n)}function oe(e,t){for(var n={},r=t.length,i=0;i<r;i++){var o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}function se(e){if(!M(e)||!e)throw\"Expected Metadata object.\";for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];if(\"customMetadata\"===t){if(!M(n))throw\"Expected object for 'customMetadata' mapping.\"}else if(j(n))throw\"Mapping for '\"+t+\"' cannot be an object.\"}}var ae=\"maxResults\",ue=1e3,ce=\"pageToken\",le=\"prefixes\",he=\"items\";function de(e){if(!M(e)||!e)throw\"Expected ListOptions object.\";for(var t in e)if(t===ae){if(!U(e[ae])||e[ae]<=0)throw\"Expected maxResults to be a positive number.\";if(e[ae]>1e3)throw\"Expected maxResults to be less than or equal to \"+ue+\".\"}else{if(t!==ce)throw\"Unknown option: \"+t;if(e[ce]&&!F(e[ce]))throw\"Expected pageToken to be string.\"}}var fe=function(){return function(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function pe(e){if(!e)throw p()}function me(e,t){return function(n,r){var i=ie(e,r,t);return pe(null!==i),i}}function ge(e){return function(t,n){var r;return(r=401===t.getStatus()?new h(d.UNAUTHENTICATED,\"User is not authenticated, please authenticate using Firebase Authentication and try again.\"):402===t.getStatus()?new h(d.QUOTA_EXCEEDED,\"Quota for bucket '\"+e.bucket+\"' exceeded, please view quota on https://firebase.google.com/pricing/.\"):403===t.getStatus()?new h(d.UNAUTHORIZED,\"User does not have permission to access '\"+e.path+\"'.\"):n).setServerResponseProp(n.serverResponseProp()),r}}function ye(e){var t=ge(e);return function(n,r){var i=t(n,r);return 404===n.getStatus()&&(i=new h(d.OBJECT_NOT_FOUND,\"Object '\"+e.path+\"' does not exist.\")),i.setServerResponseProp(r.serverResponseProp()),i}}function ve(e,t,n){var r=Z(t.fullServerUrl()),i=e.maxOperationRetryTime(),o=new fe(r,\"GET\",me(e,n),i);return o.errorHandler=ye(t),o}function be(e,t,n,r,i){var o={};o.prefix=t.isRoot?\"\":t.path+\"/\",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=Z(t.bucketOnlyServerUrl()),u=e.maxOperationRetryTime(),c=new fe(s,\"GET\",function(e){return function(t,n){var r=function(e,t){var r=Y(n);return null===r?null:function(e,t){var n={prefixes:[],items:[],nextPageToken:t.nextPageToken},r=e.bucket();if(null===r)throw new h(d.NO_DEFAULT_BUCKET,\"No default bucket found. Did you set the '\"+a+\"' property when initializing the app?\");if(t[le])for(var i=0,o=t[le];i<o.length;i++){var s=o[i].replace(/\\/$/,\"\"),u=e.makeStorageReference(new K(r,s));n.prefixes.push(u)}if(t[he])for(var c=0,l=t[he];c<l.length;c++)u=e.makeStorageReference(new K(r,l[c].name)),n.items.push(u);return n}(e,r)}(e);return pe(null!==r),r}}(e),u);return c.urlParams=o,c.errorHandler=ge(t),c}function _e(e,t,n){var r=Z(t.fullServerUrl()),i=e.maxOperationRetryTime(),o=new fe(r,\"GET\",function(e,t){return function(n,r){var i=ie(e,r,t);return pe(null!==i),function(e,t){var n=Y(r);if(null===n)return null;if(!F(n.downloadTokens))return null;var i=n.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(\",\").map(function(t){var n=e.fullPath;return Z(\"/b/\"+o(e.bucket)+\"/o/\"+o(n))+ee({alt:\"media\",token:t})})[0]}(i)}}(e,n),i);return o.errorHandler=ye(t),o}function we(e,t,n,r){var i=Z(t.fullServerUrl()),o=oe(n,r),s=e.maxOperationRetryTime(),a=new fe(i,\"PATCH\",me(e,r),s);return a.headers={\"Content-Type\":\"application/json; charset=utf-8\"},a.body=o,a.errorHandler=ye(t),a}function Ee(e,t){var n=Z(t.fullServerUrl()),r=e.maxOperationRetryTime(),i=new fe(n,\"DELETE\",function(e,t){},r);return i.successCodes=[200,204],i.errorHandler=ye(t),i}function Ce(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return t&&t.type()||\"application/octet-stream\"}(0,t)),r}var Se=function(){return function(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}();function Te(e,t){var n=null;try{n=e.getResponseHeader(\"X-Goog-Upload-Status\")}catch(r){pe(!1)}return pe(!!n&&-1!==(t||[\"active\"]).indexOf(n)),n}var Ie=function(){return function(e,t,n){if(L(e)||x(t)||x(n))this.next=e,this.error=t||null,this.complete=n||null;else{var r=e;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}}}(),Oe=function(){return function(e,t,n,r,i,o){this.bytesTransferred=e,this.totalBytes=t,this.state=n,this.metadata=r,this.task=i,this.ref=o}}();function Ne(e,t,n){for(var r=t.length,i=t.length,o=0;o<t.length;o++)if(t[o].optional){r=o;break}var s,a,u,c;if(!(r<=n.length&&n.length<=i))throw(s=r)===(a=i)?(u=s,c=1===s?\"argument\":\"arguments\"):(u=\"between \"+s+\" and \"+a,c=\"arguments\"),new h(d.INVALID_ARGUMENT_COUNT,\"Invalid argument count in `\"+e+\"`: Expected \"+u+\" \"+c+\", received \"+n.length+\".\");for(o=0;o<n.length;o++)try{t[o].validator(n[o])}catch(l){throw l instanceof Error?v(o,e,l.message):v(o,e,l)}}var Ae=function(){return function(e,t){var n=this;this.validator=function(t){n.optional&&!P(t)||e(t)},this.optional=!!t}}();function Re(e,t){function n(e){if(!F(e))throw\"Expected string.\"}var r,i,o;return e?(i=n,o=e,r=function(e){i(e),o(e)}):r=n,new Ae(r,t)}function De(){return new Ae(function(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer||B()&&e instanceof Blob))throw\"Expected Blob or File.\"})}function ke(e){return new Ae(se,e)}function xe(e){return new Ae(de,e)}function Pe(){return new Ae(function(e){if(!(V(e)&&e>=0))throw\"Expected a number 0 or greater.\"})}function Le(e,t){return new Ae(function(t){if(!(null===t||x(t)&&t instanceof Object))throw\"Expected an Object.\";null!=e&&e(t)},t)}function Me(e){return new Ae(function(e){if(null!==e&&!L(e))throw\"Expected a Function.\"},e)}function je(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then(function(){return e.apply(void 0,t)})}}var Fe=function(){function e(e,t,n,r,i,o){var s=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=e,this.authWrapper_=t,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=R.RUNNING,this.errorHandler_=function(e){s.request_=null,s.chunkMultiplier_=1,e.codeEquals(d.CANCELED)?(s.needToFetchStatus_=!0,s.completeTransitions_()):(s.error_=e,s.transition_(R.ERROR))},this.metadataErrorHandler_=function(e){s.request_=null,e.codeEquals(d.CANCELED)?s.completeTransitions_():(s.error_=e,s.transition_(R.ERROR))},this.promise_=new Promise(function(e,t){s.resolve_=e,s.reject_=t,s.start_()}),this.promise_.then(null,function(){})}return e.prototype.makeProgressCallback_=function(){var e=this,t=this.transferred_;return function(n){return e.updateProgress_(t+n)}},e.prototype.shouldDoResumable_=function(e){return e.size()>262144},e.prototype.start_=function(){this.state_===R.RUNNING&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},e.prototype.resolveToken_=function(e){var t=this;this.authWrapper_.getAuthToken().then(function(n){switch(t.state_){case R.RUNNING:e(n);break;case R.CANCELING:t.transition_(R.CANCELED);break;case R.PAUSING:t.transition_(R.PAUSED)}})},e.prototype.createResumable_=function(){var e=this;this.resolveToken_(function(t){var n=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),s=Ce(t,r,i),a={name:s.fullPath},u=Z(o),c={\"X-Goog-Upload-Protocol\":\"resumable\",\"X-Goog-Upload-Command\":\"start\",\"X-Goog-Upload-Header-Content-Length\":r.size(),\"X-Goog-Upload-Header-Content-Type\":s.contentType,\"Content-Type\":\"application/json; charset=utf-8\"},l=oe(s,n),h=e.maxUploadRetryTime(),d=new fe(u,\"POST\",function(e){var t;Te(e);try{t=e.getResponseHeader(\"X-Goog-Upload-URL\")}catch(n){pe(!1)}return pe(F(t)),t},h);return d.urlParams=a,d.headers=c,d.body=l,d.errorHandler=ge(t),d}(e.authWrapper_,e.location_,e.mappings_,e.blob_,e.metadata_),r=e.authWrapper_.makeRequest(n,t);e.request_=r,r.getPromise().then(function(t){e.request_=null,e.uploadUrl_=t,e.needToFetchStatus_=!1,e.completeTransitions_()},e.errorHandler_)})},e.prototype.fetchStatus_=function(){var e=this,t=this.uploadUrl_;this.resolveToken_(function(n){var r=function(t,n,r,i){var o=e.authWrapper_.maxUploadRetryTime(),s=new fe(r,\"POST\",function(e){var t=Te(e,[\"active\",\"final\"]),n=null;try{n=e.getResponseHeader(\"X-Goog-Upload-Size-Received\")}catch(o){pe(!1)}n||pe(!1);var r=Number(n);return pe(!isNaN(r)),new Se(r,i.size(),\"final\"===t)},o);return s.headers={\"X-Goog-Upload-Command\":\"query\"},s.errorHandler=ge(n),s}(0,e.location_,t,e.blob_),i=e.authWrapper_.makeRequest(r,n);e.request_=i,i.getPromise().then(function(t){t=t,e.request_=null,e.updateProgress_(t.current),e.needToFetchStatus_=!1,t.finalized&&(e.needToFetchMetadata_=!0),e.completeTransitions_()},e.errorHandler_)})},e.prototype.continueUpload_=function(){var e=this,t=262144*this.chunkMultiplier_,n=new Se(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_(function(i){var o;try{o=function(e,t,n,r,i,o,s,a){var u=new Se(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new h(d.SERVER_FILE_WRONG_SIZE,\"Server recorded incorrect upload file size, please retry the upload.\");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var f=u.current,p={\"X-Goog-Upload-Command\":l===c?\"upload, finalize\":\"upload\",\"X-Goog-Upload-Offset\":u.current},m=r.slice(f,f+l);if(null===m)throw g();var y=t.maxUploadRetryTime(),v=new fe(n,\"POST\",function(e,n){var i,s=Te(e,[\"active\",\"final\"]),a=u.current+l,c=r.size();return i=\"final\"===s?me(t,o)(e,n):null,new Se(a,c,\"final\"===s,i)},y);return v.headers=p,v.body=m.uploadData(),v.progressCallback=a||null,v.errorHandler=ge(e),v}(e.location_,e.authWrapper_,r,e.blob_,t,e.mappings_,n,e.makeProgressCallback_())}catch(a){return e.error_=a,void e.transition_(R.ERROR)}var s=e.authWrapper_.makeRequest(o,i);e.request_=s,s.getPromise().then(function(t){e.increaseMultiplier_(),e.request_=null,e.updateProgress_(t.current),t.finalized?(e.metadata_=t.metadata,e.transition_(R.SUCCESS)):e.completeTransitions_()},e.errorHandler_)})},e.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},e.prototype.fetchMetadata_=function(){var e=this;this.resolveToken_(function(t){var n=ve(e.authWrapper_,e.location_,e.mappings_),r=e.authWrapper_.makeRequest(n,t);e.request_=r,r.getPromise().then(function(t){e.request_=null,e.metadata_=t,e.transition_(R.SUCCESS)},e.metadataErrorHandler_)})},e.prototype.oneShotUpload_=function(){var e=this;this.resolveToken_(function(t){var n=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),s={\"X-Goog-Upload-Protocol\":\"multipart\"},a=function(){for(var e=\"\",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();s[\"Content-Type\"]=\"multipart/related; boundary=\"+a;var u=Ce(t,r,i),c=oe(u,n),l=G.getBlob(\"--\"+a+\"\\r\\nContent-Type: application/json; charset=utf-8\\r\\n\\r\\n\"+c+\"\\r\\n--\"+a+\"\\r\\nContent-Type: \"+u.contentType+\"\\r\\n\\r\\n\",r,\"\\r\\n--\"+a+\"--\");if(null===l)throw g();var h={name:u.fullPath},d=Z(o),f=e.maxUploadRetryTime(),p=new fe(d,\"POST\",me(e,n),f);return p.urlParams=h,p.headers=s,p.body=l.uploadData(),p.errorHandler=ge(t),p}(e.authWrapper_,e.location_,e.mappings_,e.blob_,e.metadata_),r=e.authWrapper_.makeRequest(n,t);e.request_=r,r.getPromise().then(function(t){e.request_=null,e.metadata_=t,e.updateProgress_(e.blob_.size()),e.transition_(R.SUCCESS)},e.errorHandler_)})},e.prototype.updateProgress_=function(e){var t=this.transferred_;this.transferred_=e,this.transferred_!==t&&this.notifyObservers_()},e.prototype.transition_=function(e){if(this.state_!==e)switch(e){case R.CANCELING:case R.PAUSING:this.state_=e,null!==this.request_&&this.request_.cancel();break;case R.RUNNING:var t=this.state_===R.PAUSED;this.state_=e,t&&(this.notifyObservers_(),this.start_());break;case R.PAUSED:this.state_=e,this.notifyObservers_();break;case R.CANCELED:this.error_=m(),this.state_=e,this.notifyObservers_();break;case R.ERROR:case R.SUCCESS:this.state_=e,this.notifyObservers_()}},e.prototype.completeTransitions_=function(){switch(this.state_){case R.PAUSING:this.transition_(R.PAUSED);break;case R.CANCELING:this.transition_(R.CANCELED);break;case R.RUNNING:this.start_()}},Object.defineProperty(e.prototype,\"snapshot\",{get:function(){var e=k(this.state_);return new Oe(this.transferred_,this.blob_.size(),e,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),e.prototype.on=function(e,t,n,r){function i(){if(e!==A.STATE_CHANGED)throw\"Expected one of the event types: [\"+A.STATE_CHANGED+\"].\"}var o=\"Expected a function or an Object with one of `next`, `error`, `complete` properties.\",s=Me(!0).validator,a=Le(null,!0).validator;function u(e){try{return void s(e)}catch(t){}try{if(a(e),!(P(e.next)||P(e.error)||P(e.complete)))throw\"\";return}catch(t){throw o}}var c=[Re(i),Le(u,!0),Me(!0),Me(!0)];Ne(\"on\",c,arguments);var l=this;function h(e){return function(t,n,i){null!==e&&Ne(\"on\",e,arguments);var o=new Ie(t,n,r);return l.addObserver_(o),function(){l.removeObserver_(o)}}}function d(e){if(null===e)throw o;u(e)}var f=[Le(d),Me(!0),Me(!0)],p=!(P(t)||P(n)||P(r));return p?h(f):h(null)(t,n,r)},e.prototype.then=function(e,t){return this.promise_.then(e,t)},e.prototype.catch=function(e){return this.then(null,e)},e.prototype.addObserver_=function(e){this.observers_.push(e),this.notifyObserver_(e)},e.prototype.removeObserver_=function(e){var t=this.observers_.indexOf(e);-1!==t&&this.observers_.splice(t,1)},e.prototype.notifyObservers_=function(){var e=this;this.finishPromise_(),this.observers_.slice().forEach(function(t){e.notifyObserver_(t)})},e.prototype.finishPromise_=function(){if(null!==this.resolve_){var e=!0;switch(k(this.state_)){case D.SUCCESS:je(this.resolve_.bind(null,this.snapshot))();break;case D.CANCELED:case D.ERROR:je(this.reject_.bind(null,this.error_))();break;default:e=!1}e&&(this.resolve_=null,this.reject_=null)}},e.prototype.notifyObserver_=function(e){switch(k(this.state_)){case D.RUNNING:case D.PAUSED:e.next&&je(e.next.bind(e,this.snapshot))();break;case D.SUCCESS:e.complete&&je(e.complete.bind(e))();break;case D.CANCELED:case D.ERROR:e.error&&je(e.error.bind(e,this.error_))();break;default:e.error&&je(e.error.bind(e,this.error_))()}},e.prototype.resume=function(){Ne(\"resume\",[],arguments);var e=this.state_===R.PAUSED||this.state_===R.PAUSING;return e&&this.transition_(R.RUNNING),e},e.prototype.pause=function(){Ne(\"pause\",[],arguments);var e=this.state_===R.RUNNING;return e&&this.transition_(R.PAUSING),e},e.prototype.cancel=function(){Ne(\"cancel\",[],arguments);var e=this.state_===R.RUNNING||this.state_===R.PAUSING;return e&&this.transition_(R.CANCELING),e},e}(),Ue=function(){function e(e,t){this.authWrapper=e,this.location=t instanceof K?t:K.makeFromUrl(t)}return e.prototype.toString=function(){return Ne(\"toString\",[],arguments),\"gs://\"+this.location.bucket+\"/\"+this.location.path},e.prototype.newRef=function(t,n){return new e(t,n)},e.prototype.mappings=function(){return function(){if(re)return re;var e=[];e.push(new ne(\"bucket\")),e.push(new ne(\"generation\")),e.push(new ne(\"metageneration\")),e.push(new ne(\"name\",\"fullPath\",!0));var t=new ne(\"name\");t.xform=function(e,t){return function(e){return!F(e)||e.length<2?e:J(e)}(t)},e.push(t);var n=new ne(\"size\");return n.xform=function(e,t){return x(t)?Number(t):t},e.push(n),e.push(new ne(\"timeCreated\")),e.push(new ne(\"updated\")),e.push(new ne(\"md5Hash\",null,!0)),e.push(new ne(\"cacheControl\",null,!0)),e.push(new ne(\"contentDisposition\",null,!0)),e.push(new ne(\"contentEncoding\",null,!0)),e.push(new ne(\"contentLanguage\",null,!0)),e.push(new ne(\"contentType\",null,!0)),e.push(new ne(\"metadata\",\"customMetadata\",!0)),re=e}()},e.prototype.child=function(e){Ne(\"child\",[Re()],arguments);var t=X(this.location.path,e),n=new K(this.location.bucket,t);return this.newRef(this.authWrapper,n)},Object.defineProperty(e.prototype,\"parent\",{get:function(){var e=function(e){if(0===e.length)return null;var t=e.lastIndexOf(\"/\");return-1===t?\"\":e.slice(0,t)}(this.location.path);if(null===e)return null;var t=new K(this.location.bucket,e);return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"root\",{get:function(){var e=new K(this.location.bucket,\"\");return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"bucket\",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"fullPath\",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"name\",{get:function(){return J(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"storage\",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),e.prototype.put=function(e,t){return void 0===t&&(t=null),Ne(\"put\",[De(),ke(!0)],arguments),this.throwIfRoot_(\"put\"),new Fe(this,this.authWrapper,this.location,this.mappings(),new G(e),t)},e.prototype.putString=function(e,t,n){void 0===t&&(t=E.RAW),Ne(\"putString\",[Re(),Re(C,!0),ke(!0)],arguments),this.throwIfRoot_(\"putString\");var r=T(t,e),i=Object.assign({},n);return!x(i.contentType)&&x(r.contentType)&&(i.contentType=r.contentType),new Fe(this,this.authWrapper,this.location,this.mappings(),new G(r.data,!0),i)},e.prototype.delete=function(){var e=this;return Ne(\"delete\",[],arguments),this.throwIfRoot_(\"delete\"),this.authWrapper.getAuthToken().then(function(t){var n=Ee(e.authWrapper,e.location);return e.authWrapper.makeRequest(n,t).getPromise()})},e.prototype.listAll=function(){Ne(\"listAll\",[],arguments);var e={prefixes:[],items:[]};return this.listAllHelper(e).then(function(){return e})},e.prototype.listAllHelper=function(e,t){return Object(r.__awaiter)(this,void 0,void 0,function(){var n,i,o;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return[4,this.list({pageToken:t})];case 1:return n=r.sent(),(i=e.prefixes).push.apply(i,n.prefixes),(o=e.items).push.apply(o,n.items),null==n.nextPageToken?[3,3]:[4,this.listAllHelper(e,n.nextPageToken)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.list=function(e){Ne(\"list\",[xe(!0)],arguments);var t=this;return this.authWrapper.getAuthToken().then(function(n){var r=e||{},i=be(t.authWrapper,t.location,\"/\",r.pageToken,r.maxResults);return t.authWrapper.makeRequest(i,n).getPromise()})},e.prototype.getMetadata=function(){var e=this;return Ne(\"getMetadata\",[],arguments),this.throwIfRoot_(\"getMetadata\"),this.authWrapper.getAuthToken().then(function(t){var n=ve(e.authWrapper,e.location,e.mappings());return e.authWrapper.makeRequest(n,t).getPromise()})},e.prototype.updateMetadata=function(e){var t=this;return Ne(\"updateMetadata\",[ke()],arguments),this.throwIfRoot_(\"updateMetadata\"),this.authWrapper.getAuthToken().then(function(n){var r=we(t.authWrapper,t.location,e,t.mappings());return t.authWrapper.makeRequest(r,n).getPromise()})},e.prototype.getDownloadURL=function(){var e=this;return Ne(\"getDownloadURL\",[],arguments),this.throwIfRoot_(\"getDownloadURL\"),this.authWrapper.getAuthToken().then(function(t){var n=_e(e.authWrapper,e.location,e.mappings());return e.authWrapper.makeRequest(n,t).getPromise().then(function(e){if(null===e)throw y();return e})})},e.prototype.throwIfRoot_=function(e){if(\"\"===this.location.path)throw function(e){return new h(d.INVALID_ROOT_OPERATION,\"The operation '\"+e+\"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').\")}(e)},e}(),Ve=function(){function e(e){this.promise_=Promise.reject(e)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){},e}(),qe=function(){function e(){this.map=new Map,this.id=l}return e.prototype.addRequest=function(e){var t=this,n=this.id;this.id++,this.map.set(n,e),e.getPromise().then(function(){return t.map.delete(n)},function(){return t.map.delete(n)})},e.prototype.clear=function(){this.map.forEach(function(e){e&&e.cancel(!0)}),this.map.clear()},e}(),Be=function(){function e(t,n,r,i,o){if(this.bucket_=null,this.deleted_=!1,this.app_=t,null!==this.app_){var s=this.app_.options;x(s)&&(this.bucket_=e.extractBucket_(s))}this.storageRefMaker_=n,this.requestMaker_=r,this.pool_=o,this.service_=i,this.maxOperationRetryTime_=u,this.maxUploadRetryTime_=c,this.requestMap_=new qe}return e.extractBucket_=function(e){var t=e[a]||null;return null==t?null:K.makeFromBucketSpec(t).bucket},e.prototype.getAuthToken=function(){return null!==this.app_&&x(this.app_.INTERNAL)&&x(this.app_.INTERNAL.getToken)?this.app_.INTERNAL.getToken().then(function(e){return null!==e?e.accessToken:null},function(){return null}):Promise.resolve(null)},e.prototype.bucket=function(){if(this.deleted_)throw b();return this.bucket_},e.prototype.service=function(){return this.service_},e.prototype.makeStorageReference=function(e){return this.storageRefMaker_(this,e)},e.prototype.makeRequest=function(e,t){if(this.deleted_)return new Ve(b());var n=this.requestMaker_(e,t,this.pool_);return this.requestMap_.addRequest(n),n},e.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},e.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},e.prototype.setMaxUploadRetryTime=function(e){this.maxUploadRetryTime_=e},e.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},e.prototype.setMaxOperationRetryTime=function(e){this.maxOperationRetryTime_=e},e}(),$e=function(){function e(e,t,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(e,t){h.resolve_=e,h.reject_=t,h.start_()})}return e.prototype.start_=function(){var e=this;function t(t,n){var r,i=e.resolve_,o=e.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=e.callback_(s,s.getResponseText());P(a)?i(a):i()}catch(u){o(u)}else null!==s?((r=p()).setServerResponseProp(s.getResponseText()),o(e.errorCallback_?e.errorCallback_(s,r):r)):o(r=n.canceled?e.appDelete_?b():m():new h(d.RETRY_LIMIT_EXCEEDED,\"Max retry time for operation exceeded, please try again.\"))}this.canceled_?t(0,new ze(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,o=!1,s=0;function a(){return 2===s}var u=!1;function c(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];u||(u=!0,t.apply(null,e))}function l(t){i=setTimeout(function(){i=null,e(h,a())},t)}function h(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];u||(e?c.call.apply(c,[null,e].concat(n)):a()||o?c.call.apply(c,[null,e].concat(n)):(r<64&&(r*=2),1===s?(s=2,t=0):t=1e3*(r+Math.random()),l(t)))}var d=!1;function f(e){d||(d=!0,u||(null!==i?(e||(s=2),clearTimeout(i),l(0)):e||(s=1)))}return l(0),setTimeout(function(){o=!0,f(!0)},n),f}(function(t,n){if(n)t(!1,new ze(!1,null,!0));else{var r=e.pool_.createXhrIo();e.pendingXhr_=r,null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then(function(n){null!==e.progressCallback_&&n.removeUploadProgressListener(i),e.pendingXhr_=null;var r=(n=n).getErrorCode()===$.NO_ERROR,o=n.getStatus();if(r&&!e.isRetryStatusCode_(o)){var s=-1!==e.successCodes_.indexOf(o);t(!0,new ze(s,n))}else{var a=n.getErrorCode()===$.ABORT;t(!1,new ze(!1,null,a))}})}function i(t){null!==e.progressCallback_&&e.progressCallback_(t.loaded,t.lengthComputable?t.total:-1)}},t,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},e.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r},e}(),ze=function(){return function(e,t,n){this.wasSuccessCode=e,this.xhr=t,this.canceled=!!n}}();function We(e,t,n){var r=ee(e.urlParams),i=e.url+r,s=Object.assign({},e.headers);return function(e,t){null!==t&&t.length>0&&(e.Authorization=\"Firebase \"+t)}(s,t),function(e){e[\"X-Firebase-Storage-Version\"]=\"webjs/\"+(void 0!==o.a?o.a.SDK_VERSION:\"AppManager\")}(s),new $e(i,e.method,s,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,n)}var He=function(){function e(e,t,n){if(this.bucket_=null,this.authWrapper_=new Be(e,function(e,t){return new Ue(e,t)},We,this,t),this.app_=e,null!=n)this.bucket_=K.makeFromBucketSpec(n);else{var r=this.authWrapper_.bucket();null!=r&&(this.bucket_=new K(r,\"\"))}this.internals_=new Qe(this)}return e.prototype.ref=function(e){function t(e){if(\"string\"!=typeof e)throw\"Path is not a string.\";if(/^[A-Za-z]+:\\/\\//.test(e))throw\"Expected child path but got a URL, use refFromURL instead.\"}if(Ne(\"ref\",[Re(t,!0)],arguments),null==this.bucket_)throw new Error(\"No Storage Bucket defined in Firebase Options.\");var n=new Ue(this.authWrapper_,this.bucket_);return null!=e?n.child(e):n},e.prototype.refFromURL=function(e){function t(e){if(\"string\"!=typeof e)throw\"Path is not a string.\";if(!/^[A-Za-z]+:\\/\\//.test(e))throw\"Expected full URL but got a child path, use ref instead.\";try{K.makeFromUrl(e)}catch(t){throw\"Expected valid full URL but got an invalid one.\"}}return Ne(\"refFromURL\",[Re(t,!1)],arguments),new Ue(this.authWrapper_,e)},Object.defineProperty(e.prototype,\"maxUploadRetryTime\",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),e.prototype.setMaxUploadRetryTime=function(e){Ne(\"setMaxUploadRetryTime\",[Pe()],arguments),this.authWrapper_.setMaxUploadRetryTime(e)},e.prototype.setMaxOperationRetryTime=function(e){Ne(\"setMaxOperationRetryTime\",[Pe()],arguments),this.authWrapper_.setMaxOperationRetryTime(e)},Object.defineProperty(e.prototype,\"app\",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"INTERNAL\",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),e}(),Qe=function(){function e(e){this.service_=e}return e.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),Promise.resolve()},e}();o.a.INTERNAL.registerService(\"storage\",function(e,t,n){return new He(e,new W,n)},{TaskState:D,TaskEvent:A,StringFormat:E,Storage:He,Reference:Ue},void 0,!0),n.d(t,\"a\",function(){return Ge});let Ge=(()=>(class{}))()},O0a9:function(e,t,n){\"use strict\";n.r(t);var r=n(\"PVcy\"),i=n(\"pZk1\"),o=n(\"I1TF\"),s=n(\"sDu7\"),a=n(\"WEwH\"),u=n(\"b/LO\"),c=n(\"hbGf\"),l=n(\"z5t0\");n.d(t,\"AngularFireDatabase\",function(){return r.a}),n.d(t,\"RealtimeDatabaseURL\",function(){return r.b}),n.d(t,\"listChanges\",function(){return i.a}),n.d(t,\"createListReference\",function(){return o.a}),n.d(t,\"snapshotChanges\",function(){return s.a}),n.d(t,\"stateChanges\",function(){return a.a}),n.d(t,\"auditTrail\",function(){return u.a}),n.d(t,\"fromRef\",function(){return c.a}),n.d(t,\"AngularFireDatabaseModule\",function(){return l.a})},OoTa:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return _}),n.d(t,\"b\",function(){return y}),n.d(t,\"c\",function(){return v}),n.d(t,\"d\",function(){return b}),n.d(t,\"e\",function(){return r}),n.d(t,\"f\",function(){return i}),n.d(t,\"g\",function(){return o});const r=e=>o(e),i=(e,t)=>(\"string\"==typeof e&&(t=e,e=void 0),r(e).includes(t)),o=(e=window)=>{e.Ionic=e.Ionic||{};let t=e.Ionic.platforms;return null==t&&(t=e.Ionic.platforms=s(e)).forEach(t=>e.document.documentElement.classList.add(`plt-${t}`)),t},s=e=>Object.keys(m).filter(t=>m[t](e)),a=e=>f(e,/iPad/i),u=e=>f(e,/android|sink/i),c=e=>p(e,\"(any-pointer:coarse)\"),l=e=>h(e)||d(e),h=e=>!!(e.cordova||e.phonegap||e.PhoneGap),d=e=>{const t=e.Capacitor;return!(!t||!t.isNative)},f=(e,t)=>!(!e.navigator||!e.navigator.userAgent)&&t.test(e.navigator.userAgent),p=(e,t)=>!!e.matchMedia&&e.matchMedia(t).matches,m={ipad:a,iphone:e=>f(e,/iPhone/i),ios:e=>f(e,/iPad|iPhone|iPod/i),android:u,phablet:e=>{const t=e.innerWidth,n=e.innerHeight,r=Math.min(t,n),i=Math.max(t,n);return r>390&&r<520&&i>620&&i<800},tablet:e=>{const t=e.innerWidth,n=e.innerHeight,r=Math.min(t,n),i=Math.max(t,n);return a(e)||(e=>u(e)&&!f(e,/mobile/i))(e)||r>460&&r<820&&i>780&&i<1400},cordova:h,capacitor:d,electron:e=>f(e,/electron/i),pwa:e=>!!e.matchMedia&&(e.matchMedia(\"(display-mode: standalone)\").matches||e.navigator.standalone),mobile:c,mobileweb:e=>c(e)&&!l(e),desktop:e=>!c(e),hybrid:l};class g{constructor(){this.m=new Map}reset(e){this.m=new Map(Object.entries(e))}get(e,t){const n=this.m.get(e);return void 0!==n?n:t}getBoolean(e,t=!1){const n=this.m.get(e);return void 0===n?t:\"string\"==typeof n?\"true\"===n:!!n}getNumber(e,t){const n=parseFloat(this.m.get(e));return isNaN(n)?void 0!==t?t:NaN:n}set(e,t){this.m.set(e,t)}}const y=new g,v=e=>{try{const n=e.sessionStorage.getItem(C);return null!==n?JSON.parse(n):{}}catch(t){return{}}},b=(e,t)=>{try{e.sessionStorage.setItem(C,JSON.stringify(t))}catch(n){return}},_=e=>{const t={};return e.location.search.slice(1).split(\"&\").map(e=>e.split(\"=\")).map(([e,t])=>[decodeURIComponent(e),decodeURIComponent(t)]).filter(([e])=>w(e,E)).map(([e,t])=>[e.slice(E.length),t]).forEach(([e,n])=>{t[e]=n}),t},w=(e,t)=>e.substr(0,t.length)===t,E=\"ionic:\",C=\"ionic-persist-config\"},PVcy:function(e,t,n){\"use strict\";n(\"mrSG\");var r=n(\"kDjp\"),i=n(\"I1TF\"),o=n(\"lJxs\"),s=n(\"hbGf\");function a(e){return function(){return Object(s.a)(e,\"value\")}}var u=n(\"1XSQ\"),c=n(\"yA/v\");n.d(t,\"a\",function(){return l}),n.d(t,\"b\",function(){return u.b});let l=(()=>(class{constructor(e,t,n,r,i){this.scheduler=new u.a(i,r),this.database=i.runOutsideAngular(()=>Object(c.e)(e,t).database(n||void 0))}list(e,t){const n=Object(r.b)(this.database,e);let o=n;return t&&(o=t(n)),Object(i.a)(o,this)}object(e){const t=Object(r.b)(this.database,e);return i=this,{query:n=t,snapshotChanges(){const e=a(n)();return i.scheduler.keepUnstableUntilFirst(i.scheduler.runOutsideAngular(e))},update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges(){const e=a(n)();return i.scheduler.keepUnstableUntilFirst(i.scheduler.runOutsideAngular(e)).pipe(Object(o.a)(e=>e.payload.exists()?e.payload.val():null))}};var n,i}createPushId(){return this.database.ref().push().key}}))()},\"Rt+L\":function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return i});var r=n(\"KOl+\");function i(e,t,n,i){return i=Array.from(i),Object(r.e)(e,t,n).apply(this,i)}},S6Yj:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return G}),n.d(t,\"b\",function(){return V}),n.d(t,\"c\",function(){return Oe}),n.d(t,\"d\",function(){return Ne}),n.d(t,\"e\",function(){return xe}),n.d(t,\"f\",function(){return De}),n.d(t,\"g\",function(){return P}),n.d(t,\"h\",function(){return Pe}),n.d(t,\"i\",function(){return Q}),n.d(t,\"j\",function(){return Ae}),n.d(t,\"k\",function(){return Se}),n.d(t,\"l\",function(){return Re}),n.d(t,\"m\",function(){return w}),n.d(t,\"n\",function(){return L});var r=n(\"OoTa\");let i,o,s,a=0,u=!1,c=!1,l=!1,h=!1,d=!1;const f=window,p=document,m={$flags$:0,$resourcesUrl$:\"\",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,n,r)=>e.addEventListener(t,n,r),rel:(e,t,n,r)=>e.removeEventListener(t,n,r)},g=!!p.documentElement.attachShadow,y=(()=>{let e=!1;try{p.addEventListener(\"e\",null,Object.defineProperty({},\"passive\",{get(){e=!0}}))}catch(t){}return e})(),v=(()=>{try{return new CSSStyleSheet,!0}catch(e){}return!1})(),b=new WeakMap,_=e=>b.get(e),w=(e,t)=>b.set(t.$lazyInstance$=e,t),E=(e,t)=>t in e,C=e=>console.error(e),S=new Map,T=new Map,I=f.__stencil_cssshim,O=[],N=[],A=[],R=(e,t)=>n=>{e.push(n),u||(u=!0,t&&4&m.$flags$?x(k):m.raf(k))},D=(e,t)=>{let n=0,r=0;for(;n<e.length&&(r=performance.now())<t;)try{e[n++](r)}catch(i){C(i)}n===e.length?e.length=0:0!==n&&e.splice(0,n)},k=()=>{a++,(e=>{for(let n=0;n<e.length;n++)try{e[n](performance.now())}catch(t){C(t)}e.length=0})(O);const e=2==(6&m.$flags$)?performance.now()+10*Math.ceil(a*(1/22)):1/0;D(N,e),D(A,e),N.length>0&&(A.push(...N),N.length=0),(u=O.length+N.length+A.length>0)?m.raf(k):a=0},x=e=>Promise.resolve().then(e),P=R(O,!1),L=R(N,!0),M={},j=e=>null!=e,F=e=>e.toLowerCase(),U=e=>\"object\"==(e=typeof e)||\"function\"===e,V=()=>f.CSS&&f.CSS.supports&&f.CSS.supports(\"color\",\"var(--c)\")?Promise.resolve():n.e(28).then(n.t.bind(null,\"WEgO\",7)),q=\"http://www.w3.org/1999/xlink\",B=new WeakMap,$=(e,t,n)=>{let r=T.get(e);v&&n?(r=r||new CSSStyleSheet).replace(t):r=t,T.set(e,r)},z=(e,t,n,r)=>{let i=W(t.$tagName$,n),o=T.get(i);if(e=11===e.nodeType?e:p,o||(i=W(t.$tagName$),o=T.get(i)),o)if(\"string\"==typeof o){let n,s=B.get(e=e.head||e);if(s||B.set(e,s=new Set),!s.has(i)){if(e.host&&(n=e.firstElementChild)&&\"STYLE\"===n.tagName)n.innerHTML=o;else{if(I){const e=(n=I.createHostStyle(r,i,o,!!(10&t.$flags$)))[\"s-sc\"];e&&(i=e,s=null)}else(n=p.createElement(\"style\")).innerHTML=o;e.insertBefore(n,e.querySelector(\"link\"))}s&&s.add(i)}}else e.adoptedStyleSheets.includes(o)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,o]);return i},W=(e,t)=>\"sc-\"+(t?e+\"-\"+t:e),H=e=>e.replace(/\\/\\*!@([^\\/]+)\\*\\/[^\\{]+\\{/g,\"$1{\"),Q=(e,t,...n)=>{let r,i,o=null,s=!1,a=!1,u=[];const c=t=>{for(let n=0;n<t.length;n++)o=t[n],Array.isArray(o)?c(o):null!=o&&\"boolean\"!=typeof o&&((s=\"function\"!=typeof e&&!U(o))&&(o=String(o)),s&&a?u[u.length-1].$text$+=o:u.push(s?{$flags$:0,$text$:o}:o),a=s)};if(c(n),t){r=t.key||void 0,i=t.name;{const e=t.className||t.class;e&&(t.class=\"object\"!=typeof e?e:Object.keys(e).filter(t=>e[t]).join(\" \"))}}if(\"function\"==typeof e)return e(t,u,K);const l={$flags$:0,$tag$:e,$children$:u.length>0?u:null,$elm$:void 0,$attrs$:t};return l.$key$=r,l.$name$=i,l},G={},K={forEach:(e,t)=>e.map(Y).forEach(t),map:(e,t)=>e.map(Y).map(t).map(X)},Y=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),X=e=>({$flags$:0,$attrs$:e.vattrs,$children$:e.vchildren,$key$:e.vkey,$name$:e.vname,$tag$:e.vtag,$text$:e.vtext}),J=(e,t,n,r,i,o)=>{if(n!==r)if(\"class\"===t){const t=e.classList;Z(n).forEach(e=>t.remove(e)),Z(r).forEach(e=>t.add(e))}else if(\"style\"===t){for(const t in n)r&&null!=r[t]||(t.includes(\"-\")?e.style.removeProperty(t):e.style[t]=\"\");for(const t in r)n&&r[t]===n[t]||(t.includes(\"-\")?e.style.setProperty(t,r[t]):e.style[t]=r[t])}else if(\"key\"===t);else if(\"ref\"===t)r&&r(e);else if(t.startsWith(\"on\")&&!E(e,t))t=E(e,F(t))?F(t.substring(2)):F(t[2])+t.substring(3),n&&m.rel(e,t,n,!1),r&&m.ael(e,t,r,!1);else{const n=E(e,t),a=U(r);if((n||a&&null!==r)&&!i)try{if(e.tagName.includes(\"-\"))e[t]=r;else{const n=null==r?\"\":r;e[t]!==n&&(e[t]=n)}}catch(s){}const u=!(!i||t===(t=t.replace(/^xlink\\:?/,\"\")));null==r||!1===r?u?e.removeAttributeNS(q,F(t)):e.removeAttribute(t):(!n||4&o||i)&&!a&&(r=!0===r?\"\":r.toString(),u?e.setAttributeNS(q,F(t),r):e.setAttribute(t,r))}},Z=e=>e?e.split(/\\s+/).filter(e=>e):[],ee=(e,t,n,r)=>{const i=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,o=e&&e.$attrs$||M,s=t.$attrs$||M;for(r in o)r in s||J(i,r,o[r],void 0,n,t.$flags$);for(r in s)J(i,r,o[r],s[r],n,t.$flags$)},te=(e,t,n,r)=>{let a,u,l,f=t.$children$[n],m=0;if(c||(h=!0,\"slot\"===f.$tag$&&(i&&r.classList.add(i+\"-s\"),f.$flags$|=f.$children$?2:1)),j(f.$text$))f.$elm$=p.createTextNode(f.$text$);else if(1&f.$flags$)f.$elm$=p.createTextNode(\"\");else{if(a=f.$elm$=d||\"svg\"===f.$tag$?p.createElementNS(\"http://www.w3.org/2000/svg\",f.$tag$):p.createElement(2&f.$flags$?\"slot-fb\":f.$tag$),ee(null,f,d=\"svg\"===f.$tag$||\"foreignObject\"!==f.$tag$&&d),j(i)&&a[\"s-si\"]!==i&&a.classList.add(a[\"s-si\"]=i),f.$children$)for(m=0;m<f.$children$.length;++m)(u=te(e,f,m,a))&&a.appendChild(u);\"svg\"===f.$tag$?d=!1:\"foreignObject\"===f.$elm$.tagName&&(d=!0)}return f.$elm$[\"s-hn\"]=s,3&f.$flags$&&(f.$elm$[\"s-sr\"]=!0,f.$elm$[\"s-cr\"]=o,f.$elm$[\"s-sn\"]=f.$name$||\"\",(l=e&&e.$children$&&e.$children$[n])&&l.$tag$===f.$tag$&&e.$elm$&&ne(e.$elm$,!1)),f.$elm$},ne=(e,t)=>{m.$flags$|=1;const n=e.childNodes;for(let r=n.length-1;r>=0;r--){const e=n[r];e[\"s-hn\"]!==s&&e[\"s-ol\"]&&(ae(e).insertBefore(e,se(e)),e[\"s-ol\"].remove(),e[\"s-ol\"]=void 0,h=!0),t&&ne(e,t)}m.$flags$&=-2},re=(e,t,n,r,i,o)=>{let a,u=e[\"s-cr\"]&&e[\"s-cr\"].parentNode||e;for(u.shadowRoot&&F(u.tagName)===s&&(u=u.shadowRoot);i<=o;++i)r[i]&&(a=te(null,n,i,e))&&(r[i].$elm$=a,u.insertBefore(a,se(t)))},ie=(e,t,n,r)=>{for(;t<=n;++t)j(e[t])&&(r=e[t].$elm$,de(e[t],!0),l=!0,r[\"s-ol\"]?r[\"s-ol\"].remove():ne(r,!0),r.remove())},oe=(e,t)=>e.$tag$===t.$tag$&&(\"slot\"===e.$tag$?e.$name$===t.$name$:e.$key$===t.$key$),se=e=>e&&e[\"s-ol\"]||e,ae=e=>(e[\"s-ol\"]?e[\"s-ol\"]:e).parentNode,ue=(e,t)=>{const n=t.$elm$=e.$elm$,r=e.$children$,i=t.$children$;let o;d=n&&j(n.parentNode)&&void 0!==n.ownerSVGElement,d=\"svg\"===t.$tag$||\"foreignObject\"!==t.$tag$&&d,j(t.$text$)?(o=n[\"s-cr\"])?o.parentNode.textContent=t.$text$:e.$text$!==t.$text$&&(n.textContent=t.$text$):(\"slot\"===t.$tag$||ee(e,t,d),j(r)&&j(i)?((e,t,n,r)=>{let i,o,s=0,a=0,u=0,c=0,l=t.length-1,h=t[0],d=t[l],f=r.length-1,p=r[0],m=r[f];for(;s<=l&&a<=f;)if(null==h)h=t[++s];else if(null==d)d=t[--l];else if(null==p)p=r[++a];else if(null==m)m=r[--f];else if(oe(h,p))ue(h,p),h=t[++s],p=r[++a];else if(oe(d,m))ue(d,m),d=t[--l],m=r[--f];else if(oe(h,m))\"slot\"!==h.$tag$&&\"slot\"!==m.$tag$||ne(h.$elm$.parentNode,!1),ue(h,m),e.insertBefore(h.$elm$,d.$elm$.nextSibling),h=t[++s],m=r[--f];else if(oe(d,p))\"slot\"!==h.$tag$&&\"slot\"!==m.$tag$||ne(d.$elm$.parentNode,!1),ue(d,p),e.insertBefore(d.$elm$,h.$elm$),d=t[--l],p=r[++a];else{for(u=-1,c=s;c<=l;++c)if(t[c]&&j(t[c].$key$)&&t[c].$key$===p.$key$){u=c;break}u>=0?((o=t[u]).$tag$!==p.$tag$?i=te(t&&t[a],n,u,e):(ue(o,p),t[u]=void 0,i=o.$elm$),p=r[++a]):(i=te(t&&t[a],n,a,e),p=r[++a]),i&&ae(h.$elm$).insertBefore(i,se(h.$elm$))}s>l?re(e,null==r[f+1]?null:r[f+1].$elm$,n,r,a,f):a>f&&ie(t,s,l)})(n,r,t,i):j(i)?(j(e.$text$)&&(n.textContent=\"\"),re(n,null,t,i,0,i.length-1)):j(r)&&ie(r,0,r.length-1)),d&&\"svg\"===t.$tag$&&(d=!1)},ce=(e,t,n,r,i,o,s,a)=>{for(r=0,i=(n=e.childNodes).length;r<i;r++)if(1===(t=n[r]).nodeType){if(t[\"s-sr\"])for(s=t[\"s-sn\"],t.hidden=!1,o=0;o<i;o++)if(n[o][\"s-hn\"]!==t[\"s-hn\"])if(a=n[o].nodeType,\"\"!==s){if(1===a&&s===n[o].getAttribute(\"slot\")){t.hidden=!0;break}}else if(1===a||3===a&&\"\"!==n[o].textContent.trim()){t.hidden=!0;break}ce(t)}},le=[],he=e=>{let t,n,r,i,o=e.childNodes,s=o.length,a=0,u=0,c=0;for(s=o.length;a<s;a++){if((t=o[a])[\"s-sr\"]&&(n=t[\"s-cr\"]))for(i=t[\"s-sn\"],u=(r=n.parentNode.childNodes).length-1;u>=0;u--)(n=r[u])[\"s-cn\"]||n[\"s-nr\"]||n[\"s-hn\"]===t[\"s-hn\"]||((3===(c=n.nodeType)||8===c)&&\"\"===i||1===c&&null===n.getAttribute(\"slot\")&&\"\"===i||1===c&&n.getAttribute(\"slot\")===i)&&(le.some(e=>e.$nodeToRelocate$===n)||(l=!0,n[\"s-sn\"]=i,le.push({$slotRefNode$:t,$nodeToRelocate$:n})));1===t.nodeType&&he(t)}},de=(e,t)=>{e&&(e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(t?null:e.$elm$),e.$children$&&e.$children$.forEach(e=>{de(e,t)}))},fe=(e,t,n,r)=>{t.$flags$|=16;const i=t.$lazyInstance$,o=()=>pe(e,t,n,i,r);let s;return r?(t.$flags$|=256,t.$queuedListeners$&&(t.$queuedListeners$.forEach(([e,t])=>ye(i,e,t)),t.$queuedListeners$=null),s=ye(i,\"componentWillLoad\")):s=ye(i,\"componentWillUpdate\"),ve(s,()=>L(o))},pe=(e,t,n,r,a)=>{t.$flags$&=-17,e[\"s-lr\"]=!1,a&&((e,t,n)=>{const r=z(g&&e.shadowRoot?e.shadowRoot:e.getRootNode(),t,n,e);10&t.$flags$&&(e[\"s-sc\"]=r,e.classList.add(r+\"-h\"),2&t.$flags$&&e.classList.add(r+\"-s\"))})(e,n,t.$modeName$),t.$flags$|=4;try{((e,t,n,r)=>{s=F(e.tagName);const a=t.$vnode$||{$flags$:0},u=(e=>e&&e.$tag$===G)(r)?r:Q(null,null,r);if(n.$attrsToReflect$&&(u.$attrs$=u.$attrs$||{},n.$attrsToReflect$.forEach(([t,n])=>u.$attrs$[n]=e[t])),u.$tag$=null,u.$flags$|=4,t.$vnode$=u,u.$elm$=a.$elm$=e.shadowRoot||e,i=e[\"s-sc\"],o=e[\"s-cr\"],c=g&&0!=(1&n.$flags$),h=l=!1,ue(a,u),h){he(u.$elm$);for(let e=0;e<le.length;e++){const t=le[e];if(!t.$nodeToRelocate$[\"s-ol\"]){const e=p.createTextNode(\"\");e[\"s-nr\"]=t.$nodeToRelocate$,t.$nodeToRelocate$.parentNode.insertBefore(t.$nodeToRelocate$[\"s-ol\"]=e,t.$nodeToRelocate$)}}m.$flags$|=1;for(let e=0;e<le.length;e++){const t=le[e],n=t.$slotRefNode$.parentNode;let r=t.$slotRefNode$.nextSibling,i=t.$nodeToRelocate$[\"s-ol\"];for(;i=i.previousSibling;){let e=i[\"s-nr\"];if(e&&e[\"s-sn\"]===t.$nodeToRelocate$[\"s-sn\"]&&n===e.parentNode&&(!(e=e.nextSibling)||!e[\"s-nr\"])){r=e;break}}(!r&&n!==t.$nodeToRelocate$.parentNode||t.$nodeToRelocate$.nextSibling!==r)&&t.$nodeToRelocate$!==r&&n.insertBefore(t.$nodeToRelocate$,r)}m.$flags$&=-2}l&&ce(u.$elm$),le.length=0})(e,t,n,r.render&&r.render())}catch(u){C(u)}t.$flags$&=-5,I&&I.updateHost(e),e[\"s-lr\"]=!0,t.$flags$|=2,e[\"s-rc\"].length>0&&(e[\"s-rc\"].forEach(e=>e()),e[\"s-rc\"].length=0),me(e,t)},me=(e,t,n)=>{if(!e[\"s-al\"]){const r=t.$lazyInstance$,i=t.$ancestorComponent$;64&t.$flags$?ye(r,\"componentDidUpdate\"):(t.$flags$|=64,e.classList.add(\"hydrated\"),ye(r,\"componentDidLoad\"),t.$onReadyResolve$(e),i||ge()),i&&((n=i[\"s-al\"])&&(n.delete(e),0===n.size&&(i[\"s-al\"]=void 0,i[\"s-init\"]())),t.$ancestorComponent$=void 0)}},ge=()=>{p.documentElement.classList.add(\"hydrated\"),m.$flags$|=2},ye=(e,t,n)=>{if(e&&e[t])try{return e[t](n)}catch(r){C(r)}},ve=(e,t)=>e&&e.then?e.then(t):t(),be=(e,t,n)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const r=Object.entries(t.$members$),i=e.prototype;if(r.forEach(([e,[r]])=>{31&r||2&n&&32&r?Object.defineProperty(i,e,{get(){return((e,t)=>_(e).$instanceValues$.get(t))(this,e)},set(n){((e,t,n,r)=>{const i=_(this),o=i.$hostElement$,s=i.$instanceValues$.get(t),a=i.$flags$;if(!((n=((e,t)=>null==e||U(e)?e:4&t?\"false\"!==e&&(\"\"===e||!!e):2&t?parseFloat(e):1&t?String(e):e)(n,r.$members$[t][0]))===s||8&a&&void 0!==s)&&(i.$instanceValues$.set(t,n),i.$lazyInstance$)){if(r.$watchers$&&128&a){const e=r.$watchers$[t];e&&e.forEach(e=>{try{i.$lazyInstance$[e].call(i.$lazyInstance$,n,s,t)}catch(r){C(r)}})}2==(22&a)&&fe(o,i,r,!1)}})(0,e,n,t)},configurable:!0,enumerable:!0}):1&n&&64&r&&Object.defineProperty(i,e,{value(...t){const n=_(this);return n.$onReadyPromise$.then(()=>n.$lazyInstance$[e](...t))}})}),1&n){const n=new Map;i.attributeChangedCallback=function(e,t,r){m.jmp(()=>{const t=n.get(e);this[t]=(null!==r||\"boolean\"!=typeof this[t])&&r})},e.observedAttributes=r.filter(([e,t])=>15&t[0]).map(([e,r])=>{const i=r[1]||e;return n.set(i,e),512&r[0]&&t.$attrsToReflect$.push([e,i]),i})}}return e},_e=(e,t,n,r,i,o,s)=>{let a,u,c,l;if(1===o.nodeType){for((a=o.getAttribute(\"c-id\"))&&((u=a.split(\".\"))[0]!==s&&\"0\"!==u[0]||(c={$flags$:0,$hostId$:u[0],$nodeId$:u[1],$depth$:u[2],$index$:u[3],$tag$:F(o.tagName),$elm$:o},t.push(c),o.removeAttribute(\"c-id\"),e.$children$||(e.$children$=[]),e.$children$[c.$index$]=c,e=c,r&&\"0\"===c.$depth$&&(r[c.$index$]=c.$elm$))),l=o.childNodes.length-1;l>=0;l--)_e(e,t,n,r,i,o.childNodes[l],s);if(o.shadowRoot)for(l=o.shadowRoot.childNodes.length-1;l>=0;l--)_e(e,t,n,r,i,o.shadowRoot.childNodes[l],s)}else 8===o.nodeType?(u=o.nodeValue.split(\".\"))[1]!==s&&\"0\"!==u[1]||(c={$flags$:0,$hostId$:u[1],$nodeId$:u[2],$depth$:u[3],$index$:u[4],$elm$:o},\"t\"===(a=u[0])?(c.$elm$=o.nextSibling,c.$elm$&&3===c.$elm$.nodeType&&(c.$text$=c.$elm$.textContent,t.push(c),o.remove(),e.$children$||(e.$children$=[]),e.$children$[c.$index$]=c,r&&\"0\"===c.$depth$&&(r[c.$index$]=c.$elm$))):c.$hostId$===s&&(\"s\"===a?(c.$tag$=\"slot\",o[\"s-sn\"]=u[5]?c.$name$=u[5]:\"\",o[\"s-sr\"]=!0,r&&(c.$elm$=p.createElement(c.$tag$),c.$name$&&c.$elm$.setAttribute(\"name\",c.$name$),o.parentNode.insertBefore(c.$elm$,o),o.remove(),\"0\"===c.$depth$&&(r[c.$index$]=c.$elm$)),n.push(c),e.$children$||(e.$children$=[]),e.$children$[c.$index$]=c):\"r\"===a&&(r?o.remove():(i[\"s-cr\"]=o,o[\"s-cn\"]=!0)))):e&&\"style\"===e.$tag$&&(e.$children$=[{$index$:\"0\",$text$:o.textContent,$elm$:o}])},we=(e,t)=>{if(1===e.nodeType){let n=0;for(;n<e.childNodes.length;n++)we(e.childNodes[n],t);if(e.shadowRoot)for(n=0;n<e.shadowRoot.childNodes.length;n++)we(e.shadowRoot.childNodes[n],t)}else if(8===e.nodeType){const n=e.nodeValue.split(\".\");\"o\"===n[0]&&(t.set(n[1]+\".\"+n[2],e),e.nodeValue=\"\",e[\"s-sd\"]=\"\"===n[3])}},Ee=[],Ce=e=>Ee.push(e),Se=e=>_(e).$modeName$,Te=e=>{ye(e,\"connectedCallback\")},Ie=(e,t)=>{(t=e[\"s-cr\"]=p.createComment(\"\"))[\"s-cn\"]=!0,e.insertBefore(t,e.firstChild)},Oe=(e,t={})=>{const r=[],i=t.exclude||[],o=p.head,s=f.customElements,a=o.querySelector(\"meta[charset]\"),u=p.createElement(\"style\");let c;Object.assign(m,t),m.$resourcesUrl$=new URL(t.resourcesUrl||\"./\",p.baseURI).href,t.syncQueue&&(m.$flags$|=4),m.$flags$|=2;{const e=p.querySelectorAll(\"style[s-id]\");let t=\"\",n=0;for(;n<e.length;n++)t+=e[n].innerHTML;for(n=0;n<e.length;n++){const r=e[n];$(r.getAttribute(\"s-id\"),t+H(r.innerHTML),!0)}}e.forEach(e=>e[1].forEach(t=>{const o={$flags$:t[0],$tagName$:t[1],$members$:t[2],$listeners$:t[3],$attrsToReflect$:[],$watchers$:{}};!g&&1&o.$flags$&&(o.$flags$|=8);const a=o.$tagName$;o.$lazyBundleIds$=e[0],i.includes(a)||s.get(a)||(r.push(a),s.define(a,be(class extends HTMLElement{constructor(e){super(e),e=this,this[\"s-lr\"]=!1,this[\"s-rc\"]=[],(e=>{{const t={$flags$:0,$hostElement$:e,$instanceValues$:new Map};t.$onReadyPromise$=new Promise(e=>t.$onReadyResolve$=e),b.set(e,t)}})(e),1&o.$flags$&&(g?e.attachShadow({mode:\"open\"}):\"shadowRoot\"in e||(e.shadowRoot=e))}connectedCallback(){c&&(clearTimeout(c),c=null),m.jmp(()=>((e,t)=>{if(0==(1&m.$flags$)){const r=_(e);if(t.$listeners$&&(r.$rmListeners$=((e,t,n)=>{t.$queuedListeners$=t.$queuedListeners$||[];const r=n.map(([n,r,i])=>{const o=((e,t)=>4&t?p:8&t?f:32&t?p.body:16&t?e.parentElement:e)(e,n),s=((e,t)=>n=>{256&e.$flags$?e.$lazyInstance$[t](n):e.$queuedListeners$.push([t,n])})(t,i),a=(e=>y?{passive:0!=(1&e),capture:0!=(2&e)}:0!=(2&e))(n);return m.ael(o,r,s,a),()=>m.rel(o,r,s,a)});return()=>r.forEach(e=>e())})(e,r,t.$listeners$)),!(1&r.$flags$)){let i;if(r.$flags$|=1,i=e.getAttribute(\"s-id\")){if(g&&1&t.$flags$){const n=z(e.shadowRoot,t,e.getAttribute(\"s-mode\"));e.classList.remove(n+\"-h\"),e.classList.remove(n+\"-s\")}((e,t,n,r)=>{const i=e.shadowRoot,o=[],s=i?[]:null,a=r.$vnode$={$flags$:0,$tag$:t};m.$orgLocNodes$||we(p.body,m.$orgLocNodes$=new Map),e[\"s-id\"]=n,e.removeAttribute(\"s-id\"),_e(a,o,[],s,e,e,n),o.forEach(e=>{const n=e.$hostId$+\".\"+e.$nodeId$,r=m.$orgLocNodes$.get(n),o=e.$elm$;r&&(r[\"s-sd\"]||\"0\"===e.$hostId$)&&r.parentNode.insertBefore(o,r.nextSibling),i||(o[\"s-hn\"]=t,r&&(o[\"s-ol\"]=r,o[\"s-ol\"][\"s-nr\"]=o)),m.$orgLocNodes$.delete(n)}),i&&s.forEach(e=>{e&&i.appendChild(e)})})(e,t.$tagName$,i,r)}i||(4&t.$flags$||8&t.$flags$)&&Ie(e);{let t=e;for(;t=t.parentNode||t.host;)if(1===t.nodeType&&t.hasAttribute(\"s-id\")||t[\"s-init\"]&&!1===t[\"s-lr\"]){r.$ancestorComponent$=t,(t[\"s-al\"]=t[\"s-al\"]||new Set).add(e);break}}t.$members$&&Object.entries(t.$members$).forEach(([t,[n]])=>{if(31&n&&e.hasOwnProperty(t)){const n=e[t];delete e[t],e[t]=n}}),x(()=>(async(e,t,r,i,o)=>{if(0==(32&t.$flags$)){t.$flags$|=32,null==t.$modeName$&&(t.$modeName$=\"string\"!=typeof r.$lazyBundleIds$?(e=>Ee.map(t=>t(e)).find(e=>!!e))(e):\"\"),(o=((e,t,r)=>{const i=e.$tagName$.replace(/-/g,\"_\"),o=\"string\"!=typeof e.$lazyBundleIds$?e.$lazyBundleIds$[t.$modeName$]:e.$lazyBundleIds$,s=S.get(o);return s?s[i]:n(\"kLfG\")(`./${o}.entry.js`).then(e=>(S.set(o,e),e[i]),C)})(r,t)).then&&(o=await o),o.isProxied||(r.$watchers$=o.watchers,be(o,r,2),o.isProxied=!0),t.$flags$|=8;try{new o(t)}catch(u){C(u)}t.$flags$&=-9,t.$flags$|=128,Te(t.$lazyInstance$);const i=W(r.$tagName$,t.$modeName$);if(!T.has(i)&&o.style){let e=o.style;\"string\"!=typeof e&&(e=e[t.$modeName$]),8&r.$flags$&&(e=await n.e(113).then(n.bind(null,\"ZHuR\")).then(t=>t.scopeCss(e,i,!1))),$(i,e,!!(1&r.$flags$))}}const s=t.$ancestorComponent$,a=()=>fe(e,t,r,!0);s&&!1===s[\"s-lr\"]&&s[\"s-rc\"]?s[\"s-rc\"].push(a):a()})(e,r,t))}Te(r.$lazyInstance$)}})(this,o))}disconnectedCallback(){m.jmp(()=>(e=>{if(0==(1&m.$flags$)){const t=_(e),n=t.$lazyInstance$;t.$rmListeners$&&(t.$rmListeners$(),t.$rmListeners$=void 0),I&&I.removeHost(e),ye(n,\"disconnectedCallback\"),ye(n,\"componentDidUnload\")}})(this))}\"s-init\"(){const e=_(this);e.$lazyInstance$&&me(this,e)}\"s-hmr\"(e){}forceUpdate(){((e,t)=>{{const n=_(e);2&n.$flags$&&fe(e,n,t,!1)}})(this,o)}componentOnReady(){return _(this).$onReadyPromise$}},o,1)))})),u.innerHTML=r+\"{visibility:hidden}.hydrated{visibility:inherit}\",u.setAttribute(\"data-styles\",\"\"),o.insertBefore(u,a?a.nextSibling:o.firstChild),m.jmp(()=>c=setTimeout(ge,30))},Ne=(e,t,n)=>{const r=De(e);return{emit:e=>r.dispatchEvent(new CustomEvent(t,{bubbles:!!(4&n),composed:!!(2&n),cancelable:!!(1&n),detail:e}))}},Ae=e=>{const t=new URL(e,m.$resourcesUrl$);return t.origin!==f.location.origin?t.href:t.pathname},Re=(e,t)=>{const n=()=>{let e=p.querySelector(t);return e||(e=p.createElement(t),p.body.appendChild(e)),\"function\"==typeof e.componentOnReady?e.componentOnReady():Promise.resolve(e)};return{create:(...e)=>n().then(t=>t.create(...e)),componentOnReady:n}},De=e=>_(e).$hostElement$;let ke;const xe=e=>e&&Se(e)||ke,Pe=()=>{(()=>{const e=document,t=window,n=t.Ionic=t.Ionic||{};Object(r.g)(t);const i=Object.assign({},Object(r.c)(t),{persistConfig:!1},n.config,Object(r.a)(t));r.b.reset(i),r.b.getBoolean(\"persistConfig\")&&Object(r.d)(t,i),n.config=r.b,n.mode=ke=r.b.get(\"mode\",e.documentElement.getAttribute(\"mode\")||(Object(r.f)(t,\"ios\")?\"ios\":\"md\")),r.b.set(\"mode\",ke),e.documentElement.setAttribute(\"mode\",ke),e.documentElement.classList.add(ke),r.b.getBoolean(\"_testing\")&&r.b.set(\"animated\",!1),Ce(e=>e.mode=e.mode||e.getAttribute(\"mode\")||ke)})(),Ce(e=>\"ION-ICON\"===e.tagName?e.mode||e.getAttribute(\"mode\"):null)}},SVse:function(e,t,n){\"use strict\";n.d(t,\"u\",function(){return p}),n.d(t,\"k\",function(){return g}),n.d(t,\"l\",function(){return m}),n.d(t,\"v\",function(){return y}),n.d(t,\"c\",function(){return x}),n.d(t,\"i\",function(){return b}),n.d(t,\"j\",function(){return w}),n.d(t,\"m\",function(){return O}),n.d(t,\"d\",function(){return P}),n.d(t,\"b\",function(){return k}),n.d(t,\"t\",function(){return L}),n.d(t,\"q\",function(){return j}),n.d(t,\"p\",function(){return F}),n.d(t,\"s\",function(){return T}),n.d(t,\"r\",function(){return S}),n.d(t,\"o\",function(){return i}),n.d(t,\"f\",function(){return o}),n.d(t,\"h\",function(){return s}),n.d(t,\"a\",function(){return a}),n.d(t,\"e\",function(){return l}),n.d(t,\"n\",function(){return h}),n.d(t,\"g\",function(){return u});var r=n(\"8Y7J\");class i{}const o=new r.o(\"Location Initialized\");class s{}const a=new r.o(\"appBaseHref\");let u=(()=>{class e{constructor(t,n){this._subject=new r.m,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=e.stripTrailingSlash(c(i)),this._platformStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,n=\"\"){return this.path()==this.normalize(t+e.normalizeQueryParams(n))}normalize(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,c(t)))}prepareExternalUrl(e){return e&&\"/\"!==e[0]&&(e=\"/\"+e),this._platformStrategy.prepareExternalUrl(e)}go(t,n=\"\",r=null){this._platformStrategy.pushState(r,\"\",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+e.normalizeQueryParams(n)),r)}replaceState(t,n=\"\",r=null){this._platformStrategy.replaceState(r,\"\",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+e.normalizeQueryParams(n)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(e){this._urlChangeListeners.push(e),this.subscribe(e=>{this._notifyUrlChangeListeners(e.url,e.state)})}_notifyUrlChangeListeners(e=\"\",t){this._urlChangeListeners.forEach(n=>n(e,t))}subscribe(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}static normalizeQueryParams(e){return e&&\"?\"!==e[0]?\"?\"+e:e}static joinWithSlash(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith(\"/\")&&n++,t.startsWith(\"/\")&&n++,2==n?e+t.substring(1):1==n?e+t:e+\"/\"+t}static stripTrailingSlash(e){const t=e.match(/#|\\?|$/),n=t&&t.index||e.length;return e.slice(0,n-(\"/\"===e[n-1]?1:0))+e.slice(n)}}return e})();function c(e){return e.replace(/\\/index.html$/,\"\")}let l=(()=>(class extends s{constructor(e,t){super(),this._platformLocation=e,this._baseHref=\"\",null!=t&&(this._baseHref=t)}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}path(e=!1){let t=this._platformLocation.hash;return null==t&&(t=\"#\"),t.length>0?t.substring(1):t}prepareExternalUrl(e){const t=u.joinWithSlash(this._baseHref,e);return t.length>0?\"#\"+t:t}pushState(e,t,n,r){let i=this.prepareExternalUrl(n+u.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){let i=this.prepareExternalUrl(n+u.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}))(),h=(()=>(class extends s{constructor(e,t){if(super(),this._platformLocation=e,null==t&&(t=this._platformLocation.getBaseHrefFromDOM()),null==t)throw new Error(\"No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.\");this._baseHref=t}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return u.joinWithSlash(this._baseHref,e)}path(e=!1){const t=this._platformLocation.pathname+u.normalizeQueryParams(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?`${t}${n}`:t}pushState(e,t,n,r){const i=this.prepareExternalUrl(n+u.normalizeQueryParams(r));this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){const i=this.prepareExternalUrl(n+u.normalizeQueryParams(r));this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}))();const d=function(){var e={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return e[e.Zero]=\"Zero\",e[e.One]=\"One\",e[e.Two]=\"Two\",e[e.Few]=\"Few\",e[e.Many]=\"Many\",e[e.Other]=\"Other\",e}(),f=r.tb,p=new r.o(\"UseV4Plurals\");class m{}let g=(()=>(class extends m{constructor(e,t){super(),this.locale=e,this.deprecatedPluralFn=t}getPluralCategory(e,t){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(t||this.locale,e):f(t||this.locale)(e)){case d.Zero:return\"zero\";case d.One:return\"one\";case d.Two:return\"two\";case d.Few:return\"few\";case d.Many:return\"many\";default:return\"other\"}}}))();function y(e,t){t=encodeURIComponent(t);for(const n of e.split(\";\")){const e=n.indexOf(\"=\"),[r,i]=-1==e?[n,\"\"]:[n.slice(0,e),n.slice(e+1)];if(r.trim()===t)return decodeURIComponent(i)}return null}class v{constructor(e,t,n,r){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let b=(()=>(class{constructor(e,t,n){this._viewContainer=e,this._template=t,this._differs=n,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){Object(r.V)()&&null!=e&&\"function\"!=typeof e&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(e)}. `+\"See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information.\"),this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(t){throw new Error(`Cannot find a differ supporting object '${n}' of type '${e=n,e.name||typeof e}'. NgFor only supports binding to Iterables such as Arrays.`)}}var e;if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const t=[];e.forEachOperation((e,n,r)=>{if(null==e.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new v(null,this._ngForOf,-1,-1),r),i=new _(e,n);t.push(i)}else if(null==r)this._viewContainer.remove(n);else{const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new _(e,i);t.push(o)}});for(let n=0;n<t.length;n++)this._perViewChange(t[n].view,t[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const e=this._viewContainer.get(n);e.context.index=n,e.context.count=r,e.context.ngForOf=this._ngForOf}e.forEachIdentityChange(e=>{this._viewContainer.get(e.currentIndex).context.$implicit=e.item})}_perViewChange(e,t){e.context.$implicit=t.item}static ngTemplateContextGuard(e,t){return!0}}))();class _{constructor(e,t){this.record=e,this.view=t}}let w=(()=>(class{constructor(e,t){this._viewContainer=e,this._context=new E,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){C(\"ngIfThen\",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){C(\"ngIfElse\",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}))();class E{constructor(){this.$implicit=null,this.ngIf=null}}function C(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${Object(r.Ib)(t)}'.`)}class S{}let T=(()=>(class{constructor(e,t,n){this._ngEl=e,this._differs=t,this._renderer=n}getValue(){return null}setNgStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}applyChanges(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_applyChanges(e){e.forEachRemovedItem(e=>this._setStyle(e.key,null)),e.forEachAddedItem(e=>this._setStyle(e.key,e.currentValue)),e.forEachChangedItem(e=>this._setStyle(e.key,e.currentValue))}_setStyle(e,t){const[n,r]=e.split(\".\");null!=(t=null!=t&&r?`${t}${r}`:t)?this._renderer.setStyle(this._ngEl.nativeElement,n,t):this._renderer.removeStyle(this._ngEl.nativeElement,n)}}))(),I=(()=>{class e{constructor(e){this._delegate=e}getValue(){return this._delegate.getValue()}}return e.ngDirectiveDef=void 0,e})(),O=(()=>(class extends I{constructor(e){super(e)}set ngStyle(e){this._delegate.setNgStyle(e)}ngDoCheck(){this._delegate.applyChanges()}}))();class N{createSubscription(e,t){return e.subscribe({next:t,error:e=>{throw e}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class A{createSubscription(e,t){return e.then(t,e=>{throw e})}dispose(e){}onDestroy(e){}}const R=new A,D=new N;let k=(()=>{class e{constructor(e){this._ref=e,this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):Object(r.zb)(this._latestValue,this._latestReturnedValue)?this._latestReturnedValue:(this._latestReturnedValue=this._latestValue,r.O.wrap(this._latestValue)):(e&&this._subscribe(e),this._latestReturnedValue=this._latestValue,this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,t=>this._updateLatestValue(e,t))}_selectStrategy(t){if(Object(r.yb)(t))return R;if(Object(r.xb)(t))return D;throw n=e,Error(`InvalidPipeArgument: '${t}' for pipe '${Object(r.Ib)(n)}'`);var n}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,t){e===this._obj&&(this._latestValue=t,this._ref.markForCheck())}}return e})(),x=(()=>(class{}))();const P=new r.o(\"DocumentToken\"),L=\"browser\",M=\"server\";function j(e){return e===M}let F=(()=>{class e{}return e.ngInjectableDef=Object(r.Ob)({token:e,providedIn:\"root\",factory:()=>new U(Object(r.Pb)(P),window,Object(r.Pb)(r.l))}),e})();class U{constructor(e,t,n){this.document=e,this.window=t,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(e){this.supportScrollRestoration()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(this.supportScrollRestoration()){e=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(e):e.replace(/(\\\"|\\'\\ |:|\\.|\\[|\\]|,|=)/g,\"\\\\$1\");try{const n=this.document.querySelector(`#${e}`);if(n)return void this.scrollToElement(n);const r=this.document.querySelector(`[name='${e}']`);if(r)return void this.scrollToElement(r)}catch(t){this.errorHandler.handleError(t)}}}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{return!!this.window&&!!this.window.scrollTo}catch(e){return!1}}}},SeVD:function(e,t,n){\"use strict\";var r=n(\"ngJS\"),i=n(\"NJ4a\"),o=n(\"Lhse\"),s=n(\"kJWO\"),a=n(\"I55L\"),u=n(\"c2HN\"),c=n(\"XoHu\");n.d(t,\"a\",function(){return l});const l=e=>{if(e&&\"function\"==typeof e[s.a])return(e=>t=>{const n=e[s.a]();if(\"function\"!=typeof n.subscribe)throw new TypeError(\"Provided object does not correctly implement Symbol.observable\");return n.subscribe(t)})(e);if(Object(a.a)(e))return Object(r.a)(e);if(Object(u.a)(e))return(e=>t=>(e.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t))(e);if(e&&\"function\"==typeof e[o.a])return(e=>t=>{const n=e[o.a]();for(;;){const e=n.next();if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return\"function\"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t})(e);{const t=Object(c.a)(e)?\"an invalid object\":`'${e}'`;throw new TypeError(`You provided ${t} where a stream was expected.`+\" You can provide an Observable, Promise, Array, or Iterable.\")}}},SpAZ:function(e,t,n){\"use strict\";function r(e){return e}n.d(t,\"a\",function(){return r})},VRyK:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return a});var r=n(\"HDdC\"),i=n(\"z+Ro\"),o=n(\"bHdf\"),s=n(\"yCtX\");function a(...e){let t=Number.POSITIVE_INFINITY,n=null,a=e[e.length-1];return Object(i.a)(a)?(n=e.pop(),e.length>1&&\"number\"==typeof e[e.length-1]&&(t=e.pop())):\"number\"==typeof a&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof r.a?e[0]:Object(o.a)(t)(Object(s.a)(e,n))}},VUZZ:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"GESTURE_CONTROLLER\",function(){return o}),n.d(t,\"createGesture\",function(){return l});class r{constructor(e,t,n,r,i){this.id=t,this.name=n,this.disableScroll=i,this.priority=1e6*r+t,this.ctrl=e}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const e=this.ctrl.capture(this.name,this.id,this.priority);return e&&this.disableScroll&&this.ctrl.disableScroll(this.id),e}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class i{constructor(e,t,n,r){this.id=t,this.disable=n,this.disableScroll=r,this.ctrl=e}block(){if(this.ctrl){if(this.disable)for(const e of this.disable)this.ctrl.disableGesture(e,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const e of this.disable)this.ctrl.enableGesture(e,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const o=new class{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(e){return new r(this,this.newID(),e.name,e.priority||0,!!e.disableScroll)}createBlocker(e={}){return new i(this,this.newID(),e.disable,!!e.disableScroll)}start(e,t,n){return this.canStart(e)?(this.requestedStart.set(t,n),!0):(this.requestedStart.delete(t),!1)}capture(e,t,n){if(!this.start(e,t,n))return!1;const r=this.requestedStart;let i=-1e4;if(r.forEach(e=>{i=Math.max(i,e)}),i===n){this.capturedId=t,r.clear();const n=new CustomEvent(\"ionGestureCaptured\",{detail:{gestureName:e}});return document.dispatchEvent(n),!0}return r.delete(t),!1}release(e){this.requestedStart.delete(e),this.capturedId===e&&(this.capturedId=void 0)}disableGesture(e,t){let n=this.disabledGestures.get(e);void 0===n&&(n=new Set,this.disabledGestures.set(e,n)),n.add(t)}enableGesture(e,t){const n=this.disabledGestures.get(e);void 0!==n&&n.delete(t)}disableScroll(e){this.disabledScroll.add(e),1===this.disabledScroll.size&&document.body.classList.add(\"backdrop-no-scroll\")}enableScroll(e){this.disabledScroll.delete(e),0===this.disabledScroll.size&&document.body.classList.remove(\"backdrop-no-scroll\")}canStart(e){return void 0===this.capturedId&&!this.isDisabled(e)}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(e){const t=this.disabledGestures.get(e);return!!(t&&t.size>0)}newID(){return this.gestureId++,this.gestureId}},s=(e,t,n,r)=>{const i=a(e)?{capture:!!r.capture,passive:!!r.passive}:!!r.capture;let o,s;return e.__zone_symbol__addEventListener?(o=\"__zone_symbol__addEventListener\",s=\"__zone_symbol__removeEventListener\"):(o=\"addEventListener\",s=\"removeEventListener\"),e[o](t,n,i),()=>{e[s](t,n,i)}},a=e=>{if(void 0===u)try{const n=Object.defineProperty({},\"passive\",{get:()=>{u=!0}});e.addEventListener(\"optsTest\",()=>{},n)}catch(t){u=!1}return!!u};let u;const c=e=>e instanceof Document?e:e.ownerDocument,l=e=>{let t=!1,n=!1,r=!0,i=!1;const a=Object.assign({disableScroll:!1,direction:\"x\",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},e),u=a.canStart,l=a.onWillStart,p=a.onStart,m=a.onEnd,g=a.notCaptured,y=a.onMove,v=a.threshold,b={type:\"pan\",startX:0,startY:0,startTimeStamp:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,timeStamp:0,event:void 0,data:void 0},_=((e,t,n)=>{const r=a.maxAngle*(Math.PI/180),i=\"x\"===a.direction,o=Math.cos(r),s=t*t;let u=0,c=0,l=!1,h=0;return{start(e,t){u=e,c=t,h=0,l=!0},detect(e,t){if(!l)return!1;const n=e-u,r=t-c,a=n*n+r*r;if(a<s)return!1;const d=Math.sqrt(a),f=(i?n:r)/d;return h=f>o?1:f<-o?-1:0,l=!1,!0},isGesture:()=>0!==h,getDirection:()=>h}})(0,a.threshold),w=o.createGesture({name:e.gestureName,priority:e.gesturePriority,disableScroll:e.disableScroll}),E=()=>{t&&(i=!1,y&&y(b))},C=()=>!(w&&!w.capture()||(t=!0,r=!1,b.startX=b.currentX,b.startY=b.currentY,b.startTimeStamp=b.timeStamp,l?l(b).then(S):S(),0)),S=()=>{p&&p(b),r=!0},T=()=>{t=!1,n=!1,i=!1,r=!0,w.release()},I=e=>{const n=t,i=r;T(),i&&(h(b,e),n?m&&m(b):g&&g(b))},O=((e,t,n,r,i)=>{let o,a,u,l,h,d,f,p=0;const m=r=>{p=Date.now()+2e3,t(r)&&(!a&&n&&(a=s(e,\"touchmove\",n,i)),u||(u=s(e,\"touchend\",y,i)),l||(l=s(e,\"touchcancel\",y,i)))},g=r=>{p>Date.now()||t(r)&&(!d&&n&&(d=s(c(e),\"mousemove\",n,i)),f||(f=s(c(e),\"mouseup\",v,i)))},y=e=>{b(),r&&r(e)},v=e=>{_(),r&&r(e)},b=()=>{a&&a(),u&&u(),l&&l(),a=u=l=void 0},_=()=>{d&&d(),f&&f(),d=f=void 0},w=()=>{b(),_()},E=t=>{t?(o&&o(),h&&h(),o=h=void 0,w()):(o||(o=s(e,\"touchstart\",m,i)),h||(h=s(e,\"mousedown\",g,i)))};return{setDisabled:E,stop:w,destroy:()=>{E(!0),r=n=t=void 0}}})(a.el,e=>{const t=f(e);return!(n||!r)&&(d(e,b),b.startX=b.currentX,b.startY=b.currentY,b.startTimeStamp=b.timeStamp=t,b.velocityX=b.velocityY=b.deltaX=b.deltaY=0,b.event=e,(!u||!1!==u(b))&&(w.release(),!!w.start()&&(n=!0,0===v?C():(_.start(b.startX,b.startY),!0))))},e=>{t?!i&&r&&(i=!0,h(b,e),requestAnimationFrame(E)):(h(b,e),_.detect(b.currentX,b.currentY)&&(_.isGesture()&&C()||N()))},I,{capture:!1}),N=()=>{T(),O.stop(),g&&g(b)};return{setDisabled(e){e&&t&&I(void 0),O.setDisabled(e)},destroy(){w.destroy(),O.destroy()}}},h=(e,t)=>{if(!t)return;const n=e.currentX,r=e.currentY,i=e.timeStamp;d(t,e);const o=e.currentX,s=e.currentY,a=(e.timeStamp=f(t))-i;if(a>0&&a<100){const t=(s-r)/a;e.velocityX=(o-n)/a*.7+.3*e.velocityX,e.velocityY=.7*t+.3*e.velocityY}e.deltaX=o-e.startX,e.deltaY=s-e.startY,e.event=t},d=(e,t)=>{let n=0,r=0;if(e){const t=e.changedTouches;if(t&&t.length>0){const e=t[0];n=e.clientX,r=e.clientY}else void 0!==e.pageX&&(n=e.pageX,r=e.pageY)}t.currentX=n,t.currentY=r},f=e=>e.timeStamp||Date.now()},WEwH:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return s});var r=n(\"hbGf\"),i=n(\"GIw4\"),o=n(\"VRyK\");function s(e,t){const n=(t=Object(i.a)(t)).map(t=>Object(r.a)(e,t));return Object(o.a)(...n)}},Wcq6:function(e,t,n){\"use strict\";var r,i=(r=n(\"wj3C\"))&&\"object\"==typeof r&&\"default\"in r?r.default:r;e.exports=i},XNiG:function(e,t,n){\"use strict\";var r=n(\"HDdC\"),i=n(\"7o/Q\"),o=n(\"quSY\"),s=n(\"9ppp\");class a extends o.a{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}var u=n(\"2QA8\");n.d(t,\"b\",function(){return c}),n.d(t,\"a\",function(){return l});class c extends i.a{constructor(e){super(e),this.destination=e}}let l=(()=>{class e extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(e){const t=new h(this,this);return t.operator=e,t}next(e){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].next(e)}}error(e){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].error(e);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let r=0;r<t;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new s.a;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new s.a;return this.hasError?(e.error(this.thrownError),o.a.EMPTY):this.isStopped?(e.complete(),o.a.EMPTY):(this.observers.push(e),new a(this,e))}asObservable(){const e=new r.a;return e.source=this,e}}return e.create=(e,t)=>new h(e,t),e})();class h extends l{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):o.a.EMPTY}}},XoHu:function(e,t,n){\"use strict\";function r(e){return null!==e&&\"object\"==typeof e}n.d(t,\"a\",function(){return r})},Xq1y:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return O}),n.d(t,\"b\",function(){return s}),n.d(t,\"c\",function(){return a}),n.d(t,\"d\",function(){return h}),n.d(t,\"e\",function(){return y}),n.d(t,\"f\",function(){return v}),n.d(t,\"g\",function(){return w}),n.d(t,\"h\",function(){return f}),n.d(t,\"i\",function(){return m}),n.d(t,\"j\",function(){return C}),n.d(t,\"k\",function(){return g}),n.d(t,\"l\",function(){return u}),n.d(t,\"m\",function(){return c}),n.d(t,\"n\",function(){return l}),n.d(t,\"o\",function(){return I}),n.d(t,\"p\",function(){return d});var r=n(\"OoTa\");let i=0;const o=e=>({create:t=>f(e,t),dismiss:(t,n,r)=>m(document,t,n,e,r),getTop:async()=>g(document,e)}),s=o(\"ion-alert\"),a=o(\"ion-action-sheet\"),u=o(\"ion-loading\"),c=o(\"ion-modal\"),l=o(\"ion-picker\"),h=o(\"ion-popover\"),d=o(\"ion-toast\"),f=(e,t)=>customElements.whenDefined(e).then(()=>{const n=document,r=n.createElement(e);p(n),Object.assign(r,t),r.classList.add(\"overlay-hidden\");const o=i++;return r.overlayIndex=o,r.hasAttribute(\"id\")||(r.id=`ion-overlay-${o}`),b(n).appendChild(r),r.componentOnReady()}),p=e=>{0===i&&(i=1,e.addEventListener(\"focusin\",t=>{const n=g(e);if(n&&n.backdropDismiss&&!S(n,t.target)){const e=n.querySelector(\"input,button\");e&&e.focus()}}),e.addEventListener(\"ionBackButton\",t=>{const n=g(e);n&&n.backdropDismiss&&t.detail.register(100,()=>n.dismiss(void 0,O))}),e.addEventListener(\"keyup\",t=>{if(\"Escape\"===t.key){const t=g(e);t&&t.backdropDismiss&&t.dismiss(void 0,O)}}))},m=(e,t,n,r,i)=>{const o=g(e,r,i);return o?o.dismiss(t,n):Promise.reject(\"overlay does not exist\")},g=(e,t,n)=>{const r=((e,t)=>{const n=Array.from(b(e).children).filter(e=>e.overlayIndex>0);return void 0===t?n:(t=t.toUpperCase(),n.filter(e=>e.tagName===t))})(e,t);return void 0===n?r[r.length-1]:r.find(e=>e.id===n)},y=async(e,t,n,i,o)=>{if(e.presented)return;e.presented=!0,e.willPresent.emit();const s=e.enterAnimation?e.enterAnimation:r.b.get(t,\"ios\"===e.mode?n:i);await _(e,s,e.el,o)&&e.didPresent.emit()},v=async(e,t,n,i,o,s,a)=>{if(!e.presented)return!1;e.presented=!1;try{e.willDismiss.emit({data:t,role:n});const c=e.leaveAnimation?e.leaveAnimation:r.b.get(i,\"ios\"===e.mode?o:s);await _(e,c,e.el,a),e.didDismiss.emit({data:t,role:n})}catch(u){console.error(u)}return e.el.remove(),!0},b=e=>e.querySelector(\"ion-app\")||e.body,_=async(e,t,i,o)=>{if(e.animation)return e.animation.destroy(),e.animation=void 0,!1;i.classList.remove(\"overlay-hidden\");const s=i.shadowRoot||e.el;let a,u=!0;try{const e=await n.e(15).then(n.bind(null,\"vK52\"));a=await e.create(t,s,o)}catch(h){(a=t(s,o)).fill(\"both\"),u=!1}e.animation=a,e.animated&&r.b.getBoolean(\"animated\",!0)||a.duration(0),e.keyboardClose&&a.beforeAddWrite(()=>{const e=i.ownerDocument.activeElement;e&&e.matches(\"input, ion-input, ion-textarea\")&&e.blur()});const c=await a.playAsync(),l=\"boolean\"==typeof c?c:a.hasCompleted;return u&&a.destroy(),e.animation=void 0,l},w=(e,t)=>{let n;const r=new Promise(e=>n=e);return E(e,t,e=>{n(e.detail)}),r},E=(e,t,n)=>{const r=i=>{e.removeEventListener(t,r),n(i)};e.addEventListener(t,r)},C=e=>\"cancel\"===e||e===O,S=(e,t)=>{for(;t;){if(t===e)return!0;t=t.parentElement}return!1},T=e=>e(),I=(e,t)=>{if(\"function\"==typeof e)return r.b.get(\"_zoneGate\",T)(()=>{try{return e(t)}catch(n){console.error(n)}})},O=\"backdrop\"},Xr7G:function(e,t,n){\"use strict\";n.d(t,\"c\",function(){return p}),n.d(t,\"e\",function(){return m}),n.d(t,\"d\",function(){return g}),n.d(t,\"b\",function(){return v}),n.d(t,\"f\",function(){return b}),n.d(t,\"a\",function(){return _}),n(\"mrSG\");var r=n(\"8Y7J\"),i=n(\"Cfvw\"),o=n(\"LRne\"),s=n(\"bMVn\"),a=n(\"m+Ru\"),u=n(\"fKx8\"),c=n(\"1XSQ\"),l=n(\"yA/v\"),h=n(\"SVse\"),d=n(\"Wcq6\"),f=n.n(d);const p=new r.o(\"angularfire2.enableFirestorePersistence\"),m=new r.o(\"angularfire2.firestore.persistenceSettings\"),g=new r.o(\"angularfire2.firestore.settings\"),y=parseInt(f.a.SDK_VERSION.split(\".\")[0]),v=y<5||5==y&&parseInt(f.a.SDK_VERSION.split(\".\")[1])<8?{timestampsInSnapshots:!0}:{};function b(e,t=(e=>e)){return{query:t(e),ref:e}}let _=(()=>(class{constructor(e,t,n,r,s,a,u){this.scheduler=new c.a(a,s),this.firestore=a.runOutsideAngular(()=>{const n=Object(l.e)(e,t).firestore();return n.settings(r||v),n}),this.persistenceEnabled$=n&&!Object(h.q)(s)?a.runOutsideAngular(()=>{try{return Object(i.a)(this.firestore.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(e){return Object(o.a)(!1)}}):Object(o.a)(!1)}collection(e,t){let n;n=\"string\"==typeof e?this.firestore.collection(e):e;const{ref:r,query:i}=b(n,t);return new a.a(r,i,this)}collectionGroup(e,t){if(y<6)throw\"collection group queries require Firebase JS SDK >= 6.0\";const n=t||(e=>e),r=this.firestore.collectionGroup(e);return new u.a(n(r),this)}doc(e){let t;return t=\"string\"==typeof e?this.firestore.doc(e):e,new s.a(t,this)}createId(){return this.firestore.collection(\"_\").doc().id}}))()},Yttj:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return o});var r=n(\"mrSG\"),i=n(\"a3Cf\"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),Object.defineProperty(t.prototype,\"convertFileSrc\",{get:function(){return Object(i.cordovaPropertyGet)(this,\"convertFileSrc\")},set:function(e){Object(i.cordovaPropertySet)(this,\"convertFileSrc\",e)},enumerable:!0,configurable:!0}),t.pluginName=\"WebView\",t.plugin=\"cordova-plugin-ionic-webview\",t.pluginRef=\"window.Ionic.WebView\",t.repo=\"https://github.com/ionic-team/cordova-plugin-ionic-webview\",t.platforms=[\"Android\",\"iOS\"],t.install=\"ionic cordova plugin add cordova-plugin-ionic-webview\",t}(i.IonicNativePlugin)},ZUHj:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return s});var r=n(\"51Dv\"),i=n(\"SeVD\"),o=n(\"HDdC\");function s(e,t,n,s,a=new r.a(e,n,s)){if(!a.closed)return t instanceof o.a?t.subscribe(a):Object(i.a)(t)(a)}},\"ZZ/e\":function(e,t,n){\"use strict\";var r=n(\"mrSG\"),i=n(\"8Y7J\"),o=n(\"SVse\"),s=n(\"iInd\"),a=n(\"OoTa\"),u=(n(\"oM6z\"),n(\"VUZZ\"),n(\"igpV\")),c=n(\"Xq1y\"),l=n(\"XNiG\"),h=n(\"xgIS\"),d=n(\"2Vo4\"),f=n(\"pLZG\"),p=n(\"eIep\"),m=n(\"/uUt\"),g=n(\"S6Yj\");n.d(t,\"a\",function(){return Ot}),n.d(t,\"b\",function(){return Nt}),n.d(t,\"c\",function(){return ot}),n.d(t,\"d\",function(){return C}),n.d(t,\"e\",function(){return tt}),n.d(t,\"f\",function(){return M}),n.d(t,\"g\",function(){return j}),n.d(t,\"h\",function(){return F}),n.d(t,\"i\",function(){return U}),n.d(t,\"j\",function(){return V}),n.d(t,\"k\",function(){return q}),n.d(t,\"l\",function(){return B}),n.d(t,\"m\",function(){return $}),n.d(t,\"n\",function(){return z}),n.d(t,\"o\",function(){return W}),n.d(t,\"p\",function(){return H}),n.d(t,\"q\",function(){return Q}),n.d(t,\"r\",function(){return G}),n.d(t,\"s\",function(){return K}),n.d(t,\"t\",function(){return Y}),n.d(t,\"u\",function(){return X}),n.d(t,\"v\",function(){return J}),n.d(t,\"w\",function(){return Z}),n.d(t,\"x\",function(){return ee}),n.d(t,\"y\",function(){return te}),n.d(t,\"z\",function(){return ne}),n.d(t,\"A\",function(){return re}),n.d(t,\"B\",function(){return ie}),n.d(t,\"C\",function(){return oe}),n.d(t,\"D\",function(){return se}),n.d(t,\"E\",function(){return ae}),n.d(t,\"F\",function(){return ue}),n.d(t,\"G\",function(){return ce}),n.d(t,\"H\",function(){return le}),n.d(t,\"I\",function(){return he}),n.d(t,\"J\",function(){return de}),n.d(t,\"K\",function(){return fe}),n.d(t,\"L\",function(){return pe}),n.d(t,\"M\",function(){return me}),n.d(t,\"N\",function(){return ge}),n.d(t,\"O\",function(){return ye}),n.d(t,\"P\",function(){return ve}),n.d(t,\"Q\",function(){return be}),n.d(t,\"R\",function(){return _e}),n.d(t,\"S\",function(){return we}),n.d(t,\"T\",function(){return Ee}),n.d(t,\"U\",function(){return Ce}),n.d(t,\"V\",function(){return Se}),n.d(t,\"W\",function(){return Te}),n.d(t,\"X\",function(){return Ie}),n.d(t,\"Y\",function(){return Oe}),n.d(t,\"Z\",function(){return Ne}),n.d(t,\"ab\",function(){return Ae}),n.d(t,\"bb\",function(){return Re}),n.d(t,\"cb\",function(){return De}),n.d(t,\"db\",function(){return ke}),n.d(t,\"eb\",function(){return xe}),n.d(t,\"fb\",function(){return Pe}),n.d(t,\"gb\",function(){return Le}),n.d(t,\"hb\",function(){return wt}),n.d(t,\"ib\",function(){return Me}),n.d(t,\"jb\",function(){return je}),n.d(t,\"kb\",function(){return Fe}),n.d(t,\"lb\",function(){return Ue}),n.d(t,\"mb\",function(){return Ve}),n.d(t,\"nb\",function(){return qe}),n.d(t,\"ob\",function(){return Be}),n.d(t,\"pb\",function(){return $e}),n.d(t,\"qb\",function(){return ze}),n.d(t,\"rb\",function(){return We}),n.d(t,\"sb\",function(){return He}),n.d(t,\"tb\",function(){return Qe}),n.d(t,\"ub\",function(){return Ge}),n.d(t,\"vb\",function(){return Ct}),n.d(t,\"wb\",function(){return Ke}),n.d(t,\"xb\",function(){return Ye}),n.d(t,\"yb\",function(){return Xe}),n.d(t,\"zb\",function(){return Je}),n.d(t,\"Ab\",function(){return Ze}),n.d(t,\"Bb\",function(){return et}),n.d(t,\"Cb\",function(){return St}),n.d(t,\"Db\",function(){return Lt}),n.d(t,\"Eb\",function(){return xt}),n.d(t,\"Fb\",function(){return At}),n.d(t,\"Gb\",function(){return Rt}),n.d(t,\"Hb\",function(){return A}),n.d(t,\"Ib\",function(){return I}),n.d(t,\"Jb\",function(){return Dt}),n.d(t,\"Kb\",function(){return S}),n.d(t,\"Lb\",function(){return T}),n.d(t,\"Mb\",function(){return kt}),n.d(t,\"Nb\",function(){return nt}),n.d(t,\"Ob\",function(){return Pt});var y=function(e){return\"function\"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(e):\"function\"==typeof requestAnimationFrame?requestAnimationFrame(e):setTimeout(e)},v=function(){function e(e){this.el=e,this.onChange=function(){},this.onTouched=function(){}}return e.prototype.writeValue=function(e){this.el.nativeElement.value=this.lastValue=null==e?\"\":e,b(this.el)},e.prototype.handleChangeEvent=function(e,t){e===this.el.nativeElement&&(t!==this.lastValue&&(this.lastValue=t,this.onChange(t)),b(this.el))},e.prototype._handleBlurEvent=function(e){e===this.el.nativeElement&&(this.onTouched(),b(this.el))},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this.el.nativeElement.disabled=e},e}(),b=function(e){y(function(){var t=e.nativeElement,n=_(t);w(t,n);var r=t.closest(\"ion-item\");r&&w(r,n)})},_=function(e){for(var t=e.classList,n=[],r=0;r<t.length;r++){var i=t.item(r);null!==i&&E(i,\"ng-\")&&n.push(\"ion-\"+i.substr(3))}return n},w=function(e,t){var n=e.classList;n.remove(\"ion-valid\",\"ion-invalid\",\"ion-touched\",\"ion-untouched\",\"ion-dirty\",\"ion-pristine\"),n.add.apply(n,t)},E=function(e,t){return e.substr(0,t.length)===t},C=function(e){function t(t){return e.call(this,t)||this}return Object(r.__extends)(t,e),t.prototype.writeValue=function(e){this.el.nativeElement.checked=this.lastValue=null!=e&&e,b(this.el)},t.prototype._handleIonChange=function(e){this.handleChangeEvent(e,e.checked)},t}(v),S=function(e){function t(t){return e.call(this,t)||this}return Object(r.__extends)(t,e),t.prototype._handleChangeEvent=function(e){this.handleChangeEvent(e,e.value)},t}(v),T=function(e){function t(t){return e.call(this,t)||this}return Object(r.__extends)(t,e),t.prototype._handleInputEvent=function(e){this.handleChangeEvent(e,e.value)},t}(v),I=function(){function e(e,t){var n=this;this.doc=e,this.backButton=new l.a,this.pause=new l.a,this.resume=new l.a,this.resize=new l.a,t.run(function(){var r;n.win=e.defaultView,n.backButton.subscribeWithPriority=function(e,n){return this.subscribe(function(r){return r.register(e,function(){return t.run(n)})})},N(n.pause,e,\"pause\"),N(n.resume,e,\"resume\"),N(n.backButton,e,\"ionBackButton\"),N(n.resize,n.win,\"resize\"),n._readyPromise=new Promise(function(e){r=e}),n.win&&n.win.cordova?e.addEventListener(\"deviceready\",function(){r(\"cordova\")},{once:!0}):r(\"dom\")})}return e.prototype.is=function(e){return Object(a.f)(this.win,e)},e.prototype.platforms=function(){return Object(a.e)(this.win)},e.prototype.ready=function(){return this._readyPromise},Object.defineProperty(e.prototype,\"isRTL\",{get:function(){return\"rtl\"===this.doc.dir},enumerable:!0,configurable:!0}),e.prototype.getQueryParam=function(e){return O(this.win.location.href,e)},e.prototype.isLandscape=function(){return!this.isPortrait()},e.prototype.isPortrait=function(){return this.win.matchMedia&&this.win.matchMedia(\"(orientation: portrait)\").matches},e.prototype.testUserAgent=function(e){var t=this.win.navigator;return!!(t&&t.userAgent&&t.userAgent.indexOf(e)>=0)},e.prototype.url=function(){return this.win.location.href},e.prototype.width=function(){return this.win.innerWidth},e.prototype.height=function(){return this.win.innerHeight},e.ngInjectableDef=Object(i.Q)({factory:function(){return new e(Object(i.U)(o.d),Object(i.U)(i.x))},token:e,providedIn:\"root\"}),e}(),O=function(e,t){t=t.replace(/[\\[]/,\"\\\\[\").replace(/[\\]]/,\"\\\\]\");var n=new RegExp(\"[\\\\?&]\"+t+\"=([^&#]*)\").exec(e);return n?decodeURIComponent(n[1].replace(/\\+/g,\" \")):null},N=function(e,t,n){t&&t.addEventListener(n,function(t){e.next(null!=t?t.detail:void 0)})},A=function(){function e(e,t,n,r){var i=this;this.location=t,this.serializer=n,this.router=r,this.direction=D,this.animated=k,this.guessDirection=\"forward\",this.lastNavId=-1,r&&r.events.subscribe(function(e){if(e instanceof s.d){var t=e.restoredState?e.restoredState.navigationId:e.id;i.guessDirection=t<i.lastNavId?\"back\":\"forward\",i.guessAnimation=e.restoredState?void 0:i.guessDirection,i.lastNavId=\"forward\"===i.guessDirection?e.id:t}}),e.backButton.subscribeWithPriority(0,function(){return i.pop()})}return e.prototype.navigateForward=function(e,t){return void 0===t&&(t={}),this.setDirection(\"forward\",t.animated,t.animationDirection),this.navigate(e,t)},e.prototype.navigateBack=function(e,t){return void 0===t&&(t={}),this.setDirection(\"back\",t.animated,t.animationDirection),this.navigate(e,t)},e.prototype.navigateRoot=function(e,t){return void 0===t&&(t={}),this.setDirection(\"root\",t.animated,t.animationDirection),this.navigate(e,t)},e.prototype.back=function(e){return void 0===e&&(e={animated:!0,animationDirection:\"back\"}),this.setDirection(\"back\",e.animated,e.animationDirection),this.location.back()},e.prototype.pop=function(){return Object(r.__awaiter)(this,void 0,void 0,function(){var e;return Object(r.__generator)(this,function(t){switch(t.label){case 0:e=this.topOutlet,t.label=1;case 1:return e?[4,e.pop()]:[3,3];case 2:return t.sent()?[3,3]:(e=e.parentOutlet,[3,1]);case 3:return[2]}})})},e.prototype.setDirection=function(e,t,n){this.direction=e,this.animated=R(e,t,n)},e.prototype.setTopOutlet=function(e){this.topOutlet=e},e.prototype.consumeTransition=function(){var e,t=\"root\";return\"auto\"===this.direction?(t=this.guessDirection,e=this.guessAnimation):(e=this.animated,t=this.direction),this.direction=D,this.animated=k,{direction:t,animation:e}},e.prototype.navigate=function(e,t){if(Array.isArray(e))return this.router.navigate(e,t);var n=this.serializer.parse(e.toString());return void 0!==t.queryParams&&(n.queryParams=Object(r.__assign)({},t.queryParams)),void 0!==t.fragment&&(n.fragment=t.fragment),this.router.navigateByUrl(n,t)},e.ngInjectableDef=Object(i.Q)({factory:function(){return new e(Object(i.U)(I),Object(i.U)(o.g),Object(i.U)(s.r),Object(i.U)(s.m,8))},token:e,providedIn:\"root\"}),e}(),R=function(e,t,n){if(!1!==t)return void 0!==n?n:\"forward\"===e||\"back\"===e?e:\"root\"===e&&!0===t?\"forward\":void 0},D=\"auto\",k=void 0,x=function(e,t){var n=e.prototype;t.forEach(function(e){Object.defineProperty(n,e,{get:function(){return this.el[e]},set:function(t){var n=this;this.z.runOutsideAngular(function(){return n.el[e]=t})}})})},P=function(e,t){var n=e.prototype;t.forEach(function(e){n[e]=function(){var t=this,n=arguments;return this.z.runOutsideAngular(function(){return t.el[e].apply(t.el,n)})}})},L=function(e,t,n){n.forEach(function(n){return e[n]=Object(h.a)(t,n)})},M=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}(),j=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}(),F=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();x(F,[\"color\",\"defaultHref\",\"disabled\",\"icon\",\"mode\",\"text\",\"type\"]);var U=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement,L(this,this.el,[\"ionBackdropTap\"])}}();x(U,[\"stopPropagation\",\"tappable\",\"visible\"]);var V=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();x(V,[\"color\",\"mode\"]);var q=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement,L(this,this.el,[\"ionFocus\",\"ionBlur\"])}}();x(q,[\"buttonType\",\"color\",\"disabled\",\"download\",\"expand\",\"fill\",\"href\",\"mode\",\"rel\",\"routerDirection\",\"shape\",\"size\",\"strong\",\"target\",\"type\"]);var B=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}(),$=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();x($,[\"button\",\"color\",\"disabled\",\"download\",\"href\",\"mode\",\"rel\",\"routerDirection\",\"target\",\"type\"]);var z=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();x(z,[\"mode\"]);var W=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();x(W,[\"color\",\"mode\",\"translucent\"]);var H=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();x(H,[\"color\",\"mode\"]);var Q=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();x(Q,[\"color\",\"mode\"]);var G=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement,L(this,this.el,[\"ionChange\",\"ionFocus\",\"ionBlur\"])}}();x(G,[\"checked\",\"color\",\"disabled\",\"indeterminate\",\"mode\",\"name\",\"value\"]);var K=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();x(K,[\"color\",\"mode\",\"outline\"]);var Y=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();x(Y,[\"offset\",\"offsetLg\",\"offsetMd\",\"offsetSm\",\"offsetXl\",\"offsetXs\",\"pull\",\"pullLg\",\"pullMd\",\"pullSm\",\"pullXl\",\"pullXs\",\"push\",\"pushLg\",\"pushMd\",\"pushSm\",\"pushXl\",\"pushXs\",\"size\",\"sizeLg\",\"sizeMd\",\"sizeSm\",\"sizeXl\",\"sizeXs\"]);var X=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement,L(this,this.el,[\"ionScrollStart\",\"ionScroll\",\"ionScrollEnd\"])}}();P(X,[\"getScrollElement\",\"scrollToTop\",\"scrollToBottom\",\"scrollByPoint\",\"scrollToPoint\"]),x(X,[\"color\",\"forceOverscroll\",\"fullscreen\",\"scrollEvents\",\"scrollX\",\"scrollY\"]);var J=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement,L(this,this.el,[\"ionCancel\",\"ionChange\",\"ionFocus\",\"ionBlur\"])}}();P(J,[\"open\"]),x(J,[\"cancelText\",\"dayNames\",\"dayShortNames\",\"dayValues\",\"disabled\",\"displayFormat\",\"doneText\",\"hourValues\",\"max\",\"min\",\"minuteValues\",\"mode\",\"monthNames\",\"monthShortNames\",\"monthValues\",\"name\",\"pickerFormat\",\"pickerOptions\",\"placeholder\",\"readonly\",\"value\",\"yearValues\"]);var Z=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();P(Z,[\"close\"]),x(Z,[\"activated\",\"edge\",\"horizontal\",\"vertical\"]);var ee=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement,L(this,this.el,[\"ionFocus\",\"ionBlur\"])}}();x(ee,[\"activated\",\"color\",\"disabled\",\"download\",\"href\",\"mode\",\"rel\",\"routerDirection\",\"show\",\"size\",\"target\",\"translucent\",\"type\"]);var te=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();x(te,[\"activated\",\"side\"]);var ne=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();x(ne,[\"mode\",\"translucent\"]);var re=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();x(re,[\"fixed\"]);var ie=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();x(ie,[\"mode\",\"translucent\"]);var oe=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();x(oe,[\"ariaLabel\",\"color\",\"flipRtl\",\"icon\",\"ios\",\"lazy\",\"md\",\"mode\",\"name\",\"size\",\"src\"]);var se=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement,L(this,this.el,[\"ionImgWillLoad\",\"ionImgDidLoad\",\"ionError\"])}}();x(se,[\"alt\",\"src\"]);var ae=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement,L(this,this.el,[\"ionInfinite\"])}}();P(ae,[\"complete\"]),x(ae,[\"disabled\",\"position\",\"threshold\"]);var ue=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();x(ue,[\"loadingSpinner\",\"loadingText\"]);var ce=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement,L(this,this.el,[\"ionInput\",\"ionChange\",\"ionBlur\",\"ionFocus\"])}}();P(ce,[\"setFocus\",\"getInputElement\"]),x(ce,[\"accept\",\"autocapitalize\",\"autocomplete\",\"autocorrect\",\"autofocus\",\"clearInput\",\"clearOnEdit\",\"color\",\"debounce\",\"disabled\",\"inputmode\",\"max\",\"maxlength\",\"min\",\"minlength\",\"mode\",\"multiple\",\"name\",\"pattern\",\"placeholder\",\"readonly\",\"required\",\"size\",\"spellcheck\",\"step\",\"type\",\"value\"]);var le=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();x(le,[\"button\",\"color\",\"detail\",\"detailIcon\",\"disabled\",\"download\",\"href\",\"lines\",\"mode\",\"rel\",\"routerDirection\",\"target\",\"type\"]);var he=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();x(he,[\"color\",\"mode\",\"sticky\"]);var de=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}(),fe=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();x(fe,[\"color\",\"disabled\",\"download\",\"expandable\",\"href\",\"mode\",\"rel\",\"target\",\"type\"]);var pe=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement,L(this,this.el,[\"ionSwipe\"])}}();x(pe,[\"side\"]);var me=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement,L(this,this.el,[\"ionDrag\"])}}();P(me,[\"getOpenAmount\",\"getSlidingRatio\",\"open\",\"close\",\"closeOpened\"]),x(me,[\"disabled\"]);var ge=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();x(ge,[\"color\",\"mode\",\"position\"]);var ye=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();P(ye,[\"closeSlidingItems\"]),x(ye,[\"inset\",\"lines\",\"mode\"]);var ve=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();x(ve,[\"color\",\"mode\"]);var be=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement,L(this,this.el,[\"ionWillOpen\",\"ionWillClose\",\"ionDidOpen\",\"ionDidClose\"])}}();P(be,[\"isOpen\",\"isActive\",\"open\",\"close\",\"toggle\",\"setOpen\"]),x(be,[\"contentId\",\"disabled\",\"maxEdgeStart\",\"menuId\",\"side\",\"swipeGesture\",\"type\"]);var _e=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();x(_e,[\"autoHide\",\"color\",\"disabled\",\"menu\",\"type\"]);var we=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();x(we,[\"autoHide\",\"menu\"]);var Ee=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement,L(this,this.el,[\"ionNavWillChange\",\"ionNavDidChange\"])}}();P(Ee,[\"push\",\"insert\",\"insertPages\",\"pop\",\"popTo\",\"popToRoot\",\"removeIndex\",\"setRoot\",\"setPages\",\"getActive\",\"getByIndex\",\"canGoBack\",\"getPrevious\"]),x(Ee,[\"animated\",\"animation\",\"root\",\"rootParams\",\"swipeGesture\"]);var Ce=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}(),Se=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();x(Se,[\"component\",\"componentProps\"]);var Te=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();x(Te,[\"component\",\"componentProps\"]);var Ie=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();x(Ie,[\"color\",\"mode\"]);var Oe=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();x(Oe,[\"buffer\",\"color\",\"mode\",\"reversed\",\"type\",\"value\"]);var Ne=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement,L(this,this.el,[\"ionSelect\",\"ionFocus\",\"ionBlur\"])}}();x(Ne,[\"checked\",\"color\",\"disabled\",\"mode\",\"name\",\"value\"]);var Ae=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement,L(this,this.el,[\"ionChange\"])}}();x(Ae,[\"allowEmptySelection\",\"name\",\"value\"]);var Re=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement,L(this,this.el,[\"ionChange\",\"ionFocus\",\"ionBlur\"])}}();x(Re,[\"color\",\"debounce\",\"disabled\",\"dualKnobs\",\"max\",\"min\",\"mode\",\"name\",\"pin\",\"snaps\",\"step\",\"ticks\",\"value\"]);var De=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement,L(this,this.el,[\"ionRefresh\",\"ionPull\",\"ionStart\"])}}();P(De,[\"complete\",\"cancel\",\"getProgress\"]),x(De,[\"closeDuration\",\"disabled\",\"pullFactor\",\"pullMax\",\"pullMin\",\"snapbackDuration\"]);var ke=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();x(ke,[\"pullingIcon\",\"pullingText\",\"refreshingSpinner\",\"refreshingText\"]);var xe=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}(),Pe=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement,L(this,this.el,[\"ionItemReorder\"])}}();P(Pe,[\"complete\"]),x(Pe,[\"disabled\"]);var Le=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();P(Le,[\"addRipple\"]),x(Le,[\"type\"]);var Me=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}(),je=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement,L(this,this.el,[\"ionInput\",\"ionChange\",\"ionCancel\",\"ionClear\",\"ionBlur\",\"ionFocus\"])}}();P(je,[\"setFocus\",\"getInputElement\"]),x(je,[\"animated\",\"autocomplete\",\"autocorrect\",\"cancelButtonIcon\",\"cancelButtonText\",\"clearIcon\",\"color\",\"debounce\",\"disabled\",\"inputmode\",\"mode\",\"placeholder\",\"searchIcon\",\"showCancelButton\",\"spellcheck\",\"type\",\"value\"]);var Fe=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement,L(this,this.el,[\"ionChange\",\"ionStyle\"])}}();x(Fe,[\"color\",\"disabled\",\"mode\",\"scrollable\",\"value\"]);var Ue=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement,L(this,this.el,[\"ionSelect\"])}}();x(Ue,[\"checked\",\"disabled\",\"layout\",\"mode\",\"type\",\"value\"]);var Ve=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement,L(this,this.el,[\"ionChange\",\"ionCancel\",\"ionFocus\",\"ionBlur\"])}}();P(Ve,[\"open\"]),x(Ve,[\"cancelText\",\"compareWith\",\"disabled\",\"interface\",\"interfaceOptions\",\"mode\",\"multiple\",\"name\",\"okText\",\"placeholder\",\"selectedText\",\"value\"]);var qe=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();x(qe,[\"disabled\",\"selected\",\"value\"]);var Be=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();x(Be,[\"animated\",\"width\"]);var $e=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}(),ze=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement,L(this,this.el,[\"ionSlidesDidLoad\",\"ionSlideTap\",\"ionSlideDoubleTap\",\"ionSlideWillChange\",\"ionSlideDidChange\",\"ionSlideNextStart\",\"ionSlidePrevStart\",\"ionSlideNextEnd\",\"ionSlidePrevEnd\",\"ionSlideTransitionStart\",\"ionSlideTransitionEnd\",\"ionSlideDrag\",\"ionSlideReachStart\",\"ionSlideReachEnd\",\"ionSlideTouchStart\",\"ionSlideTouchEnd\"])}}();P(ze,[\"update\",\"updateAutoHeight\",\"slideTo\",\"slideNext\",\"slidePrev\",\"getActiveIndex\",\"getPreviousIndex\",\"length\",\"isEnd\",\"isBeginning\",\"startAutoplay\",\"stopAutoplay\",\"lockSwipeToNext\",\"lockSwipeToPrev\",\"lockSwipes\"]),x(ze,[\"mode\",\"options\",\"pager\",\"scrollbar\"]);var We=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();x(We,[\"color\",\"duration\",\"name\",\"paused\"]);var He=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement,L(this,this.el,[\"ionSplitPaneVisible\"])}}();x(He,[\"contentId\",\"disabled\",\"when\"]);var Qe=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();x(Qe,[\"color\",\"mode\",\"selectedTab\",\"translucent\"]);var Ge=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();x(Ge,[\"disabled\",\"download\",\"href\",\"layout\",\"mode\",\"rel\",\"selected\",\"tab\",\"target\"]);var Ke=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();x(Ke,[\"color\",\"mode\"]);var Ye=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement,L(this,this.el,[\"ionChange\",\"ionInput\",\"ionBlur\",\"ionFocus\"])}}();P(Ye,[\"setFocus\",\"getInputElement\"]),x(Ye,[\"autoGrow\",\"autocapitalize\",\"autofocus\",\"clearOnEdit\",\"color\",\"cols\",\"debounce\",\"disabled\",\"maxlength\",\"minlength\",\"mode\",\"name\",\"placeholder\",\"readonly\",\"required\",\"rows\",\"spellcheck\",\"value\",\"wrap\"]);var Xe=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}(),Je=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();x(Je,[\"color\"]);var Ze=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement,L(this,this.el,[\"ionChange\",\"ionFocus\",\"ionBlur\"])}}();x(Ze,[\"checked\",\"color\",\"disabled\",\"mode\",\"name\",\"value\"]);var et=function(){return function(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}}();x(et,[\"color\",\"mode\"]);var tt=function(){function e(){}return e.prototype.get=function(e,t){var n=rt();return n?n.get(e,t):null},e.prototype.getBoolean=function(e,t){var n=rt();return!!n&&n.getBoolean(e,t)},e.prototype.getNumber=function(e,t){var n=rt();return n?n.getNumber(e,t):0},e.prototype.set=function(e,t){var n=rt();n&&n.set(e,t)},e.ngInjectableDef=Object(i.Q)({factory:function(){return new e},token:e,providedIn:\"root\"}),e}(),nt=new i.o(\"USERCONFIG\"),rt=function(){if(\"undefined\"!=typeof window){var e=window.Ionic;if(e&&e.config)return e.config}return null},it=function(){function e(e){void 0===e&&(e={}),this.data=e}return e.prototype.get=function(e){return this.data[e]},e}(),ot=function(){function e(e,t){this.zone=e,this.appRef=t}return e.prototype.create=function(e,t,n){return new st(e,t,n,this.appRef,this.zone)},e}(),st=function(){function e(e,t,n,r,i){this.resolver=e,this.injector=t,this.location=n,this.appRef=r,this.zone=i,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}return e.prototype.attachViewToDom=function(e,t,n,r){var i=this;return this.zone.run(function(){return new Promise(function(o){o(at(i.zone,i.resolver,i.injector,i.location,i.appRef,i.elRefMap,i.elEventsMap,e,t,n,r))})})},e.prototype.removeViewFromDom=function(e,t){var n=this;return this.zone.run(function(){return new Promise(function(e){var r=n.elRefMap.get(t);if(r){r.destroy(),n.elRefMap.delete(t);var i=n.elEventsMap.get(t);i&&(i(),n.elEventsMap.delete(t))}e()})})},e}(),at=function(e,t,n,r,o,s,a,u,c,l,h){var d=t.resolveComponentFactory(c),f=i.p.create({providers:ht(l),parent:n}),p=r?r.createComponent(d,r.length,f):d.create(f),m=p.instance,g=p.location.nativeElement;if(l&&Object.assign(m,l),h)for(var y=0,v=h;y<v.length;y++)g.classList.add(v[y]);var b=ct(e,m,g);return u.appendChild(g),r||o.attachView(p.hostView),p.changeDetectorRef.reattach(),s.set(g,p),a.set(g,b),g},ut=[u.a,u.b,u.c,u.d,u.e],ct=function(e,t,n){return e.run(function(){var e=ut.filter(function(e){return\"function\"==typeof t[e]}).map(function(e){var r=function(n){return t[e](n.detail)};return n.addEventListener(e,r),function(){return n.removeEventListener(e,r)}});return function(){return e.forEach(function(e){return e()})}})},lt=new i.o(\"NavParamsToken\"),ht=function(e){return[{provide:lt,useValue:e},{provide:it,useFactory:dt,deps:[lt]}]},dt=function(e){return new it(e)},ft=function(e,t){return(e=e.filter(function(e){return e.stackId!==t.stackId})).push(t),e},pt=function(e,t){var n=e.createUrlTree([\".\"],{relativeTo:t});return e.serializeUrl(n)},mt=function(e,t){if(e)for(var n=gt(t),r=0;r<n.length;r++){if(r>=e.length)return n[r];if(n[r]!==e[r])return}},gt=function(e){return e.split(\"/\").map(function(e){return e.trim()}).filter(function(e){return\"\"!==e})},yt=function(e){e&&(e.ref.destroy(),e.unlistenEvents())},vt=function(){function e(e,t,n,r,i,o){this.containerEl=t,this.router=n,this.navCtrl=r,this.zone=i,this.location=o,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==e?gt(e):void 0}return e.prototype.createView=function(e,t){var n=pt(this.router,t),r=e&&e.location&&e.location.nativeElement,i=ct(this.zone,e.instance,r);return{id:this.nextId++,stackId:mt(this.tabsPrefix,n),unlistenEvents:i,element:r,ref:e,url:n}},e.prototype.getExistingView=function(e){var t=pt(this.router,e),n=this.views.find(function(e){return e.url===t});return n&&n.ref.changeDetectorRef.reattach(),n},e.prototype.setActive=function(e){var t=this,n=this.navCtrl.consumeTransition(),r=n.direction,i=n.animation,o=this.activeView,s=function(e,t){return!t||e.stackId!==t.stackId}(e,o);s&&(r=\"back\",i=void 0);var a,u=this.views.slice(),c=this.router;c.getCurrentNavigation?a=c.getCurrentNavigation():c.navigations&&c.navigations.value&&(a=c.navigations.value),a&&a.extras&&a.extras.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);var l=this.views.includes(e),h=this.insertView(e,r);return l||e.ref.changeDetectorRef.detectChanges(),this.zone.runOutsideAngular(function(){return t.wait(function(){return o&&o.ref.changeDetectorRef.detach(),e.ref.changeDetectorRef.reattach(),t.transition(e,o,i,t.canGoBack(1),!1).then(function(){return bt(e,h,u,t.location)}).then(function(){return{enteringView:e,direction:r,animation:i,tabSwitch:s}})})})},e.prototype.canGoBack=function(e,t){return void 0===t&&(t=this.getActiveStackId()),this.getStack(t).length>e},e.prototype.pop=function(e,t){var n=this;return void 0===t&&(t=this.getActiveStackId()),this.zone.run(function(){var r=n.getStack(t);if(r.length<=e)return Promise.resolve(!1);var i=r[r.length-e-1],o=i.url,s=i.savedData;if(s){var a=s.get(\"primary\");a&&a.route&&a.route._routerState&&a.route._routerState.snapshot&&a.route._routerState.snapshot.url&&(o=a.route._routerState.snapshot.url)}return n.navCtrl.navigateBack(o,i.savedExtras).then(function(){return!0})})},e.prototype.startBackTransition=function(){var e=this,t=this.activeView;if(t){var n=this.getStack(t.stackId),r=n[n.length-2];return this.wait(function(){return e.transition(r,t,\"back\",e.canGoBack(2),!0)})}return Promise.resolve()},e.prototype.endBackTransition=function(e){e?(this.skipTransition=!0,this.pop(1)):this.activeView&&_t(this.activeView,this.views,this.views,this.location)},e.prototype.getLastUrl=function(e){var t=this.getStack(e);return t.length>0?t[t.length-1]:void 0},e.prototype.getActiveStackId=function(){return this.activeView?this.activeView.stackId:void 0},e.prototype.destroy=function(){this.containerEl=void 0,this.views.forEach(yt),this.activeView=void 0,this.views=[]},e.prototype.getStack=function(e){return this.views.filter(function(t){return t.stackId===e})},e.prototype.insertView=function(e,t){return this.activeView=e,this.views=function(e,t,n){return\"root\"===n?ft(e,t):\"forward\"===n?function(e,t){return e.indexOf(t)>=0?e=e.filter(function(e){return e.stackId!==t.stackId||e.id<=t.id}):e.push(t),e}(e,t):function(e,t){return e.indexOf(t)>=0?e.filter(function(e){return e.stackId!==t.stackId||e.id<=t.id}):ft(e,t)}(e,t)}(this.views,e,t),this.views.slice()},e.prototype.transition=function(e,t,n,r,i){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(t===e)return Promise.resolve(!1);var o=e?e.element:void 0,s=t?t.element:void 0,a=this.containerEl;return o&&o!==s&&(o.classList.add(\"ion-page\",\"ion-page-invisible\"),o.parentElement!==a&&a.appendChild(o),a.commit)?a.commit(o,s,{deepWait:!0,duration:void 0===n?0:void 0,direction:n,showGoBack:r,progressAnimation:i}):Promise.resolve(!1)},e.prototype.wait=function(e){return Object(r.__awaiter)(this,void 0,void 0,function(){return Object(r.__generator)(this,function(t){switch(t.label){case 0:return void 0===this.runningTask?[3,2]:[4,this.runningTask];case 1:t.sent(),this.runningTask=void 0,t.label=2;case 2:return[2,this.runningTask=e()]}})})},e}(),bt=function(e,t,n,r){return\"function\"==typeof requestAnimationFrame?new Promise(function(i){requestAnimationFrame(function(){_t(e,t,n,r),i()})}):Promise.resolve()},_t=function(e,t,n,r){n.filter(function(e){return!t.includes(e)}).forEach(yt),t.forEach(function(t){var n=r.path().split(\"?\")[0].split(\"#\")[0];if(t!==e&&t.url!==n){var i=t.element;i.setAttribute(\"aria-hidden\",\"true\"),i.classList.add(\"ion-page-hidden\"),t.ref.changeDetectorRef.detach()}})},wt=function(){function e(e,t,n,r,o,a,u,c,l,h,f,p,m){this.parentContexts=e,this.location=t,this.resolver=n,this.config=a,this.navCtrl=u,this.parentOutlet=m,this.activated=null,this.activatedView=null,this._activatedRoute=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new d.a(null),this.stackEvents=new i.m,this.activateEvents=new i.m,this.deactivateEvents=new i.m,this.nativeEl=l.nativeElement,this.name=r||s.f,this.tabsPrefix=\"true\"===o?pt(h,p):void 0,this.stackCtrl=new vt(this.tabsPrefix,this.nativeEl,h,u,f,c),e.onChildOutletCreated(this.name,this)}return Object.defineProperty(e.prototype,\"animated\",{set:function(e){this.nativeEl.animated=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"swipeGesture\",{set:function(e){var t=this;this._swipeGesture=e,this.nativeEl.swipeHandler=e?{canStart:function(){return t.stackCtrl.canGoBack(1)},onStart:function(){return t.stackCtrl.startBackTransition()},onEnd:function(e){return t.stackCtrl.endBackTransition(e)}}:void 0},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this.stackCtrl.destroy()},e.prototype.getContext=function(){return this.parentContexts.getContext(this.name)},e.prototype.ngOnInit=function(){var e=this;if(!this.activated){var t=this.getContext();t&&t.route&&this.activateWith(t.route,t.resolver||null)}this.nativeEl.componentOnReady&&this.nativeEl.componentOnReady().then(function(){void 0===e._swipeGesture&&(e.swipeGesture=e.config.getBoolean(\"swipeBackEnabled\",\"ios\"===e.nativeEl.mode))})},Object.defineProperty(e.prototype,\"isActivated\",{get:function(){return!!this.activated},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"component\",{get:function(){if(!this.activated)throw new Error(\"Outlet is not activated\");return this.activated.instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"activatedRoute\",{get:function(){if(!this.activated)throw new Error(\"Outlet is not activated\");return this._activatedRoute},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"activatedRouteData\",{get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}},enumerable:!0,configurable:!0}),e.prototype.detach=function(){throw new Error(\"incompatible reuse strategy\")},e.prototype.attach=function(e,t){throw new Error(\"incompatible reuse strategy\")},e.prototype.deactivate=function(){if(this.activated){if(this.activatedView){this.activatedView.savedData=new Map(this.getContext().children.contexts),this.activatedView.savedExtras={};var e=this.getContext();if(e.route){var t=e.route.snapshot;this.activatedView.savedExtras.queryParams=t.queryParams,this.activatedView.savedExtras.fragment=t.fragment}}var n=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}},e.prototype.activateWith=function(e,t){var n,r=this;if(this.isActivated)throw new Error(\"Cannot activate an already activated outlet\");this._activatedRoute=e;var i=this.stackCtrl.getExistingView(e);if(i){n=this.activated=i.ref;var o=i.savedData;o&&(this.getContext().children.contexts=o),this.updateActivatedRouteProxy(n.instance,e)}else{var s=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,u=new d.a(null),c=this.createActivatedRouteProxy(u,e),l=new Et(c,a,this.location.injector);n=this.activated=this.location.createComponent(s,this.location.length,l),u.next(n.instance),i=this.stackCtrl.createView(this.activated,e),this.proxyMap.set(n.instance,c),this.currentActivatedRoute$.next({component:n.instance,activatedRoute:e})}this.activatedView=i,this.stackCtrl.setActive(i).then(function(e){r.navCtrl.setTopOutlet(r),r.activateEvents.emit(n.instance),r.stackEvents.emit(e)})},e.prototype.canGoBack=function(e,t){return void 0===e&&(e=1),this.stackCtrl.canGoBack(e,t)},e.prototype.pop=function(e,t){return void 0===e&&(e=1),this.stackCtrl.pop(e,t)},e.prototype.getLastUrl=function(e){var t=this.stackCtrl.getLastUrl(e);return t?t.url:void 0},e.prototype.getActiveStackId=function(){return this.stackCtrl.getActiveStackId()},e.prototype.createActivatedRouteProxy=function(e,t){var n=new s.a;return n._futureSnapshot=t._futureSnapshot,n._routerState=t._routerState,n.snapshot=t.snapshot,n.outlet=t.outlet,n.component=t.component,n._paramMap=this.proxyObservable(e,\"paramMap\"),n._queryParamMap=this.proxyObservable(e,\"queryParamMap\"),n.url=this.proxyObservable(e,\"url\"),n.params=this.proxyObservable(e,\"params\"),n.queryParams=this.proxyObservable(e,\"queryParams\"),n.fragment=this.proxyObservable(e,\"fragment\"),n.data=this.proxyObservable(e,\"data\"),n},e.prototype.proxyObservable=function(e,t){var n=this;return e.pipe(Object(f.a)(function(e){return!!e}),Object(p.a)(function(e){return n.currentActivatedRoute$.pipe(Object(f.a)(function(t){return null!==t&&t.component===e}),Object(p.a)(function(e){return e&&e.activatedRoute[t]}),Object(m.a)())}))},e.prototype.updateActivatedRouteProxy=function(e,t){var n=this.proxyMap.get(e);if(!n)throw new Error(\"Could not find activated route proxy for view\");n._futureSnapshot=t._futureSnapshot,n._routerState=t._routerState,n.snapshot=t.snapshot,n.outlet=t.outlet,n.component=t.component,this.currentActivatedRoute$.next({component:e,activatedRoute:t})},e}(),Et=function(){function e(e,t,n){this.route=e,this.childContexts=t,this.parent=n}return e.prototype.get=function(e,t){return e===s.a?this.route:e===s.b?this.childContexts:this.parent.get(e,t)},e}(),Ct=function(){function e(e){this.navCtrl=e,this.ionTabsWillChange=new i.m,this.ionTabsDidChange=new i.m}return e.prototype.onPageSelected=function(e){var t=e.enteringView.stackId;e.tabSwitch&&void 0!==t&&(this.tabBar&&(this.tabBar.selectedTab=t),this.ionTabsWillChange.emit({tab:t}),this.ionTabsDidChange.emit({tab:t}))},e.prototype.select=function(e){var t=this.outlet.getActiveStackId()===e,n=this.outlet.tabsPrefix+\"/\"+e,r=t?n:this.outlet.getLastUrl(e)||n;return this.navCtrl.navigateRoot(r,{animated:!0,animationDirection:\"back\"})},e.prototype.getSelected=function(){return this.outlet.getActiveStackId()},e}(),St=function(){function e(e,t,n){this.z=e,this.iterableDiffers=t,this.refMap=new WeakMap,this.el=n.nativeElement,this.el.nodeRender=this.nodeRender.bind(this)}return e.prototype.ngOnChanges=function(e){if(this.trackBy&&\"items\"in e){var t=e.items.currentValue;if(void 0===this.differ&&null!=t)try{this.differ=this.iterableDiffers.find(t).create(this.trackBy)}catch(n){throw new Error(\"Cannot find a differ supporting object '\"+t+\"'. VirtualScroll only supports binding to Iterables such as Arrays.\")}}},e.prototype.ngDoCheck=function(){null!==(void 0!==this.differ&&this.items?this.differ.diff(this.items):null)&&this.checkRange(0)},e.prototype.nodeRender=function(e,t,n){var r=this;return this.z.run(function(){var i;if(e){var o=(i=r.refMap.get(e)).context;o.$implicit=t.value,o.index=t.index}else i=r.itmTmp.viewContainer.createEmbeddedView(r.getComponent(t.type),{$implicit:t.value,index:n},n),e=Tt(i),r.refMap.set(e,i);return i.detectChanges(),e})},e.prototype.getComponent=function(e){switch(e){case\"item\":return this.itmTmp.templateRef;case\"header\":return this.hdrTmp.templateRef;case\"footer\":return this.ftrTmp.templateRef}throw new Error(\"template for virtual item was not provided\")},e}(),Tt=function(e){for(var t=e.rootNodes,n=0;n<t.length;n++)if(1===t[n].nodeType)return t[n];throw new Error(\"virtual element was not created\")};x(St,[\"approxItemHeight\",\"approxHeaderHeight\",\"approxFooterHeight\",\"headerFn\",\"footerFn\",\"items\",\"itemHeight\",\"headerHeight\",\"footerHeight\"]),P(St,[\"checkEnd\",\"checkRange\",\"positionForItem\"]);var It=function(){function e(e){this.ctrl=e}return e.prototype.create=function(e){return this.ctrl.create(e||{})},e.prototype.dismiss=function(e,t,n){return this.ctrl.dismiss(e,t,n)},e.prototype.getTop=function(){return this.ctrl.getTop()},e}(),Ot=function(e){function t(){return e.call(this,c.c)||this}return Object(r.__extends)(t,e),t.ngInjectableDef=Object(i.Q)({factory:function(){return new t},token:t,providedIn:\"root\"}),t}(It),Nt=function(e){function t(){return e.call(this,c.b)||this}return Object(r.__extends)(t,e),t.ngInjectableDef=Object(i.Q)({factory:function(){return new t},token:t,providedIn:\"root\"}),t}(It),At=function(e){function t(){return e.call(this,c.l)||this}return Object(r.__extends)(t,e),t.ngInjectableDef=Object(i.Q)({factory:function(){return new t},token:t,providedIn:\"root\"}),t}(It),Rt=function(e){function t(t,n,r){var i=e.call(this,c.m)||this;return i.angularDelegate=t,i.resolver=n,i.injector=r,i}return Object(r.__extends)(t,e),t.prototype.create=function(t){return e.prototype.create.call(this,Object(r.__assign)({},t,{delegate:this.angularDelegate.create(this.resolver,this.injector)}))},t}(It),Dt=function(e){function t(t,n,r){var i=e.call(this,c.d)||this;return i.angularDelegate=t,i.resolver=n,i.injector=r,i}return Object(r.__extends)(t,e),t.prototype.create=function(t){return e.prototype.create.call(this,Object(r.__assign)({},t,{delegate:this.angularDelegate.create(this.resolver,this.injector)}))},t}(It),kt=function(e){function t(){return e.call(this,c.p)||this}return Object(r.__extends)(t,e),t.ngInjectableDef=Object(i.Q)({factory:function(){return new t},token:t,providedIn:\"root\"}),t}(It),xt=function(){function e(){}return e.prototype.shouldDetach=function(e){return!1},e.prototype.shouldAttach=function(e){return!1},e.prototype.store=function(e,t){},e.prototype.retrieve=function(e){return null},e.prototype.shouldReuseRoute=function(e,t){if(e.routeConfig!==t.routeConfig)return!1;var n=e.params,r=t.params,i=Object.keys(n),o=Object.keys(r);if(i.length!==o.length)return!1;for(var s=0,a=i;s<a.length;s++){var u=a[s];if(r[u]!==n[u])return!1}return!0},e}(),Pt=function(e,t,i){return function(){var o=t.defaultView;if(o){(o.Ionic=o.Ionic||{}).config=Object(r.__assign)({},e,{_zoneGate:function(e){return i.run(e)}});var s=\"__zone_symbol__addEventListener\"in t.body?\"__zone_symbol__addEventListener\":\"addEventListener\";return function(){var e=window,t=[];return e.customElements&&(!e.Element||e.Element.prototype.closest&&e.Element.prototype.matches&&e.Element.prototype.remove)||t.push(n.e(112).then(n.t.bind(null,\"QdDj\",7))),\"function\"==typeof Object.assign&&Object.entries&&Array.prototype.find&&Array.prototype.includes&&String.prototype.startsWith&&String.prototype.endsWith&&(!e.NodeList||e.NodeList.prototype.forEach)&&e.fetch&&function(){try{var e=new URL(\"b\",\"http://a\");return e.pathname=\"c%20d\",\"http://a/c%20d\"===e.href&&e.searchParams}catch(t){return!1}}()&&\"undefined\"!=typeof WeakMap||t.push(n.e(110).then(n.t.bind(null,\"t6o4\",7))),e.CSS&&e.CSS.supports&&e.CSS.supports(\"color\",\"var(--c)\")||t.push(n.e(111).then(n.t.bind(null,\"KIXJ\",7))),Promise.all(t)}().then(function(){return((e,t)=>Object(g.b)().then(()=>{Object(g.h)(),Object(g.c)(JSON.parse('[[{\"ios\":\"ion-select_3-ios\",\"md\":\"ion-select_3-md\"},[[2,\"ion-select-popover\",{\"header\":[1],\"subHeader\":[1,\"sub-header\"],\"message\":[1],\"options\":[16]},[[0,\"ionSelect\",\"onSelect\"]]],[1,\"ion-select\",{\"disabled\":[4],\"cancelText\":[1,\"cancel-text\"],\"okText\":[1,\"ok-text\"],\"placeholder\":[1],\"name\":[1],\"selectedText\":[1,\"selected-text\"],\"multiple\":[4],\"interface\":[1],\"interfaceOptions\":[8,\"interface-options\"],\"compareWith\":[1,\"compare-with\"],\"value\":[1032],\"isExpanded\":[32],\"open\":[64]},[[0,\"ionSelectOptionDidLoad\",\"selectOptionChanged\"],[0,\"ionSelectOptionDidUnload\",\"selectOptionChanged\"]]],[1,\"ion-select-option\",{\"disabled\":[4],\"selected\":[4],\"value\":[1032]}]]],[{\"ios\":\"ion-action-sheet-ios\",\"md\":\"ion-action-sheet-md\"},[[2,\"ion-action-sheet\",{\"overlayIndex\":[2,\"overlay-index\"],\"keyboardClose\":[4,\"keyboard-close\"],\"enterAnimation\":[16],\"leaveAnimation\":[16],\"buttons\":[16],\"cssClass\":[1,\"css-class\"],\"backdropDismiss\":[4,\"backdrop-dismiss\"],\"header\":[1],\"subHeader\":[1,\"sub-header\"],\"translucent\":[4],\"animated\":[4],\"present\":[64],\"dismiss\":[64],\"onDidDismiss\":[64],\"onWillDismiss\":[64]}]]],[{\"ios\":\"ion-fab_3-ios\",\"md\":\"ion-fab_3-md\"},[[1,\"ion-fab-button\",{\"color\":[1],\"activated\":[4],\"disabled\":[4],\"download\":[1],\"href\":[1],\"rel\":[1],\"routerDirection\":[1,\"router-direction\"],\"target\":[1],\"show\":[4],\"translucent\":[4],\"type\":[1],\"size\":[1]}],[1,\"ion-fab\",{\"horizontal\":[1],\"vertical\":[1],\"edge\":[4],\"activated\":[1028],\"close\":[64]}],[1,\"ion-fab-list\",{\"activated\":[4],\"side\":[1]}]]],[{\"ios\":\"ion-refresher_2-ios\",\"md\":\"ion-refresher_2-md\"},[[0,\"ion-refresher-content\",{\"pullingIcon\":[1025,\"pulling-icon\"],\"pullingText\":[1,\"pulling-text\"],\"refreshingSpinner\":[1025,\"refreshing-spinner\"],\"refreshingText\":[1,\"refreshing-text\"]}],[0,\"ion-refresher\",{\"pullMin\":[2,\"pull-min\"],\"pullMax\":[2,\"pull-max\"],\"closeDuration\":[1,\"close-duration\"],\"snapbackDuration\":[1,\"snapback-duration\"],\"pullFactor\":[2,\"pull-factor\"],\"disabled\":[4],\"state\":[32],\"complete\":[64],\"cancel\":[64],\"getProgress\":[64]}]]],[{\"ios\":\"ion-alert-ios\",\"md\":\"ion-alert-md\"},[[2,\"ion-alert\",{\"overlayIndex\":[2,\"overlay-index\"],\"keyboardClose\":[4,\"keyboard-close\"],\"enterAnimation\":[16],\"leaveAnimation\":[16],\"cssClass\":[1,\"css-class\"],\"header\":[1],\"subHeader\":[1,\"sub-header\"],\"message\":[1],\"buttons\":[16],\"inputs\":[1040],\"backdropDismiss\":[4,\"backdrop-dismiss\"],\"translucent\":[4],\"animated\":[4],\"present\":[64],\"dismiss\":[64],\"onDidDismiss\":[64],\"onWillDismiss\":[64]}]]],[{\"ios\":\"ion-back-button-ios\",\"md\":\"ion-back-button-md\"},[[2,\"ion-back-button\",{\"color\":[1],\"defaultHref\":[1,\"default-href\"],\"disabled\":[516],\"icon\":[1],\"text\":[1],\"type\":[1]}]]],[{\"ios\":\"ion-loading-ios\",\"md\":\"ion-loading-md\"},[[2,\"ion-loading\",{\"overlayIndex\":[2,\"overlay-index\"],\"keyboardClose\":[4,\"keyboard-close\"],\"enterAnimation\":[16],\"leaveAnimation\":[16],\"message\":[1],\"cssClass\":[1,\"css-class\"],\"duration\":[2],\"backdropDismiss\":[4,\"backdrop-dismiss\"],\"showBackdrop\":[4,\"show-backdrop\"],\"spinner\":[1025],\"translucent\":[4],\"animated\":[4],\"present\":[64],\"dismiss\":[64],\"onDidDismiss\":[64],\"onWillDismiss\":[64]}]]],[{\"ios\":\"ion-toast-ios\",\"md\":\"ion-toast-md\"},[[1,\"ion-toast\",{\"overlayIndex\":[2,\"overlay-index\"],\"color\":[1],\"enterAnimation\":[16],\"leaveAnimation\":[16],\"cssClass\":[1,\"css-class\"],\"duration\":[2],\"header\":[1],\"message\":[1],\"keyboardClose\":[4,\"keyboard-close\"],\"position\":[1],\"showCloseButton\":[4,\"show-close-button\"],\"closeButtonText\":[1,\"close-button-text\"],\"buttons\":[16],\"translucent\":[4],\"animated\":[4],\"present\":[64],\"dismiss\":[64],\"onDidDismiss\":[64],\"onWillDismiss\":[64]}]]],[{\"ios\":\"ion-card_5-ios\",\"md\":\"ion-card_5-md\"},[[6,\"ion-card\",{\"color\":[1],\"button\":[4],\"type\":[1],\"disabled\":[4],\"download\":[1],\"href\":[1],\"rel\":[1],\"routerDirection\":[1,\"router-direction\"],\"target\":[1]}],[0,\"ion-card-content\"],[1,\"ion-card-header\",{\"color\":[1],\"translucent\":[4]}],[1,\"ion-card-subtitle\",{\"color\":[1]}],[1,\"ion-card-title\",{\"color\":[1]}]]],[{\"ios\":\"ion-item-option_3-ios\",\"md\":\"ion-item-option_3-md\"},[[1,\"ion-item-option\",{\"color\":[1],\"disabled\":[4],\"download\":[1],\"expandable\":[4],\"href\":[1],\"rel\":[1],\"target\":[1],\"type\":[1]}],[0,\"ion-item-options\",{\"side\":[1],\"fireSwipeEvent\":[64]}],[0,\"ion-item-sliding\",{\"disabled\":[4],\"state\":[32],\"getOpenAmount\":[64],\"getSlidingRatio\":[64],\"open\":[64],\"close\":[64],\"closeOpened\":[64]}]]],[{\"ios\":\"ion-infinite-scroll_2-ios\",\"md\":\"ion-infinite-scroll_2-md\"},[[0,\"ion-infinite-scroll-content\",{\"loadingSpinner\":[1025,\"loading-spinner\"],\"loadingText\":[1,\"loading-text\"]}],[0,\"ion-infinite-scroll\",{\"threshold\":[1],\"disabled\":[4],\"position\":[1],\"isLoading\":[32],\"complete\":[64]}]]],[{\"ios\":\"ion-reorder_2-ios\",\"md\":\"ion-reorder_2-md\"},[[1,\"ion-reorder\",null,[[2,\"click\",\"onClick\"]]],[0,\"ion-reorder-group\",{\"disabled\":[4],\"state\":[32],\"complete\":[64]}]]],[{\"ios\":\"ion-segment_2-ios\",\"md\":\"ion-segment_2-md\"},[[1,\"ion-segment-button\",{\"checked\":[1028],\"disabled\":[4],\"layout\":[1],\"type\":[1],\"value\":[1]}],[2,\"ion-segment\",{\"color\":[1],\"disabled\":[4],\"scrollable\":[4],\"value\":[1025]},[[0,\"ionSelect\",\"segmentClick\"]]]]],[{\"ios\":\"ion-tab-bar_2-ios\",\"md\":\"ion-tab-bar_2-md\"},[[1,\"ion-tab-button\",{\"disabled\":[4],\"download\":[1],\"href\":[1],\"rel\":[1],\"layout\":[1025],\"selected\":[1028],\"tab\":[1],\"target\":[1]},[[16,\"ionTabBarChanged\",\"onTabBarChanged\"]]],[1,\"ion-tab-bar\",{\"color\":[1],\"selectedTab\":[1,\"selected-tab\"],\"translucent\":[4],\"keyboardVisible\":[32]},[[8,\"keyboardWillHide\",\"onKeyboardWillHide\"],[8,\"keyboardWillShow\",\"onKeyboardWillShow\"]]]]],[{\"ios\":\"ion-chip-ios\",\"md\":\"ion-chip-md\"},[[1,\"ion-chip\",{\"color\":[1],\"outline\":[4]}]]],[{\"ios\":\"ion-modal-ios\",\"md\":\"ion-modal-md\"},[[2,\"ion-modal\",{\"overlayIndex\":[2,\"overlay-index\"],\"delegate\":[16],\"keyboardClose\":[4,\"keyboard-close\"],\"enterAnimation\":[16],\"leaveAnimation\":[16],\"component\":[1],\"componentProps\":[16],\"cssClass\":[1,\"css-class\"],\"backdropDismiss\":[4,\"backdrop-dismiss\"],\"showBackdrop\":[4,\"show-backdrop\"],\"animated\":[4],\"present\":[64],\"dismiss\":[64],\"onDidDismiss\":[64],\"onWillDismiss\":[64]}]]],[{\"ios\":\"ion-popover-ios\",\"md\":\"ion-popover-md\"},[[2,\"ion-popover\",{\"delegate\":[16],\"overlayIndex\":[2,\"overlay-index\"],\"enterAnimation\":[16],\"leaveAnimation\":[16],\"component\":[1],\"componentProps\":[16],\"keyboardClose\":[4,\"keyboard-close\"],\"cssClass\":[1,\"css-class\"],\"backdropDismiss\":[4,\"backdrop-dismiss\"],\"event\":[8],\"showBackdrop\":[4,\"show-backdrop\"],\"translucent\":[4],\"animated\":[4],\"present\":[64],\"dismiss\":[64],\"onDidDismiss\":[64],\"onWillDismiss\":[64]}]]],[{\"ios\":\"ion-searchbar-ios\",\"md\":\"ion-searchbar-md\"},[[2,\"ion-searchbar\",{\"color\":[1],\"animated\":[4],\"autocomplete\":[1],\"autocorrect\":[1],\"cancelButtonIcon\":[1,\"cancel-button-icon\"],\"cancelButtonText\":[1,\"cancel-button-text\"],\"clearIcon\":[1,\"clear-icon\"],\"debounce\":[2],\"disabled\":[4],\"inputmode\":[1],\"placeholder\":[1],\"searchIcon\":[1,\"search-icon\"],\"showCancelButton\":[8,\"show-cancel-button\"],\"spellcheck\":[4],\"type\":[1],\"value\":[1025],\"focused\":[32],\"noAnimate\":[32],\"setFocus\":[64],\"getInputElement\":[64]}]]],[\"ion-action-sheet-controller_8\",[[0,\"ion-action-sheet-controller\",{\"create\":[64],\"dismiss\":[64],\"getTop\":[64]}],[0,\"ion-alert-controller\",{\"create\":[64],\"dismiss\":[64],\"getTop\":[64]}],[1,\"ion-anchor\",{\"color\":[1],\"href\":[1],\"rel\":[1],\"routerDirection\":[1,\"router-direction\"]}],[0,\"ion-loading-controller\",{\"create\":[64],\"dismiss\":[64],\"getTop\":[64]}],[0,\"ion-modal-controller\",{\"create\":[64],\"dismiss\":[64],\"getTop\":[64]}],[0,\"ion-picker-controller\",{\"create\":[64],\"dismiss\":[64],\"getTop\":[64]}],[0,\"ion-popover-controller\",{\"create\":[64],\"dismiss\":[64],\"getTop\":[64]}],[0,\"ion-toast-controller\",{\"create\":[64],\"dismiss\":[64],\"getTop\":[64]}]]],[{\"ios\":\"ion-app_8-ios\",\"md\":\"ion-app_8-md\"},[[0,\"ion-app\"],[2,\"ion-buttons\"],[1,\"ion-content\",{\"color\":[1],\"fullscreen\":[4],\"forceOverscroll\":[1028,\"force-overscroll\"],\"scrollX\":[4,\"scroll-x\"],\"scrollY\":[4,\"scroll-y\"],\"scrollEvents\":[4,\"scroll-events\"],\"getScrollElement\":[64],\"scrollToTop\":[64],\"scrollToBottom\":[64],\"scrollByPoint\":[64],\"scrollToPoint\":[64]},[[2,\"click\",\"onClick\"]]],[0,\"ion-footer\",{\"translucent\":[4]}],[0,\"ion-header\",{\"translucent\":[4]}],[1,\"ion-router-outlet\",{\"mode\":[1025],\"delegate\":[16],\"animated\":[4],\"animation\":[16],\"swipeHandler\":[16],\"commit\":[64],\"setRouteId\":[64],\"getRouteId\":[64]}],[1,\"ion-title\",{\"color\":[1]}],[1,\"ion-toolbar\",{\"color\":[1]},[[0,\"ionStyle\",\"childrenStyle\"]]]]],[\"ion-nav_4\",[[1,\"ion-nav\",{\"delegate\":[16],\"swipeGesture\":[1028,\"swipe-gesture\"],\"animated\":[4],\"animation\":[16],\"rootParams\":[16],\"root\":[1],\"push\":[64],\"insert\":[64],\"insertPages\":[64],\"pop\":[64],\"popTo\":[64],\"popToRoot\":[64],\"removeIndex\":[64],\"setRoot\":[64],\"setPages\":[64],\"setRouteId\":[64],\"getRouteId\":[64],\"getActive\":[64],\"getByIndex\":[64],\"canGoBack\":[64],\"getPrevious\":[64]}],[0,\"ion-nav-pop\"],[0,\"ion-nav-push\",{\"component\":[1],\"componentProps\":[16]}],[0,\"ion-nav-set-root\",{\"component\":[1],\"componentProps\":[16]}]]],[\"ion-route_4\",[[0,\"ion-route\",{\"url\":[1],\"component\":[1],\"componentProps\":[16]}],[0,\"ion-route-redirect\",{\"from\":[1],\"to\":[1]}],[0,\"ion-router\",{\"root\":[1],\"useHash\":[4,\"use-hash\"],\"push\":[64],\"back\":[64],\"printDebug\":[64],\"navChanged\":[64]},[[8,\"popstate\",\"onPopState\"],[4,\"ionBackButton\",\"onBackButton\"]]],[1,\"ion-router-link\",{\"color\":[1],\"href\":[1],\"rel\":[1],\"routerDirection\":[1,\"router-direction\"],\"target\":[1]}]]],[{\"ios\":\"ion-avatar_3-ios\",\"md\":\"ion-avatar_3-md\"},[[1,\"ion-avatar\"],[1,\"ion-badge\",{\"color\":[1]}],[1,\"ion-thumbnail\"]]],[\"ion-col_3\",[[1,\"ion-col\",{\"offset\":[1],\"offsetXs\":[1,\"offset-xs\"],\"offsetSm\":[1,\"offset-sm\"],\"offsetMd\":[1,\"offset-md\"],\"offsetLg\":[1,\"offset-lg\"],\"offsetXl\":[1,\"offset-xl\"],\"pull\":[1],\"pullXs\":[1,\"pull-xs\"],\"pullSm\":[1,\"pull-sm\"],\"pullMd\":[1,\"pull-md\"],\"pullLg\":[1,\"pull-lg\"],\"pullXl\":[1,\"pull-xl\"],\"push\":[1],\"pushXs\":[1,\"push-xs\"],\"pushSm\":[1,\"push-sm\"],\"pushMd\":[1,\"push-md\"],\"pushLg\":[1,\"push-lg\"],\"pushXl\":[1,\"push-xl\"],\"size\":[1],\"sizeXs\":[1,\"size-xs\"],\"sizeSm\":[1,\"size-sm\"],\"sizeMd\":[1,\"size-md\"],\"sizeLg\":[1,\"size-lg\"],\"sizeXl\":[1,\"size-xl\"]},[[9,\"resize\",\"onResize\"]]],[1,\"ion-grid\",{\"fixed\":[4]}],[1,\"ion-row\"]]],[{\"ios\":\"ion-slide_2-ios\",\"md\":\"ion-slide_2-md\"},[[0,\"ion-slide\"],[4,\"ion-slides\",{\"options\":[8],\"pager\":[4],\"scrollbar\":[4],\"update\":[64],\"updateAutoHeight\":[64],\"slideTo\":[64],\"slideNext\":[64],\"slidePrev\":[64],\"getActiveIndex\":[64],\"getPreviousIndex\":[64],\"length\":[64],\"isEnd\":[64],\"isBeginning\":[64],\"startAutoplay\":[64],\"stopAutoplay\":[64],\"lockSwipeToNext\":[64],\"lockSwipeToPrev\":[64],\"lockSwipes\":[64]},[[0,\"ionSlideChanged\",\"onSlideChanged\"]]]]],[\"ion-tab_2\",[[1,\"ion-tab\",{\"active\":[1028],\"delegate\":[16],\"tab\":[1],\"component\":[1],\"setActive\":[64]}],[1,\"ion-tabs\",{\"useRouter\":[1028,\"use-router\"],\"tabs\":[32],\"selectedTab\":[32],\"select\":[64],\"getTab\":[64],\"getSelected\":[64],\"setRouteId\":[64],\"getRouteId\":[64]}]]],[{\"ios\":\"ion-checkbox-ios\",\"md\":\"ion-checkbox-md\"},[[1,\"ion-checkbox\",{\"color\":[1],\"name\":[1],\"checked\":[1028],\"indeterminate\":[1028],\"disabled\":[4],\"value\":[1]}]]],[\"ion-img\",[[1,\"ion-img\",{\"alt\":[1],\"src\":[1],\"loadSrc\":[32],\"loadError\":[32]}]]],[{\"ios\":\"ion-input-ios\",\"md\":\"ion-input-md\"},[[2,\"ion-input\",{\"color\":[1],\"accept\":[1],\"autocapitalize\":[1],\"autocomplete\":[1],\"autocorrect\":[1],\"autofocus\":[4],\"clearInput\":[4,\"clear-input\"],\"clearOnEdit\":[1028,\"clear-on-edit\"],\"debounce\":[2],\"disabled\":[4],\"inputmode\":[1],\"max\":[1],\"maxlength\":[2],\"min\":[1],\"minlength\":[2],\"multiple\":[4],\"name\":[1],\"pattern\":[1],\"placeholder\":[1],\"readonly\":[4],\"required\":[4],\"spellcheck\":[4],\"step\":[1],\"size\":[2],\"type\":[1],\"value\":[1025],\"hasFocus\":[32],\"setFocus\":[64],\"getInputElement\":[64]}]]],[{\"ios\":\"ion-progress-bar-ios\",\"md\":\"ion-progress-bar-md\"},[[1,\"ion-progress-bar\",{\"type\":[1],\"reversed\":[4],\"value\":[2],\"buffer\":[2],\"color\":[1]}]]],[{\"ios\":\"ion-range-ios\",\"md\":\"ion-range-md\"},[[1,\"ion-range\",{\"color\":[1],\"debounce\":[2],\"name\":[1],\"dualKnobs\":[4,\"dual-knobs\"],\"min\":[2],\"max\":[2],\"pin\":[4],\"snaps\":[4],\"step\":[2],\"ticks\":[4],\"disabled\":[4],\"value\":[1026],\"ratioA\":[32],\"ratioB\":[32],\"pressedKnob\":[32]}]]],[{\"ios\":\"ion-split-pane-ios\",\"md\":\"ion-split-pane-md\"},[[0,\"ion-split-pane\",{\"contentId\":[1,\"content-id\"],\"disabled\":[4],\"when\":[8],\"visible\":[32]}]]],[\"ion-text\",[[1,\"ion-text\",{\"color\":[1]}]]],[{\"ios\":\"ion-textarea-ios\",\"md\":\"ion-textarea-md\"},[[2,\"ion-textarea\",{\"color\":[1],\"autocapitalize\":[1],\"autofocus\":[4],\"clearOnEdit\":[1028,\"clear-on-edit\"],\"debounce\":[2],\"disabled\":[4],\"maxlength\":[2],\"minlength\":[2],\"name\":[1],\"placeholder\":[1],\"readonly\":[4],\"required\":[4],\"spellcheck\":[4],\"cols\":[2],\"rows\":[2],\"wrap\":[1],\"autoGrow\":[4,\"auto-grow\"],\"value\":[1025],\"hasFocus\":[32],\"setFocus\":[64],\"getInputElement\":[64]}]]],[{\"ios\":\"ion-toggle-ios\",\"md\":\"ion-toggle-md\"},[[1,\"ion-toggle\",{\"color\":[1],\"name\":[1],\"checked\":[1028],\"disabled\":[4],\"value\":[1],\"activated\":[32]}]]],[\"ion-virtual-scroll\",[[0,\"ion-virtual-scroll\",{\"approxItemHeight\":[2,\"approx-item-height\"],\"approxHeaderHeight\":[2,\"approx-header-height\"],\"approxFooterHeight\":[2,\"approx-footer-height\"],\"headerFn\":[16],\"footerFn\":[16],\"items\":[16],\"itemHeight\":[16],\"headerHeight\":[16],\"footerHeight\":[16],\"renderItem\":[16],\"renderHeader\":[16],\"renderFooter\":[16],\"nodeRender\":[16],\"domRender\":[16],\"totalHeight\":[32],\"positionForItem\":[64],\"checkRange\":[64],\"checkEnd\":[64]},[[9,\"resize\",\"onResize\"]]]]],[{\"ios\":\"ion-backdrop-ios\",\"md\":\"ion-backdrop-md\"},[[1,\"ion-backdrop\",{\"visible\":[4],\"tappable\":[4],\"stopPropagation\":[4,\"stop-propagation\"]},[[2,\"touchstart\",\"onTouchStart\"],[2,\"click\",\"onMouseDown\"],[2,\"mousedown\",\"onMouseDown\"]]]]],[{\"ios\":\"ion-menu_4-ios\",\"md\":\"ion-menu_4-md\"},[[1,\"ion-menu\",{\"contentId\":[1,\"content-id\"],\"menuId\":[1,\"menu-id\"],\"type\":[1025],\"disabled\":[1028],\"side\":[513],\"swipeGesture\":[4,\"swipe-gesture\"],\"maxEdgeStart\":[2,\"max-edge-start\"],\"isPaneVisible\":[32],\"isEndSide\":[32],\"isOpen\":[64],\"isActive\":[64],\"open\":[64],\"close\":[64],\"toggle\":[64],\"setOpen\":[64]},[[32,\"ionSplitPaneVisible\",\"onSplitPaneChanged\"],[2,\"click\",\"onBackdropClick\"]]],[1,\"ion-menu-button\",{\"color\":[1],\"disabled\":[4],\"menu\":[1],\"autoHide\":[4,\"auto-hide\"],\"type\":[1],\"visible\":[32]},[[32,\"ionMenuChange\",\"visibilityChanged\"],[32,\"ionSplitPaneVisible\",\"visibilityChanged\"]]],[1,\"ion-menu-toggle\",{\"menu\":[1],\"autoHide\":[4,\"auto-hide\"],\"visible\":[32]},[[32,\"ionMenuChange\",\"visibilityChanged\"],[32,\"ionSplitPaneVisible\",\"visibilityChanged\"]]],[0,\"ion-menu-controller\",{\"open\":[64],\"close\":[64],\"toggle\":[64],\"enable\":[64],\"swipeGesture\":[64],\"isOpen\":[64],\"isEnabled\":[64],\"get\":[64],\"getOpen\":[64],\"getMenus\":[64],\"isAnimating\":[64],\"registerAnimation\":[64],\"_getInstance\":[64]}]]],[{\"ios\":\"ion-datetime_3-ios\",\"md\":\"ion-datetime_3-md\"},[[2,\"ion-picker\",{\"overlayIndex\":[2,\"overlay-index\"],\"keyboardClose\":[4,\"keyboard-close\"],\"enterAnimation\":[16],\"leaveAnimation\":[16],\"buttons\":[16],\"columns\":[16],\"cssClass\":[1,\"css-class\"],\"duration\":[2],\"showBackdrop\":[4,\"show-backdrop\"],\"backdropDismiss\":[4,\"backdrop-dismiss\"],\"animated\":[4],\"presented\":[32],\"present\":[64],\"dismiss\":[64],\"onDidDismiss\":[64],\"onWillDismiss\":[64],\"getColumn\":[64]}],[1,\"ion-datetime\",{\"name\":[1],\"disabled\":[4],\"readonly\":[4],\"min\":[1025],\"max\":[1025],\"displayFormat\":[1,\"display-format\"],\"pickerFormat\":[1,\"picker-format\"],\"cancelText\":[1,\"cancel-text\"],\"doneText\":[1,\"done-text\"],\"yearValues\":[8,\"year-values\"],\"monthValues\":[8,\"month-values\"],\"dayValues\":[8,\"day-values\"],\"hourValues\":[8,\"hour-values\"],\"minuteValues\":[8,\"minute-values\"],\"monthNames\":[1,\"month-names\"],\"monthShortNames\":[1,\"month-short-names\"],\"dayNames\":[1,\"day-names\"],\"dayShortNames\":[1,\"day-short-names\"],\"pickerOptions\":[16],\"placeholder\":[1],\"value\":[1025],\"isExpanded\":[32],\"open\":[64]}],[0,\"ion-picker-column\",{\"col\":[16]}]]],[{\"ios\":\"ion-radio_2-ios\",\"md\":\"ion-radio_2-md\"},[[1,\"ion-radio\",{\"color\":[1],\"name\":[1],\"disabled\":[4],\"checked\":[1028],\"value\":[1032]}],[0,\"ion-radio-group\",{\"allowEmptySelection\":[4,\"allow-empty-selection\"],\"name\":[1],\"value\":[1032]},[[0,\"ionRadioDidLoad\",\"onRadioDidLoad\"],[0,\"ionRadioDidUnload\",\"onRadioDidUnload\"],[0,\"ionSelect\",\"onRadioSelect\"],[0,\"ionDeselect\",\"onRadioDeselect\"]]]]],[\"ion-spinner\",[[1,\"ion-spinner\",{\"color\":[1],\"duration\":[2],\"name\":[1],\"paused\":[4]}]]],[\"ion-ripple-effect\",[[1,\"ion-ripple-effect\",{\"type\":[1],\"addRipple\":[64]}]]],[{\"ios\":\"ion-button_2-ios\",\"md\":\"ion-button_2-md\"},[[1,\"ion-button\",{\"color\":[1],\"buttonType\":[1025,\"button-type\"],\"disabled\":[516],\"expand\":[513],\"fill\":[1537],\"routerDirection\":[1,\"router-direction\"],\"download\":[1],\"href\":[1],\"rel\":[1],\"shape\":[513],\"size\":[513],\"strong\":[4],\"target\":[1],\"type\":[1]}],[1,\"ion-icon\",{\"color\":[1],\"ariaLabel\":[1537,\"aria-label\"],\"ios\":[1],\"md\":[1],\"flipRtl\":[4,\"flip-rtl\"],\"name\":[1],\"src\":[1],\"icon\":[8],\"size\":[1],\"lazy\":[4],\"svgContent\":[32],\"isVisible\":[32]}]]],[{\"ios\":\"ion-item_8-ios\",\"md\":\"ion-item_8-md\"},[[1,\"ion-item-divider\",{\"color\":[1],\"sticky\":[4]}],[0,\"ion-item-group\"],[1,\"ion-note\",{\"color\":[1]}],[1,\"ion-skeleton-text\",{\"animated\":[4],\"width\":[1]}],[1,\"ion-item\",{\"color\":[1],\"button\":[4],\"detail\":[4],\"detailIcon\":[1,\"detail-icon\"],\"disabled\":[4],\"download\":[1],\"href\":[1],\"rel\":[1],\"lines\":[1],\"routerDirection\":[1,\"router-direction\"],\"target\":[1],\"type\":[1],\"multipleInputs\":[32]},[[0,\"ionStyle\",\"itemStyle\"]]],[2,\"ion-label\",{\"color\":[1],\"position\":[1],\"noAnimate\":[32]}],[0,\"ion-list\",{\"lines\":[1],\"inset\":[4],\"closeSlidingItems\":[64]}],[1,\"ion-list-header\",{\"color\":[1]}]]]]'),t)}))(0,{exclude:[\"ion-tabs\",\"ion-tab\"],syncQueue:!0,raf:y,jmp:function(e){return i.runOutsideAngular(e)},ael:function(e,t,n,r){e[s](t,n,r)},rel:function(e,t,n,r){e.removeEventListener(t,n,r)}})})}}},Lt=function(){function e(){}return e.forRoot=function(t){return{ngModule:e,providers:[{provide:nt,useValue:t},{provide:i.d,useFactory:Pt,multi:!0,deps:[nt,o.d,i.x]}]}},e}()},Zr1d:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return o});var r=n(\"mrSG\"),i=n(\"a3Cf\"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.hideFormAccessoryBar=function(e){return Object(i.cordova)(this,\"hideFormAccessoryBar\",{sync:!0,platforms:[\"iOS\"]},arguments)},t.prototype.hide=function(){return Object(i.cordova)(this,\"hide\",{sync:!0,platforms:[\"iOS\",\"Android\"]},arguments)},t.prototype.show=function(){return Object(i.cordova)(this,\"show\",{sync:!0,platforms:[\"Android\"]},arguments)},t.prototype.setResizeMode=function(e){return Object(i.cordova)(this,\"setResizeMode\",{sync:!0,platforms:[\"iOS\"]},arguments)},t.prototype.setKeyboardStyle=function(e){return Object(i.cordova)(this,\"setKeyboardStyle\",{sync:!0,platforms:[\"iOS\"]},arguments)},t.prototype.disableScroll=function(e){return Object(i.cordova)(this,\"disableScroll\",{sync:!0,platforms:[\"iOS\"]},arguments)},t.prototype.onKeyboardShow=function(){return Object(i.cordova)(this,\"onKeyboardShow\",{eventObservable:!0,event:\"native.keyboardshow\",platforms:[\"iOS\",\"Android\"]},arguments)},t.prototype.onKeyboardWillShow=function(){return Object(i.cordova)(this,\"onKeyboardWillShow\",{eventObservable:!0,event:\"keyboardWillShow\",platforms:[\"iOS\",\"Android\"]},arguments)},t.prototype.onKeyboardDidShow=function(){return Object(i.cordova)(this,\"onKeyboardDidShow\",{eventObservable:!0,event:\"keyboardDidShow\",platforms:[\"iOS\",\"Android\"]},arguments)},t.prototype.onKeyboardHide=function(){return Object(i.cordova)(this,\"onKeyboardHide\",{eventObservable:!0,event:\"native.keyboardhide\",platforms:[\"iOS\",\"Android\"]},arguments)},t.prototype.onKeyboardWillHide=function(){return Object(i.cordova)(this,\"onKeyboardWillHide\",{eventObservable:!0,event:\"keyboardWillHide\",platforms:[\"iOS\",\"Android\"]},arguments)},t.prototype.onKeyboardDidHide=function(){return Object(i.cordova)(this,\"onKeyboardDidHide\",{eventObservable:!0,event:\"keyboardDidHide\",platforms:[\"iOS\",\"Android\"]},arguments)},Object.defineProperty(t.prototype,\"isVisible\",{get:function(){return Object(i.cordovaPropertyGet)(this,\"isVisible\")},set:function(e){Object(i.cordovaPropertySet)(this,\"isVisible\",e)},enumerable:!0,configurable:!0}),t.pluginName=\"Keyboard\",t.plugin=\"cordova-plugin-ionic-keyboard\",t.pluginRef=\"window.Keyboard\",t.repo=\"https://github.com/ionic-team/cordova-plugin-ionic-keyboard\",t.platforms=[\"Android\",\"iOS\"],t}(i.IonicNativePlugin)},a3Cf:function(e,t,n){\"use strict\";var r=n(\"HPGL\"),i=n(\"Lq6m\");n.d(t,\"IonicNativePlugin\",function(){return i.a});var o=n(\"KOl+\");n.d(t,\"checkAvailability\",function(){return o.a}),n.d(t,\"getPromise\",function(){return o.c});var s=n(\"xSm1\");n.d(t,\"cordova\",function(){return s.a}),n(\"hKQe\");var a=n(\"Rt+L\");n.d(t,\"cordovaInstance\",function(){return a.a});var u=n(\"pxS/\");n.d(t,\"cordovaPropertyGet\",function(){return u.a}),n.d(t,\"cordovaPropertySet\",function(){return u.b});var c=n(\"Ji5e\");n.d(t,\"instancePropertyGet\",function(){return c.a}),n.d(t,\"instancePropertySet\",function(){return c.b}),n(\"4pTB\"),Object(r.a)()},\"b/LO\":function(e,t,n){\"use strict\";var r=n(\"WEwH\"),i=n(\"hbGf\"),o=n(\"Kqap\"),s=n(\"lJxs\"),a=n(\"l7GE\"),u=n(\"ZUHj\");class c{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new l(e,this.observables,this.project))}}class l extends a.a{constructor(e,t,n){super(e),this.observables=t,this.project=n,this.toRespond=[];const r=t.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++){let e=t[i];this.add(Object(u.a)(this,e,e,i))}}notifyNext(e,t,n,r,i){this.values[n]=t;const o=this.toRespond;if(o.length>0){const e=o.indexOf(n);-1!==e&&o.splice(e,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}var h=n(\"7o/Q\");class d{constructor(e){this.predicate=e}call(e,t){return t.subscribe(new f(e,this.predicate))}}class f extends h.a{constructor(e,t){super(e),this.predicate=t,this.skipping=!0,this.index=0}_next(e){const t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}tryCallPredicate(e){try{const n=this.predicate(e,this.index++);this.skipping=Boolean(n)}catch(t){this.destination.error(t)}}}function p(e,t){return function(e,t){return function(e){return Object(i.a)(e,\"value\").pipe(Object(s.a)(e=>{let t;return e.payload.forEach(e=>(t=e.key,!1)),{data:e,lastKeyToLoad:t}}))}(e).pipe(function(...e){return t=>{let n;return\"function\"==typeof e[e.length-1]&&(n=e.pop()),t.lift(new c(e,n))}}(t),Object(s.a)(([e,t])=>{let n=e.lastKeyToLoad;const r=t.map(e=>e.key);return{actions:t,lastKeyToLoad:n,loadedKeys:r}}),(n=e=>-1===e.loadedKeys.indexOf(e.lastKeyToLoad),e=>e.lift(new d(n))),Object(s.a)(e=>e.actions));var n}(e,Object(r.a)(e,t).pipe(Object(o.a)((e,t)=>[...e,t],[])))}n.d(t,\"a\",function(){return p})},bHdf:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return o});var r=n(\"5+tZ\"),i=n(\"SpAZ\");function o(e=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,e)}},bMVn:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return c});var r=n(\"Cfvw\"),i=n(\"cNHj\"),o=n(\"lJxs\"),s=n(\"Xr7G\"),a=n(\"m+Ru\"),u=n(\"1XSQ\");class c{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const n=this.ref.collection(e),{ref:r,query:i}=Object(s.f)(n,t);return new a.a(r,i,this.afs)}snapshotChanges(){const e=Object(i.b)(this.ref),t=this.afs.scheduler.runOutsideAngular(e);return this.afs.scheduler.keepUnstableUntilFirst(t)}valueChanges(){return this.snapshotChanges().pipe(Object(o.a)(e=>e.payload.data()))}get(e){return Object(r.a)(this.ref.get(e)).pipe(Object(u.c)(this.afs.scheduler.zone))}}},bOdf:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return i});var r=n(\"5+tZ\");function i(e,t){return Object(r.a)(e,t,1)}},c2HN:function(e,t,n){\"use strict\";function r(e){return!!e&&\"function\"!=typeof e.subscribe&&\"function\"==typeof e.then}n.d(t,\"a\",function(){return r})},cNHj:function(e,t,n){\"use strict\";n.d(t,\"c\",function(){return s}),n.d(t,\"b\",function(){return a}),n.d(t,\"a\",function(){return u});var r=n(\"HDdC\"),i=n(\"w1tV\"),o=n(\"lJxs\");function s(e){return function(e){return new r.a(t=>({unsubscribe:e.onSnapshot(t)}))}(e).pipe(Object(i.a)())}function a(e){return s(e).pipe(Object(o.a)(e=>({payload:e,type:\"value\"})))}function u(e){return s(e).pipe(Object(o.a)(e=>({payload:e,type:\"query\"})))}},cUpR:function(e,t,n){\"use strict\";n.d(t,\"p\",function(){return ve}),n.d(t,\"q\",function(){return O}),n.d(t,\"a\",function(){return be}),n.d(t,\"h\",function(){return ye}),n.d(t,\"c\",function(){return N}),n.d(t,\"d\",function(){return A}),n.d(t,\"e\",function(){return te}),n.d(t,\"f\",function(){return ne}),n.d(t,\"g\",function(){return re}),n.d(t,\"b\",function(){return ue}),n.d(t,\"r\",function(){return s}),n.d(t,\"j\",function(){return U}),n.d(t,\"i\",function(){return Z}),n.d(t,\"m\",function(){return ie}),n.d(t,\"n\",function(){return ae}),n.d(t,\"l\",function(){return k}),n.d(t,\"o\",function(){return D}),n.d(t,\"k\",function(){return ce});var r=n(\"SVse\"),i=n(\"8Y7J\");let o=null;function s(){return o}class a{constructor(){this.resourceLoaderType=null}get attrToPropMap(){return this._attrToPropMap}set attrToPropMap(e){this._attrToPropMap=e}}class u extends a{constructor(){super(),this._animationPrefix=null,this._transitionEnd=null;try{const t=this.createElement(\"div\",document);if(null!=this.getStyle(t,\"animationName\"))this._animationPrefix=\"\";else{const e=[\"Webkit\",\"Moz\",\"O\",\"ms\"];for(let n=0;n<e.length;n++)if(null!=this.getStyle(t,e[n]+\"AnimationName\")){this._animationPrefix=\"-\"+e[n].toLowerCase()+\"-\";break}}const n={WebkitTransition:\"webkitTransitionEnd\",MozTransition:\"transitionend\",OTransition:\"oTransitionEnd otransitionend\",transition:\"transitionend\"};Object.keys(n).forEach(e=>{null!=this.getStyle(t,e)&&(this._transitionEnd=n[e])})}catch(e){this._animationPrefix=null,this._transitionEnd=null}}getDistributedNodes(e){return e.getDistributedNodes()}resolveAndSetHref(e,t,n){e.href=null==n?t:t+\"/../\"+n}supportsDOMEvents(){return!0}supportsNativeShadowDOM(){return\"function\"==typeof document.body.createShadowRoot}getAnimationPrefix(){return this._animationPrefix?this._animationPrefix:\"\"}getTransitionEnd(){return this._transitionEnd?this._transitionEnd:\"\"}supportsAnimation(){return null!=this._animationPrefix&&null!=this._transitionEnd}}const c={class:\"className\",innerHtml:\"innerHTML\",readonly:\"readOnly\",tabindex:\"tabIndex\"},l=3,h={\"\\b\":\"Backspace\",\"\\t\":\"Tab\",\"\\x7f\":\"Delete\",\"\\x1b\":\"Escape\",Del:\"Delete\",Esc:\"Escape\",Left:\"ArrowLeft\",Right:\"ArrowRight\",Up:\"ArrowUp\",Down:\"ArrowDown\",Menu:\"ContextMenu\",Scroll:\"ScrollLock\",Win:\"OS\"},d={A:\"1\",B:\"2\",C:\"3\",D:\"4\",E:\"5\",F:\"6\",G:\"7\",H:\"8\",I:\"9\",J:\"*\",K:\"+\",M:\"-\",N:\".\",O:\"/\",\"`\":\"0\",\"\\x90\":\"NumLock\"},f=(()=>{if(i.ub.Node)return i.ub.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))}})();class p extends u{parse(e){throw new Error(\"parse not implemented\")}static makeCurrent(){var e;e=new p,o||(o=e)}hasProperty(e,t){return t in e}setProperty(e,t,n){e[t]=n}getProperty(e,t){return e[t]}invoke(e,t,n){e[t](...n)}logError(e){window.console&&(console.error?console.error(e):console.log(e))}log(e){window.console&&window.console.log&&window.console.log(e)}logGroup(e){window.console&&window.console.group&&window.console.group(e)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}get attrToPropMap(){return c}contains(e,t){return f.call(e,t)}querySelector(e,t){return e.querySelector(t)}querySelectorAll(e,t){return e.querySelectorAll(t)}on(e,t,n){e.addEventListener(t,n,!1)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}createMouseEvent(e){const t=this.getDefaultDocument().createEvent(\"MouseEvent\");return t.initEvent(e,!0,!0),t}createEvent(e){const t=this.getDefaultDocument().createEvent(\"Event\");return t.initEvent(e,!0,!0),t}preventDefault(e){e.preventDefault(),e.returnValue=!1}isPrevented(e){return e.defaultPrevented||null!=e.returnValue&&!e.returnValue}getInnerHTML(e){return e.innerHTML}getTemplateContent(e){return\"content\"in e&&this.isTemplateElement(e)?e.content:null}getOuterHTML(e){return e.outerHTML}nodeName(e){return e.nodeName}nodeValue(e){return e.nodeValue}type(e){return e.type}content(e){return this.hasProperty(e,\"content\")?e.content:e}firstChild(e){return e.firstChild}nextSibling(e){return e.nextSibling}parentElement(e){return e.parentNode}childNodes(e){return e.childNodes}childNodesAsList(e){const t=e.childNodes,n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[r];return n}clearNodes(e){for(;e.firstChild;)e.removeChild(e.firstChild)}appendChild(e,t){e.appendChild(t)}removeChild(e,t){e.removeChild(t)}replaceChild(e,t,n){e.replaceChild(t,n)}remove(e){return e.parentNode&&e.parentNode.removeChild(e),e}insertBefore(e,t,n){e.insertBefore(n,t)}insertAllBefore(e,t,n){n.forEach(n=>e.insertBefore(n,t))}insertAfter(e,t,n){e.insertBefore(n,t.nextSibling)}setInnerHTML(e,t){e.innerHTML=t}getText(e){return e.textContent}setText(e,t){e.textContent=t}getValue(e){return e.value}setValue(e,t){e.value=t}getChecked(e){return e.checked}setChecked(e,t){e.checked=t}createComment(e){return this.getDefaultDocument().createComment(e)}createTemplate(e){const t=this.getDefaultDocument().createElement(\"template\");return t.innerHTML=e,t}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createElementNS(e,t,n){return(n=n||this.getDefaultDocument()).createElementNS(e,t)}createTextNode(e,t){return(t=t||this.getDefaultDocument()).createTextNode(e)}createScriptTag(e,t,n){const r=(n=n||this.getDefaultDocument()).createElement(\"SCRIPT\");return r.setAttribute(e,t),r}createStyleElement(e,t){const n=(t=t||this.getDefaultDocument()).createElement(\"style\");return this.appendChild(n,this.createTextNode(e,t)),n}createShadowRoot(e){return e.createShadowRoot()}getShadowRoot(e){return e.shadowRoot}getHost(e){return e.host}clone(e){return e.cloneNode(!0)}getElementsByClassName(e,t){return e.getElementsByClassName(t)}getElementsByTagName(e,t){return e.getElementsByTagName(t)}classList(e){return Array.prototype.slice.call(e.classList,0)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}hasClass(e,t){return e.classList.contains(t)}setStyle(e,t,n){e.style[t]=n}removeStyle(e,t){e.style[t]=\"\"}getStyle(e,t){return e.style[t]}hasStyle(e,t,n){const r=this.getStyle(e,t)||\"\";return n?r==n:r.length>0}tagName(e){return e.tagName}attributeMap(e){const t=new Map,n=e.attributes;for(let r=0;r<n.length;r++){const e=n.item(r);t.set(e.name,e.value)}return t}hasAttribute(e,t){return e.hasAttribute(t)}hasAttributeNS(e,t,n){return e.hasAttributeNS(t,n)}getAttribute(e,t){return e.getAttribute(t)}getAttributeNS(e,t,n){return e.getAttributeNS(t,n)}setAttribute(e,t,n){e.setAttribute(t,n)}setAttributeNS(e,t,n,r){e.setAttributeNS(t,n,r)}removeAttribute(e,t){e.removeAttribute(t)}removeAttributeNS(e,t,n){e.removeAttributeNS(t,n)}templateAwareRoot(e){return this.isTemplateElement(e)?this.content(e):e}createHtmlDocument(){return document.implementation.createHTMLDocument(\"fakeTitle\")}getDefaultDocument(){return document}getBoundingClientRect(e){try{return e.getBoundingClientRect()}catch(t){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}}getTitle(e){return e.title}setTitle(e,t){e.title=t||\"\"}elementMatches(e,t){return!!this.isElementNode(e)&&(e.matches&&e.matches(t)||e.msMatchesSelector&&e.msMatchesSelector(t)||e.webkitMatchesSelector&&e.webkitMatchesSelector(t))}isTemplateElement(e){return this.isElementNode(e)&&\"TEMPLATE\"===e.nodeName}isTextNode(e){return e.nodeType===Node.TEXT_NODE}isCommentNode(e){return e.nodeType===Node.COMMENT_NODE}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}hasShadowRoot(e){return null!=e.shadowRoot&&e instanceof HTMLElement}isShadowRoot(e){return e instanceof DocumentFragment}importIntoDoc(e){return document.importNode(this.templateAwareRoot(e),!0)}adoptNode(e){return document.adoptNode(e)}getHref(e){return e.getAttribute(\"href\")}getEventKey(e){let t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return\"Unidentified\";t.startsWith(\"U+\")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),e.location===l&&d.hasOwnProperty(t)&&(t=d[t]))}return h[t]||t}getGlobalEventTarget(e,t){return\"window\"===t?window:\"document\"===t?e:\"body\"===t?e.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(e){const t=g||(g=document.querySelector(\"base\"))?g.getAttribute(\"href\"):null;return null==t?null:(n=t,m||(m=document.createElement(\"a\")),m.setAttribute(\"href\",n),\"/\"===m.pathname.charAt(0)?m.pathname:\"/\"+m.pathname);var n}resetBaseElement(){g=null}getUserAgent(){return window.navigator.userAgent}setData(e,t,n){this.setAttribute(e,\"data-\"+t,n)}getData(e,t){return this.getAttribute(e,\"data-\"+t)}getComputedStyle(e){return getComputedStyle(e)}supportsWebAnimation(){return\"function\"==typeof Element.prototype.animate}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(e){return Object(r.v)(document.cookie,e)}setCookie(e,t){document.cookie=encodeURIComponent(e)+\"=\"+encodeURIComponent(t)}}let m,g=null;function y(){return!!window.history.pushState}let v=(()=>{class e extends r.o{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=s().getLocation(),this._history=s().getHistory()}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(e){s().getGlobalEventTarget(this._doc,\"window\").addEventListener(\"popstate\",e,!1)}onHashChange(e){s().getGlobalEventTarget(this._doc,\"window\").addEventListener(\"hashchange\",e,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,t,n){y()?this._history.pushState(e,t,n):this.location.hash=n}replaceState(e,t,n){y()?this._history.replaceState(e,t,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return e.ctorParameters=()=>[{type:void 0,decorators:[{type:i.n,args:[r.d]}]}],e})();const b=new i.o(\"TRANSITION_ID\"),_=[{provide:i.d,useFactory:function(e,t,n){return()=>{n.get(i.e).donePromise.then(()=>{const n=s();Array.prototype.slice.apply(n.querySelectorAll(t,\"style[ng-transition]\")).filter(t=>n.getAttribute(t,\"ng-transition\")===e).forEach(e=>n.remove(e))})}},deps:[b,r.d,i.p],multi:!0}];class w{static init(){Object(i.X)(new w)}addToWindow(e){i.ub.getAngularTestability=(t,n=!0)=>{const r=e.findTestabilityInTree(t,n);if(null==r)throw new Error(\"Could not find testability for element.\");return r},i.ub.getAllAngularTestabilities=()=>e.getAllTestabilities(),i.ub.getAllAngularRootElements=()=>e.getAllRootElements(),i.ub.frameworkStabilizers||(i.ub.frameworkStabilizers=[]),i.ub.frameworkStabilizers.push(e=>{const t=i.ub.getAllAngularTestabilities();let n=t.length,r=!1;const o=function(t){r=r||t,0==--n&&e(r)};t.forEach(function(e){e.whenStable(o)})})}findTestabilityInTree(e,t,n){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:n?s().isShadowRoot(t)?this.findTestabilityInTree(e,s().getHost(t),!0):this.findTestabilityInTree(e,s().parentElement(t),!0):null}}function E(e,t){\"undefined\"!=typeof COMPILED&&COMPILED||((i.ub.ng=i.ub.ng||{})[e]=t)}const C=(()=>({ApplicationRef:i.g,NgZone:i.x}))(),S=\"probe\",T=\"coreTokens\";function I(e){return Object(i.T)(e)}function O(e){return E(S,I),E(T,Object.assign({},C,(e||[]).reduce((e,t)=>(e[t.name]=t.token,e),{}))),()=>I}const N=new i.o(\"EventManagerPlugins\");let A=(()=>(class{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let r=0;r<n.length;r++){const t=n[r];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error(`No event manager plugin found for event ${e}`)}}))();class R{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const r=s().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,n)}}let D=(()=>(class{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}))(),k=(()=>(class extends D{constructor(e){super(),this._doc=e,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(e.head)}_addStylesToHost(e,t){e.forEach(e=>{const n=this._doc.createElement(\"style\");n.textContent=e,this._styleNodes.add(t.appendChild(n))})}addHost(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)}removeHost(e){this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach(t=>this._addStylesToHost(e,t))}ngOnDestroy(){this._styleNodes.forEach(e=>s().remove(e))}}))();const x={svg:\"http://www.w3.org/2000/svg\",xhtml:\"http://www.w3.org/1999/xhtml\",xlink:\"http://www.w3.org/1999/xlink\",xml:\"http://www.w3.org/XML/1998/namespace\",xmlns:\"http://www.w3.org/2000/xmlns/\"},P=/%COMP%/g,L=\"_nghost-%COMP%\",M=\"_ngcontent-%COMP%\";function j(e,t,n){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?j(e,i,n):(i=i.replace(P,e),n.push(i))}return n}function F(e){return t=>{!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let U=(()=>(class{constructor(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new V(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case i.N.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new $(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case i.N.Native:case i.N.ShadowDom:return new z(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=j(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}))();class V{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(x[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n=\"string\"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector \"${e}\" did not match any elements`);return t||(n.textContent=\"\"),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+\":\"+t;const i=x[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=x[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,r){r&i.D.DashCase?e.style.setProperty(t,n,r&i.D.Important?\"important\":\"\"):e.style[t]=n}removeStyle(e,t,n){n&i.D.DashCase?e.style.removeProperty(t):e.style[t]=\"\"}setProperty(e,t,n){B(t,\"property\"),e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return B(t,\"listener\"),\"string\"==typeof e?this.eventManager.addGlobalEventListener(e,t,F(n)):this.eventManager.addEventListener(e,t,F(n))}}const q=(()=>\"@\".charCodeAt(0))();function B(e,t){if(e.charCodeAt(0)===q)throw new Error(`Found the synthetic ${t} ${e}. Please include either \"BrowserAnimationsModule\" or \"NoopAnimationsModule\" in your application.`)}class $ extends V{constructor(e,t,n,r){super(e),this.component=n;const i=j(r+\"-\"+n.id,n.styles,[]);t.addStyles(i),this.contentAttr=M.replace(P,r+\"-\"+n.id),this.hostAttr=L.replace(P,r+\"-\"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,\"\")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,\"\"),n}}class z extends V{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.component=r,this.shadowRoot=r.encapsulation===i.N.ShadowDom?n.attachShadow({mode:\"open\"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const o=j(r.id,r.styles,[]);for(let i=0;i<o.length;i++){const e=document.createElement(\"style\");e.textContent=o[i],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}const W=(()=>\"undefined\"!=typeof Zone&&Zone.__symbol__||function(e){return\"__zone_symbol__\"+e})(),H=W(\"addEventListener\"),Q=W(\"removeEventListener\"),G={},K=\"__zone_symbol__propagationStopped\",Y=(()=>{const e=\"undefined\"!=typeof Zone&&Zone[W(\"BLACK_LISTED_EVENTS\")];if(e){const t={};return e.forEach(e=>{t[e]=e}),t}})(),X=function(e){return!!Y&&Y.hasOwnProperty(e)},J=function(e){const t=G[e.type];if(!t)return;const n=this[t];if(!n)return;const r=[e];if(1===n.length){const e=n[0];return e.zone!==Zone.current?e.zone.run(e.handler,this,r):e.handler.apply(this,r)}{const t=n.slice();for(let n=0;n<t.length&&!0!==e[K];n++){const e=t[n];e.zone!==Zone.current?e.zone.run(e.handler,this,r):e.handler.apply(this,r)}}};let Z=(()=>(class extends R{constructor(e,t,n){super(e),this.ngZone=t,n&&Object(r.q)(n)||this.patchEvent()}patchEvent(){if(\"undefined\"==typeof Event||!Event||!Event.prototype)return;if(Event.prototype.__zone_symbol__stopImmediatePropagation)return;const e=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[K]=!0),e&&e.apply(this,arguments)}}supports(e){return!0}addEventListener(e,t,n){let r=n;if(!e[H]||i.x.isInAngularZone()&&!X(t))e.addEventListener(t,r,!1);else{let n=G[t];n||(n=G[t]=W(\"ANGULAR\"+t+\"FALSE\"));let i=e[n];const o=i&&i.length>0;i||(i=e[n]=[]);const s=X(t)?Zone.root:Zone.current;if(0===i.length)i.push({zone:s,handler:r});else{let e=!1;for(let t=0;t<i.length;t++)if(i[t].handler===r){e=!0;break}e||i.push({zone:s,handler:r})}o||e[H](t,J,!1)}return()=>this.removeEventListener(e,t,r)}removeEventListener(e,t,n){let r=e[Q];if(!r)return e.removeEventListener.apply(e,[t,n,!1]);let i=G[t],o=i&&e[i];if(!o)return e.removeEventListener.apply(e,[t,n,!1]);let s=!1;for(let a=0;a<o.length;a++)if(o[a].handler===n){s=!0,o.splice(a,1);break}s?0===o.length&&r.apply(e,[t,J,!1]):e.removeEventListener.apply(e,[t,n,!1])}}))();const ee={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},te=new i.o(\"HammerGestureConfig\"),ne=new i.o(\"HammerLoader\");let re=(()=>(class{constructor(){this.events=[],this.overrides={}}buildHammer(e){const t=new Hammer(e,this.options);t.get(\"pinch\").set({enable:!0}),t.get(\"rotate\").set({enable:!0});for(const n in this.overrides)t.get(n).set(this.overrides[n]);return t}}))(),ie=(()=>(class extends R{constructor(e,t,n,r){super(e),this._config=t,this.console=n,this.loader=r}supports(e){return!(!ee.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e)||!window.Hammer&&!this.loader&&(this.console.warn(`The \"${e}\" event cannot be bound because Hammer.JS is not `+\"loaded and no custom loader has been specified.\"),1))}addEventListener(e,t,n){const r=this.manager.getZone();if(t=t.toLowerCase(),!window.Hammer&&this.loader){let r=!1,i=()=>{r=!0};return this.loader().then(()=>{if(!window.Hammer)return this.console.warn(\"The custom HAMMER_LOADER completed, but Hammer.JS is not present.\"),void(i=()=>{});r||(i=this.addEventListener(e,t,n))}).catch(()=>{this.console.warn(`The \"${t}\" event cannot be bound because the custom `+\"Hammer.JS loader failed.\"),i=()=>{}}),()=>{i()}}return r.runOutsideAngular(()=>{const i=this._config.buildHammer(e),o=function(e){r.runGuarded(function(){n(e)})};return i.on(t,o),()=>{i.off(t,o),\"function\"==typeof i.destroy&&i.destroy()}})}isCustomEvent(e){return this._config.events.indexOf(e)>-1}}))();const oe=[\"alt\",\"control\",\"meta\",\"shift\"],se={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let ae=(()=>{class e extends R{constructor(e){super(e)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,n,r){const i=e.parseEventName(n),o=e.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(t,i.domEventName,o))}static parseEventName(t){const n=t.toLowerCase().split(\".\"),r=n.shift();if(0===n.length||\"keydown\"!==r&&\"keyup\"!==r)return null;const i=e._normalizeKey(n.pop());let o=\"\";if(oe.forEach(e=>{const t=n.indexOf(e);t>-1&&(n.splice(t,1),o+=e+\".\")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(e){let t=\"\",n=s().getEventKey(e);return\" \"===(n=n.toLowerCase())?n=\"space\":\".\"===n&&(n=\"dot\"),oe.forEach(r=>{r!=n&&(0,se[r])(e)&&(t+=r+\".\")}),t+=n}static eventCallback(t,n,r){return i=>{e.getEventFullKey(i)===t&&r.runGuarded(()=>n(i))}}static _normalizeKey(e){switch(e){case\"esc\":return\"escape\";default:return e}}}return e})();class ue{}let ce=(()=>(class extends ue{constructor(e){super(),this._doc=e}sanitize(e,t){if(null==t)return null;switch(e){case i.F.NONE:return t;case i.F.HTML:return t instanceof he?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,\"HTML\"),Object(i.db)(this._doc,String(t)));case i.F.STYLE:return t instanceof de?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,\"Style\"),Object(i.eb)(t));case i.F.SCRIPT:if(t instanceof fe)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,\"Script\"),new Error(\"unsafe value used in a script context\");case i.F.URL:return t instanceof me||t instanceof pe?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,\"URL\"),Object(i.fb)(String(t)));case i.F.RESOURCE_URL:if(t instanceof me)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,\"ResourceURL\"),new Error(\"unsafe value used in a resource URL context (see http://g.co/ng/security#xss)\");default:throw new Error(`Unexpected SecurityContext ${e} (see http://g.co/ng/security#xss)`)}}checkNotSafeValue(e,t){if(e instanceof le)throw new Error(`Required a safe ${t}, got a ${e.getTypeName()} `+\"(see http://g.co/ng/security#xss)\")}bypassSecurityTrustHtml(e){return new he(e)}bypassSecurityTrustStyle(e){return new de(e)}bypassSecurityTrustScript(e){return new fe(e)}bypassSecurityTrustUrl(e){return new pe(e)}bypassSecurityTrustResourceUrl(e){return new me(e)}}))();class le{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity}`+\" (see http://g.co/ng/security#xss)\"}}class he extends le{getTypeName(){return\"HTML\"}}class de extends le{getTypeName(){return\"Style\"}}class fe extends le{getTypeName(){return\"Script\"}}class pe extends le{getTypeName(){return\"URL\"}}class me extends le{getTypeName(){return\"ResourceURL\"}}const ge=[{provide:i.z,useValue:r.t},{provide:i.A,useValue:function(){p.makeCurrent(),w.init()},multi:!0},{provide:r.o,useClass:v,deps:[r.d]},{provide:r.d,useFactory:function(){return document},deps:[]}],ye=Object(i.P)(i.W,\"browser\",ge);function ve(){return new i.l}let be=(()=>{class e{constructor(e){if(e)throw new Error(\"BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.\")}static withServerTransition(t){return{ngModule:e,providers:[{provide:i.c,useValue:t.appId},{provide:b,useExisting:i.c},_]}}}return e})();\"undefined\"!=typeof window&&window},eIep:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return u});var r=n(\"l7GE\"),i=n(\"51Dv\"),o=n(\"ZUHj\"),s=n(\"lJxs\"),a=n(\"Cfvw\");function u(e,t){return\"function\"==typeof t?n=>n.pipe(u((n,r)=>Object(a.a)(e(n,r)).pipe(Object(s.a)((e,i)=>t(n,e,r,i))))):t=>t.lift(new c(e))}class c{constructor(e){this.project=e}call(e,t){return t.subscribe(new l(e,this.project))}}class l extends r.a{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t,e,n)}_innerSub(e,t,n){const r=this.innerSubscription;r&&r.unsubscribe();const s=new i.a(this,void 0,void 0);this.destination.add(s),this.innerSubscription=Object(o.a)(this,e,t,n,s)}_complete(){const{innerSubscription:e}=this;e&&!e.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(e,t,n,r,i){this.destination.next(t)}}},fKx8:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return h});var r=n(\"Cfvw\"),i=n(\"cNHj\"),o=n(\"lJxs\"),s=n(\"pLZG\"),a=n(\"Kqap\"),u=n(\"m+Ru\"),c=n(\"iKj2\"),l=n(\"1XSQ\");class h{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(Object(c.c)(this.query))).pipe(Object(o.a)(t=>t.filter(t=>e.indexOf(t.type)>-1)),Object(s.a)(e=>e.length>0)):this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(Object(c.c)(this.query)))}auditTrail(e){return this.stateChanges(e).pipe(Object(a.a)((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=Object(u.b)(e),n=Object(c.d)(this.query,t),r=this.afs.scheduler.runOutsideAngular(n);return this.afs.scheduler.keepUnstableUntilFirst(r)}valueChanges(){const e=Object(i.a)(this.query),t=this.afs.scheduler.runOutsideAngular(e);return this.afs.scheduler.keepUnstableUntilFirst(t).pipe(Object(o.a)(e=>e.payload.docs.map(e=>e.data())))}get(e){return Object(r.a)(this.query.get(e)).pipe(Object(l.c)(this.afs.scheduler.zone))}}},\"g+7Q\":function(e,t,n){\"use strict\";n.r(t);var r=n(\"Xr7G\"),i=n(\"m7gy\"),o=n(\"m+Ru\"),s=n(\"fKx8\"),a=n(\"bMVn\"),u=n(\"iKj2\"),c=n(\"cNHj\");n.d(t,\"EnablePersistenceToken\",function(){return r.c}),n.d(t,\"PersistenceSettingsToken\",function(){return r.e}),n.d(t,\"FirestoreSettingsToken\",function(){return r.d}),n.d(t,\"DefaultFirestoreSettings\",function(){return r.b}),n.d(t,\"associateQuery\",function(){return r.f}),n.d(t,\"AngularFirestore\",function(){return r.a}),n.d(t,\"AngularFirestoreModule\",function(){return i.a}),n.d(t,\"validateEventsArray\",function(){return o.b}),n.d(t,\"AngularFirestoreCollection\",function(){return o.a}),n.d(t,\"AngularFirestoreCollectionGroup\",function(){return s.a}),n.d(t,\"AngularFirestoreDocument\",function(){return a.a}),n.d(t,\"docChanges\",function(){return u.c}),n.d(t,\"sortedChanges\",function(){return u.d}),n.d(t,\"combineChanges\",function(){return u.b}),n.d(t,\"combineChange\",function(){return u.a}),n.d(t,\"fromRef\",function(){return c.c}),n.d(t,\"fromDocRef\",function(){return c.b}),n.d(t,\"fromCollectionRef\",function(){return c.a})},gJ2e:function(e,t,n){\"use strict\";n.d(t,\"b\",function(){return a}),n.d(t,\"a\",function(){return u}),n(\"mrSG\");var r=n(\"8Y7J\"),i=n(\"y8r5\"),o=n(\"1XSQ\"),s=n(\"yA/v\");const a=new r.o(\"angularfire2.storageBucket\");let u=(()=>(class{constructor(e,t,n,r,i){this.scheduler=new o.a(i,r),this.storage=i.runOutsideAngular(()=>Object(s.e)(e,t).storage(n||void 0))}ref(e){return Object(i.a)(this.storage.ref(e),this.scheduler)}upload(e,t,n){const r=this.storage.ref(e);return Object(i.a)(r,this.scheduler).put(t,n)}}))()},gRHU:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return o});var r=n(\"2fFW\"),i=n(\"NJ4a\");const o={closed:!0,next(e){},error(e){if(r.a.useDeprecatedSynchronousErrorHandling)throw e;Object(i.a)(e)},complete(){}}},hKQe:function(e,t,n){\"use strict\";n(\"HDdC\"),n(\"KOl+\")},hbGf:function(e,t,n){\"use strict\";var r=n(\"HDdC\"),i=n(\"lJxs\"),o=n(\"D0XW\"),s=n(\"7o/Q\"),a=n(\"EY2u\"),u=n(\"LRne\");let c=(()=>{class e{constructor(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue=\"N\"===e}observe(e){switch(this.kind){case\"N\":return e.next&&e.next(this.value);case\"E\":return e.error&&e.error(this.error);case\"C\":return e.complete&&e.complete()}}do(e,t,n){switch(this.kind){case\"N\":return e&&e(this.value);case\"E\":return t&&t(this.error);case\"C\":return n&&n()}}accept(e,t,n){return e&&\"function\"==typeof e.next?this.observe(e):this.do(e,t,n)}toObservable(){switch(this.kind){case\"N\":return Object(u.a)(this.value);case\"E\":return e=this.error,new r.a(t=>t.error(e));case\"C\":return Object(a.b)()}var e;throw new Error(\"unexpected notification kind value\")}static createNext(t){return void 0!==t?new e(\"N\",t):e.undefinedValueNotification}static createError(t){return new e(\"E\",void 0,t)}static createComplete(){return e.completeNotification}}return e.completeNotification=new e(\"C\"),e.undefinedValueNotification=new e(\"N\",void 0),e})();class l{constructor(e,t){this.delay=e,this.scheduler=t}call(e,t){return t.subscribe(new h(e,this.delay,this.scheduler))}}class h extends s.a{constructor(e,t,n){super(e),this.delay=t,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(e){const t=e.source,n=t.queue,r=e.scheduler,i=e.destination;for(;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){const t=Math.max(0,n[0].time-r.now());this.schedule(e,t)}else this.unsubscribe(),t.active=!1}_schedule(e){this.active=!0,this.destination.add(e.schedule(h.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))}scheduleNotification(e){if(!0===this.errored)return;const t=this.scheduler,n=new d(t.now()+this.delay,e);this.queue.push(n),!1===this.active&&this._schedule(t)}_next(e){this.scheduleNotification(c.createNext(e))}_error(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()}_complete(){this.scheduleNotification(c.createComplete()),this.unsubscribe()}}class d{constructor(e,t){this.time=e,this.notification=t}}var f=n(\"w1tV\");function p(e,t,n=\"on\"){return new r.a(r=>{const i=e[n](t,(e,t)=>{r.next({snapshot:e,prevKey:t}),\"once\"==n&&r.complete()},r.error.bind(r));return\"on\"==n?{unsubscribe(){e.off(t,i)}}:{unsubscribe(){}}}).pipe(Object(i.a)(e=>{const{snapshot:n,prevKey:r}=e;let i=null;return n.exists()&&(i=n.key),{type:t,payload:n,prevKey:r,key:i}}),function(e,t=o.a){const n=0 instanceof Date&&!isNaN(0)?0-t.now():Math.abs(0);return e=>e.lift(new l(n,t))}(),Object(f.a)())}n.d(t,\"a\",function(){return p})},iInd:function(e,t,n){\"use strict\";var r=n(\"SVse\"),i=n(\"8Y7J\"),o=n(\"LRne\"),s=n(\"Cfvw\"),a=n(\"2Vo4\"),u=n(\"HDdC\");const c=(()=>{function e(){return Error.call(this),this.message=\"no elements in sequence\",this.name=\"EmptyError\",this}return e.prototype=Object.create(Error.prototype),e})();var l=n(\"z+Ro\"),h=n(\"DH7j\"),d=n(\"l7GE\"),f=n(\"ZUHj\"),p=n(\"yCtX\");const m={};class g{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new y(e,this.resultSelector))}}class y extends d.a{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(m),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let n=0;n<t;n++){const t=e[n];this.add(Object(f.a)(this,t,t,n))}}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,n,r,i){const o=this.values,s=this.toRespond?o[n]===m?--this.toRespond:this.toRespond:0;o[n]=t,0===s&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}var v=n(\"EY2u\");function b(e){return new u.a(t=>{let n;try{n=e()}catch(r){return void t.error(r)}return(n?Object(s.a)(n):Object(v.b)()).subscribe(t)})}var _=n(\"XNiG\"),w=n(\"lJxs\"),E=n(\"bHdf\");function C(){return Object(E.a)(1)}var S=n(\"pLZG\"),T=n(\"7o/Q\");const I=(()=>{function e(){return Error.call(this),this.message=\"argument out of range\",this.name=\"ArgumentOutOfRangeError\",this}return e.prototype=Object.create(Error.prototype),e})();function O(e){return function(t){return 0===e?Object(v.b)():t.lift(new N(e))}}class N{constructor(e){if(this.total=e,this.total<0)throw new I}call(e,t){return t.subscribe(new A(e,this.total))}}class A extends T.a{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=t++%n;e.next(r[i])}}e.complete()}}function R(e=function(){return new c}){return t=>t.lift(new D(e))}class D{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new k(e,this.errorFactory))}}class k extends T.a{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function x(e=null){return t=>t.lift(new P(e))}class P{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new L(e,this.defaultValue))}}class L extends T.a{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var M=n(\"SpAZ\");function j(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Object(S.a)((t,n)=>e(t,n,r)):M.a,O(1),n?x(t):R(()=>new c))}var F=n(\"51Dv\");function U(e){return function(t){const n=new V(e),r=t.lift(n);return n.caught=r}}class V{constructor(e){this.selector=e}call(e,t){return t.subscribe(new q(e,this.selector,this.caught))}}class q extends d.a{constructor(e,t,n){super(e),this.selector=t,this.caught=n}error(e){if(!this.isStopped){let n;try{n=this.selector(e,this.caught)}catch(t){return void super.error(t)}this._unsubscribeAndRecycle();const r=new F.a(this,void 0,void 0);this.add(r),Object(f.a)(this,n,void 0,void 0,r)}}}function B(e){return t=>0===e?Object(v.b)():t.lift(new $(e))}class ${constructor(e){if(this.total=e,this.total<0)throw new I}call(e,t){return t.subscribe(new z(e,this.total))}}class z extends T.a{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}function W(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Object(S.a)((t,n)=>e(t,n,r)):M.a,B(1),n?x(t):R(()=>new c))}var H=n(\"5+tZ\");class Q{constructor(e,t,n){this.predicate=e,this.thisArg=t,this.source=n}call(e,t){return t.subscribe(new G(e,this.predicate,this.thisArg,this.source))}}class G extends T.a{constructor(e,t,n,r){super(e),this.predicate=t,this.thisArg=n,this.source=r,this.index=0,this.thisArg=n||this}notifyComplete(e){this.destination.next(e),this.destination.complete()}_next(e){let t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(n){return void this.destination.error(n)}t||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}var K=n(\"eIep\");function Y(...e){return C()(Object(o.a)(...e))}var X=n(\"Kqap\"),J=n(\"bOdf\"),Z=n(\"mCNh\"),ee=n(\"KqfI\"),te=n(\"n6bG\");function ne(e,t,n){return function(r){return r.lift(new re(e,t,n))}}class re{constructor(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}call(e,t){return t.subscribe(new ie(e,this.nextOrObserver,this.error,this.complete))}}class ie extends T.a{constructor(e,t,n,r){super(e),this._tapNext=ee.a,this._tapError=ee.a,this._tapComplete=ee.a,this._tapError=n||ee.a,this._tapComplete=r||ee.a,Object(te.a)(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||ee.a,this._tapError=t.error||ee.a,this._tapComplete=t.complete||ee.a)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}var oe=n(\"quSY\");class se{constructor(e){this.callback=e}call(e,t){return t.subscribe(new ae(e,this.callback))}}class ae extends T.a{constructor(e,t){super(e),this.add(new oe.a(t))}}var ue=n(\"cUpR\");n.d(t,\"C\",function(){return Ie}),n.d(t,\"s\",function(){return Vn}),n.d(t,\"z\",function(){return Yn}),n.d(t,\"u\",function(){return zn}),n.d(t,\"A\",function(){return Xn}),n.d(t,\"B\",function(){return Jn}),n.d(t,\"w\",function(){return Hn}),n.d(t,\"v\",function(){return Wn}),n.d(t,\"y\",function(){return Kn}),n.d(t,\"t\",function(){return Bn}),n.d(t,\"x\",function(){return Gn}),n.d(t,\"D\",function(){return Fn}),n.d(t,\"o\",function(){return kn}),n.d(t,\"d\",function(){return le}),n.d(t,\"l\",function(){return _n}),n.d(t,\"m\",function(){return An}),n.d(t,\"k\",function(){return En}),n.d(t,\"i\",function(){return Un}),n.d(t,\"j\",function(){return Zn}),n.d(t,\"n\",function(){return $n}),n.d(t,\"b\",function(){return Dn}),n.d(t,\"e\",function(){return Mn}),n.d(t,\"g\",function(){return Ln}),n.d(t,\"h\",function(){return Pn}),n.d(t,\"p\",function(){return jn}),n.d(t,\"a\",function(){return yt}),n.d(t,\"f\",function(){return Oe}),n.d(t,\"q\",function(){return Sn}),n.d(t,\"c\",function(){return Ye}),n.d(t,\"r\",function(){return Ke});class ce{constructor(e,t){this.id=e,this.url=t}}class le extends ce{constructor(e,t,n=\"imperative\",r=null){super(e,t),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class he extends ce{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class de extends ce{constructor(e,t,n){super(e,t),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class fe extends ce{constructor(e,t,n){super(e,t),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class pe extends ce{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class me extends ce{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ge extends ce{constructor(e,t,n,r,i){super(e,t),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ye extends ce{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ve extends ce{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class be{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class _e{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class we{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||\"\"}')`}}class Ee{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||\"\"}')`}}class Ce{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||\"\"}')`}}class Se{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||\"\"}')`}}class Te{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Ie=(()=>(class{}))();const Oe=\"primary\";class Ne{constructor(e){this.params=e||{}}has(e){return this.params.hasOwnProperty(e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ae(e){return new Ne(e)}const Re=\"ngNavigationCancelingError\";function De(e){const t=Error(\"NavigationCancelingError: \"+e);return t[Re]=!0,t}function ke(e,t,n){const r=n.path.split(\"/\");if(r.length>e.length)return null;if(\"full\"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let o=0;o<r.length;o++){const t=r[o],n=e[o];if(t.startsWith(\":\"))i[t.substring(1)]=n;else if(t!==n.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}class xe{constructor(e,t){this.routes=e,this.module=t}}function Pe(e,t=\"\"){for(let n=0;n<e.length;n++){const r=e[n];Le(r,Me(t,r))}}function Le(e,t){if(!e)throw new Error(`\\n      Invalid configuration of route '${t}': Encountered undefined route.\\n      The reason might be an extra comma.\\n\\n      Example:\\n      const routes: Routes = [\\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\\n        { path: 'detail/:id', component: HeroDetailComponent }\\n      ];\\n    `);if(Array.isArray(e))throw new Error(`Invalid configuration of route '${t}': Array cannot be specified`);if(!e.component&&!e.children&&!e.loadChildren&&e.outlet&&e.outlet!==Oe)throw new Error(`Invalid configuration of route '${t}': a componentless route without children or loadChildren cannot have a named outlet set`);if(e.redirectTo&&e.children)throw new Error(`Invalid configuration of route '${t}': redirectTo and children cannot be used together`);if(e.redirectTo&&e.loadChildren)throw new Error(`Invalid configuration of route '${t}': redirectTo and loadChildren cannot be used together`);if(e.children&&e.loadChildren)throw new Error(`Invalid configuration of route '${t}': children and loadChildren cannot be used together`);if(e.redirectTo&&e.component)throw new Error(`Invalid configuration of route '${t}': redirectTo and component cannot be used together`);if(e.path&&e.matcher)throw new Error(`Invalid configuration of route '${t}': path and matcher cannot be used together`);if(void 0===e.redirectTo&&!e.component&&!e.children&&!e.loadChildren)throw new Error(`Invalid configuration of route '${t}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===e.path&&void 0===e.matcher)throw new Error(`Invalid configuration of route '${t}': routes must have either a path or a matcher specified`);if(\"string\"==typeof e.path&&\"/\"===e.path.charAt(0))throw new Error(`Invalid configuration of route '${t}': path cannot start with a slash`);if(\"\"===e.path&&void 0!==e.redirectTo&&void 0===e.pathMatch)throw new Error(`Invalid configuration of route '{path: \"${t}\", redirectTo: \"${e.redirectTo}\"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==e.pathMatch&&\"full\"!==e.pathMatch&&\"prefix\"!==e.pathMatch)throw new Error(`Invalid configuration of route '${t}': pathMatch can only be set to 'prefix' or 'full'`);e.children&&Pe(e.children,t)}function Me(e,t){return t?e||t.path?e&&!t.path?`${e}/`:!e&&t.path?t.path:`${e}/${t.path}`:\"\":e}function je(e){const t=e.children&&e.children.map(je),n=t?Object.assign({},e,{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Oe&&(n.component=Ie),n}function Fe(e,t){const n=Object.keys(e),r=Object.keys(t);if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(e[i=n[o]]!==t[i])return!1;return!0}function Ue(e){return Array.prototype.concat.apply([],e)}function Ve(e){return e.length>0?e[e.length-1]:null}function qe(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function Be(e){return Object(i.xb)(e)?e:Object(i.yb)(e)?Object(s.a)(Promise.resolve(e)):Object(o.a)(e)}function $e(e,t,n){return n?function(e,t){return Fe(e,t)}(e.queryParams,t.queryParams)&&function e(t,n){if(!Qe(t.segments,n.segments))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!t.children[r])return!1;if(!e(t.children[r],n.children[r]))return!1}return!0}(e.root,t.root):function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>t[n]===e[n])}(e.queryParams,t.queryParams)&&function e(t,n){return function t(n,r,i){if(n.segments.length>i.length){return!!Qe(n.segments.slice(0,i.length),i)&&!r.hasChildren()}if(n.segments.length===i.length){if(!Qe(n.segments,i))return!1;for(const t in r.children){if(!n.children[t])return!1;if(!e(n.children[t],r.children[t]))return!1}return!0}{const e=i.slice(0,n.segments.length),o=i.slice(n.segments.length);return!!Qe(n.segments,e)&&!!n.children[Oe]&&t(n.children[Oe],r,o)}}(t,n,n.segments)}(e.root,t.root)}class ze{constructor(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ae(this.queryParams)),this._queryParamMap}toString(){return Xe.serialize(this)}}class We{constructor(e,t){this.segments=e,this.children=t,this.parent=null,qe(t,(e,t)=>e.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Je(this)}}class He{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ae(this.parameters)),this._parameterMap}toString(){return it(this)}}function Qe(e,t){return e.length===t.length&&e.every((e,n)=>e.path===t[n].path)}function Ge(e,t){let n=[];return qe(e.children,(e,r)=>{r===Oe&&(n=n.concat(t(e,r)))}),qe(e.children,(e,r)=>{r!==Oe&&(n=n.concat(t(e,r)))}),n}class Ke{}class Ye{parse(e){const t=new ct(e);return new ze(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var t;return`${`/${function e(t,n){if(!t.hasChildren())return Je(t);if(n){const n=t.children[Oe]?e(t.children[Oe],!1):\"\",r=[];return qe(t.children,(t,n)=>{n!==Oe&&r.push(`${n}:${e(t,!1)}`)}),r.length>0?`${n}(${r.join(\"//\")})`:n}{const n=Ge(t,(n,r)=>r===Oe?[e(t.children[Oe],!1)]:[`${r}:${e(n,!1)}`]);return`${Je(t)}/(${n.join(\"//\")})`}}(e.root,!0)}`}${function(e){const t=Object.keys(e).map(t=>{const n=e[t];return Array.isArray(n)?n.map(e=>`${et(t)}=${et(e)}`).join(\"&\"):`${et(t)}=${et(n)}`});return t.length?`?${t.join(\"&\")}`:\"\"}(e.queryParams)}${\"string\"==typeof e.fragment?`#${t=e.fragment,encodeURI(t)}`:\"\"}`}}const Xe=new Ye;function Je(e){return e.segments.map(e=>it(e)).join(\"/\")}function Ze(e){return encodeURIComponent(e).replace(/%40/g,\"@\").replace(/%3A/gi,\":\").replace(/%24/g,\"$\").replace(/%2C/gi,\",\")}function et(e){return Ze(e).replace(/%3B/gi,\";\")}function tt(e){return Ze(e).replace(/\\(/g,\"%28\").replace(/\\)/g,\"%29\").replace(/%26/gi,\"&\")}function nt(e){return decodeURIComponent(e)}function rt(e){return nt(e.replace(/\\+/g,\"%20\"))}function it(e){return`${tt(e.path)}${t=e.parameters,Object.keys(t).map(e=>`;${tt(e)}=${tt(t[e])}`).join(\"\")}`;var t}const ot=/^[^\\/()?;=#]+/;function st(e){const t=e.match(ot);return t?t[0]:\"\"}const at=/^[^=?&#]+/,ut=/^[^?&#]+/;class ct{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional(\"/\"),\"\"===this.remaining||this.peekStartsWith(\"?\")||this.peekStartsWith(\"#\")?new We([],{}):new We([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional(\"?\"))do{this.parseQueryParam(e)}while(this.consumeOptional(\"&\"));return e}parseFragment(){return this.consumeOptional(\"#\")?decodeURIComponent(this.remaining):null}parseChildren(){if(\"\"===this.remaining)return{};this.consumeOptional(\"/\");const e=[];for(this.peekStartsWith(\"(\")||e.push(this.parseSegment());this.peekStartsWith(\"/\")&&!this.peekStartsWith(\"//\")&&!this.peekStartsWith(\"/(\");)this.capture(\"/\"),e.push(this.parseSegment());let t={};this.peekStartsWith(\"/(\")&&(this.capture(\"/\"),t=this.parseParens(!0));let n={};return this.peekStartsWith(\"(\")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n[Oe]=new We(e,t)),n}parseSegment(){const e=st(this.remaining);if(\"\"===e&&this.peekStartsWith(\";\"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new He(nt(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(\";\");)this.parseParam(e);return e}parseParam(e){const t=st(this.remaining);if(!t)return;this.capture(t);let n=\"\";if(this.consumeOptional(\"=\")){const e=st(this.remaining);e&&this.capture(n=e)}e[nt(t)]=nt(n)}parseQueryParam(e){const t=function(e){const t=e.match(at);return t?t[0]:\"\"}(this.remaining);if(!t)return;this.capture(t);let n=\"\";if(this.consumeOptional(\"=\")){const e=function(e){const t=e.match(ut);return t?t[0]:\"\"}(this.remaining);e&&this.capture(n=e)}const r=rt(t),i=rt(n);if(e.hasOwnProperty(r)){let t=e[r];Array.isArray(t)||(e[r]=t=[t]),t.push(i)}else e[r]=i}parseParens(e){const t={};for(this.capture(\"(\");!this.consumeOptional(\")\")&&this.remaining.length>0;){const n=st(this.remaining),r=this.remaining[n.length];if(\"/\"!==r&&\")\"!==r&&\";\"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(\":\")>-1?(i=n.substr(0,n.indexOf(\":\")),this.capture(i),this.capture(\":\")):e&&(i=Oe);const o=this.parseChildren();t[i]=1===Object.keys(o).length?o[Oe]:new We([],o),this.consumeOptional(\"//\")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected \"${e}\".`)}}class lt{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=ht(e,this._root);return t?t.children.map(e=>e.value):[]}firstChild(e){const t=ht(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=dt(e,this._root);return t.length<2?[]:t[t.length-2].children.map(e=>e.value).filter(t=>t!==e)}pathFromRoot(e){return dt(e,this._root).map(e=>e.value)}}function ht(e,t){if(e===t.value)return t;for(const n of t.children){const t=ht(e,n);if(t)return t}return null}function dt(e,t){if(e===t.value)return[t];for(const n of t.children){const r=dt(e,n);if(r.length)return r.unshift(t),r}return[]}class ft{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function pt(e){const t={};return e&&e.children.forEach(e=>t[e.value.outlet]=e),t}class mt extends lt{constructor(e,t){super(e),this.snapshot=t,wt(this,e)}toString(){return this.snapshot.toString()}}function gt(e,t){const n=function(e,t){const n=new bt([],{},{},\"\",{},Oe,t,null,e.root,-1,{});return new _t(\"\",new ft(n,[]))}(e,t),r=new a.a([new He(\"\",{})]),i=new a.a({}),o=new a.a({}),s=new a.a({}),u=new a.a(\"\"),c=new yt(r,i,s,u,o,Oe,t,n.root);return c.snapshot=n.root,new mt(new ft(c,[]),n)}class yt{constructor(e,t,n,r,i,o,s,a){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(w.a)(e=>Ae(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(w.a)(e=>Ae(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function vt(e,t=\"emptyOnly\"){const n=e.pathFromRoot;let r=0;if(\"always\"!==t)for(r=n.length-1;r>=1;){const e=n[r],t=n[r-1];if(e.routeConfig&&\"\"===e.routeConfig.path)r--;else{if(t.component)break;r--}}return function(e){return e.reduce((e,t)=>({params:Object.assign({},e.params,t.params),data:Object.assign({},e.data,t.data),resolve:Object.assign({},e.resolve,t._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class bt{constructor(e,t,n,r,i,o,s,a,u,c,l){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ae(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ae(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(e=>e.toString()).join(\"/\")}', path:'${this.routeConfig?this.routeConfig.path:\"\"}')`}}class _t extends lt{constructor(e,t){super(t),this.url=e,wt(this,t)}toString(){return Et(this._root)}}function wt(e,t){t.value._routerState=e,t.children.forEach(t=>wt(e,t))}function Et(e){const t=e.children.length>0?` { ${e.children.map(Et).join(\", \")} } `:\"\";return`${e.value}${t}`}function Ct(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Fe(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),Fe(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Fe(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),Fe(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function St(e,t){var n,r;return Fe(e.params,t.params)&&Qe(n=e.url,r=t.url)&&n.every((e,t)=>Fe(e.parameters,r[t].parameters))&&!(!e.parent!=!t.parent)&&(!e.parent||St(e.parent,t.parent))}function Tt(e){return\"object\"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function It(e,t,n,r,i){let o={};return r&&qe(r,(e,t)=>{o[t]=Array.isArray(e)?e.map(e=>`${e}`):`${e}`}),new ze(n.root===e?t:function e(t,n,r){const i={};return qe(t.children,(t,o)=>{i[o]=t===n?r:e(t,n,r)}),new We(t.segments,i)}(n.root,e,t),o,i)}class Ot{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&Tt(n[0]))throw new Error(\"Root segment cannot have matrix parameters\");const r=n.find(e=>\"object\"==typeof e&&null!=e&&e.outlets);if(r&&r!==Ve(n))throw new Error(\"{outlets:{}} has to be the last command\")}toRoot(){return this.isAbsolute&&1===this.commands.length&&\"/\"==this.commands[0]}}class Nt{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function At(e){return\"object\"==typeof e&&null!=e&&e.outlets?e.outlets[Oe]:`${e}`}function Rt(e,t,n){if(e||(e=new We([],{})),0===e.segments.length&&e.hasChildren())return Dt(e,t,n);const r=function(e,t,n){let r=0,i=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;const t=e.segments[i],s=At(n[r]),a=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&a&&\"object\"==typeof a&&void 0===a.outlets){if(!Lt(s,a,t))return o;r+=2}else{if(!Lt(s,{},t))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const t=new We(e.segments.slice(0,r.pathIndex),{});return t.children[Oe]=new We(e.segments.slice(r.pathIndex),e.children),Dt(t,0,i)}return r.match&&0===i.length?new We(e.segments,{}):r.match&&!e.hasChildren()?kt(e,t,n):r.match?Dt(e,0,i):kt(e,t,n)}function Dt(e,t,n){if(0===n.length)return new We(e.segments,{});{const r=function(e){return\"object\"!=typeof e[0]?{[Oe]:e}:void 0===e[0].outlets?{[Oe]:e}:e[0].outlets}(n),i={};return qe(r,(n,r)=>{null!==n&&(i[r]=Rt(e.children[r],t,n))}),qe(e.children,(e,t)=>{void 0===r[t]&&(i[t]=e)}),new We(e.segments,i)}}function kt(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){if(\"object\"==typeof n[i]&&void 0!==n[i].outlets){const e=xt(n[i].outlets);return new We(r,e)}if(0===i&&Tt(n[0])){r.push(new He(e.segments[t].path,n[0])),i++;continue}const o=At(n[i]),s=i<n.length-1?n[i+1]:null;o&&s&&Tt(s)?(r.push(new He(o,Pt(s))),i+=2):(r.push(new He(o,{})),i++)}return new We(r,{})}function xt(e){const t={};return qe(e,(e,n)=>{null!==e&&(t[n]=kt(new We([],{}),0,e))}),t}function Pt(e){const t={};return qe(e,(e,n)=>t[n]=`${e}`),t}function Lt(e,t,n){return e==n.path&&Fe(t,n.parameters)}const Mt=(e,t,n)=>Object(w.a)(r=>(new jt(t,r.targetRouterState,r.currentRouterState,n).activate(e),r));class jt{constructor(e,t,n,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=r}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),Ct(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const r=pt(t);e.children.forEach(e=>{const t=e.value.outlet;this.deactivateRoutes(e,r[t],n),delete r[t]}),qe(r,(e,t)=>{this.deactivateRouteAndItsChildren(e,n)})}deactivateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(e,t,i.children)}else this.deactivateChildRoutes(e,t,n);else i&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet);if(n&&n.outlet){const t=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:t,route:e,contexts:r})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet);if(n){const r=pt(e),i=e.value.component?n.children:t;qe(r,(e,t)=>this.deactivateRouteAndItsChildren(e,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(e,t,n){const r=pt(t);e.children.forEach(e=>{this.activateRoutes(e,r[e.value.outlet],n),this.forwardEvent(new Se(e.value.snapshot))}),e.children.length&&this.forwardEvent(new Ee(e.value.snapshot))}activateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(Ct(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,i.children)}else this.activateChildRoutes(e,t,n);else if(r.component){const t=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const e=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),t.children.onOutletReAttached(e.contexts),t.attachRef=e.componentRef,t.route=e.route.value,t.outlet&&t.outlet.attach(e.componentRef,e.route.value),Ft(e.route)}else{const n=function(e){for(let t=r.snapshot.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(),i=n?n.module.componentFactoryResolver:null;t.attachRef=null,t.route=r,t.resolver=i,t.outlet&&t.outlet.activateWith(r,i),this.activateChildRoutes(e,null,t.children)}}else this.activateChildRoutes(e,null,n)}}function Ft(e){Ct(e.value),e.children.forEach(Ft)}function Ut(e){return\"function\"==typeof e}function Vt(e){return e instanceof ze}class qt{constructor(e){this.segmentGroup=e||null}}class Bt{constructor(e){this.urlTree=e}}function $t(e){return new u.a(t=>t.error(new qt(e)))}function zt(e){return new u.a(t=>t.error(new Bt(e)))}function Wt(e){return new u.a(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e}'`)))}class Ht{constructor(e,t,n,r,o){this.configLoader=t,this.urlSerializer=n,this.urlTree=r,this.config=o,this.allowRedirects=!0,this.ngModule=e.get(i.v)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,Oe).pipe(Object(w.a)(e=>this.createUrlTree(e,this.urlTree.queryParams,this.urlTree.fragment))).pipe(U(e=>{if(e instanceof Bt)return this.allowRedirects=!1,this.match(e.urlTree);if(e instanceof qt)throw this.noMatchError(e);throw e}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Oe).pipe(Object(w.a)(t=>this.createUrlTree(t,e.queryParams,e.fragment))).pipe(U(e=>{if(e instanceof qt)throw this.noMatchError(e);throw e}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,n){const r=e.segments.length>0?new We([],{[Oe]:e}):e;return new ze(r,t,n)}expandSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe(Object(w.a)(e=>new We([],e))):this.expandSegment(e,n,t,n.segments,r,!0)}expandChildren(e,t,n){return function(e,t){if(0===Object.keys(e).length)return Object(o.a)({});const n=[],r=[],i={};return qe(e,(e,o)=>{const s=t(o,e).pipe(Object(w.a)(e=>i[o]=e));o===Oe?n.push(s):r.push(s)}),o.a.apply(null,n.concat(r)).pipe(C(),j(),Object(w.a)(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(e,t,r,n))}expandSegment(e,t,n,r,i,s){return Object(o.a)(...n).pipe(Object(w.a)(a=>this.expandSegmentAgainstRoute(e,t,n,a,r,i,s).pipe(U(e=>{if(e instanceof qt)return Object(o.a)(null);throw e}))),C(),W(e=>!!e),U((e,n)=>{if(e instanceof c||\"EmptyError\"===e.name){if(this.noLeftoversInUrl(t,r,i))return Object(o.a)(new We([],{}));throw new qt(t)}throw e}))}noLeftoversInUrl(e,t,n){return 0===t.length&&!e.children[n]}expandSegmentAgainstRoute(e,t,n,r,i,o,s){return Yt(r)!==o?$t(t):void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,i):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,o):$t(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,o){return\"**\"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith(\"/\")?zt(i):this.lineralizeSegments(n,i).pipe(Object(H.a)(n=>{const i=new We(n,{});return this.expandSegment(e,i,t,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=Qt(t,r,i);if(!s)return $t(t);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith(\"/\")?zt(l):this.lineralizeSegments(r,l).pipe(Object(H.a)(r=>this.expandSegment(e,t,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(e,t,n,r){if(\"**\"===n.path)return n.loadChildren?this.configLoader.load(e.injector,n).pipe(Object(w.a)(e=>(n._loadedConfig=e,new We(r,{})))):Object(o.a)(new We(r,{}));const{matched:i,consumedSegments:s,lastChild:a}=Qt(t,n,r);if(!i)return $t(t);const u=r.slice(a);return this.getChildConfig(e,n,r).pipe(Object(H.a)(e=>{const n=e.module,r=e.routes,{segmentGroup:i,slicedSegments:a}=function(e,t,n,r){return n.length>0&&function(e,t,n){return r.some(n=>Kt(e,t,n)&&Yt(n)!==Oe)}(e,n)?{segmentGroup:Gt(new We(t,function(e,t){const n={};n[Oe]=t;for(const r of e)\"\"===r.path&&Yt(r)!==Oe&&(n[Yt(r)]=new We([],{}));return n}(r,new We(n,e.children)))),slicedSegments:[]}:0===n.length&&function(e,t,n){return r.some(n=>Kt(e,t,n))}(e,n)?{segmentGroup:Gt(new We(e.segments,function(e,t,n,r){const i={};for(const o of n)Kt(e,t,o)&&!r[Yt(o)]&&(i[Yt(o)]=new We([],{}));return Object.assign({},r,i)}(e,n,r,e.children))),slicedSegments:n}:{segmentGroup:e,slicedSegments:n}}(t,s,u,r);return 0===a.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(Object(w.a)(e=>new We(s,e))):0===r.length&&0===a.length?Object(o.a)(new We(s,{})):this.expandSegment(n,i,r,a,Oe,!0).pipe(Object(w.a)(e=>new We(s.concat(e.segments),e.children)))}))}getChildConfig(e,t,n){return t.children?Object(o.a)(new xe(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Object(o.a)(t._loadedConfig):function(e,t,n){const r=t.canLoad;return r&&0!==r.length?Object(s.a)(r).pipe(Object(w.a)(r=>{const i=e.get(r);let o;if(function(e){return e&&Ut(e.canLoad)}(i))o=i.canLoad(t,n);else{if(!Ut(i))throw new Error(\"Invalid CanLoad guard\");o=i(t,n)}return Be(o)})).pipe(C(),(i=e=>!0===e,e=>e.lift(new Q(i,void 0,e)))):Object(o.a)(!0);var i}(e.injector,t,n).pipe(Object(H.a)(n=>n?this.configLoader.load(e.injector,t).pipe(Object(w.a)(e=>(t._loadedConfig=e,e))):function(e){return new u.a(t=>t.error(De(`Cannot load children because the guard of the route \"path: '${e.path}'\" returned false`)))}(t))):Object(o.a)(new xe([],e))}lineralizeSegments(e,t){let n=[],r=t.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(o.a)(n);if(r.numberOfChildren>1||!r.children[Oe])return Wt(e.redirectTo);r=r.children[Oe]}}applyRedirectCommands(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreatreUrlTree(e,t,n,r){const i=this.createSegmentGroup(e,t.root,n,r);return new ze(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return qe(e,(e,r)=>{if(\"string\"==typeof e&&e.startsWith(\":\")){const i=e.substring(1);n[r]=t[i]}else n[r]=e}),n}createSegmentGroup(e,t,n,r){const i=this.createSegments(e,t.segments,n,r);let o={};return qe(t.children,(t,i)=>{o[i]=this.createSegmentGroup(e,t,n,r)}),new We(i,o)}createSegments(e,t,n,r){return t.map(t=>t.path.startsWith(\":\")?this.findPosParam(e,t,r):this.findOrReturn(t,n))}findPosParam(e,t,n){const r=n[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let n=0;for(const r of t){if(r.path===e.path)return t.splice(n),r;n++}return e}}function Qt(e,t,n){if(\"\"===t.path)return\"full\"===t.pathMatch&&(e.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(t.matcher||ke)(n,e,t);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Gt(e){if(1===e.numberOfChildren&&e.children[Oe]){const t=e.children[Oe];return new We(e.segments.concat(t.segments),t.children)}return e}function Kt(e,t,n){return(!(e.hasChildren()||t.length>0)||\"full\"!==n.pathMatch)&&\"\"===n.path&&void 0!==n.redirectTo}function Yt(e){return e.outlet||Oe}class Xt{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Jt{constructor(e,t){this.component=e,this.route=t}}function Zt(e,t,n){const r=e._root;return function e(t,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=pt(n);return t.children.forEach(t=>{!function(t,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,a=n?n.value:null,u=r?r.getContext(t.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const c=function(e,t,n){if(\"function\"==typeof n)return n(e,t);switch(n){case\"pathParamsChange\":return!Qe(e.url,t.url);case\"pathParamsOrQueryParamsChange\":return!Qe(e.url,t.url)||!Fe(e.queryParams,t.queryParams);case\"always\":return!0;case\"paramsOrQueryParamsChange\":return!St(e,t)||!Fe(e.queryParams,t.queryParams);case\"paramsChange\":default:return!St(e,t)}}(a,s,s.routeConfig.runGuardsAndResolvers);if(c?o.canActivateChecks.push(new Xt(i)):(s.data=a.data,s._resolvedData=a._resolvedData),e(t,n,s.component?u?u.children:null:r,i,o),c){o.canDeactivateChecks.push(new Jt(u&&u.outlet&&u.outlet.component||null,a))}}else a&&tn(n,u,o),o.canActivateChecks.push(new Xt(i)),e(t,null,s.component?u?u.children:null:r,i,o)}(t,s[t.value.outlet],r,i.concat([t.value]),o),delete s[t.value.outlet]}),qe(s,(e,t)=>tn(e,r.getContext(t),o)),o}(r,t?t._root:null,n,[r.value])}function en(e,t,n){const r=function(e){if(!e)return null;for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function tn(e,t,n){const r=pt(e),i=e.value;qe(r,(e,r)=>{tn(e,i.component?t?t.children.getContext(r):null:t,n)}),n.canDeactivateChecks.push(new Jt(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}const nn=Symbol(\"INITIAL_VALUE\");function rn(){return Object(K.a)(e=>(function(...e){let t=null,n=null;return Object(l.a)(e[e.length-1])&&(n=e.pop()),\"function\"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&Object(h.a)(e[0])&&(e=e[0]),Object(p.a)(e,n).lift(new g(t))})(...e.map(e=>e.pipe(B(1),function(...e){const t=e[e.length-1];return Object(l.a)(t)?(e.pop(),n=>Y(e,n,t)):t=>Y(e,t)}(nn)))).pipe(Object(X.a)((e,t)=>{let n=!1;return t.reduce((e,r,i)=>{if(e!==nn)return e;if(r===nn&&(n=!0),!n){if(!1===r)return r;if(i===t.length-1||Vt(r))return r}return e},e)},nn),Object(S.a)(e=>e!==nn),Object(w.a)(e=>Vt(e)?e:!0===e),B(1)))}function on(e,t){return null!==e&&t&&t(new Ce(e)),Object(o.a)(!0)}function sn(e,t){return null!==e&&t&&t(new we(e)),Object(o.a)(!0)}function an(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return Object(o.a)(!0);const i=r.map(r=>b(()=>{const i=en(r,t,n);let o;if(function(e){return e&&Ut(e.canActivate)}(i))o=Be(i.canActivate(t,e));else{if(!Ut(i))throw new Error(\"Invalid CanActivate guard\");o=Be(i(t,e))}return o.pipe(W())}));return Object(o.a)(i).pipe(rn())}function un(e,t,n){const r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(e=>(function(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null})(e)).filter(e=>null!==e).map(t=>b(()=>{const i=t.guards.map(i=>{const o=en(i,t.node,n);let s;if(function(e){return e&&Ut(e.canActivateChild)}(o))s=Be(o.canActivateChild(r,e));else{if(!Ut(o))throw new Error(\"Invalid CanActivateChild guard\");s=Be(o(r,e))}return s.pipe(W())});return Object(o.a)(i).pipe(rn())}));return Object(o.a)(i).pipe(rn())}class cn{}class ln{constructor(e,t,n,r,i,o){this.rootComponentType=e,this.config=t,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){try{const t=fn(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,n=this.processSegmentGroup(this.config,t,Oe),r=new bt([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Oe,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ft(r,n),s=new _t(this.url,i);return this.inheritParamsAndData(s._root),Object(o.a)(s)}catch(e){return new u.a(t=>t.error(e))}}inheritParamsAndData(e){const t=e.value,n=vt(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(e=>this.inheritParamsAndData(e))}processSegmentGroup(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}processChildren(e,t){const n=Ge(t,(t,n)=>this.processSegmentGroup(e,t,n));return function(e){const t={};n.forEach(e=>{const n=t[e.value.outlet];if(n){const t=n.url.map(e=>e.toString()).join(\"/\"),r=e.value.url.map(e=>e.toString()).join(\"/\");throw new Error(`Two segments cannot have the same outlet name: '${t}' and '${r}'.`)}t[e.value.outlet]=e.value})}(),n.sort((e,t)=>e.value.outlet===Oe?-1:t.value.outlet===Oe?1:e.value.outlet.localeCompare(t.value.outlet)),n}processSegment(e,t,n,r){for(const o of e)try{return this.processSegmentAgainstRoute(o,t,n,r)}catch(i){if(!(i instanceof cn))throw i}if(this.noLeftoversInUrl(t,n,r))return[];throw new cn}noLeftoversInUrl(e,t,n){return 0===t.length&&!e.children[n]}processSegmentAgainstRoute(e,t,n,r){if(e.redirectTo)throw new cn;if((e.outlet||Oe)!==r)throw new cn;let i,o=[],s=[];if(\"**\"===e.path){const o=n.length>0?Ve(n).parameters:{};i=new bt(n,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,gn(e),r,e.component,e,hn(t),dn(t)+n.length,yn(e))}else{const a=function(e,t,n){if(\"\"===t.path){if(\"full\"===t.pathMatch&&(e.hasChildren()||n.length>0))throw new cn;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(t.matcher||ke)(n,e,t);if(!r)throw new cn;const i={};qe(r.posParams,(e,t)=>{i[t]=e.path});const o=r.consumed.length>0?Object.assign({},i,r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(t,e,n);o=a.consumedSegments,s=n.slice(a.lastChild),i=new bt(o,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,gn(e),r,e.component,e,hn(t),dn(t)+o.length,yn(e))}const a=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),{segmentGroup:u,slicedSegments:c}=fn(t,o,s,a,this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const e=this.processChildren(a,u);return[new ft(i,e)]}if(0===a.length&&0===c.length)return[new ft(i,[])];const l=this.processSegment(a,u,c,Oe);return[new ft(i,l)]}}function hn(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function dn(e){let t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)n+=(t=t._sourceSegment)._segmentIndexShift?t._segmentIndexShift:0;return n-1}function fn(e,t,n,r,i){if(n.length>0&&function(e,t,n){return r.some(n=>pn(e,t,n)&&mn(n)!==Oe)}(e,n)){const i=new We(t,function(e,t,n,r){const i={};i[Oe]=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const o of n)if(\"\"===o.path&&mn(o)!==Oe){const n=new We([],{});n._sourceSegment=e,n._segmentIndexShift=t.length,i[mn(o)]=n}return i}(e,t,r,new We(n,e.children)));return i._sourceSegment=e,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return r.some(n=>pn(e,t,n))}(e,n)){const o=new We(e.segments,function(e,t,n,r,i,o){const s={};for(const a of r)if(pn(e,n,a)&&!i[mn(a)]){const n=new We([],{});n._sourceSegment=e,n._segmentIndexShift=\"legacy\"===o?e.segments.length:t.length,s[mn(a)]=n}return Object.assign({},i,s)}(e,t,n,r,e.children,i));return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}const o=new We(e.segments,e.children);return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}function pn(e,t,n){return(!(e.hasChildren()||t.length>0)||\"full\"!==n.pathMatch)&&\"\"===n.path&&void 0===n.redirectTo}function mn(e){return e.outlet||Oe}function gn(e){return e.data||{}}function yn(e){return e.resolve||{}}function vn(e,t,n,r){const i=en(e,t,r);return Be(i.resolve?i.resolve(t,n):i(t,n))}function bn(e){return function(t){return t.pipe(Object(K.a)(t=>{const n=e(t);return n?Object(s.a)(n).pipe(Object(w.a)(()=>t)):Object(s.a)([t])}))}}class _n{}class wn{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}const En=new i.o(\"ROUTES\");class Cn{constructor(e,t,n,r){this.loader=e,this.compiler=t,this.onLoadStartListener=n,this.onLoadEndListener=r}load(e,t){return this.onLoadStartListener&&this.onLoadStartListener(t),this.loadModuleFactory(t.loadChildren).pipe(Object(w.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(t);const r=n.create(e);return new xe(Ue(r.injector.get(En)).map(je),r)}))}loadModuleFactory(e){return\"string\"==typeof e?Object(s.a)(this.loader.load(e)):Be(e()).pipe(Object(H.a)(e=>e instanceof i.t?Object(o.a)(e):Object(s.a)(this.compiler.compileModuleAsync(e))))}}class Sn{}class Tn{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function In(e){throw e}function On(e,t,n){return t.parse(\"/\")}function Nn(e,t){return Object(o.a)(null)}class An{constructor(e,t,n,r,o,s,u,c){this.rootComponentType=e,this.urlSerializer=t,this.rootContexts=n,this.location=r,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new _.a,this.errorHandler=In,this.malformedUriErrorHandler=On,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Nn,afterPreactivation:Nn},this.urlHandlingStrategy=new Tn,this.routeReuseStrategy=new wn,this.onSameUrlNavigation=\"ignore\",this.paramsInheritanceStrategy=\"emptyOnly\",this.urlUpdateStrategy=\"deferred\",this.relativeLinkResolution=\"legacy\",this.ngModule=o.get(i.v),this.console=o.get(i.ab);const l=o.get(i.x);this.isNgZoneEnabled=l instanceof i.x,this.resetConfig(c),this.currentUrlTree=new ze(new We([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Cn(s,u,e=>this.triggerEvent(new be(e)),e=>this.triggerEvent(new _e(e))),this.routerState=gt(this.currentUrlTree,this.rootComponentType),this.transitions=new a.a({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:\"imperative\",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(e){const t=this.events;return e.pipe(Object(S.a)(e=>0!==e.id),Object(w.a)(e=>Object.assign({},e,{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl)})),Object(K.a)(e=>{let n=!1,r=!1;return Object(o.a)(e).pipe(ne(e=>{this.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign({},this.lastSuccessfulNavigation,{previousNavigation:null}):null}}),Object(K.a)(e=>{const n=!this.navigated||e.extractedUrl.toString()!==this.browserUrlTree.toString();if((\"reload\"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return Object(o.a)(e).pipe(Object(K.a)(e=>{const n=this.transitions.getValue();return t.next(new le(e.id,this.serializeUrl(e.extractedUrl),e.source,e.restoredState)),n!==this.transitions.getValue()?v.a:[e]}),Object(K.a)(e=>Promise.resolve(e)),function(e,t,n,r){return function(i){return i.pipe(Object(K.a)(i=>(function(e,t,n,r,o){return new Ht(e,t,n,i.extractedUrl,o).apply()})(e,t,n,0,r).pipe(Object(w.a)(e=>Object.assign({},i,{urlAfterRedirects:e})))))}}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),ne(e=>{this.currentNavigation=Object.assign({},this.currentNavigation,{finalUrl:e.urlAfterRedirects})}),function(e,t,n,r,i){return function(o){return o.pipe(Object(H.a)(o=>(function(e,t,n,r,i=\"emptyOnly\",o=\"legacy\"){return new ln(e,t,n,r,i,o).recognize()})(e,t,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(w.a)(e=>Object.assign({},o,{targetSnapshot:e})))))}}(this.rootComponentType,this.config,e=>this.serializeUrl(e),this.paramsInheritanceStrategy,this.relativeLinkResolution),ne(e=>{\"eager\"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(e.urlAfterRedirects,!!e.extras.replaceUrl,e.id,e.extras.state),this.browserUrlTree=e.urlAfterRedirects)}),ne(e=>{const n=new pe(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.next(n)}));if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:s,extras:a}=e,u=new le(n,this.serializeUrl(r),i,s);t.next(u);const c=gt(r,this.rootComponentType).snapshot;return Object(o.a)(Object.assign({},e,{targetSnapshot:c,urlAfterRedirects:r,extras:Object.assign({},a,{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=e.rawUrl,this.browserUrlTree=e.urlAfterRedirects,e.resolve(null),v.a}),bn(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=e;return this.hooks.beforePreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),ne(e=>{const t=new me(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),Object(w.a)(e=>Object.assign({},e,{guards:Zt(e.targetSnapshot,e.currentSnapshot,this.rootContexts)})),function(e,t){return function(n){return n.pipe(Object(H.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:u}}=n;return 0===u.length&&0===a.length?Object(o.a)(Object.assign({},n,{guardsResult:!0})):function(e,t,n,r){return Object(s.a)(e).pipe(Object(H.a)(e=>(function(e,t,n,r,i){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||0===s.length)return Object(o.a)(!0);const a=s.map(o=>{const s=en(o,t,i);let a;if(function(e){return e&&Ut(e.canDeactivate)}(s))a=Be(s.canDeactivate(e,t,n,r));else{if(!Ut(s))throw new Error(\"Invalid CanDeactivate guard\");a=Be(s(e,t,n,r))}return a.pipe(W())});return Object(o.a)(a).pipe(rn())})(e.component,e.route,n,t,r)),W(e=>!0!==e,!0))}(u,r,i,e).pipe(Object(H.a)(n=>n&&function(e){return\"boolean\"==typeof n}()?function(e,t,n,r){return Object(s.a)(t).pipe(Object(J.a)(t=>Object(s.a)([sn(t.route.parent,r),on(t.route,r),un(e,t.path,n),an(e,t.route,n)]).pipe(C(),W(e=>!0!==e,!0))),W(e=>!0!==e,!0))}(r,a,e,t):Object(o.a)(n)),Object(w.a)(e=>Object.assign({},n,{guardsResult:e})))}))}}(this.ngModule.injector,e=>this.triggerEvent(e)),ne(e=>{if(Vt(e.guardsResult)){const t=De(`Redirecting to \"${this.serializeUrl(e.guardsResult)}\"`);throw t.url=e.guardsResult,t}}),ne(e=>{const t=new ge(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);this.triggerEvent(t)}),Object(S.a)(e=>{if(!e.guardsResult){this.resetUrlToCurrentUrlTree();const n=new de(e.id,this.serializeUrl(e.extractedUrl),\"\");return t.next(n),e.resolve(!1),!1}return!0}),bn(e=>{if(e.guards.canActivateChecks.length)return Object(o.a)(e).pipe(ne(e=>{const t=new ye(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),function(e,t){return function(n){return n.pipe(Object(H.a)(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;return i.length?Object(s.a)(i).pipe(Object(J.a)(n=>(function(e,t,n,i){return function(e,t,n,r){const i=Object.keys(e);if(0===i.length)return Object(o.a)({});if(1===i.length){const o=i[0];return vn(e[o],t,n,r).pipe(Object(w.a)(e=>({[o]:e})))}const a={};return Object(s.a)(i).pipe(Object(H.a)(i=>vn(e[i],t,n,r).pipe(Object(w.a)(e=>(a[i]=e,e))))).pipe(j(),Object(w.a)(()=>a))}(e._resolve,e,r,i).pipe(Object(w.a)(t=>(e._resolvedData=t,e.data=Object.assign({},e.data,vt(e,n).resolve),null)))})(n.route,0,e,t)),function(e,t){return arguments.length>=2?function(n){return Object(Z.a)(Object(X.a)(e,t),O(1),x(t))(n)}:function(t){return Object(Z.a)(Object(X.a)((t,n,r)=>e(t,n,r+1)),O(1))(t)}}((e,t)=>e),Object(w.a)(e=>n)):Object(o.a)(n)}))}}(this.paramsInheritanceStrategy,this.ngModule.injector),ne(e=>{const t=new ve(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}))}),bn(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=e;return this.hooks.afterPreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(w.a)(e=>{const t=function(e,t,n){const r=function e(t,n,r){if(r&&t.shouldReuseRoute(n.value,r.value.snapshot)){const i=r.value;i._futureSnapshot=n.value;const o=function(t,n,r){return n.children.map(n=>{for(const i of r.children)if(t.shouldReuseRoute(i.value.snapshot,n.value))return e(t,n,i);return e(t,n)})}(t,n,r);return new ft(i,o)}{const r=t.retrieve(n.value);if(r){const e=r.route;return function e(t,n){if(t.value.routeConfig!==n.value.routeConfig)throw new Error(\"Cannot reattach ActivatedRouteSnapshot created from a different route\");if(t.children.length!==n.children.length)throw new Error(\"Cannot reattach ActivatedRouteSnapshot with a different number of children\");n.value._futureSnapshot=t.value;for(let r=0;r<t.children.length;++r)e(t.children[r],n.children[r])}(n,e),e}{const r=new yt(new a.a((i=n.value).url),new a.a(i.params),new a.a(i.queryParams),new a.a(i.fragment),new a.a(i.data),i.outlet,i.component,i),o=n.children.map(n=>e(t,n));return new ft(r,o)}}var i}(e,t._root,n?n._root:void 0);return new mt(r,t)}(this.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign({},e,{targetRouterState:t})}),ne(e=>{this.currentUrlTree=e.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl),this.routerState=e.targetRouterState,\"deferred\"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!e.extras.replaceUrl,e.id,e.extras.state),this.browserUrlTree=e.urlAfterRedirects)}),Mt(this.rootContexts,this.routeReuseStrategy,e=>this.triggerEvent(e)),ne({next(){n=!0},complete(){n=!0}}),function(e){return t=>t.lift(new se(e))}(()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new de(e.id,this.serializeUrl(e.extractedUrl),`Navigation ID ${e.id} is not equal to the current navigation id ${this.navigationId}`);t.next(n),e.resolve(!1)}this.currentNavigation=null}),U(n=>{if(r=!0,function(e){return n&&n[Re]}()){const r=Vt(n.url);r||(this.navigated=!0,this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));const i=new de(e.id,this.serializeUrl(e.extractedUrl),n.message);t.next(i),e.resolve(!1),r&&this.navigateByUrl(n.url)}else{this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);const r=new fe(e.id,this.serializeUrl(e.extractedUrl),n);t.next(r);try{e.resolve(this.errorHandler(n))}catch(i){e.reject(i)}}return v.a}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign({},this.getTransition(),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{let t=this.parseUrl(e.url);const n=\"popstate\"===e.type?\"popstate\":\"hashchange\",r=e.state&&e.state.navigationId?e.state:null;setTimeout(()=>{this.scheduleNavigation(t,n,r,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){Pe(e),this.config=e.map(je),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(e,t={}){const{relativeTo:n,queryParams:r,fragment:o,preserveQueryParams:s,queryParamsHandling:a,preserveFragment:u}=t;Object(i.V)()&&s&&console&&console.warn&&console.warn(\"preserveQueryParams is deprecated, use queryParamsHandling instead.\");const c=n||this.routerState.root,l=u?this.currentUrlTree.fragment:o;let h=null;if(a)switch(a){case\"merge\":h=Object.assign({},this.currentUrlTree.queryParams,r);break;case\"preserve\":h=this.currentUrlTree.queryParams;break;default:h=r||null}else h=s?this.currentUrlTree.queryParams:r||null;return null!==h&&(h=this.removeEmptyProps(h)),function(e,t,n,r,i){if(0===n.length)return It(t.root,t.root,t,r,i);const o=function(e){if(\"string\"==typeof e[0]&&1===e.length&&\"/\"===e[0])return new Ot(!0,0,e);let t=0,n=!1;const r=e.reduce((e,r,i)=>{if(\"object\"==typeof r&&null!=r){if(r.outlets){const t={};return qe(r.outlets,(e,n)=>{t[n]=\"string\"==typeof e?e.split(\"/\"):e}),[...e,{outlets:t}]}if(r.segmentPath)return[...e,r.segmentPath]}return\"string\"!=typeof r?[...e,r]:0===i?(r.split(\"/\").forEach((r,i)=>{0==i&&\".\"===r||(0==i&&\"\"===r?n=!0:\"..\"===r?t++:\"\"!=r&&e.push(r))}),e):[...e,r]},[]);return new Ot(n,t,r)}(n);if(o.toRoot())return It(t.root,new We([],{}),t,r,i);const s=function(e,n,r){if(e.isAbsolute)return new Nt(t.root,!0,0);if(-1===r.snapshot._lastPathIndex)return new Nt(r.snapshot._urlSegment,!0,0);const i=Tt(e.commands[0])?0:1;return function(t,n,o){let s=r.snapshot._urlSegment,a=r.snapshot._lastPathIndex+i,u=e.numberOfDoubleDots;for(;u>a;){if(u-=a,!(s=s.parent))throw new Error(\"Invalid number of '../'\");a=s.segments.length}return new Nt(s,!1,a-u)}()}(o,0,e),a=s.processChildren?Dt(s.segmentGroup,s.index,o.commands):Rt(s.segmentGroup,s.index,o.commands);return It(s.segmentGroup,a,t,r,i)}(c,this.currentUrlTree,e,h,l)}navigateByUrl(e,t={skipLocationChange:!1}){Object(i.V)()&&this.isNgZoneEnabled&&!i.x.isInAngularZone()&&this.console.warn(\"Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?\");const n=Vt(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,\"imperative\",null,t)}navigate(e,t={skipLocationChange:!1}){return function(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}isActive(e,t){if(Vt(e))return $e(this.currentUrlTree,e,t);const n=this.parseUrl(e);return $e(this.currentUrlTree,n,t)}removeEmptyProps(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return null!=r&&(t[n]=r),t},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.events.next(new he(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,e.resolve(!0)},e=>{this.console.warn(\"Unhandled Navigation Error: \")})}scheduleNavigation(e,t,n,r){const i=this.getTransition();if(i&&\"imperative\"!==t&&\"imperative\"===i.source&&i.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(i&&\"hashchange\"==t&&\"popstate\"===i.source&&i.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(i&&\"popstate\"==t&&\"hashchange\"===i.source&&i.rawUrl.toString()===e.toString())return Promise.resolve(!0);let o=null,s=null;const a=new Promise((e,t)=>{o=e,s=t}),u=++this.navigationId;return this.setTransition({id:u,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:o,reject:s,promise:a,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),a.catch(e=>Promise.reject(e))}setBrowserUrl(e,t,n,r){const i=this.urlSerializer.serialize(e);r=r||{},this.location.isCurrentPathEqualTo(i)||t?this.location.replaceState(i,\"\",Object.assign({},r,{navigationId:n})):this.location.go(i,\"\",Object.assign({},r,{navigationId:n}))}resetStateAndUrl(e,t,n){this.routerState=e,this.currentUrlTree=t,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),\"\",{navigationId:this.lastSuccessfulId})}}class Rn{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Dn,this.attachRef=null}}class Dn{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Rn,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let kn=(()=>(class{constructor(e,t,n,r,o){this.parentContexts=e,this.location=t,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new i.m,this.deactivateEvents=new i.m,this.name=r||Oe,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error(\"Outlet is not activated\");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error(\"Outlet is not activated\");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error(\"Outlet is not activated\");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new Error(\"Cannot activate an already activated outlet\");this._activatedRoute=e;const n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new xn(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}))();class xn{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===yt?this.route:e===Dn?this.childContexts:this.parent.get(e,t)}}class Pn{}class Ln{preload(e,t){return t().pipe(U(()=>Object(o.a)(null)))}}class Mn{preload(e,t){return Object(o.a)(null)}}let jn=(()=>(class{constructor(e,t,n,r,i){this.router=e,this.injector=r,this.preloadingStrategy=i,this.loader=new Cn(t,n,t=>e.triggerEvent(new be(t)),t=>e.triggerEvent(new _e(t)))}setUpPreloading(){this.subscription=this.router.events.pipe(Object(S.a)(e=>e instanceof he),Object(J.a)(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(i.v);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription.unsubscribe()}processRoutes(e,t){const n=[];for(const r of t)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const e=r._loadedConfig;n.push(this.processRoutes(e.module,e.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(e,r)):r.children&&n.push(this.processRoutes(e,r.children));return Object(s.a)(n).pipe(Object(E.a)(),Object(w.a)(e=>void 0))}preloadConfig(e,t){return this.preloadingStrategy.preload(t,()=>this.loader.load(e.injector,t).pipe(Object(H.a)(e=>(t._loadedConfig=e,this.processRoutes(e.module,e.routes)))))}}))();class Fn{constructor(e,t,n={}){this.router=e,this.viewportScroller=t,this.options=n,this.lastId=0,this.lastSource=\"imperative\",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||\"disabled\",n.anchorScrolling=n.anchorScrolling||\"disabled\"}init(){\"disabled\"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration(\"manual\"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof le?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof he&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Te&&(e.position?\"top\"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):\"enabled\"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&\"enabled\"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):\"disabled\"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,t){this.router.triggerEvent(new Te(e,\"popstate\"===this.lastSource?this.store[this.restoredId]:null,t))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}const Un=new i.o(\"ROUTER_CONFIGURATION\"),Vn=new i.o(\"ROUTER_FORROOT_GUARD\"),qn=[r.g,{provide:Ke,useClass:Ye},{provide:An,useFactory:Gn,deps:[i.g,Ke,Dn,r.g,i.p,i.u,i.i,En,Un,[Sn,new i.y],[_n,new i.y]]},Dn,{provide:yt,useFactory:Kn,deps:[An]},{provide:i.u,useClass:i.H},jn,Mn,Ln,{provide:Un,useValue:{enableTracing:!1}}];function Bn(){return new i.w(\"Router\",An)}let $n=(()=>{class e{constructor(e,t){}static forRoot(t,n){return{ngModule:e,providers:[qn,Qn(t),{provide:Vn,useFactory:Hn,deps:[[An,new i.y,new i.G]]},{provide:Un,useValue:n||{}},{provide:r.h,useFactory:Wn,deps:[r.o,[new i.n(r.a),new i.y],Un]},{provide:Fn,useFactory:zn,deps:[An,r.p,Un]},{provide:Pn,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Mn},{provide:i.w,multi:!0,useFactory:Bn},[Yn,{provide:i.d,multi:!0,useFactory:Xn,deps:[Yn]},{provide:Zn,useFactory:Jn,deps:[Yn]},{provide:i.b,multi:!0,useExisting:Zn}]]}}static forChild(t){return{ngModule:e,providers:[Qn(t)]}}}return e})();function zn(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new Fn(e,t,n)}function Wn(e,t,n={}){return n.useHash?new r.e(e,t):new r.n(e,t)}function Hn(e){if(e)throw new Error(\"RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.\");return\"guarded\"}function Qn(e){return[{provide:i.a,multi:!0,useValue:e},{provide:En,multi:!0,useValue:e}]}function Gn(e,t,n,r,i,o,s,a,u={},c,l){const h=new An(null,t,n,r,i,o,s,Ue(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),u.errorHandler&&(h.errorHandler=u.errorHandler),u.malformedUriErrorHandler&&(h.malformedUriErrorHandler=u.malformedUriErrorHandler),u.enableTracing){const e=Object(ue.r)();h.events.subscribe(t=>{e.logGroup(`Router Event: ${t.constructor.name}`),e.log(t.toString()),e.log(t),e.logGroupEnd()})}return u.onSameUrlNavigation&&(h.onSameUrlNavigation=u.onSameUrlNavigation),u.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=u.paramsInheritanceStrategy),u.urlUpdateStrategy&&(h.urlUpdateStrategy=u.urlUpdateStrategy),u.relativeLinkResolution&&(h.relativeLinkResolution=u.relativeLinkResolution),h}function Kn(e){return e.routerState.root}let Yn=(()=>(class{constructor(e){this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new _.a}appInitializer(){return this.injector.get(r.f,Promise.resolve(null)).then(()=>{let e=null;const t=new Promise(t=>e=t),n=this.injector.get(An),r=this.injector.get(Un);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))e(!0);else if(\"disabled\"===r.initialNavigation)n.setUpLocationChangeListener(),e(!0);else{if(\"enabled\"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?Object(o.a)(null):(this.initNavigation=!0,e(!0),this.resultOfPreactivationDone),n.initialNavigation()}return t})}bootstrapListener(e){const t=this.injector.get(Un),n=this.injector.get(jn),r=this.injector.get(Fn),o=this.injector.get(An),s=this.injector.get(i.g);e===s.components[0]&&(this.isLegacyEnabled(t)?o.initialNavigation():this.isLegacyDisabled(t)&&o.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(e){return\"legacy_enabled\"===e.initialNavigation||!0===e.initialNavigation||void 0===e.initialNavigation}isLegacyDisabled(e){return\"legacy_disabled\"===e.initialNavigation||!1===e.initialNavigation}}))();function Xn(e){return e.appInitializer.bind(e)}function Jn(e){return e.bootstrapListener.bind(e)}const Zn=new i.o(\"Router Initializer\")},iKj2:function(e,t,n){\"use strict\";n.d(t,\"c\",function(){return s}),n.d(t,\"d\",function(){return a}),n.d(t,\"b\",function(){return u}),n.d(t,\"a\",function(){return c});var r=n(\"cNHj\"),i=n(\"lJxs\"),o=n(\"Kqap\");function s(e){return Object(r.a)(e).pipe(Object(i.a)(e=>e.payload.docChanges().map(e=>({type:e.type,payload:e}))))}function a(e,t){return Object(r.a)(e).pipe(Object(i.a)(e=>e.payload.docChanges()),Object(o.a)((e,n)=>u(e,n,t),[]),Object(i.a)(e=>e.map(e=>({type:e.type,payload:e}))))}function u(e,t,n){return t.forEach(t=>{n.indexOf(t.type)>-1&&(e=c(e,t))}),e}function c(e,t){switch(t.type){case\"added\":e[t.newIndex]&&e[t.newIndex].doc.ref.isEqual(t.doc.ref)||e.splice(t.newIndex,0,t);break;case\"modified\":(null==e[t.oldIndex]||e[t.oldIndex].doc.ref.isEqual(t.doc.ref))&&(t.oldIndex!==t.newIndex?(e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t)):e.splice(t.newIndex,1,t));break;case\"removed\":e[t.oldIndex]&&e[t.oldIndex].doc.ref.isEqual(t.doc.ref)&&e.splice(t.oldIndex,1)}return e}},iWj2:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return o});var r=n(\"mrSG\"),i=n(\"a3Cf\"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.resolveNativePath=function(e){return Object(i.cordova)(this,\"resolveNativePath\",{},arguments)},t.pluginName=\"FilePath\",t.plugin=\"cordova-plugin-filepath\",t.pluginRef=\"window.FilePath\",t.repo=\"https://github.com/hiddentao/cordova-plugin-filepath\",t.platforms=[\"Android\"],t}(i.IonicNativePlugin)},igpV:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return r}),n.d(t,\"b\",function(){return i}),n.d(t,\"c\",function(){return o}),n.d(t,\"d\",function(){return s}),n.d(t,\"e\",function(){return a});const r=\"ionViewWillEnter\",i=\"ionViewDidEnter\",o=\"ionViewWillLeave\",s=\"ionViewDidLeave\",a=\"ionViewWillUnload\"},jZKg:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return o});var r=n(\"HDdC\"),i=n(\"quSY\");function o(e,t){return new r.a(n=>{const r=new i.a;let o=0;return r.add(t.schedule(function(){o!==e.length?(n.next(e[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kDjp:function(e,t,n){\"use strict\";function r(e){return null==e}function i(e){return\"function\"==typeof e.set}function o(e,t){return i(t)?t:e.ref(t)}function s(e,t){if(\"string\"==typeof e)return t.stringCase();if(i(e))return t.firebaseCase();if(\"function\"==typeof e.exportVal)return t.snapshotCase();throw new Error(`Expects a string, snapshot, or reference. Got: ${typeof e}`)}n.d(t,\"c\",function(){return r}),n.d(t,\"b\",function(){return o}),n.d(t,\"a\",function(){return s})},kJWO:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return r});const r=(()=>\"function\"==typeof Symbol&&Symbol.observable||\"@@observable\")()},kLfG:function(e,t,n){var r={\"./ion-action-sheet-controller_8.entry.js\":[\"0BR9\",0,30],\"./ion-action-sheet-ios.entry.js\":[\"bnjm\",0,31],\"./ion-action-sheet-md.entry.js\":[\"utt2\",0,32],\"./ion-alert-ios.entry.js\":[\"yaSn\",0,33],\"./ion-alert-md.entry.js\":[\"2/RY\",0,34],\"./ion-app_8-ios.entry.js\":[\"iInF\",0,35],\"./ion-app_8-md.entry.js\":[\"K9Nc\",0,36],\"./ion-avatar_3-ios.entry.js\":[\"hH1s\",0,37],\"./ion-avatar_3-md.entry.js\":[\"Jw9y\",0,38],\"./ion-back-button-ios.entry.js\":[\"ouVF\",0,39],\"./ion-back-button-md.entry.js\":[\"/joy\",0,40],\"./ion-backdrop-ios.entry.js\":[\"uJLv\",0,41],\"./ion-backdrop-md.entry.js\":[\"fSmE\",0,42],\"./ion-button_2-ios.entry.js\":[\"s1jK\",0,43],\"./ion-button_2-md.entry.js\":[\"Wou7\",0,44],\"./ion-card_5-ios.entry.js\":[\"qshq\",0,45],\"./ion-card_5-md.entry.js\":[\"Q1uX\",0,46],\"./ion-checkbox-ios.entry.js\":[\"059i\",0,47],\"./ion-checkbox-md.entry.js\":[\"eLfv\",0,48],\"./ion-chip-ios.entry.js\":[\"+FzG\",0,49],\"./ion-chip-md.entry.js\":[\"yRpg\",0,50],\"./ion-col_3.entry.js\":[\"/CAe\",51],\"./ion-datetime_3-ios.entry.js\":[\"Z1Jy\",0,52],\"./ion-datetime_3-md.entry.js\":[\"X0Dk\",0,53],\"./ion-fab_3-ios.entry.js\":[\"wvyA\",0,54],\"./ion-fab_3-md.entry.js\":[\"NkKY\",0,55],\"./ion-img.entry.js\":[\"wHD8\",56],\"./ion-infinite-scroll_2-ios.entry.js\":[\"nf6t\",0,57],\"./ion-infinite-scroll_2-md.entry.js\":[\"lg/V\",0,58],\"./ion-input-ios.entry.js\":[\"sdJS\",0,59],\"./ion-input-md.entry.js\":[\"uQUw\",0,60],\"./ion-item-option_3-ios.entry.js\":[\"Pa1g\",0,61],\"./ion-item-option_3-md.entry.js\":[\"KTnd\",0,62],\"./ion-item_8-ios.entry.js\":[\"Z51p\",0,63],\"./ion-item_8-md.entry.js\":[\"8bam\",0,64],\"./ion-loading-ios.entry.js\":[\"J3Yu\",0,65],\"./ion-loading-md.entry.js\":[\"N3W9\",0,66],\"./ion-menu_4-ios.entry.js\":[\"GEuc\",0,67],\"./ion-menu_4-md.entry.js\":[\"BHpw\",0,68],\"./ion-modal-ios.entry.js\":[\"mgaC\",0,69],\"./ion-modal-md.entry.js\":[\"EpFf\",0,70],\"./ion-nav_4.entry.js\":[\"SUlj\",0,71],\"./ion-popover-ios.entry.js\":[\"Gdks\",0,72],\"./ion-popover-md.entry.js\":[\"VgKV\",0,73],\"./ion-progress-bar-ios.entry.js\":[\"0PGG\",0,74],\"./ion-progress-bar-md.entry.js\":[\"h/Bu\",0,75],\"./ion-radio_2-ios.entry.js\":[\"5bK7\",0,76],\"./ion-radio_2-md.entry.js\":[\"pOmE\",0,77],\"./ion-range-ios.entry.js\":[\"5g9+\",0,78],\"./ion-range-md.entry.js\":[\"fD4w\",0,79],\"./ion-refresher_2-ios.entry.js\":[\"CXux\",0,80],\"./ion-refresher_2-md.entry.js\":[\"RODS\",0,81],\"./ion-reorder_2-ios.entry.js\":[\"IdzL\",0,82],\"./ion-reorder_2-md.entry.js\":[\"Ftzj\",0,83],\"./ion-ripple-effect.entry.js\":[\"STjf\",84],\"./ion-route_4.entry.js\":[\"k5eQ\",0,85],\"./ion-searchbar-ios.entry.js\":[\"l0q3\",0,86],\"./ion-searchbar-md.entry.js\":[\"mLlG\",0,87],\"./ion-segment_2-ios.entry.js\":[\"Iymp\",0,88],\"./ion-segment_2-md.entry.js\":[\"3msy\",0,89],\"./ion-select_3-ios.entry.js\":[\"rYLK\",0,90],\"./ion-select_3-md.entry.js\":[\"WOXB\",0,91],\"./ion-slide_2-ios.entry.js\":[\"F/Xn\",0,92],\"./ion-slide_2-md.entry.js\":[\"k8us\",0,93],\"./ion-spinner.entry.js\":[\"nI0H\",0,94],\"./ion-split-pane-ios.entry.js\":[\"edcM\",95],\"./ion-split-pane-md.entry.js\":[\"RyPD\",96],\"./ion-tab-bar_2-ios.entry.js\":[\"DP4G\",0,97],\"./ion-tab-bar_2-md.entry.js\":[\"gaXT\",0,98],\"./ion-tab_2.entry.js\":[\"TpdJ\",0,99],\"./ion-text.entry.js\":[\"ISmu\",0,100],\"./ion-textarea-ios.entry.js\":[\"xNZy\",0,101],\"./ion-textarea-md.entry.js\":[\"p1XJ\",0,102],\"./ion-toast-ios.entry.js\":[\"XGfm\",0,103],\"./ion-toast-md.entry.js\":[\"Y/uG\",0,104],\"./ion-toggle-ios.entry.js\":[\"WbT0\",0,105],\"./ion-toggle-md.entry.js\":[\"upP9\",0,106],\"./ion-virtual-scroll.entry.js\":[\"8Mb5\",107]};function i(e){if(!n.o(r,e))return Promise.resolve().then(function(){var t=new Error(\"Cannot find module '\"+e+\"'\");throw t.code=\"MODULE_NOT_FOUND\",t});var t=r[e],i=t[0];return Promise.all(t.slice(1).map(n.e)).then(function(){return n(i)})}i.keys=function(){return Object.keys(r)},i.id=\"kLfG\",e.exports=i},l7GE:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return i});var r=n(\"7o/Q\");class i extends r.a{notifyNext(e,t,n,r,i){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}},lJxs:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return i});var r=n(\"7o/Q\");function i(e,t){return function(n){if(\"function\"!=typeof e)throw new TypeError(\"argument is not a function. Are you looking for `mapTo()`?\");return n.lift(new o(e,t))}}class o{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new s(e,this.project,this.thisArg))}}class s extends r.a{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}},\"m+Ru\":function(e,t,n){\"use strict\";n.d(t,\"b\",function(){return h}),n.d(t,\"a\",function(){return d});var r=n(\"Cfvw\"),i=n(\"cNHj\"),o=n(\"lJxs\"),s=n(\"pLZG\"),a=n(\"Kqap\"),u=n(\"iKj2\"),c=n(\"bMVn\"),l=n(\"1XSQ\");function h(e){return e&&0!==e.length||(e=[\"added\",\"removed\",\"modified\"]),e}class d{constructor(e,t,n){this.ref=e,this.query=t,this.afs=n}stateChanges(e){return e&&0!==e.length?this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(Object(u.c)(this.query))).pipe(Object(o.a)(t=>t.filter(t=>e.indexOf(t.type)>-1)),Object(s.a)(e=>e.length>0)):this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(Object(u.c)(this.query)))}auditTrail(e){return this.stateChanges(e).pipe(Object(a.a)((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=h(e),n=Object(u.d)(this.query,t),r=this.afs.scheduler.runOutsideAngular(n);return this.afs.scheduler.keepUnstableUntilFirst(r)}valueChanges(e={}){const t=Object(i.a)(this.query),n=this.afs.scheduler.runOutsideAngular(t);return this.afs.scheduler.keepUnstableUntilFirst(n).pipe(Object(o.a)(t=>t.payload.docs.map(t=>e.idField?Object.assign({},t.data(),{[e.idField]:t.id}):t.data())))}get(e){return Object(r.a)(this.query.get(e)).pipe(Object(l.c)(this.afs.scheduler.zone))}add(e){return this.ref.add(e)}doc(e){return new c.a(this.ref.doc(e),this.afs)}}},m7gy:function(e,t,n){\"use strict\";n(\"mrSG\");var r,i=n(\"Xr7G\");n(\"6Joi\"),n.d(t,\"a\",function(){return o});let o=(()=>r=class{static enablePersistence(e){return{ngModule:r,providers:[{provide:i.c,useValue:!0},{provide:i.e,useValue:e}]}}})()},mCNh:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return i}),n.d(t,\"b\",function(){return o});var r=n(\"KqfI\");function i(...e){return o(e)}function o(e){return e?1===e.length?e[0]:function(t){return e.reduce((e,t)=>t(e),t)}:r.a}},mrSG:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"__extends\",function(){return i}),n.d(t,\"__assign\",function(){return o}),n.d(t,\"__rest\",function(){return s}),n.d(t,\"__decorate\",function(){return a}),n.d(t,\"__param\",function(){return u}),n.d(t,\"__metadata\",function(){return c}),n.d(t,\"__awaiter\",function(){return l}),n.d(t,\"__generator\",function(){return h}),n.d(t,\"__exportStar\",function(){return d}),n.d(t,\"__values\",function(){return f}),n.d(t,\"__read\",function(){return p}),n.d(t,\"__spread\",function(){return m}),n.d(t,\"__spreadArrays\",function(){return g}),n.d(t,\"__await\",function(){return y}),n.d(t,\"__asyncGenerator\",function(){return v}),n.d(t,\"__asyncDelegator\",function(){return b}),n.d(t,\"__asyncValues\",function(){return _}),n.d(t,\"__makeTemplateObject\",function(){return w}),n.d(t,\"__importStar\",function(){return E}),n.d(t,\"__importDefault\",function(){return C});var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function a(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function u(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})}function h(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError(\"Generator is already executing.\");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function d(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t=\"function\"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function p(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function g(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function y(e){return this instanceof y?(this.v=e,this):new y(e)}function v(e,t,n){if(!Symbol.asyncIterator)throw new TypeError(\"Symbol.asyncIterator is not defined.\");var r,i=n.apply(e,t||[]),o=[];return r={},s(\"next\"),s(\"throw\"),s(\"return\"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){i[e]&&(r[e]=function(t){return new Promise(function(n,r){o.push([e,t,n,r])>1||a(e,t)})})}function a(e,t){try{(n=i[e](t)).value instanceof y?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function u(e){a(\"next\",e)}function c(e){a(\"throw\",e)}function l(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function b(e){var t,n;return t={},r(\"next\"),r(\"throw\",function(e){throw e}),r(\"return\"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:y(e[r](t)),done:\"return\"===r}:i?i(t):t}:i}}function _(e){if(!Symbol.asyncIterator)throw new TypeError(\"Symbol.asyncIterator is not defined.\");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=f(e),t={},r(\"next\"),r(\"throw\"),r(\"return\"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,i){!function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}(r,i,(t=e[n](t)).done,t.value)})}}}function w(e,t){return Object.defineProperty?Object.defineProperty(e,\"raw\",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}},n6bG:function(e,t,n){\"use strict\";function r(e){return\"function\"==typeof e}n.d(t,\"a\",function(){return r})},ngJS:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return r});const r=e=>t=>{for(let n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}},oAJy:function(e,t,n){var r;e.exports=function e(t,n,i){function o(a,u){if(!n[a]){if(!t[a]){if(!u&&\"function\"==typeof r&&r)return r(a,!0);if(s)return s(a,!0);var c=new Error(\"Cannot find module '\"+a+\"'\");throw c.code=\"MODULE_NOT_FOUND\",c}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){return o(t[a][1][e]||e)},l,l.exports,e,t,n,i)}return n[a].exports}for(var s=\"function\"==typeof r&&r,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,n){(function(e){\"use strict\";var n,r,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var o=0,s=new i(l),a=e.document.createTextNode(\"\");s.observe(a,{characterData:!0}),n=function(){a.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)n=\"document\"in e&&\"onreadystatechange\"in e.document.createElement(\"script\")?function(){var t=e.document.createElement(\"script\");t.onreadystatechange=function(){l(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(l,0)};else{var u=new e.MessageChannel;u.port1.onmessage=l,n=function(){u.port2.postMessage(0)}}var c=[];function l(){var e,t;r=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}r=!1}t.exports=function(e){1!==c.push(e)||r||n()}}).call(this,\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{})},{}],2:[function(e,t,n){\"use strict\";var r=e(1);function i(){}var o={},s=[\"REJECTED\"],a=[\"FULFILLED\"],u=[\"PENDING\"];function c(e){if(\"function\"!=typeof e)throw new TypeError(\"resolver must be a function\");this.state=u,this.queue=[],this.outcome=void 0,e!==i&&f(this,e)}function l(e,t,n){this.promise=e,\"function\"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),\"function\"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(e,t,n){r(function(){var r;try{r=t(n)}catch(i){return o.reject(e,i)}r===e?o.reject(e,new TypeError(\"Cannot resolve promise with itself\")):o.resolve(e,r)})}function d(e){var t=e&&e.then;if(e&&(\"object\"==typeof e||\"function\"==typeof e)&&\"function\"==typeof t)return function(){t.apply(e,arguments)}}function f(e,t){var n=!1;function r(t){n||(n=!0,o.reject(e,t))}function i(t){n||(n=!0,o.resolve(e,t))}var s=p(function(){t(i,r)});\"error\"===s.status&&r(s.value)}function p(e,t){var n={};try{n.value=e(t),n.status=\"success\"}catch(r){n.status=\"error\",n.value=r}return n}t.exports=c,c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if(\"function\"!=typeof e&&this.state===a||\"function\"!=typeof t&&this.state===s)return this;var n=new this.constructor(i);return this.state!==u?h(n,this.state===a?e:t,this.outcome):this.queue.push(new l(n,e,t)),n},l.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){h(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){o.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){h(this.promise,this.onRejected,e)},o.resolve=function(e,t){var n=p(d,t);if(\"error\"===n.status)return o.reject(e,n.value);var r=n.value;if(r)f(e,r);else{e.state=a,e.outcome=t;for(var i=-1,s=e.queue.length;++i<s;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,t){e.state=s,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:o.resolve(new this(i),e)},c.reject=function(e){var t=new this(i);return o.reject(t,e)},c.all=function(e){var t=this;if(\"[object Array]\"!==Object.prototype.toString.call(e))return this.reject(new TypeError(\"must be an array\"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var s=new Array(n),a=0,u=-1,c=new this(i);++u<n;)l(e[u],u);return c;function l(e,i){t.resolve(e).then(function(e){s[i]=e,++a!==n||r||(r=!0,o.resolve(c,s))},function(e){r||(r=!0,o.reject(c,e))})}},c.race=function(e){if(\"[object Array]\"!==Object.prototype.toString.call(e))return this.reject(new TypeError(\"must be an array\"));var t=e.length,n=!1;if(!t)return this.resolve([]);for(var r=-1,s=new this(i);++r<t;)this.resolve(e[r]).then(function(e){n||(n=!0,o.resolve(s,e))},function(e){n||(n=!0,o.reject(s,e))});return s}},{1:1}],3:[function(e,t,n){(function(t){\"use strict\";\"function\"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){\"use strict\";var r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},i=function(){try{if(\"undefined\"!=typeof indexedDB)return indexedDB;if(\"undefined\"!=typeof webkitIndexedDB)return webkitIndexedDB;if(\"undefined\"!=typeof mozIndexedDB)return mozIndexedDB;if(\"undefined\"!=typeof OIndexedDB)return OIndexedDB;if(\"undefined\"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function o(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if(\"TypeError\"!==i.name)throw i;for(var n=new(\"undefined\"!=typeof BlobBuilder?BlobBuilder:\"undefined\"!=typeof MSBlobBuilder?MSBlobBuilder:\"undefined\"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}\"undefined\"==typeof Promise&&e(3);var s=Promise;function a(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function u(e,t,n){\"function\"==typeof t&&e.then(t),\"function\"==typeof n&&e.catch(n)}function c(e){return\"string\"!=typeof e&&(console.warn(e+\" used as a key, but it is not a string.\"),e=String(e)),e}function l(){if(arguments.length&&\"function\"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var h=\"local-forage-detect-blob-support\",d=void 0,f={},p=Object.prototype.toString;function m(e){var t=f[e.name],n={};n.promise=new s(function(e,t){n.resolve=e,n.reject=t}),t.deferredOperations.push(n),t.dbReady=t.dbReady?t.dbReady.then(function(){return n.promise}):n.promise}function g(e){var t=f[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function y(e,t){var n=f[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function v(e,t){return new s(function(n,r){if(f[e.name]=f[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return n(e.db);m(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var s=i.open.apply(i,o);t&&(s.onupgradeneeded=function(t){var n=s.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(h)}catch(r){if(\"ConstraintError\"!==r.name)throw r;console.warn('The database \"'+e.name+'\" has been upgraded from version '+t.oldVersion+\" to version \"+t.newVersion+', but the storage \"'+e.storeName+'\" already exists.')}}),s.onerror=function(e){e.preventDefault(),r(s.error)},s.onsuccess=function(){n(s.result),g(e)}})}function b(e){return v(e,!1)}function _(e){return v(e,!0)}function w(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version>e.db.version;if(e.version<e.db.version&&(e.version!==t&&console.warn('The database \"'+e.name+\"\\\" can't be downgraded from version \"+e.db.version+\" to version \"+e.version+\".\"),e.version=e.db.version),r||n){if(n){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1}function E(e){return o([function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}(atob(e.data))],{type:e.type})}function C(e){return e&&e.__local_forage_encoded_blob}function S(e){var t=this,n=t._initReady().then(function(){var e=f[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return u(n,e,e),n}function T(e,t,n,r){void 0===r&&(r=1);try{var i=e.db.transaction(e.storeName,t);n(null,i)}catch(o){if(r>0&&(!e.db||\"InvalidStateError\"===o.name||\"NotFoundError\"===o.name))return s.resolve().then(function(){if(!e.db||\"NotFoundError\"===o.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),_(e)}).then(function(){return function(e){m(e);for(var t=f[e.name],n=t.forages,r=0;r<n.length;r++){var i=n[r];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,b(e).then(function(t){return e.db=t,w(e)?_(e):t}).then(function(r){e.db=t.db=r;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=r}).catch(function(t){throw y(e,t),t})}(e).then(function(){T(e,t,n,r-1)})}).catch(n);n(o)}}var I={_driver:\"asyncStorage\",_initStorage:function(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var i=f[n.name];i||(f[n.name]=i={forages:[],db:null,dbReady:null,deferredOperations:[]}),i.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=S);var o=[];function a(){return s.resolve()}for(var u=0;u<i.forages.length;u++){var c=i.forages[u];c!==t&&o.push(c._initReady().catch(a))}var l=i.forages.slice(0);return s.all(o).then(function(){return n.db=i.db,b(n)}).then(function(e){return n.db=e,w(n,t._defaultConfig.version)?_(n):e}).then(function(e){n.db=i.db=e,t._dbInfo=n;for(var r=0;r<l.length;r++){var o=l[r];o!==t&&(o._dbInfo.db=n.db,o._dbInfo.version=n.version)}})},_support:function(){try{if(!i)return!1;var e=\"undefined\"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t=\"function\"==typeof fetch&&-1!==fetch.toString().indexOf(\"[native code\");return(!e||t)&&\"undefined\"!=typeof indexedDB&&\"undefined\"!=typeof IDBKeyRange}catch(n){return!1}}(),iterate:function(e,t){var n=this,r=new s(function(t,r){n.ready().then(function(){T(n._dbInfo,\"readonly\",function(i,o){if(i)return r(i);try{var s=o.objectStore(n._dbInfo.storeName).openCursor(),a=1;s.onsuccess=function(){var n=s.result;if(n){var r=n.value;C(r)&&(r=E(r));var i=e(r,n.key,a++);void 0!==i?t(i):n.continue()}else t()},s.onerror=function(){r(s.error)}}catch(u){r(u)}})}).catch(r)});return a(r,t),r},getItem:function(e,t){var n=this;e=c(e);var r=new s(function(t,r){n.ready().then(function(){T(n._dbInfo,\"readonly\",function(i,o){if(i)return r(i);try{var s=o.objectStore(n._dbInfo.storeName).get(e);s.onsuccess=function(){var e=s.result;void 0===e&&(e=null),C(e)&&(e=E(e)),t(e)},s.onerror=function(){r(s.error)}}catch(a){r(a)}})}).catch(r)});return a(r,t),r},setItem:function(e,t,n){var r=this;e=c(e);var i=new s(function(n,i){var a;r.ready().then(function(){return a=r._dbInfo,\"[object Blob]\"===p.call(t)?function(e){return\"boolean\"==typeof d?s.resolve(d):function(e){return new s(function(t){var n=e.transaction(h,\"readwrite\"),r=o([\"\"]);n.objectStore(h).put(r,\"key\"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\\/(\\d+)/),n=navigator.userAgent.match(/Edge\\//);t(n||!e||parseInt(e[1],10)>=43)}}).catch(function(){return!1})}(e).then(function(e){return d=e})}(a.db).then(function(e){return e?t:(n=t,new s(function(e,t){var r=new FileReader;r.onerror=t,r.onloadend=function(t){var r=btoa(t.target.result||\"\");e({__local_forage_encoded_blob:!0,data:r,type:n.type})},r.readAsBinaryString(n)}));var n}):t}).then(function(t){T(r._dbInfo,\"readwrite\",function(o,s){if(o)return i(o);try{var a=s.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var u=a.put(t,e);s.oncomplete=function(){void 0===t&&(t=null),n(t)},s.onabort=s.onerror=function(){i(u.error?u.error:u.transaction.error)}}catch(c){i(c)}})}).catch(i)});return a(i,n),i},removeItem:function(e,t){var n=this;e=c(e);var r=new s(function(t,r){n.ready().then(function(){T(n._dbInfo,\"readwrite\",function(i,o){if(i)return r(i);try{var s=o.objectStore(n._dbInfo.storeName).delete(e);o.oncomplete=function(){t()},o.onerror=function(){r(s.error)},o.onabort=function(){r(s.error?s.error:s.transaction.error)}}catch(a){r(a)}})}).catch(r)});return a(r,t),r},clear:function(e){var t=this,n=new s(function(e,n){t.ready().then(function(){T(t._dbInfo,\"readwrite\",function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName).clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){n(o.error?o.error:o.transaction.error)}}catch(s){n(s)}})}).catch(n)});return a(n,e),n},length:function(e){var t=this,n=new s(function(e,n){t.ready().then(function(){T(t._dbInfo,\"readonly\",function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName).count();o.onsuccess=function(){e(o.result)},o.onerror=function(){n(o.error)}}catch(s){n(s)}})}).catch(n)});return a(n,e),n},key:function(e,t){var n=this,r=new s(function(t,r){e<0?t(null):n.ready().then(function(){T(n._dbInfo,\"readonly\",function(i,o){if(i)return r(i);try{var s=o.objectStore(n._dbInfo.storeName),a=!1,u=s.openCursor();u.onsuccess=function(){var n=u.result;n?0===e?t(n.key):a?t(n.key):(a=!0,n.advance(e)):t(null)},u.onerror=function(){r(u.error)}}catch(c){r(c)}})}).catch(r)});return a(r,t),r},keys:function(e){var t=this,n=new s(function(e,n){t.ready().then(function(){T(t._dbInfo,\"readonly\",function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName).openCursor(),s=[];o.onsuccess=function(){var t=o.result;t?(s.push(t.key),t.continue()):e(s)},o.onerror=function(){n(o.error)}}catch(a){n(a)}})}).catch(n)});return a(n,e),n},dropInstance:function(e,t){t=l.apply(this,arguments);var n,r=this.config();if((e=\"function\"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName),e.name){var o=e.name===r.name&&this._dbInfo.db,u=o?s.resolve(this._dbInfo.db):b(e).then(function(t){var n=f[e.name],r=n.forages;n.db=t;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=t;return t});n=u.then(e.storeName?function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;m(e);var r=f[e.name],o=r.forages;t.close();for(var a=0;a<o.length;a++){var u=o[a];u._dbInfo.db=null,u._dbInfo.version=n}return new s(function(t,r){var o=i.open(e.name,n);o.onerror=function(e){o.result.close(),r(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),t(e)}}).then(function(e){r.db=e;for(var t=0;t<o.length;t++){var n=o[t];n._dbInfo.db=e,g(n._dbInfo)}}).catch(function(t){throw(y(e,t)||s.resolve()).catch(function(){}),t})}}:function(t){m(e);var n=f[e.name],r=n.forages;t.close();for(var o=0;o<r.length;o++)r[o]._dbInfo.db=null;return new s(function(t,n){var r=i.deleteDatabase(e.name);r.onerror=r.onblocked=function(e){var t=r.result;t&&t.close(),n(e)},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}}).then(function(e){n.db=e;for(var t=0;t<r.length;t++)g(r[t]._dbInfo)}).catch(function(t){throw(y(e,t)||s.resolve()).catch(function(){}),t})})}else n=s.reject(\"Invalid arguments\");return a(n,t),n}},O=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",N=/^~~local_forage_type~([^~]+)~/,A=\"__lfsc__:\".length,R=A+\"arbf\".length,D=Object.prototype.toString;function k(e){var t,n,r,i,o,s=.75*e.length,a=e.length,u=0;\"=\"===e[e.length-1]&&(s--,\"=\"===e[e.length-2]&&s--);var c=new ArrayBuffer(s),l=new Uint8Array(c);for(t=0;t<a;t+=4)n=O.indexOf(e[t]),r=O.indexOf(e[t+1]),i=O.indexOf(e[t+2]),o=O.indexOf(e[t+3]),l[u++]=n<<2|r>>4,l[u++]=(15&r)<<4|i>>2,l[u++]=(3&i)<<6|63&o;return c}function x(e){var t,n=new Uint8Array(e),r=\"\";for(t=0;t<n.length;t+=3)r+=O[n[t]>>2],r+=O[(3&n[t])<<4|n[t+1]>>4],r+=O[(15&n[t+1])<<2|n[t+2]>>6],r+=O[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+\"=\":n.length%3==1&&(r=r.substring(0,r.length-2)+\"==\"),r}var P={serialize:function(e,t){var n=\"\";if(e&&(n=D.call(e)),e&&(\"[object ArrayBuffer]\"===n||e.buffer&&\"[object ArrayBuffer]\"===D.call(e.buffer))){var r,i=\"__lfsc__:\";e instanceof ArrayBuffer?(r=e,i+=\"arbf\"):(r=e.buffer,\"[object Int8Array]\"===n?i+=\"si08\":\"[object Uint8Array]\"===n?i+=\"ui08\":\"[object Uint8ClampedArray]\"===n?i+=\"uic8\":\"[object Int16Array]\"===n?i+=\"si16\":\"[object Uint16Array]\"===n?i+=\"ur16\":\"[object Int32Array]\"===n?i+=\"si32\":\"[object Uint32Array]\"===n?i+=\"ui32\":\"[object Float32Array]\"===n?i+=\"fl32\":\"[object Float64Array]\"===n?i+=\"fl64\":t(new Error(\"Failed to get type for BinaryArray\"))),t(i+x(r))}else if(\"[object Blob]\"===n){var o=new FileReader;o.onload=function(){var n=\"~~local_forage_type~\"+e.type+\"~\"+x(this.result);t(\"__lfsc__:blob\"+n)},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(s){console.error(\"Couldn't convert value into a JSON string: \",e),t(null,s)}},deserialize:function(e){if(\"__lfsc__:\"!==e.substring(0,A))return JSON.parse(e);var t,n=e.substring(R),r=e.substring(A,R);if(\"blob\"===r&&N.test(n)){var i=n.match(N);t=i[1],n=n.substring(i[0].length)}var s=k(n);switch(r){case\"arbf\":return s;case\"blob\":return o([s],{type:t});case\"si08\":return new Int8Array(s);case\"ui08\":return new Uint8Array(s);case\"uic8\":return new Uint8ClampedArray(s);case\"si16\":return new Int16Array(s);case\"ur16\":return new Uint16Array(s);case\"si32\":return new Int32Array(s);case\"ui32\":return new Uint32Array(s);case\"fl32\":return new Float32Array(s);case\"fl64\":return new Float64Array(s);default:throw new Error(\"Unkown type: \"+r)}},stringToBuffer:k,bufferToString:x};function L(e,t,n,r){e.executeSql(\"CREATE TABLE IF NOT EXISTS \"+t.storeName+\" (id INTEGER PRIMARY KEY, key unique, value)\",[],n,r)}function M(e,t,n,r,i,o){e.executeSql(n,r,i,function(e,s){s.code===s.SYNTAX_ERR?e.executeSql(\"SELECT name FROM sqlite_master WHERE type='table' AND name = ?\",[name],function(e,a){a.rows.length?o(e,s):L(e,t,function(){e.executeSql(n,r,i,o)},o)},o):o(e,s)},o)}var j={_driver:\"webSQLStorage\",_initStorage:function(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=\"string\"!=typeof e[r]?e[r].toString():e[r];var i=new s(function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(i){return r(i)}n.db.transaction(function(i){L(i,n,function(){t._dbInfo=n,e()},function(e,t){r(t)})},r)});return n.serializer=P,i},_support:\"function\"==typeof openDatabase,iterate:function(e,t){var n=this,r=new s(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){M(n,i,\"SELECT * FROM \"+i.storeName,[],function(n,r){for(var o=r.rows,s=o.length,a=0;a<s;a++){var u=o.item(a),c=u.value;if(c&&(c=i.serializer.deserialize(c)),void 0!==(c=e(c,u.key,a+1)))return void t(c)}t()},function(e,t){r(t)})})}).catch(r)});return a(r,t),r},getItem:function(e,t){var n=this;e=c(e);var r=new s(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){M(n,i,\"SELECT * FROM \"+i.storeName+\" WHERE key = ? LIMIT 1\",[e],function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=i.serializer.deserialize(r)),t(r)},function(e,t){r(t)})})}).catch(r)});return a(r,t),r},setItem:function(e,t,n){return(function e(t,n,r,i){var o=this;t=c(t);var u=new s(function(s,a){o.ready().then(function(){void 0===n&&(n=null);var u=n,c=o._dbInfo;c.serializer.serialize(n,function(n,l){l?a(l):c.db.transaction(function(e){M(e,c,\"INSERT OR REPLACE INTO \"+c.storeName+\" (key, value) VALUES (?, ?)\",[t,n],function(){s(u)},function(e,t){a(t)})},function(n){if(n.code===n.QUOTA_ERR){if(i>0)return void s(e.apply(o,[t,u,r,i-1]));a(n)}})})}).catch(a)});return a(u,r),u}).apply(this,[e,t,n,1])},removeItem:function(e,t){var n=this;e=c(e);var r=new s(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){M(n,i,\"DELETE FROM \"+i.storeName+\" WHERE key = ?\",[e],function(){t()},function(e,t){r(t)})})}).catch(r)});return a(r,t),r},clear:function(e){var t=this,n=new s(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){M(t,r,\"DELETE FROM \"+r.storeName,[],function(){e()},function(e,t){n(t)})})}).catch(n)});return a(n,e),n},length:function(e){var t=this,n=new s(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){M(t,r,\"SELECT COUNT(key) as c FROM \"+r.storeName,[],function(t,n){var r=n.rows.item(0).c;e(r)},function(e,t){n(t)})})}).catch(n)});return a(n,e),n},key:function(e,t){var n=this,r=new s(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){M(n,i,\"SELECT key FROM \"+i.storeName+\" WHERE id = ? LIMIT 1\",[e+1],function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)},function(e,t){r(t)})})}).catch(r)});return a(r,t),r},keys:function(e){var t=this,n=new s(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){M(t,r,\"SELECT key FROM \"+r.storeName,[],function(t,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i).key);e(r)},function(e,t){n(t)})})}).catch(n)});return a(n,e),n},dropInstance:function(e,t){t=l.apply(this,arguments);var n=this.config();(e=\"function\"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,i=this;return a(r=e.name?new s(function(t){var r;r=e.name===n.name?i._dbInfo.db:openDatabase(e.name,\"\",\"\",0),t(e.storeName?{db:r,storeNames:[e.storeName]}:function(e){return new s(function(t,n){e.transaction(function(r){r.executeSql(\"SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'\",[],function(n,r){for(var i=[],o=0;o<r.rows.length;o++)i.push(r.rows.item(o).name);t({db:e,storeNames:i})},function(e,t){n(t)})},function(e){n(e)})})}(r))}).then(function(e){return new s(function(t,n){e.db.transaction(function(r){function i(e){return new s(function(t,n){r.executeSql(\"DROP TABLE IF EXISTS \"+e,[],function(){t()},function(e,t){n(t)})})}for(var o=[],a=0,u=e.storeNames.length;a<u;a++)o.push(i(e.storeNames[a]));s.all(o).then(function(){t()}).catch(function(e){n(e)})},function(e){n(e)})})}):s.reject(\"Invalid arguments\"),t),r}};function F(e,t){var n=e.name+\"/\";return e.storeName!==t.storeName&&(n+=e.storeName+\"/\"),n}var U={_driver:\"localStorageWrapper\",_initStorage:function(e){var t={};if(e)for(var n in e)t[n]=e[n];return t.keyPrefix=F(e,this._defaultConfig),!function(){try{return localStorage.setItem(\"_localforage_support_test\",!0),localStorage.removeItem(\"_localforage_support_test\"),!1}catch(e){return!0}}()||localStorage.length>0?(this._dbInfo=t,t.serializer=P,s.resolve()):s.reject()},_support:function(){try{return\"undefined\"!=typeof localStorage&&\"setItem\"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(e,t){var n=this,r=n.ready().then(function(){for(var t=n._dbInfo,r=t.keyPrefix,i=r.length,o=localStorage.length,s=1,a=0;a<o;a++){var u=localStorage.key(a);if(0===u.indexOf(r)){var c=localStorage.getItem(u);if(c&&(c=t.serializer.deserialize(c)),void 0!==(c=e(c,u.substring(i),s++)))return c}}});return a(r,t),r},getItem:function(e,t){var n=this;e=c(e);var r=n.ready().then(function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r});return a(r,t),r},setItem:function(e,t,n){var r=this;e=c(e);var i=r.ready().then(function(){void 0===t&&(t=null);var n=t;return new s(function(i,o){var s=r._dbInfo;s.serializer.serialize(t,function(t,r){if(r)o(r);else try{localStorage.setItem(s.keyPrefix+e,t),i(n)}catch(a){\"QuotaExceededError\"!==a.name&&\"NS_ERROR_DOM_QUOTA_REACHED\"!==a.name||o(a),o(a)}})})});return a(i,n),i},removeItem:function(e,t){var n=this;e=c(e);var r=n.ready().then(function(){localStorage.removeItem(n._dbInfo.keyPrefix+e)});return a(r,t),r},clear:function(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}});return a(n,e),n},length:function(e){var t=this.keys().then(function(e){return e.length});return a(t,e),t},key:function(e,t){var n=this,r=n.ready().then(function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(i){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t});return a(r,t),r},keys:function(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo,n=localStorage.length,r=[],i=0;i<n;i++){var o=localStorage.key(i);0===o.indexOf(e.keyPrefix)&&r.push(o.substring(e.keyPrefix.length))}return r});return a(n,e),n},dropInstance:function(e,t){if(t=l.apply(this,arguments),!(e=\"function\"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,i=this;return a(r=e.name?new s(function(t){t(e.storeName?F(e,i._defaultConfig):e.name+\"/\")}).then(function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}}):s.reject(\"Invalid arguments\"),t),r}},V=function(e,t){for(var n=e.length,r=0;r<n;){if((i=e[r])===(o=t)||\"number\"==typeof i&&\"number\"==typeof o&&isNaN(i)&&isNaN(o))return!0;r++}var i,o;return!1},q=Array.isArray||function(e){return\"[object Array]\"===Object.prototype.toString.call(e)},B={},$={},z={INDEXEDDB:I,WEBSQL:j,LOCALSTORAGE:U},W=[z.INDEXEDDB._driver,z.WEBSQL._driver,z.LOCALSTORAGE._driver],H=[\"dropInstance\"],Q=[\"clear\",\"getItem\",\"iterate\",\"key\",\"keys\",\"length\",\"removeItem\",\"setItem\"].concat(H),G={description:\"\",driver:W.slice(),name:\"localforage\",size:4980736,storeName:\"keyvaluepairs\",version:1};function K(e,t){e[t]=function(){var n=arguments;return e.ready().then(function(){return e[t].apply(e,n)})}}function Y(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(arguments[0][n]=q(t[n])?t[n].slice():t[n])}return arguments[0]}var X=new(function(){function e(t){for(var n in function(t,n){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this),z)if(z.hasOwnProperty(n)){var r=z[n],i=r._driver;this[n]=i,B[i]||this.defineDriver(r)}this._defaultConfig=Y({},G),this._config=Y({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(e){if(\"object\"===(void 0===e?\"undefined\":r(e))){if(this._ready)return new Error(\"Can't call config() after localforage has been used.\");for(var t in e){if(\"storeName\"===t&&(e[t]=e[t].replace(/\\W/g,\"_\")),\"version\"===t&&\"number\"!=typeof e[t])return new Error(\"Database version must be a number.\");this._config[t]=e[t]}return!(\"driver\"in e&&e.driver)||this.setDriver(this._config.driver)}return\"string\"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new s(function(t,n){try{var r=e._driver,i=new Error(\"Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver\");if(!e._driver)return void n(i);for(var o=Q.concat(\"_initStorage\"),u=0,c=o.length;u<c;u++){var l=o[u];if((!V(H,l)||e[l])&&\"function\"!=typeof e[l])return void n(i)}!function(){for(var t=function(e){return function(){var t=new Error(\"Method \"+e+\" is not implemented by the current driver\"),n=s.reject(t);return a(n,arguments[arguments.length-1]),n}},n=0,r=H.length;n<r;n++){var i=H[n];e[i]||(e[i]=t(i))}}();var h=function(n){B[r]&&console.info(\"Redefining LocalForage driver: \"+r),B[r]=e,$[r]=n,t()};\"_support\"in e?e._support&&\"function\"==typeof e._support?e._support().then(h,n):h(!!e._support):h(!0)}catch(d){n(d)}});return u(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=B[e]?s.resolve(B[e]):s.reject(new Error(\"Driver not found.\"));return u(r,t,n),r},e.prototype.getSerializer=function(e){var t=s.resolve(P);return u(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return u(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;q(e)||(e=[e]);var i=this._getSupportedDrivers(e);function o(){r._config.driver=r.driver()}function a(e){return r._extend(e),o(),r._ready=r._initStorage(r._config),r._ready}var c=null!==this._driverSet?this._driverSet.catch(function(){return s.resolve()}):s.resolve();return this._driverSet=c.then(function(){var e=i[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then(function(e){r._driver=e._driver,o(),r._wrapLibraryMethodsWithReady(),r._initDriver=function(e){return function(){var t=0;return function n(){for(;t<e.length;){var i=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(i).then(a).catch(n)}o();var u=new Error(\"No available storage method found.\");return r._driverSet=s.reject(u),r._driverSet}()}}(i)})}).catch(function(){o();var e=new Error(\"No available storage method found.\");return r._driverSet=s.reject(e),r._driverSet}),u(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!$[e]},e.prototype._extend=function(e){Y(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];this.supports(i)&&t.push(i)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=Q.length;e<t;e++)K(this,Q[e])},e.prototype.createInstance=function(t){return new e(t)},e}());t.exports=X},{3:3}]},{},[4])(4)},oBZk:function(e,t,n){\"use strict\";n.d(t,\"D\",function(){return a}),n.d(t,\"kb\",function(){return u}),n.d(t,\"a\",function(){return c}),n.d(t,\"H\",function(){return l}),n.d(t,\"b\",function(){return h}),n.d(t,\"I\",function(){return d}),n.d(t,\"c\",function(){return f}),n.d(t,\"J\",function(){return p}),n.d(t,\"d\",function(){return m}),n.d(t,\"N\",function(){return g}),n.d(t,\"e\",function(){return y}),n.d(t,\"K\",function(){return v}),n.d(t,\"f\",function(){return b}),n.d(t,\"L\",function(){return _}),n.d(t,\"g\",function(){return w}),n.d(t,\"M\",function(){return E}),n.d(t,\"h\",function(){return C}),n.d(t,\"O\",function(){return S}),n.d(t,\"i\",function(){return T}),n.d(t,\"P\",function(){return I}),n.d(t,\"j\",function(){return O}),n.d(t,\"Q\",function(){return N}),n.d(t,\"k\",function(){return A}),n.d(t,\"R\",function(){return R}),n.d(t,\"l\",function(){return D}),n.d(t,\"S\",function(){return k}),n.d(t,\"m\",function(){return x}),n.d(t,\"T\",function(){return P}),n.d(t,\"n\",function(){return L}),n.d(t,\"U\",function(){return M}),n.d(t,\"o\",function(){return j}),n.d(t,\"W\",function(){return F}),n.d(t,\"p\",function(){return U}),n.d(t,\"V\",function(){return V}),n.d(t,\"q\",function(){return q}),n.d(t,\"X\",function(){return B}),n.d(t,\"r\",function(){return $}),n.d(t,\"Y\",function(){return z}),n.d(t,\"s\",function(){return W}),n.d(t,\"Z\",function(){return H}),n.d(t,\"t\",function(){return Q}),n.d(t,\"bb\",function(){return G}),n.d(t,\"u\",function(){return K}),n.d(t,\"ab\",function(){return Y}),n.d(t,\"v\",function(){return X}),n.d(t,\"cb\",function(){return J}),n.d(t,\"w\",function(){return Z}),n.d(t,\"eb\",function(){return ee}),n.d(t,\"x\",function(){return te}),n.d(t,\"db\",function(){return ne}),n.d(t,\"y\",function(){return re}),n.d(t,\"fb\",function(){return ie}),n.d(t,\"z\",function(){return oe}),n.d(t,\"gb\",function(){return se}),n.d(t,\"A\",function(){return ae}),n.d(t,\"hb\",function(){return ue}),n.d(t,\"B\",function(){return ce}),n.d(t,\"ib\",function(){return le}),n.d(t,\"C\",function(){return he}),n.d(t,\"jb\",function(){return de}),n.d(t,\"E\",function(){return fe}),n.d(t,\"lb\",function(){return pe}),n.d(t,\"F\",function(){return me}),n.d(t,\"mb\",function(){return ge}),n.d(t,\"G\",function(){return ye}),n.d(t,\"nb\",function(){return ve});var r=n(\"8Y7J\"),i=n(\"ZZ/e\"),o=n(\"SVse\"),s=n(\"iInd\"),a=r.pb({encapsulation:0,styles:[\"[_nghost-%COMP%] {\\n      display: flex;\\n      position: absolute;\\n      top: 0;\\n      left: 0;\\n      right: 0;\\n      bottom: 0;\\n\\n      flex-direction: column;\\n\\n      width: 100%;\\n      height: 100%;\\n\\n      contain: layout size style;\\n      z-index: $z-index-page-container;\\n    }\\n    .tabs-inner[_ngcontent-%COMP%] {\\n      position: relative;\\n\\n      flex: 1;\\n\\n      contain: layout size style;\\n    }\"],data:{}});function u(e){return r.Lb(0,[r.Hb(402653184,1,{outlet:0}),r.Cb(null,0),(e()(),r.rb(2,0,null,null,2,\"div\",[[\"class\",\"tabs-inner\"]],null,null,null,null,null)),(e()(),r.rb(3,16777216,[[\"outlet\",1]],null,1,\"ion-router-outlet\",[[\"tabs\",\"true\"]],null,[[null,\"stackEvents\"]],function(e,t,n){var r=!0;return\"stackEvents\"===t&&(r=!1!==e.component.onPageSelected(n)&&r),r},null,null)),r.qb(4,212992,[[1,4]],0,i.hb,[s.b,r.M,r.j,[8,null],[8,\"true\"],i.e,i.Hb,o.g,r.k,s.m,r.x,s.a,[3,i.hb]],null,{stackEvents:\"stackEvents\"}),r.Cb(null,1)],function(e,t){e(t,4,0)},null)}var c=r.pb({encapsulation:2,styles:[],data:{}});function l(e){return r.Lb(2,[r.Cb(null,0)],null,null)}var h=r.pb({encapsulation:2,styles:[],data:{}});function d(e){return r.Lb(2,[r.Cb(null,0)],null,null)}var f=r.pb({encapsulation:2,styles:[],data:{}});function p(e){return r.Lb(2,[r.Cb(null,0)],null,null)}var m=r.pb({encapsulation:2,styles:[],data:{}});function g(e){return r.Lb(2,[r.Cb(null,0)],null,null)}var y=r.pb({encapsulation:2,styles:[],data:{}});function v(e){return r.Lb(2,[r.Cb(null,0)],null,null)}var b=r.pb({encapsulation:2,styles:[],data:{}});function _(e){return r.Lb(2,[r.Cb(null,0)],null,null)}var w=r.pb({encapsulation:2,styles:[],data:{}});function E(e){return r.Lb(2,[r.Cb(null,0)],null,null)}var C=r.pb({encapsulation:2,styles:[],data:{}});function S(e){return r.Lb(2,[r.Cb(null,0)],null,null)}var T=r.pb({encapsulation:2,styles:[],data:{}});function I(e){return r.Lb(2,[r.Cb(null,0)],null,null)}var O=r.pb({encapsulation:2,styles:[],data:{}});function N(e){return r.Lb(2,[r.Cb(null,0)],null,null)}var A=r.pb({encapsulation:2,styles:[],data:{}});function R(e){return r.Lb(2,[r.Cb(null,0)],null,null)}var D=r.pb({encapsulation:2,styles:[],data:{}});function k(e){return r.Lb(2,[r.Cb(null,0)],null,null)}var x=r.pb({encapsulation:2,styles:[],data:{}});function P(e){return r.Lb(2,[r.Cb(null,0)],null,null)}var L=r.pb({encapsulation:2,styles:[],data:{}});function M(e){return r.Lb(2,[r.Cb(null,0)],null,null)}var j=r.pb({encapsulation:2,styles:[],data:{}});function F(e){return r.Lb(2,[r.Cb(null,0)],null,null)}var U=r.pb({encapsulation:2,styles:[],data:{}});function V(e){return r.Lb(2,[r.Cb(null,0)],null,null)}var q=r.pb({encapsulation:2,styles:[],data:{}});function B(e){return r.Lb(2,[r.Cb(null,0)],null,null)}var $=r.pb({encapsulation:2,styles:[],data:{}});function z(e){return r.Lb(2,[r.Cb(null,0)],null,null)}var W=r.pb({encapsulation:2,styles:[],data:{}});function H(e){return r.Lb(2,[r.Cb(null,0)],null,null)}var Q=r.pb({encapsulation:2,styles:[],data:{}});function G(e){return r.Lb(2,[r.Cb(null,0)],null,null)}var K=r.pb({encapsulation:2,styles:[],data:{}});function Y(e){return r.Lb(2,[r.Cb(null,0)],null,null)}var X=r.pb({encapsulation:2,styles:[],data:{}});function J(e){return r.Lb(2,[r.Cb(null,0)],null,null)}var Z=r.pb({encapsulation:2,styles:[],data:{}});function ee(e){return r.Lb(2,[r.Cb(null,0)],null,null)}var te=r.pb({encapsulation:2,styles:[],data:{}});function ne(e){return r.Lb(2,[r.Cb(null,0)],null,null)}var re=r.pb({encapsulation:2,styles:[],data:{}});function ie(e){return r.Lb(2,[r.Cb(null,0)],null,null)}var oe=r.pb({encapsulation:2,styles:[],data:{}});function se(e){return r.Lb(2,[r.Cb(null,0)],null,null)}var ae=r.pb({encapsulation:2,styles:[],data:{}});function ue(e){return r.Lb(2,[r.Cb(null,0)],null,null)}var ce=r.pb({encapsulation:2,styles:[],data:{}});function le(e){return r.Lb(2,[r.Cb(null,0)],null,null)}var he=r.pb({encapsulation:2,styles:[],data:{}});function de(e){return r.Lb(2,[r.Cb(null,0)],null,null)}var fe=r.pb({encapsulation:2,styles:[],data:{}});function pe(e){return r.Lb(2,[r.Cb(null,0)],null,null)}var me=r.pb({encapsulation:2,styles:[],data:{}});function ge(e){return r.Lb(2,[r.Cb(null,0)],null,null)}var ye=r.pb({encapsulation:2,styles:[],data:{}});function ve(e){return r.Lb(2,[r.Cb(null,0)],null,null)}},oM6z:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return a});const r=(e,t,n)=>{e.style.setProperty(t,n)},i=(e,t)=>{e.style.removeProperty(t)},o=[],s=(e=[],t)=>{if(void 0!==t){const n=Array.isArray(t)?t:[t];return[...e,...n]}return e},a=()=>{let e,t,n,a,u,c,l,h,d,f,p,m,g,y=[],v=[],b=[],_=!1,w={},E=[],C=[],S={},T=0,I=!1,O=!1,N=!0,A=!1,R=!0;const D=[],k=[],x=[],P=[],L=[],M=[],j=[],F=[],U=[],V=[],q=\"function\"==typeof window.Animation,B=()=>V,$=()=>{H(),Q()},z=(e,t)=>((t&&t.oneTimeCallback?k:D).push({callback:e,opts:t}),g),W=()=>(D.length=0,k.length=0,g),H=()=>{q?(B().forEach(e=>{e.cancel()}),V.length=0):x.forEach(e=>{i(e,\"animation-name\"),i(e,\"animation-duration\"),i(e,\"animation-timing-function\"),i(e,\"animation-iteration-count\"),i(e,\"animation-delay\"),i(e,\"animation-play-state\"),i(e,\"animation-fill-mode\"),i(e,\"animation-direction\")})},Q=()=>{L.forEach(e=>{e.parentNode.removeChild(e)}),L.length=0},G=()=>void 0!==u?u:l?l.getFill():void 0,K=()=>void 0!==d?d:void 0!==c?c:l?l.getDirection():void 0,Y=()=>I?\"linear\":void 0!==n?n:l?l.getEasing():void 0,X=()=>O?0:void 0!==f?f:void 0!==t?t:l?l.getDuration():void 0,J=()=>void 0!==a?a:l?l.getIterations():void 0,Z=()=>void 0!==p?p:void 0!==e?e:l?l.getDelay():void 0,ee=()=>{0!==T&&0==--T&&((()=>{ae(),F.forEach(e=>{e()}),U.forEach(e=>{e()}),(()=>{const e=E,t=C,n=S;x.forEach(i=>{const o=i.classList;o.add(...e),o.remove(...t);for(const e in n)n.hasOwnProperty(e)&&r(i,e,n[e])})})();const e=N;D.forEach(t=>{t.callback(e,g)}),k.forEach(t=>{t.callback(e,g)}),k.length=0,R=!0,A=!0})(),l&&l.animationFinish())},te=(e=!0)=>{M.forEach(e=>{e()}),j.forEach(e=>{e()}),(()=>{const e=v,t=b,n=w;x.forEach(i=>{const o=i.classList;o.add(...e),o.remove(...t);for(const e in n)n.hasOwnProperty(e)&&r(i,e,n[e])})})(),y.length>0&&(q?(x.forEach(e=>{const t=e.animate(y,{delay:Z(),duration:X(),easing:Y(),iterations:J(),fill:G(),direction:K()});t.pause(),V.push(t)}),B().length>0&&(V[0].onfinish=()=>{ee()})):((e=!0)=>{Q(),x.forEach(t=>{if(y.length>0){const n=((e=[])=>e.map(e=>{const t=e.offset,n=[];for(const r in e)e.hasOwnProperty(r)&&\"offset\"!==r&&n.push(`${r}: ${e[r]};`);return`${100*t}% { ${n.join(\" \")} }`}).join(\" \"))(y),i=((e,t,n)=>{const r=(e=>{const t=e.getRootNode();return t.head||t})(n),i=r.querySelector(\"#\"+e);if(i)return i;const o=(n.ownerDocument||document).createElement(\"style\");return o.id=e,o.innerHTML=`@keyframes ${e} { ${t} } @keyframes ${e}-alt { ${t} }`,r.appendChild(o),o})(m=(e=>{let t=o.indexOf(e);return t<0&&(t=o.push(e)-1),`ion-animation-${t}`})(n),n,t);L.push(i),r(t,\"animation-duration\",void 0!==X()?`${X()}ms`:null),r(t,\"animation-timing-function\",Y()||null),r(t,\"animation-delay\",void 0!==Z()?`${Z()}ms`:null),r(t,\"animation-fill-mode\",G()||null),r(t,\"animation-direction\",K()||null);const s=void 0!==J()?J()===1/0?\"infinite\":J().toString():null;r(t,\"animation-iteration-count\",s),r(t,\"animation-play-state\",\"paused\"),e&&r(t,\"animation-name\",`${i.id}-alt`),requestAnimationFrame(()=>{r(t,\"animation-name\",i.id||null)})}})})(e)),_=!0},ne=e=>{if(e=Math.min(Math.max(e,0),.999),q)B().forEach(t=>{t.currentTime=t.effect.getComputedTiming().delay+X()*e,t.pause()});else{const t=`-${(Z()||0)+X()*e}ms`;x.forEach(e=>{y.length>0&&(r(e,\"animation-delay\",t),r(e,\"animation-play-state\",\"paused\"))})}},re=(e=!0)=>{x.forEach(t=>{requestAnimationFrame(()=>{r(t,\"animation-name\",m||null),r(t,\"animation-duration\",void 0!==X()?`${X()}ms`:null),r(t,\"animation-timing-function\",Y()||null),r(t,\"animation-delay\",void 0!==Z()?`${Z()}ms`:null),r(t,\"animation-fill-mode\",G()||null),r(t,\"animation-direction\",K()||null);const n=void 0!==J()?J()===1/0?\"infinite\":J().toString():null;r(t,\"animation-iteration-count\",n),e&&r(t,\"animation-name\",`${m}-alt`),requestAnimationFrame(()=>{r(t,\"animation-name\",m||null)})})})},ie=(e=!1,t=!0)=>(e&&P.forEach(t=>{t.update(e)}),q?B().forEach(e=>{e.effect.updateTiming({delay:Z(),duration:X(),easing:Y(),iterations:J(),fill:G(),direction:K()})}):re(t),g),oe=()=>{_&&(q?B().forEach(e=>{e.pause()}):x.forEach(e=>{r(e,\"animation-play-state\",\"paused\")}))},se=()=>{h=void 0,ee()},ae=()=>{h&&clearTimeout(h)},ue=()=>(_||te(),A&&(q?ne(0):re(),A=!1),R&&(T=P.length+1,R=!1),P.forEach(e=>{e.play()}),q?(B().forEach(e=>{e.play()}),0!==y.length&&0!==x.length||ee()):(()=>{if(ae(),x.forEach(e=>{y.length>0&&requestAnimationFrame(()=>{r(e,\"animation-play-state\",\"running\")})}),0===y.length||0===x.length)ee();else{const e=Z()||0,t=X()||0;h=setTimeout(se,e+t+100),((e,t)=>{let n;const r={passive:!0},o=t=>{e===t.target&&(n&&n(),ae(),requestAnimationFrame(()=>{x.forEach(e=>{i(e,\"animation-duration\"),i(e,\"animation-delay\"),i(e,\"animation-play-state\")}),requestAnimationFrame(()=>{ee()})}))};e&&(e.addEventListener(\"webkitAnimationEnd\",o,r),e.addEventListener(\"animationend\",o,r),n=()=>{e.removeEventListener(\"webkitAnimationEnd\",o,r),e.removeEventListener(\"animationend\",o,r)})})(x[0])}})(),g),ce=(e,t)=>{const n=y[0];return null==n||void 0!==n.offset&&0!==n.offset?y=[{offset:0,[e]:t},...y]:n[e]=t,g};return g={parentAnimation:l,elements:x,childAnimations:P,animationFinish:ee,from:ce,to:(e,t)=>{const n=y[y.length-1];return null==n||void 0!==n.offset&&1!==n.offset?y=[...y,{offset:1,[e]:t}]:n[e]=t,g},fromTo:(e,t,n)=>ce(e,t).to(e,n),parent:e=>(l=e,g),play:ue,playAsync:()=>new Promise(e=>(z(e,{oneTimeCallback:!0}),ue(),g)),playSync:()=>(O=!0,z(()=>O=!1,{oneTimeCallback:!0}),ue(),g),pause:()=>(P.forEach(e=>{e.pause()}),oe(),g),stop:()=>(P.forEach(e=>{e.stop()}),_&&($(),_=!1),g),destroy:()=>($(),x.length=0,P.length=0,y.length=0,W(),_=!1,R=!0,P.forEach(e=>{e.destroy()}),g),keyframes:e=>(y=e,g),addAnimation:e=>{if(null!=e){const t=g,n=e;if(n.length>=0)for(const e of n)e.parent(t),P.push(e);else e.parent(t),P.push(e)}return g},addElement:e=>{if(null!=e)if(1===e.nodeType)x.push(e);else if(e.length>=0)for(let t=0;t<e.length;t++)x.push(e[t]);else console.error(\"Invalid addElement value\");return g},update:ie,fill:e=>(u=e,ie(!0),g),direction:e=>(c=e,ie(!0),g),iterations:e=>(a=e,ie(!0),g),duration:e=>(t=e,ie(!0),g),easing:e=>(n=e,ie(!0),g),delay:t=>(e=t,ie(!0),g),getWebAnimations:B,getKeyframes:()=>y,getFill:G,getDirection:K,getDelay:Z,getIterations:J,getEasing:Y,getDuration:X,afterAddRead:e=>(F.push(e),g),afterAddWrite:e=>(U.push(e),g),afterClearStyles:(e=[])=>{for(const t of e)S[t]=\"\";return g},afterStyles:(e={})=>(S=e,g),afterRemoveClass:e=>(C=s(C,e),g),afterAddClass:e=>(E=s(E,e),g),beforeAddRead:e=>(M.push(e),g),beforeAddWrite:e=>(j.push(e),g),beforeClearStyles:(e=[])=>{for(const t of e)w[t]=\"\";return g},beforeStyles:(e={})=>(w=e,g),beforeRemoveClass:e=>(b=s(b,e),g),beforeAddClass:e=>(v=s(v,e),g),onFinish:z,clearOnFinish:W,progressStart:(e=!1)=>(P.forEach(t=>{t.progressStart(e)}),oe(),I=e,_?(ie(),ne(0)):te(),g),progressStep:e=>(P.forEach(t=>{t.progressStep(e)}),void 0!==X()&&ne(e),g),progressEnd:(e,t,n)=>(I=!1,P.forEach(r=>{r.progressEnd(e,t,n)}),void 0!==n&&(f=n),A=!1,N=e,e?q||(p=t*X()*-1,ie(!1,!1)):(d=\"reverse\"===K()?\"normal\":\"reverse\",q?(ie(),ne(1-t)):(p=(1-t)*X()*-1,ie(!1,!1))),z(()=>{N=!0,f=void 0,d=void 0,p=void 0},{oneTimeCallback:!0}),l||ue(),g)}}},p74H:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return o});var r=n(\"mrSG\"),i=n(\"a3Cf\"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.overlaysWebView=function(e){return Object(i.cordova)(this,\"overlaysWebView\",{sync:!0},arguments)},t.prototype.styleDefault=function(){return Object(i.cordova)(this,\"styleDefault\",{sync:!0},arguments)},t.prototype.styleLightContent=function(){return Object(i.cordova)(this,\"styleLightContent\",{sync:!0},arguments)},t.prototype.styleBlackTranslucent=function(){return Object(i.cordova)(this,\"styleBlackTranslucent\",{sync:!0},arguments)},t.prototype.styleBlackOpaque=function(){return Object(i.cordova)(this,\"styleBlackOpaque\",{sync:!0},arguments)},t.prototype.backgroundColorByName=function(e){return Object(i.cordova)(this,\"backgroundColorByName\",{sync:!0},arguments)},t.prototype.backgroundColorByHexString=function(e){return Object(i.cordova)(this,\"backgroundColorByHexString\",{sync:!0},arguments)},t.prototype.hide=function(){return Object(i.cordova)(this,\"hide\",{sync:!0},arguments)},t.prototype.show=function(){return Object(i.cordova)(this,\"show\",{sync:!0},arguments)},Object.defineProperty(t.prototype,\"isVisible\",{get:function(){return Object(i.cordovaPropertyGet)(this,\"isVisible\")},set:function(e){Object(i.cordovaPropertySet)(this,\"isVisible\",e)},enumerable:!0,configurable:!0}),t.pluginName=\"StatusBar\",t.plugin=\"cordova-plugin-statusbar\",t.pluginRef=\"StatusBar\",t.repo=\"https://github.com/apache/cordova-plugin-statusbar\",t.platforms=[\"Android\",\"iOS\",\"Windows\"],t}(i.IonicNativePlugin)},pLZG:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return i});var r=n(\"7o/Q\");function i(e,t){return function(n){return n.lift(new o(e,t))}}class o{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new s(e,this.predicate,this.thisArg))}}class s extends r.a{constructor(e,t,n){super(e),this.predicate=t,this.thisArg=n,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}},pMnS:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return u});var r=n(\"8Y7J\"),i=n(\"iInd\"),o=r.pb({encapsulation:2,styles:[],data:{}});function s(e){return r.Lb(0,[(e()(),r.rb(0,16777216,null,null,1,\"router-outlet\",[],null,null,null,null,null)),r.qb(1,212992,null,0,i.o,[i.b,r.M,r.j,[8,null],r.h],null,null)],function(e,t){e(t,1,0)},null)}function a(e){return r.Lb(0,[(e()(),r.rb(0,0,null,null,1,\"ng-component\",[],null,null,null,s,o)),r.qb(1,49152,null,0,i.C,[],null,null)],null,null)}var u=r.nb(\"ng-component\",i.C,a,{},{},[])},pZk1:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return l});var r=n(\"hbGf\"),i=n(\"LRne\"),o=n(\"VRyK\"),s=n(\"kDjp\"),a=n(\"eIep\"),u=n(\"Kqap\"),c=n(\"/uUt\");function l(e,t){return Object(r.a)(e,\"value\",\"once\").pipe(Object(a.a)(n=>{const s=[Object(i.a)(n)];return t.forEach(t=>s.push(Object(r.a)(e,t))),Object(o.a)(...s).pipe(Object(u.a)(d,[]))}),Object(c.a)())}function h(e,t){const n=e.length;for(let r=0;r<n;r++)if(e[r].payload.key===t)return r;return-1}function d(e,t){const{payload:n,prevKey:r,key:i}=t,o=h(e,i),a=function(e,t){if(Object(s.c)(t))return 0;{const n=h(e,t);return-1===n?e.length:n+1}}(e,r);switch(t.type){case\"value\":if(t.payload&&t.payload.exists()){let n=null;t.payload.forEach(t=>{const r={payload:t,type:\"value\",prevKey:n,key:t.key};return n=t.key,e=[...e,r],!1})}return e;case\"child_added\":if(o>-1){const i=e[o-1];(i&&i.key||null)!=r&&(e=e.filter(e=>e.payload.key!==n.key)).splice(a,0,t)}else{if(null==r)return[t,...e];(e=e.slice()).splice(a,0,t)}return e;case\"child_removed\":return e.filter(e=>e.payload.key!==n.key);case\"child_changed\":return e.map(e=>e.payload.key===i?t:e);case\"child_moved\":if(o>-1){const t=e.splice(o,1)[0];return(e=e.slice()).splice(a,0,t),e}return e;default:return e}}},\"pxS/\":function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return i}),n.d(t,\"b\",function(){return o});var r=n(\"KOl+\");function i(e,t){return!0===Object(r.a)(e,t)?Object(r.b)(e.constructor.getPluginRef())[t]:null}function o(e,t,n){!0===Object(r.a)(e,t)&&(Object(r.b)(e.constructor.getPluginRef())[t]=n)}},\"q/0M\":function(e,t,n){\"use strict\";n.r(t),n.d(t,\"LogLevel\",function(){return i}),n.d(t,\"Logger\",function(){return a}),n.d(t,\"setLogLevel\",function(){return u});var r=[],i=function(e){return e[e.DEBUG=0]=\"DEBUG\",e[e.VERBOSE=1]=\"VERBOSE\",e[e.INFO=2]=\"INFO\",e[e.WARN=3]=\"WARN\",e[e.ERROR=4]=\"ERROR\",e[e.SILENT=5]=\"SILENT\",e}({}),o=i.INFO,s=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var o=(new Date).toISOString();switch(t){case i.DEBUG:case i.VERBOSE:console.log.apply(console,[\"[\"+o+\"]  \"+e.name+\":\"].concat(n));break;case i.INFO:console.info.apply(console,[\"[\"+o+\"]  \"+e.name+\":\"].concat(n));break;case i.WARN:console.warn.apply(console,[\"[\"+o+\"]  \"+e.name+\":\"].concat(n));break;case i.ERROR:console.error.apply(console,[\"[\"+o+\"]  \"+e.name+\":\"].concat(n));break;default:throw new Error(\"Attempted to log a message with an invalid logType (value: \"+t+\")\")}}},a=function(){function e(e){this.name=e,this._logLevel=o,this._logHandler=s,r.push(this)}return Object.defineProperty(e.prototype,\"logLevel\",{get:function(){return this._logLevel},set:function(e){if(!(e in i))throw new TypeError(\"Invalid value assigned to `logLevel`\");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"logHandler\",{get:function(){return this._logHandler},set:function(e){if(\"function\"!=typeof e)throw new TypeError(\"Value assigned to `logHandler` must be a function\");this._logHandler=e},enumerable:!0,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,i.DEBUG].concat(e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,i.VERBOSE].concat(e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,i.INFO].concat(e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,i.WARN].concat(e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,i.ERROR].concat(e))},e}();function u(e){r.forEach(function(t){t.logLevel=e})}},quSY:function(e,t,n){\"use strict\";var r=n(\"DH7j\"),i=n(\"XoHu\"),o=n(\"n6bG\");const s=(()=>{function e(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join(\"\\n  \")}`:\"\",this.name=\"UnsubscriptionError\",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e})();n.d(t,\"a\",function(){return a});let a=(()=>{class e{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:n,_unsubscribe:a,_subscriptions:c}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(let e=0;e<n.length;++e)n[e].remove(this);if(Object(o.a)(a))try{a.call(this)}catch(l){t=l instanceof s?u(l.errors):[l]}if(Object(r.a)(c)){let e=-1,n=c.length;for(;++e<n;){const n=c[e];if(Object(i.a)(n))try{n.unsubscribe()}catch(l){t=t||[],l instanceof s?t=t.concat(u(l.errors)):t.push(l)}}}if(t)throw new s(t)}add(t){let n=t;if(!t)return e.EMPTY;switch(typeof t){case\"function\":n=new e(t);case\"object\":if(n===this||n.closed||\"function\"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){const t=n;(n=new e)._subscriptions=[t]}break;default:throw new Error(\"unrecognized teardown \"+t+\" added to Subscription.\")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof e){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}return e.EMPTY=function(e){return e.closed=!0,e}(new e),e})();function u(e){return e.reduce((e,t)=>e.concat(t instanceof s?t.errors:t),[])}},sDu7:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return o});var r=n(\"pZk1\"),i=n(\"GIw4\");function o(e,t){return t=Object(i.a)(t),Object(r.a)(e,t)}},\"uPh+\":function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return i});var r=n(\"HDdC\");function i(e){return new r.a(t=>(e.on(\"state_changed\",e=>t.next(e),e=>t.error(e),()=>t.complete()),()=>e.cancel()))}},uzCt:function(e,t,n){e.exports=function(){\"use strict\";function e(t){return e.result?e.result:t&&\"function\"==typeof t.getSerializer?e.result=t.getSerializer():Promise.reject(new Error(\"localforage.getSerializer() was not available! localforage v1.4+ is required!\"))}function t(e,n){return(t.result=t.result||{})[n]?t.result[n]:e&&\"function\"==typeof e.getDriver?t.result[n]=e.getDriver(n):Promise.reject(new Error(\"localforage.getDriver() was not available! localforage v1.4+ is required!\"))}function n(e){return t(e,e.WEBSQL)}var r=new Promise(function(e,t){\"undefined\"!=typeof sqlitePlugin?e():\"undefined\"==typeof cordova?t(new Error(\"cordova is not defined.\")):document.addEventListener(\"deviceready\",function(){return e()},!1)}).catch(function(){return Promise.resolve()});function i(){return r.then(function(){if(\"undefined\"!=typeof sqlitePlugin&&\"function\"==typeof sqlitePlugin.openDatabase)return sqlitePlugin.openDatabase;throw new Error(\"SQLite plugin is not present.\")})}var o={_driver:\"cordovaSQLiteDriver\",_initStorage:function(t){var r=this,o={db:null};if(t)for(var s in t)o[s]=\"string\"!=typeof t[s]?t[s].toString():t[s];var a=i().then(function(e){return new Promise(function(t,n){try{o.location=o.location||\"default\",o.db=e({name:o.name,version:String(o.version),description:o.description,size:o.size,key:o.dbKey,location:o.location})}catch(i){n(i)}o.db.transaction(function(e){e.executeSql(\"CREATE TABLE IF NOT EXISTS \"+o.storeName+\" (id INTEGER PRIMARY KEY, key unique, value)\",[],function(){r._dbInfo=o,t()},function(e,t){n(t)})})})}),u=e(r),c=n(r);return Promise.all([u,c,a]).then(function(e){return o.serializer=e[0],a})},_support:function(){return i().then(function(e){return!!e}).catch(function(){return!1})}};return function(e){var t=[\"clear\",\"getItem\",\"iterate\",\"key\",\"keys\",\"length\",\"removeItem\",\"setItem\"];function r(e,t){e[t]=function(){var e=this,r=arguments;return n(e).then(function(n){return n[t].apply(e,r)})}}for(var i=0,o=t.length;i<o;i++)r(e,t[i])}(o),o}()},w1tV:function(e,t,n){\"use strict\";var r=n(\"XNiG\"),i=n(\"HDdC\"),o=n(\"7o/Q\"),s=n(\"quSY\");function a(){return function(e){return e.lift(new u(e))}}class u{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const r=new c(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class c extends o.a{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class l extends i.a{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new s.a).add(this.source.subscribe(new d(this.getSubject(),this))),e.closed&&(this._connection=null,e=s.a.EMPTY)),e}refCount(){return a()(this)}}const h=(()=>{const e=l.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class d extends r.b{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}function f(){return new r.a}function p(){return e=>a()(function(e,t){return function(t){let n;n=\"function\"==typeof e?e:function(){return e};const r=Object.create(t,h);return r.source=t,r.subjectFactory=n,r}}(f)(e))}n.d(t,\"a\",function(){return p})},wj3C:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r,i=n(\"mrSG\"),o=n(\"zVF4\"),s=n(\"q/0M\"),a=((r={})[\"no-app\"]=\"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()\",r[\"bad-app-name\"]=\"Illegal App name: '{$appName}\",r[\"duplicate-app\"]=\"Firebase App named '{$appName}' already exists\",r[\"app-deleted\"]=\"Firebase App named '{$appName}' already deleted\",r[\"invalid-app-argument\"]=\"firebase.{$appName}() takes either no argument or a Firebase App instance.\",r),u=new o.ErrorFactory(\"app\",\"Firebase\",a),c=\"[DEFAULT]\",l=function(){function e(e,t,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.services_={},this.tokenListeners_=[],this.analyticsEventRequests_=[],this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=o.deepCopy(e);var i=this;this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(e){r.tokenListeners_.push(e),setTimeout(function(){return e(null)},0)},removeAuthTokenListener:function(e){r.tokenListeners_=r.tokenListeners_.filter(function(t){return t!==e})},analytics:{logEvent:function(){i.analyticsEventRequests_.push(arguments)}}}}return Object.defineProperty(e.prototype,\"automaticDataCollectionEnabled\",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"name\",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"options\",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){e.firebase_.INTERNAL.removeApp(e.name_);for(var t=[],n=0,r=Object.keys(e.services_);n<r.length;n++)for(var i=r[n],o=0,s=Object.keys(e.services_[i]);o<s.length;o++)t.push(e.services_[i][s[o]]);return Promise.all(t.filter(function(e){return\"INTERNAL\"in e}).map(function(e){return e.INTERNAL.delete()}))}).then(function(){e.isDeleted_=!0,e.services_={}})},e.prototype._getService=function(e,t){if(void 0===t&&(t=c),this.checkDestroyed_(),this.services_[e]||(this.services_[e]={}),!this.services_[e][t]){var n=t!==c?t:void 0,r=this.firebase_.INTERNAL.factories[e](this,this.extendApp.bind(this),n);this.services_[e][t]=r}return this.services_[e][t]},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=c),this.services_[e]&&this.services_[e][t]&&delete this.services_[e][t]},e.prototype.extendApp=function(e){if(o.deepExtend(this,e),e.INTERNAL){if(e.INTERNAL.addAuthTokenListener){for(var t=0,n=this.tokenListeners_;t<n.length;t++)this.INTERNAL.addAuthTokenListener(n[t]);this.tokenListeners_=[]}if(e.INTERNAL.analytics){for(var r=0,i=this.analyticsEventRequests_;r<i.length;r++)this.INTERNAL.analytics.logEvent.apply(void 0,i[r]);this.analyticsEventRequests_=[]}}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw u.create(\"app-deleted\",{appName:this.name_})},e}();l.prototype.name&&l.prototype.options||l.prototype.delete||console.log(\"dc\");var h=new s.Logger(\"@firebase/app\");if(o.isBrowser()&&void 0!==self.firebase){h.warn(\"\\n    Warning: Firebase is already defined in the global scope. Please make sure\\n    Firebase library is only loaded once.\\n  \");var d=self.firebase.SDK_VERSION;d&&d.indexOf(\"LITE\")>=0&&h.warn(\"\\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\\n    \")}var f=function e(){var t=function(e){var t={},n={},r={},i={__esModule:!0,initializeApp:function(n,r){void 0===r&&(r={}),(\"object\"!=typeof r||null===r)&&(r={name:r});var s=r;void 0===s.name&&(s.name=c);var a=s.name;if(\"string\"!=typeof a||!a)throw u.create(\"bad-app-name\",{appName:String(a)});if(o.contains(t,a))throw u.create(\"duplicate-app\",{appName:a});var h=new e(n,s,i);return t[a]=h,l(h,\"create\"),h},app:s,apps:null,SDK_VERSION:\"7.0.0\",INTERNAL:{registerService:function(t,c,l,d,f){if(void 0===f&&(f=!1),n[t])return h.debug(\"There were multiple attempts to register service \"+t+\".\"),i[t];function p(e){if(void 0===e&&(e=s()),\"function\"!=typeof e[t])throw u.create(\"invalid-app-argument\",{appName:t});return e[t]()}return n[t]=c,d&&(r[t]=d,a().forEach(function(e){d(\"create\",e)})),void 0!==l&&o.deepExtend(p,l),i[t]=p,e.prototype[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this._getService.bind(this,t);return r.apply(this,f?e:[])},p},removeApp:function(e){l(t[e],\"delete\"),delete t[e]},factories:n,useAsService:d}};function s(e){if(!o.contains(t,e=e||c))throw u.create(\"no-app\",{appName:e});return t[e]}function a(){return Object.keys(t).map(function(e){return t[e]})}function l(e,t){for(var i=0,o=Object.keys(n);i<o.length;i++){var s=d(0,o[i]);if(null===s)return;r[s]&&r[s](t,e)}}function d(e,t){return\"serverAuth\"===t?null:t}return i.default=i,Object.defineProperty(i,\"apps\",{get:a}),s.App=e,i}(l);return t.INTERNAL=i.__assign({},t.INTERNAL,{createFirebaseNamespace:e,extendNamespace:function(e){o.deepExtend(t,e)},createSubscribe:o.createSubscribe,ErrorFactory:o.ErrorFactory,deepExtend:o.deepExtend}),t}(),p=f.initializeApp;f.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.isNode()&&h.warn('\\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\\n      run in a Node environment.  If running in a Node environment, make sure you\\n      are using the bundle specified by the \"main\" field in package.json.\\n      \\n      If you are using Webpack, you can specify \"main\" as the first item in\\n      \"resolve.mainFields\":\\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\\n      \\n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify \"main\"\\n      as the first item in \"mainFields\", e.g. [\\'main\\', \\'module\\'].\\n      https://github.com/rollup/rollup-plugin-node-resolve\\n      '),p.apply(void 0,e)};var m=f;t.default=m,t.firebase=m},x7I3:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"ErrorCode\",function(){return ar}),n.d(t,\"EventType\",function(){return ur}),n.d(t,\"WebChannel\",function(){return cr}),n.d(t,\"XhrIo\",function(){return lr}),n.d(t,\"createWebChannelTransport\",function(){return sr});var r,i=\"undefined\"!=typeof globalThis?globalThis:\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:{},o=o||{},s=i;function a(e){return\"string\"==typeof e}function u(e){return\"number\"==typeof e}function c(e,t){e=e.split(\".\"),t=t||s;for(var n=0;n<e.length;n++)if(null==(t=t[e[n]]))return null;return t}function l(){}function h(e){var t=typeof e;if(\"object\"==t){if(!e)return\"null\";if(e instanceof Array)return\"array\";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if(\"[object Window]\"==n)return\"object\";if(\"[object Array]\"==n||\"number\"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable(\"splice\"))return\"array\";if(\"[object Function]\"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable(\"call\"))return\"function\"}else if(\"function\"==t&&void 0===e.call)return\"object\";return t}function d(e){return\"array\"==h(e)}function f(e){var t=h(e);return\"array\"==t||\"object\"==t&&\"number\"==typeof e.length}function p(e){var t=typeof e;return\"object\"==t&&null!=e||\"function\"==t}var m=\"closure_uid_\"+(1e9*Math.random()>>>0),g=0;function y(e,t,n){return e.call.apply(e.bind,arguments)}function v(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function b(e,t,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf(\"native code\")?y:v).apply(null,arguments)}function _(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var w=Date.now||function(){return+new Date};function E(e,t){function n(){}n.prototype=t.prototype,e.N=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.yb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function C(){this.j=this.j,this.i=this.i}C.prototype.j=!1,C.prototype.la=function(){!this.j&&(this.j=!0,this.G(),0)&&(this[m]||(this[m]=++g))},C.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var S=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(a(e))return a(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},T=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=a(e)?e.split(\"\"):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function I(e){return Array.prototype.concat.apply([],arguments)}function O(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function N(e){return/^[\\s\\xa0]*$/.test(e)}var A,R=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\\s\\xa0]*([\\s\\S]*?)[\\s\\xa0]*$/.exec(e)[1]};function D(e,t){return-1!=e.indexOf(t)}function k(e,t){return e<t?-1:e>t?1:0}e:{var x=s.navigator;if(x){var P=x.userAgent;if(P){A=P;break e}}A=\"\"}function L(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function M(e){var t,n={};for(t in e)n[t]=e[t];return n}var j=\"constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf\".split(\" \");function F(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<j.length;o++)n=j[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function U(e){return U[\" \"](e),e}U[\" \"]=l;var V,q,B=D(A,\"Opera\"),$=D(A,\"Trident\")||D(A,\"MSIE\"),z=D(A,\"Edge\"),W=z||$,H=D(A,\"Gecko\")&&!(D(A.toLowerCase(),\"webkit\")&&!D(A,\"Edge\"))&&!(D(A,\"Trident\")||D(A,\"MSIE\"))&&!D(A,\"Edge\"),Q=D(A.toLowerCase(),\"webkit\")&&!D(A,\"Edge\");function G(){var e=s.document;return e?e.documentMode:void 0}e:{var K=\"\",Y=(q=A,H?/rv:([^\\);]+)(\\)|;)/.exec(q):z?/Edge\\/([\\d\\.]+)/.exec(q):$?/\\b(?:MSIE|rv)[: ]([^\\);]+)(\\)|;)/.exec(q):Q?/WebKit\\/(\\S+)/.exec(q):B?/(?:Version)[ \\/]?(\\S+)/.exec(q):void 0);if(Y&&(K=Y?Y[1]:\"\"),$){var X=G();if(null!=X&&X>parseFloat(K)){V=String(X);break e}}V=K}var J,Z={};function ee(e){return function(e,t){var n=Z;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t()}(e,function(){for(var t=0,n=R(String(V)).split(\".\"),r=R(String(e)).split(\".\"),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var s=n[o]||\"\",a=r[o]||\"\";do{if(s=/(\\d*)(\\D*)(.*)/.exec(s)||[\"\",\"\",\"\",\"\"],a=/(\\d*)(\\D*)(.*)/.exec(a)||[\"\",\"\",\"\",\"\"],0==s[0].length&&0==a[0].length)break;t=k(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||k(0==s[2].length,0==a[2].length)||k(s[2],a[2]),s=s[3],a=a[3]}while(0==t)}return 0<=t})}var te=s.document;J=te&&$?G()||(\"CSS1Compat\"==te.compatMode?parseInt(V,10):5):void 0;var ne=!$||9<=Number(J),re=$&&!ee(\"9\"),ie=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},\"passive\",{get:function(){e=!0}});try{s.addEventListener(\"test\",l,t),s.removeEventListener(\"test\",l,t)}catch(n){}return e}();function oe(e,t){this.type=e,this.a=this.target=t,this.Ja=!0}function se(e,t){if(oe.call(this,e?e.type:\"\"),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key=\"\",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType=\"\",this.c=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(H){e:{try{U(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else\"mouseover\"==n?t=e.fromElement:\"mouseout\"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||\"\",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=a(e.pointerType)?e.pointerType:ae[e.pointerType]||\"\",this.c=e,e.defaultPrevented&&this.b()}}oe.prototype.b=function(){this.Ja=!1},E(se,oe);var ae={2:\"touch\",3:\"pen\",4:\"mouse\"};se.prototype.b=function(){se.N.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,re)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}};var ue=\"closure_listenable_\"+(1e6*Math.random()|0),ce=0;function le(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.da=i,this.key=++ce,this.X=this.Z=!1}function he(e){e.X=!0,e.listener=null,e.proxy=null,e.src=null,e.da=null}function de(e){this.src=e,this.a={},this.b=0}function fe(e,t){var n=t.type;if(n in e.a){var r,i=e.a[n],o=S(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(he(t),0==e.a[n].length&&(delete e.a[n],e.b--))}}function pe(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.X&&o.listener==t&&o.capture==!!n&&o.da==r)return i}return-1}de.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var s=pe(e,t,r,i);return-1<s?(t=e[s],n||(t.Z=!1)):((t=new le(t,this.src,o,!!r,i)).Z=n,e.push(t)),t};var me=\"closure_lm_\"+(1e6*Math.random()|0),ge={};function ye(e,t,n,r,i){if(r&&r.once)return function e(t,n,r,i,o){if(d(n)){for(var s=0;s<n.length;s++)e(t,n[s],r,i,o);return null}return r=Se(r),t&&t[ue]?t.Ba(n,r,p(i)?!!i.capture:!!i,o):ve(t,n,r,!0,i,o)}(e,t,n,r,i);if(d(t)){for(var o=0;o<t.length;o++)ye(e,t[o],n,r,i);return null}return n=Se(n),e&&e[ue]?e.Aa(t,n,p(r)?!!r.capture:!!r,i):ve(e,t,n,!1,r,i)}function ve(e,t,n,r,i,o){if(!t)throw Error(\"Invalid event type\");var s=p(i)?!!i.capture:!!i;if(s&&!ne)return null;var a=Ee(e);if(a||(e[me]=a=new de(e)),(n=a.add(t,n,r,s,o)).proxy)return n;if(r=function(){var e=we,t=ne?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ie||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(_e(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error(\"addEventListener and attachEvent are unavailable.\");e.addListener(r)}return n}function be(e){if(!u(e)&&e&&!e.X){var t=e.src;if(t&&t[ue])fe(t.c,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(_e(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ee(t))?(fe(n,e),0==n.b&&(n.src=null,t[me]=null)):he(e)}}}function _e(e){return e in ge?ge[e]:ge[e]=\"on\"+e}function we(e,t){return!!e.X||function(e,t){var n=e.listener,r=e.da||e.src;return e.Z&&be(e),n.call(r,t)}(e,ne?new se(t,this):t=new se(t||c(\"window.event\"),this))}function Ee(e){return(e=e[me])instanceof de?e:null}var Ce=\"__closure_events_fn_\"+(1e9*Math.random()>>>0);function Se(e){return\"function\"==h(e)?e:(e[Ce]||(e[Ce]=function(t){return e.handleEvent(t)}),e[Ce])}function Te(){C.call(this),this.c=new de(this),this.J=this,this.B=null}function Ie(e,t,n,r){if(!(t=e.c.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.X&&s.capture==n){var a=s.listener,u=s.da||s.src;s.Z&&fe(e.c,s),i=!1!==a.call(u,r)&&i}}return i&&0!=r.Ja}E(Te,C),Te.prototype[ue]=!0,(r=Te.prototype).addEventListener=function(e,t,n,r){ye(this,e,t,n,r)},r.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,o){if(d(n))for(var s=0;s<n.length;s++)e(t,n[s],r,i,o);else i=p(i)?!!i.capture:!!i,r=Se(r),t&&t[ue]?(t=t.c,(n=String(n).toString())in t.a&&-1<(r=pe(s=t.a[n],r,i,o))&&(he(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete t.a[n],t.b--))):t&&(t=Ee(t))&&(n=t.a[n.toString()],t=-1,n&&(t=pe(n,r,i,o)),(r=-1<t?n[t]:null)&&be(r))}(this,e,t,n,r)},r.dispatchEvent=function(e){var t,n=this.B;if(n)for(t=[];n;n=n.B)t.push(n);n=this.J;var r=e.type||e;if(a(e))e=new oe(e,n);else if(e instanceof oe)e.target=e.target||n;else{var i=e;F(e=new oe(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var s=e.a=t[o];i=Ie(s,r,!0,e)&&i}if(i=Ie(s=e.a=n,r,!0,e)&&i,i=Ie(s,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=Ie(s=e.a=t[o],r,!1,e)&&i;return i},r.G=function(){if(Te.N.G.call(this),this.c){var e,t=this.c;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)he(n[r]);delete t.a[e],t.b--}}this.B=null},r.Aa=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)},r.Ba=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};var Oe=s.JSON.stringify;function Ne(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function Ae(){this.b=this.a=null}Ne.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var Re,De=new Ne(function(){return new xe},function(e){e.reset()});function ke(){var e=je,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function xe(){this.next=this.b=this.a=null}function Pe(e){s.setTimeout(function(){throw e},0)}function Le(e,t){Re||function(){var e=s.Promise.resolve(void 0);Re=function(){e.then(Fe)}}(),Me||(Re(),Me=!0),je.add(e,t)}Ae.prototype.add=function(e,t){var n=De.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},xe.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},xe.prototype.reset=function(){this.next=this.b=this.a=null};var Me=!1,je=new Ae;function Fe(){for(var e;e=ke();){try{e.a.call(e.b)}catch(n){Pe(n)}var t=De;t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}Me=!1}function Ue(e,t){Te.call(this),this.b=e||1,this.a=t||s,this.f=b(this.gb,this),this.g=w()}function Ve(e){e.ba=!1,e.L&&(e.a.clearTimeout(e.L),e.L=null)}function qe(e,t,n){if(\"function\"==h(e))n&&(e=b(e,n));else{if(!e||\"function\"!=typeof e.handleEvent)throw Error(\"Invalid listener argument\");e=b(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function Be(e,t,n){C.call(this),this.f=null!=n?b(e,n):e,this.c=t,this.b=b(this.ab,this),this.a=[]}function $e(e){e.U=qe(e.b,e.c),e.f.apply(null,e.a)}function ze(e){C.call(this),this.b=e,this.a={}}E(Ue,Te),(r=Ue.prototype).ba=!1,r.L=null,r.gb=function(){if(this.ba){var e=w()-this.g;0<e&&e<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-e):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent(\"tick\"),this.ba&&(Ve(this),this.start()))}},r.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=w())},r.G=function(){Ue.N.G.call(this),Ve(this),delete this.a},E(Be,C),(r=Be.prototype).ea=!1,r.U=null,r.Ua=function(e){this.a=arguments,this.U?this.ea=!0:$e(this)},r.G=function(){Be.N.G.call(this),this.U&&(s.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},r.ab=function(){this.U=null,this.ea&&(this.ea=!1,$e(this))},E(ze,C);var We=[];function He(e,t,n,r){d(n)||(n&&(We[0]=n.toString()),n=We);for(var i=0;i<n.length;i++){var o=ye(t,n[i],r||e.handleEvent,!1,e.b||e);if(!o)break;e.a[o.key]=o}}function Qe(e){L(e.a,function(e,t){this.a.hasOwnProperty(t)&&be(e)},e),e.a={}}function Ge(){}ze.prototype.G=function(){ze.N.G.call(this),Qe(this)},ze.prototype.handleEvent=function(){throw Error(\"EventHandler.handleEvent not implemented\")};var Ke=new Te;function Ye(e){oe.call(this,\"serverreachability\",e)}function Xe(e){Ke.dispatchEvent(new Ye(Ke,e))}function Je(e){oe.call(this,\"statevent\",e)}function Ze(e){Ke.dispatchEvent(new Je(Ke,e))}function et(e){oe.call(this,\"timingevent\",e)}function tt(e,t){if(\"function\"!=h(e))throw Error(\"Fn must not be null and must be a function\");return s.setTimeout(function(){e()},t)}E(Ye,oe),E(Je,oe),E(et,oe);var nt={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,Ma:7,TIMEOUT:8,sb:9},rt={jb:\"complete\",wb:\"success\",Na:\"error\",Ma:\"abort\",ub:\"ready\",vb:\"readystatechange\",TIMEOUT:\"timeout\",qb:\"incrementaldata\",tb:\"progress\",lb:\"downloadprogress\",xb:\"uploadprogress\"};function it(){}function ot(){}it.prototype.a=null;var st,at={OPEN:\"a\",ib:\"b\",Na:\"c\",rb:\"d\"};function ut(){oe.call(this,\"d\")}function ct(){oe.call(this,\"c\")}function lt(){}function ht(e,t,n){this.g=e,this.W=t,this.V=n||1,this.I=new ze(this),this.O=dt,this.P=new Ue(e=W?125:void 0),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}E(ut,oe),E(ct,oe),E(lt,it),st=new lt;var dt=45e3,ft={},pt={};function mt(e,t,n){e.F=1,e.f=Vt(xt(t)),e.l=n,e.H=!0,yt(e,null)}function gt(e,t,n,r){e.F=1,e.f=Vt(xt(t)),e.l=null,e.H=n,yt(e,r)}function yt(e,t){e.v=w(),_t(e),e.D=xt(e.f),Ut(e.D,\"t\",e.V),e.A=0,e.a=e.g.$(e.g.Y()?t:null),0<e.J&&(e.B=new Be(b(e.Ka,e,e.a),e.J)),He(e.I,e.a,\"readystatechange\",e.eb),t=e.h?M(e.h):{},e.l?(e.w||(e.w=\"POST\"),t[\"Content-Type\"]=\"application/x-www-form-urlencoded\",e.a.ca(e.D,e.w,e.l,t)):(e.w=\"GET\",e.a.ca(e.D,e.w,null,t)),Xe(1)}function vt(e,t,n){for(var r=!0;!e.m&&e.A<n.length;){var i=bt(e,n);if(i==pt){4==t&&(e.c=4,Ze(14),r=!1);break}if(i==ft){e.c=4,Ze(15),r=!1;break}Tt(e,i)}4==t&&0==n.length&&(e.c=1,Ze(16),r=!1),e.b=e.b&&r,r||(St(e),Ct(e))}function bt(e,t){var n=e.A,r=t.indexOf(\"\\n\",n);return-1==r?pt:(n=Number(t.substring(n,r)),isNaN(n)?ft:(r+=1)+n>t.length?pt:(t=t.substr(r,n),e.A=r+n,t))}function _t(e){e.R=w()+e.O,wt(e,e.O)}function wt(e,t){if(null!=e.i)throw Error(\"WatchDog timer not null\");e.i=tt(b(e.bb,e),t)}function Et(e){e.i&&(s.clearTimeout(e.i),e.i=null)}function Ct(e){e.g.Da()||e.m||e.g.na(e)}function St(e){Et(e);var t=e.B;t&&\"function\"==typeof t.la&&t.la(),e.B=null,Ve(e.P),Qe(e.I),e.a&&(t=e.a,e.a=null,t.abort(),t.la())}function Tt(e,t){try{e.g.Ga(e,t),Xe(4)}catch(n){}}function It(e,t){if(e.forEach&&\"function\"==typeof e.forEach)e.forEach(t,void 0);else if(f(e)||a(e))T(e,t,void 0);else{if(e.K&&\"function\"==typeof e.K)var n=e.K();else if(e.C&&\"function\"==typeof e.C)n=void 0;else if(f(e)||a(e)){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.C&&\"function\"==typeof e.C)return e.C();if(a(e))return e.split(\"\");if(f(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function Ot(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error(\"Uneven number of arguments\");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Ot)for(n=e.K(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Nt(e,t){Rt(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&At(e))}function At(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Rt(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)Rt(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function Rt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(r=ht.prototype).setTimeout=function(e){this.O=e},r.eb=function(e){e=e.target;var t=this.B;t&&3==xn(e)?t.Ua():this.Ka(e)},r.Ka=function(e){try{if(e==this.a)e:{var t=xn(this.a),n=this.a.ya(),r=this.a.T();if(!(3>t||3==t&&!W&&!this.a.aa())){this.m||4!=t||7==n||Xe(8==n||0>=r?3:2),Et(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){t:{if(this.a){var s=Pn(this.a,\"X-HTTP-Initial-Response\");if(s&&!N(s)){var a=s;break t}}a=null}if(!a){this.b=!1,this.c=3,Ze(12),St(this),Ct(this);break e}this.s=!0,Tt(this,a)}this.H?(vt(this,t,o),W&&this.b&&3==t&&(He(this.I,this.P,\"tick\",this.cb),this.P.start())):Tt(this,o),4==t&&St(this),this.b&&!this.m&&(4==t?this.g.na(this):(this.b=!1,_t(this)))}else 400==i&&0<o.indexOf(\"Unknown SID\")?(this.c=3,Ze(12)):(this.c=0,Ze(13)),St(this),Ct(this)}}}catch(u){}},r.cb=function(){if(this.a){var e=xn(this.a),t=this.a.aa();this.A<t.length&&(Et(this),vt(this,e,t),this.b&&4!=e&&_t(this))}},r.cancel=function(){this.m=!0,St(this)},r.bb=function(){this.i=null;var e=w();0<=e-this.R?(2!=this.F&&(Xe(3),Ze(17)),St(this),this.c=2,Ct(this)):wt(this,this.R-e)},(r=Ot.prototype).C=function(){At(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},r.K=function(){return At(this),this.a.concat()},r.get=function(e,t){return Rt(this.b,e)?this.b[e]:t},r.set=function(e,t){Rt(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},r.forEach=function(e,t){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Dt=/^(?:([^:/?#.]+):)?(?:\\/\\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$/;function kt(e,t){var n;this.b=this.j=this.f=\"\",this.i=null,this.g=this.a=\"\",this.h=!1,e instanceof kt?(this.h=void 0!==t?t:e.h,Pt(this,e.f),this.j=e.j,Lt(this,e.b),Mt(this,e.i),this.a=e.a,jt(this,en(e.c)),this.g=e.g):e&&(n=String(e).match(Dt))?(this.h=!!t,Pt(this,n[1]||\"\",!0),this.j=qt(n[2]||\"\"),Lt(this,n[3]||\"\",!0),Mt(this,n[4]),this.a=qt(n[5]||\"\",!0),jt(this,n[6]||\"\",!0),this.g=qt(n[7]||\"\")):(this.h=!!t,this.c=new Kt(null,this.h))}function xt(e){return new kt(e)}function Pt(e,t,n){e.f=n?qt(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,\"\"))}function Lt(e,t,n){e.b=n?qt(t,!0):t}function Mt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error(\"Bad port number \"+t);e.i=t}else e.i=null}function jt(e,t,n){t instanceof Kt?(e.c=t,function(e,t){t&&!e.f&&(Yt(e),e.c=null,e.a.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Xt(this,t),Zt(this,n,e))},e)),e.f=t}(e.c,e.h)):(n||(t=Bt(t,Qt)),e.c=new Kt(t,e.h))}function Ft(e,t,n){e.c.set(t,n)}function Ut(e,t,n){d(n)||(n=[String(n)]),Zt(e.c,t,n)}function Vt(e){return Ft(e,\"zx\",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^w()).toString(36)),e}function qt(e,t){return e?t?decodeURI(e.replace(/%25/g,\"%2525\")):decodeURIComponent(e):\"\"}function Bt(e,t,n){return a(e)?(e=encodeURI(e).replace(t,$t),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,\"%$1\")),e):null}function $t(e){return\"%\"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}kt.prototype.toString=function(){var e=[],t=this.f;t&&e.push(Bt(t,zt,!0),\":\");var n=this.b;return(n||\"file\"==t)&&(e.push(\"//\"),(t=this.j)&&e.push(Bt(t,zt,!0),\"@\"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,\"%$1\")),null!=(n=this.i)&&e.push(\":\",String(n))),(n=this.a)&&(this.b&&\"/\"!=n.charAt(0)&&e.push(\"/\"),e.push(Bt(n,\"/\"==n.charAt(0)?Ht:Wt,!0))),(n=this.c.toString())&&e.push(\"?\",n),(n=this.g)&&e.push(\"#\",Bt(n,Gt)),e.join(\"\")},kt.prototype.resolve=function(e){var t=xt(this),n=!!e.f;n?Pt(t,e.f):n=!!e.j,n?t.j=e.j:n=!!e.b,n?Lt(t,e.b):n=null!=e.i;var r=e.a;if(n)Mt(t,e.i);else if(n=!!e.a){if(\"/\"!=r.charAt(0))if(this.b&&!this.a)r=\"/\"+r;else{var i=t.a.lastIndexOf(\"/\");-1!=i&&(r=t.a.substr(0,i+1)+r)}if(\"..\"==(i=r)||\".\"==i)r=\"\";else if(D(i,\"./\")||D(i,\"/.\")){r=0==i.lastIndexOf(\"/\",0),i=i.split(\"/\");for(var o=[],s=0;s<i.length;){var a=i[s++];\".\"==a?r&&s==i.length&&o.push(\"\"):\"..\"==a?((1<o.length||1==o.length&&\"\"!=o[0])&&o.pop(),r&&s==i.length&&o.push(\"\")):(o.push(a),r=!0)}r=o.join(\"/\")}else r=i}return n?t.a=r:n=\"\"!==e.c.toString(),n?jt(t,en(e.c)):n=!!e.g,n&&(t.g=e.g),t};var zt=/[#\\/\\?@]/g,Wt=/[#\\?:]/g,Ht=/[#\\?]/g,Qt=/[#\\?@]/g,Gt=/#/g;function Kt(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function Yt(e){e.a||(e.a=new Ot,e.b=0,e.c&&function(e,t){if(e){e=e.split(\"&\");for(var n=0;n<e.length;n++){var r=e[n].indexOf(\"=\"),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\\+/g,\" \")):\"\")}}}(e.c,function(t,n){e.add(decodeURIComponent(t.replace(/\\+/g,\" \")),n)}))}function Xt(e,t){Yt(e),t=tn(e,t),Rt(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,Nt(e.a,t))}function Jt(e,t){return Yt(e),t=tn(e,t),Rt(e.a.b,t)}function Zt(e,t,n){Xt(e,t),0<n.length&&(e.c=null,e.a.set(tn(e,t),O(n)),e.b+=n.length)}function en(e){var t=new Kt;return t.c=e.c,e.a&&(t.a=new Ot(e.a),t.b=e.b),t}function tn(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function nn(e){this.a=e,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function rn(e){var t=e.a.F.a;if(null!=t)Ze(4),t?(Ze(10),Hn(e.a,e,!1)):(Ze(11),Hn(e.a,e,!0));else{e.b=new ht(e,void 0,void 0),e.b.h=e.h,t=Xn(t=e.a,t.Y()?e.f:null,e.i),Ze(4),Ut(t,\"TYPE\",\"xmlhttp\");var n=e.a.j,r=e.a.I;n&&r&&Ft(t,n,r),gt(e.b,t,!1,e.f)}}function on(){this.a=this.b=null}function sn(){this.a=new Ot}function an(e){var t=typeof e;return\"object\"==t&&e||\"function\"==t?\"o\"+(e[m]||(e[m]=++g)):t.charAt(0)+e}function un(e,t){this.b=e,this.a=t}function cn(e){this.g=e||ln,e=s.PerformanceNavigationTiming?0<(e=s.performance.getEntriesByType(\"navigation\")).length&&(\"hq\"==e[0].nextHopProtocol||\"h2\"==e[0].nextHopProtocol):!!(s.ka&&s.ka.Ea&&s.ka.Ea()&&s.ka.Ea().zb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new sn),this.b=null,this.c=[]}(r=Kt.prototype).add=function(e,t){Yt(this),this.c=null,e=tn(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},r.forEach=function(e,t){Yt(this),this.a.forEach(function(n,r){T(n,function(n){e.call(t,n,r,this)},this)},this)},r.K=function(){Yt(this);for(var e=this.a.C(),t=this.a.K(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},r.C=function(e){Yt(this);var t=[];if(a(e))Jt(this,e)&&(t=I(t,this.a.get(tn(this,e))));else{e=this.a.C();for(var n=0;n<e.length;n++)t=I(t,e[n])}return t},r.set=function(e,t){return Yt(this),this.c=null,Jt(this,e=tn(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},r.get=function(e,t){return e&&0<(e=this.C(e)).length?String(e[0]):t},r.toString=function(){if(this.c)return this.c;if(!this.a)return\"\";for(var e=[],t=this.a.K(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var s=i;\"\"!==r[o]&&(s+=\"=\"+encodeURIComponent(String(r[o]))),e.push(s)}}return this.c=e.join(\"&\")},E(function(){},function(){}),(r=nn.prototype).M=null,r.$=function(e){return this.a.$(e)},r.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},r.Da=function(){return!1},r.Ga=function(e,t){if(this.c=e.o,0==this.M){if(!this.a.o&&(e=e.a)){var n=Pn(e,\"X-Client-Wire-Protocol\");this.l=n||null,this.a.j&&(e=Pn(e,\"X-HTTP-Session-Id\"))&&(this.a.I=e)}if(t){try{var r=this.a.ja.a.parse(t)}catch(i){return(t=this.a).m=this.c,void Kn(t,2)}this.f=r[0]}else(t=this.a).m=this.c,Kn(t,2)}else 1==this.M&&(this.g?Ze(6):\"11111\"==t?(Ze(5),this.g=!0,(!$||10<=Number(J))&&(this.c=200,this.b.cancel(),Ze(11),Hn(this.a,this,!0))):(Ze(7),this.g=!1))},r.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,rn(this)):1==this.M&&(this.g?(Ze(11),Hn(this.a,this,!0)):(Ze(10),Hn(this.a,this,!1)));else{0==this.M?Ze(8):1==this.M&&Ze(9);var e=this.a;e.m=this.c,Kn(e,2)}},r.Y=function(){return this.a.Y()},r.ma=function(){return this.a.ma()},sn.prototype.add=function(e){this.a.set(an(e),e)},sn.prototype.C=function(){return this.a.C()};var ln=10;function hn(e,t){!e.a&&(D(t,\"spdy\")||D(t,\"quic\")||D(t,\"h2\"))&&(e.f=e.g,e.a=new sn,e.b&&(mn(e,e.b),e.b=null))}function dn(e){return!!e.b||!!e.a&&e.a.a.c>=e.f}function fn(e){return e.b?1:e.a?e.a.a.c:0}function pn(e,t){return e.b?e=e.b==t:e.a?(t=an(t),e=Rt(e.a.a.b,t)):e=!1,e}function mn(e,t){e.a?e.a.add(t):e.b=t}function gn(e,t){var n;e.b&&e.b==t?e.b=null:((n=e.a)&&(n=an(t),n=Rt(e.a.a.b,n)),n&&Nt(e.a.a,an(t)))}function yn(e){if(null!=e.b)return e.c.concat(e.b.j);if(null!=e.a&&0!=e.a.a.c){var t=e.c;return T(e.a.C(),function(e){t=t.concat(e.j)}),t}return O(e.c)}function vn(){}function bn(){this.a=new vn}function _n(e,t,n){var r=n||\"\";try{It(e,function(e,n){var i=e;p(e)&&(i=Oe(e)),t.push(r+n+\"=\"+encodeURIComponent(i))})}catch(i){throw t.push(r+\"type=\"+encodeURIComponent(\"_badmap\")),i}}function wn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}cn.prototype.cancel=function(){this.c=yn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(T(this.a.C(),function(e){e.cancel()}),function(e){e.b={},e.a.length=0,e.c=0}(this.a.a))},vn.prototype.stringify=function(e){return s.JSON.stringify(e,void 0)},vn.prototype.parse=function(e){return s.JSON.parse(e,void 0)};var En=s.JSON.parse;function Cn(e){Te.call(this),this.headers=new Ot,this.H=e||null,this.b=!1,this.s=this.a=null,this.A=\"\",this.h=0,this.f=\"\",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=Sn,this.D=this.F=!1}E(Cn,Te);var Sn=\"\",Tn=/^https?$/i,In=[\"POST\",\"PUT\"];function On(e){return\"content-type\"==e.toLowerCase()}function Nn(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,An(e),Dn(e)}function An(e){e.v||(e.v=!0,e.dispatchEvent(\"complete\"),e.dispatchEvent(\"error\"))}function Rn(e){if(e.b&&void 0!==o&&(!e.s[1]||4!=xn(e)||2!=e.T()))if(e.l&&4==xn(e))qe(e.Fa,0,e);else if(e.dispatchEvent(\"readystatechange\"),4==xn(e)){e.b=!1;try{var t,n=e.T();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.A).match(Dt)[1]||null;if(!a&&s.self&&s.self.location){var u=s.self.location.protocol;a=u.substr(0,u.length-1)}i=!Tn.test(a?a.toLowerCase():\"\")}t=i}t?(e.dispatchEvent(\"complete\"),e.dispatchEvent(\"success\")):(e.h=6,e.f=e.za()+\" [\"+e.T()+\"]\",An(e))}finally{Dn(e)}}}function Dn(e,t){if(e.a){kn(e);var n=e.a,r=e.s[0]?l:null;e.a=null,e.s=null,t||e.dispatchEvent(\"ready\");try{n.onreadystatechange=r}catch(i){}}}function kn(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(s.clearTimeout(e.m),e.m=null)}function xn(e){return e.a?e.a.readyState:0}function Pn(e,t){return e.a?e.a.getResponseHeader(t):null}function Ln(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}if(r)return e;if(n=function(e){var t=\"\";return L(n,function(e,n){t+=n,t+=\":\",t+=e,t+=\"\\r\\n\"}),t}(),a(e)){if(t=encodeURIComponent(String(t)),t+=n=null!=n?\"=\"+encodeURIComponent(String(n)):\"\"){if(0>(n=e.indexOf(\"#\"))&&(n=e.length),0>(r=e.indexOf(\"?\"))||r>n){r=n;var i=\"\"}else i=e.substring(r+1,n);n=(e=[e.substr(0,r),i,e.substr(n)])[1],e[1]=t?n?n+\"&\"+t:t:n,e=e[0]+(e[1]?\"?\"+e[1]:\"\")+e[2]}return e}return Ft(e,t,n),e}function Mn(e){this.f=[],this.F=new on,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Ra=this.P=0,this.Pa=!!c(\"internalChannelParams.failFast\",e),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Oa=c(\"internalChannelParams.baseRetryDelayMs\",e)||5e3,this.Sa=c(\"internalChannelParams.retryDelaySeedMs\",e)||1e4,this.Qa=c(\"internalChannelParams.forwardChannelMaxRetries\",e)||2,this.qa=c(\"internalChannelParams.forwardChannelRequestTimeoutMs\",e)||2e4,this.La=e&&e.Ab||void 0,this.D=void 0,this.R=e&&e.supportsCrossDomainXhr||!1,this.H=\"\",this.b=new cn(e&&e.concurrentRequestLimit),this.ja=new bn,this.o=!e||void 0===e.backgroundChannelTest||e.backgroundChannelTest,(this.W=e&&e.fastHandshake||!1)&&!this.o&&(this.o=!0),e&&e.forceLongPolling&&(this.oa=!1),this.fa=void 0}function jn(e){if(Fn(e),3==e.u){var t=e.P++,n=xt(e.B);Ft(n,\"SID\",e.H),Ft(n,\"RID\",t),Ft(n,\"TYPE\",\"terminate\"),Bn(e,n),(t=new ht(e,t,void 0)).F=2,t.f=Vt(xt(n)),n=!1,s.navigator&&s.navigator.sendBeacon&&(n=s.navigator.sendBeacon(t.f.toString(),\"\")),!n&&s.Image&&((new Image).src=t.f,n=!0),n||(t.a=t.g.$(null),t.a.ca(t.f)),t.v=w(),_t(t)}Yn(e)}function Fn(e){e.w&&(e.w.abort(),e.w=null),e.a&&(e.a.cancel(),e.a=null),e.l&&(s.clearTimeout(e.l),e.l=null),Qn(e),e.b.cancel(),e.h&&(u(e.h)&&s.clearTimeout(e.h),e.h=null)}function Un(e,t){e.f.push(new un(e.Ra++,t)),3==e.u&&Vn(e)}function Vn(e){dn(e.b)||e.h||(e.h=!0,Le(e.Ia,e),e.A=0)}function qn(e,t){var n;n=t?t.W:e.P++;var r=xt(e.B);Ft(r,\"SID\",e.H),Ft(r,\"RID\",n),Ft(r,\"AID\",e.O),Bn(e,r),e.g&&e.i&&Ln(r,e.g,e.i),n=new ht(e,n,e.A+1),null===e.g&&(n.h=e.i),t&&(e.f=t.j.concat(e.f)),t=$n(e,n,1e3),n.setTimeout(Math.round(.5*e.qa)+Math.round(.5*e.qa*Math.random())),mn(e.b,n),mt(n,r,t)}function Bn(e,t){e.c&&It({},function(e,n){Ft(t,n,e)})}function $n(e,t,n){n=Math.min(e.f.length,n);var r=e.c?b(e.c.Ta,e.c,e):null;e:for(var i=e.f,o=-1;;){var s=[\"count=\"+n];-1==o?0<n?s.push(\"ofs=\"+(o=i[0].b)):o=0:s.push(\"ofs=\"+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{_n(l,s,\"req\"+c+\"_\")}catch(h){r&&r(l)}}if(a){r=s.join(\"&\");break e}}return e=e.f.splice(0,n),t.j=e,r}function zn(e){e.a||e.l||(e.S=1,Le(e.Ha,e),e.v=0)}function Wn(e){return!(e.a||e.l||3<=e.v||(e.S++,e.l=tt(b(e.Ha,e),Gn(e,e.v)),e.v++,0))}function Hn(e,t,n){var r=t.l;r&&hn(e.b,r),e.ia=e.oa&&n,e.m=t.c,e.B=Xn(e,null,e.ha),Vn(e)}function Qn(e){null!=e.s&&(s.clearTimeout(e.s),e.s=null)}function Gn(e,t){var n=e.Oa+Math.floor(Math.random()*e.Sa);return e.ma()||(n*=2),n*t}function Kn(e,t){if(2==t){var n=null;e.c&&(n=null);var r=b(e.fb,e);n||(n=new kt(\"//www.google.com/images/cleardot.gif\"),s.location&&\"http\"==s.location.protocol||Pt(n,\"https\"),Vt(n)),function(e,t){var n=new Ge;if(s.Image){var r=new Image;r.onload=_(wn,n,r,\"TestLoadImage: loaded\",!0,t),r.onerror=_(wn,n,r,\"TestLoadImage: error\",!1,t),r.onabort=_(wn,n,r,\"TestLoadImage: abort\",!1,t),r.ontimeout=_(wn,n,r,\"TestLoadImage: timeout\",!1,t),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ze(2);e.u=0,e.c&&e.c.ta(t),Yn(e),Fn(e)}function Yn(e){e.u=0,e.m=-1,e.c&&(0==yn(e.b).length&&0==e.f.length||(e.b.c.length=0,O(e.f),e.f.length=0),e.c.sa())}function Xn(e,t,n){var r=function(e){return e instanceof kt?xt(e):new kt(e,void 0)}(n);if(\"\"!=r.b)t&&Lt(r,t+\".\"+r.b),Mt(r,r.i);else{var i=s.location;r=function(e,t,n,r){var i=new kt(null,void 0);return e&&Pt(i,e),t&&Lt(i,t),n&&Mt(i,n),r&&(i.a=r),i}(i.protocol,t?t+\".\"+i.hostname:i.hostname,+i.port,n)}return e.V&&L(e.V,function(e,t){Ft(r,t,e)}),n=e.I,(t=e.j)&&n&&Ft(r,t,n),Ft(r,\"VER\",e.wa),Bn(e,r),r}function Jn(){}function Zn(){if($&&!(10<=Number(J)))throw Error(\"Environmental error: no available transport.\")}function er(e,t){Te.call(this),this.a=new Mn(t),this.g=e,this.m=t&&t.testUrl?t.testUrl:function(e){for(var t=arguments[0],n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf(\"/\",0)?t=i:((r=\"\"==t)||(r=0<=(r=t.length-1)&&t.indexOf(\"/\",r)==r),t+=r?i:\"/\"+i)}return t}(this.g,\"test\"),this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e[\"X-Client-Protocol\"]=\"webchannel\":e={\"X-Client-Protocol\":\"webchannel\"}),this.a.i=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e[\"X-WebChannel-Content-Type\"]=t.messageContentType:e={\"X-WebChannel-Content-Type\":t.messageContentType}),t&&t.xa&&(e?e[\"X-WebChannel-Client-Profile\"]=t.xa:e={\"X-WebChannel-Client-Profile\":t.xa}),this.a.J=e,(e=t&&t.httpHeadersOverwriteParam)&&!N(e)&&(this.a.g=e),this.l=t&&t.supportsCrossDomainXhr||!1,this.h=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!N(t)&&(this.a.j=t,null!==(e=this.b)&&t in e&&t in(e=this.b)&&delete e[t]),this.f=new rr(this)}function tr(e){ut.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.c=e)?(e=this.c,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function nr(){ct.call(this),this.status=1}function rr(e){this.a=e}(r=Cn.prototype).ca=function(e,t,n,r){if(this.a)throw Error(\"[goog.net.XhrIo] Object is active with another request=\"+this.A+\"; newUri=\"+e);t=t?t.toUpperCase():\"GET\",this.A=e,this.f=\"\",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(e){var t;return(t=e.a)||(t=e.a={}),t}(this.H?this.H:st),this.a.onreadystatechange=b(this.Fa,this);try{this.w=!0,this.a.open(t,String(e),!0),this.w=!1}catch(o){return void Nn(this,o)}e=n||\"\";var i=new Ot(this.headers);r&&It(r,function(e,t){i.set(t,e)}),r=function(e){e:{for(var t=On,n=e.length,r=a(e)?e.split(\"\"):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:a(e)?e.charAt(t):e[t]}(i.K()),n=s.FormData&&e instanceof s.FormData,!(0<=S(In,t))||r||n||i.set(\"Content-Type\",\"application/x-www-form-urlencoded;charset=utf-8\"),i.forEach(function(e,t){this.a.setRequestHeader(t,e)},this),this.I&&(this.a.responseType=this.I),\"withCredentials\"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{kn(this),0<this.o&&((this.D=function(e){return $&&ee(9)&&u(e.timeout)&&void 0!==e.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=b(this.Ca,this)):this.m=qe(this.Ca,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(o){Nn(this,o)}},r.Ca=function(){void 0!==o&&this.a&&(this.f=\"Timed out after \"+this.o+\"ms, aborting\",this.h=8,this.dispatchEvent(\"timeout\"),this.abort(8))},r.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,this.dispatchEvent(\"complete\"),this.dispatchEvent(\"abort\"),Dn(this))},r.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Dn(this,!0)),Cn.N.G.call(this)},r.Fa=function(){this.j||(this.w||this.l||this.g?Rn(this):this.$a())},r.$a=function(){Rn(this)},r.T=function(){try{return 2<xn(this)?this.a.status:-1}catch(q){return-1}},r.za=function(){try{return 2<xn(this)?this.a.statusText:\"\"}catch(q){return\"\"}},r.aa=function(){try{return this.a?this.a.responseText:\"\"}catch(q){return\"\"}},r.Va=function(e){if(this.a){var t=this.a.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),En(t)}},r.ya=function(){return this.h},r.Ya=function(){return a(this.f)?this.f:String(this.f)},(r=Mn.prototype).wa=8,r.u=1,r.Da=function(){return 0==this.u},r.Ia=function(e){if(this.h)if(this.h=null,1==this.u){if(!e){this.P=Math.floor(1e5*Math.random());var t,n=new ht(this,e=this.P++,void 0),r=this.i;if(this.J&&(r?F(r=M(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)e:{for(var i=t=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o=\"__data__\"in o.a&&a(o=o.a.__data__)?o.length:void 0))break;if(4096<(t+=o)){t=i;break e}if(4096===t||i===this.f.length-1){t=i+1;break e}}t=1e3}else t=1e3;t=$n(this,n,t),Ft(i=xt(this.B),\"RID\",e),Ft(i,\"CVER\",22),this.o&&this.j&&Ft(i,\"X-HTTP-Session-Id\",this.j),Bn(this,i),this.g&&r&&Ln(i,this.g,r),mn(this.b,n),this.W?(Ft(i,\"$req\",t),Ft(i,\"SID\",\"null\"),n.S=!0,mt(n,i,null)):mt(n,i,t),this.u=2}}else 3==this.u&&(e?qn(this,e):0==this.f.length||dn(this.b)||qn(this))},r.Ha=function(){this.l=null,this.a=new ht(this,\"rpc\",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var e=xt(this.pa);Ft(e,\"RID\",\"rpc\"),Ft(e,\"SID\",this.H),Ft(e,\"CI\",this.ia?\"0\":\"1\"),Ft(e,\"AID\",this.O),Bn(this,e),Ft(e,\"TYPE\",\"xmlhttp\"),this.g&&this.i&&Ln(e,this.g,this.i),this.D&&this.a.setTimeout(this.D),gt(this.a,e,!0,this.ga)},r.Ga=function(e,t){if(0!=this.u&&(this.a==e||pn(this.b,e)))if(this.m=e.o,!e.s&&pn(this.b,e)&&3==this.u){try{var n=this.ja.a.parse(t)}catch(o){n=null}if(d(n)&&3==n.length){if(0==(t=n)[0]){e:if(!this.l){if(this.a){if(!(this.a.v+3e3<e.v))break e;Qn(this),this.a.cancel(),this.a=null}Wn(this),Ze(18)}}else this.ra=t[1],0<this.ra-this.O&&37500>t[2]&&this.ia&&0==this.v&&!this.s&&(this.s=tt(b(this.Za,this),6e3));if(1>=fn(this.b)&&this.fa){try{this.fa()}catch(o){}this.fa=void 0}}else Kn(this,11)}else if((e.s||this.a==e)&&Qn(this),!N(t))for(t=n=this.ja.a.parse(t),n=0;n<t.length;n++){var r=t[n];if(this.O=r[0],r=r[1],2==this.u)if(\"c\"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&u(r)&&0<r&&(this.D=1.5*r),this.o&&(r=e.a)&&((i=Pn(r,\"X-Client-Wire-Protocol\"))&&hn(this.b,i),this.j&&(r=Pn(r,\"X-HTTP-Session-Id\")))&&(this.I=r,Ft(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=e,this.pa=Xn(this,this.Y()?this.ga:null,this.ha),r.s?(gn(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(Et(r),_t(r)),this.a=r):zn(this),0<this.f.length&&Vn(this)}else\"stop\"!=r[0]&&\"close\"!=r[0]||Kn(this,7);else 3==this.u&&(\"stop\"==r[0]||\"close\"==r[0]?\"stop\"==r[0]?Kn(this,7):jn(this):\"noop\"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},r.Za=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Wn(this),Ze(19))},r.na=function(e){var t=null;if(this.a==e){Qn(this),this.a=null;var n=2}else{if(!pn(this.b,e))return;t=e.j,gn(this.b,e),n=1}if(this.m=e.o,0!=this.u)if(e.b)1==n?(t=w()-e.v,Ke.dispatchEvent(new et(Ke,e.l?e.l.length:0,t,this.A)),Vn(this)):zn(this);else{var r=e.c;if(3==r||0==r&&0<this.m||!(1==n&&function(e,t){return!(fn(e.b)>=e.b.f-(e.h?1:0)||(e.h?(e.f=t.j.concat(e.f),0):1==e.u||2==e.u||e.A>=(e.Pa?0:e.Qa)||(e.h=tt(b(e.Ia,e,t),Gn(e,e.A)),e.A++,0)))}(this,e)||2==n&&Wn(this)))switch(t&&0<t.length&&(e=this.b,e.c=e.c.concat(t)),r){case 1:Kn(this,5);break;case 4:Kn(this,10);break;case 3:Kn(this,6);break;default:Kn(this,2)}}},r.fb=function(e){Ze(e?2:1)},r.$=function(e){if(e&&!this.R)throw Error(\"Can't create secondary domain capable XhrIo object.\");return(e=new Cn(this.La)).F=this.R,e},r.ma=function(){return!!this.c&&!0},r.Y=function(){return this.R},(r=Jn.prototype).va=function(){},r.ua=function(){},r.ta=function(){},r.sa=function(){},r.Ta=function(){},Zn.prototype.a=function(e,t){return new er(e,t)},E(er,Te),(r=er.prototype).addEventListener=function(e,t,n,r){er.N.addEventListener.call(this,e,t,n,r)},r.removeEventListener=function(e,t,n,r){er.N.removeEventListener.call(this,e,t,n,r)},r.Wa=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var e=this.a,t=this.m,n=this.g,r=this.b||void 0;Ze(0),e.ha=n,e.V=r||{},e.o&&(e.F.b=[],e.F.a=!1),e.w=new nn(e),null===e.g&&(e.w.h=e.i),n=t,e.g&&e.i&&(n=Ln(t,e.g,e.i)),(e=e.w).i=n,t=Xn(e.a,null,e.i),Ze(3),null!=(n=e.a.F.b)?(e.f=n[0],e.M=1,rn(e)):(Ut(t,\"MODE\",\"init\"),!e.a.o&&e.a.j&&Ut(t,\"X-HTTP-Session-Id\",e.a.j),e.b=new ht(e,void 0,void 0),e.b.h=e.h,gt(e.b,t,!1,null),e.M=0)},r.close=function(){jn(this.a)},r.Xa=function(e){if(a(e)){var t={};t.__data__=e,Un(this.a,t)}else this.h?((t={}).__data__=Oe(e),Un(this.a,t)):Un(this.a,e)},r.G=function(){this.a.c=null,delete this.f,jn(this.a),delete this.a,er.N.G.call(this)},E(tr,ut),E(nr,ct),E(rr,Jn),rr.prototype.va=function(){this.a.dispatchEvent(\"a\")},rr.prototype.ua=function(e){this.a.dispatchEvent(new tr(e))},rr.prototype.ta=function(e){this.a.dispatchEvent(new nr(e))},rr.prototype.sa=function(){this.a.dispatchEvent(\"b\")};var ir=_(function(e,t){function n(){}n.prototype=e.prototype;var r=new n;return e.apply(r,Array.prototype.slice.call(arguments,1)),r},Zn);Zn.prototype.createWebChannel=Zn.prototype.a,er.prototype.send=er.prototype.Xa,er.prototype.open=er.prototype.Wa,er.prototype.close=er.prototype.close,nt.NO_ERROR=0,nt.TIMEOUT=8,nt.HTTP_ERROR=6,rt.COMPLETE=\"complete\",ot.EventType=at,at.OPEN=\"a\",at.CLOSE=\"b\",at.ERROR=\"c\",at.MESSAGE=\"d\",Te.prototype.listen=Te.prototype.Aa,Cn.prototype.listenOnce=Cn.prototype.Ba,Cn.prototype.getLastError=Cn.prototype.Ya,Cn.prototype.getLastErrorCode=Cn.prototype.ya,Cn.prototype.getStatus=Cn.prototype.T,Cn.prototype.getStatusText=Cn.prototype.za,Cn.prototype.getResponseJson=Cn.prototype.Va,Cn.prototype.getResponseText=Cn.prototype.aa,Cn.prototype.send=Cn.prototype.ca;var or={createWebChannelTransport:ir,ErrorCode:nt,EventType:rt,WebChannel:ot,XhrIo:Cn},sr=or.createWebChannelTransport,ar=or.ErrorCode,ur=or.EventType,cr=or.WebChannel,lr=or.XhrIo;t.default=or},xSm1:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return i});var r=n(\"KOl+\");function i(e,t,n,i){return Object(r.d)(e,t,n).apply(this,i)}},xgBC:function(e,t,n){\"use strict\";n.d(t,\"c\",function(){return a}),n.d(t,\"b\",function(){return s}),n.d(t,\"a\",function(){return c}),n.d(t,\"d\",function(){return u});var r=n(\"8Y7J\"),i=n(\"oAJy\"),o=n(\"uzCt\");class s{constructor(e){this._driver=null,this._dbPromise=new Promise((t,n)=>{let r;const s=Object.assign({name:\"_ionicstorage\",storeName:\"_ionickv\",dbKey:\"_ionickey\",driverOrder:[\"sqlite\",\"indexeddb\",\"websql\",\"localstorage\"]},e||{});Object(i.defineDriver)(o).then(()=>{r=Object(i.createInstance)(s)}).then(()=>r.setDriver(this._getDriverOrder(s.driverOrder))).then(()=>{this._driver=r.driver(),t(r)}).catch(e=>n(e))})}get driver(){return this._driver}ready(){return this._dbPromise}_getDriverOrder(e){return e.map(e=>{switch(e){case\"sqlite\":return o._driver;case\"indexeddb\":return i.INDEXEDDB;case\"websql\":return i.WEBSQL;case\"localstorage\":return i.LOCALSTORAGE}})}get(e){return this._dbPromise.then(t=>t.getItem(e))}set(e,t){return this._dbPromise.then(n=>n.setItem(e,t))}remove(e){return this._dbPromise.then(t=>t.removeItem(e))}clear(){return this._dbPromise.then(e=>e.clear())}length(){return this._dbPromise.then(e=>e.length())}keys(){return this._dbPromise.then(e=>e.keys())}forEach(e){return this._dbPromise.then(t=>t.iterate(e))}}const a=new r.o(\"STORAGE_CONFIG_TOKEN\");function u(e){return new s(e||{name:\"_ionicstorage\",storeName:\"_ionickv\",dbKey:\"_ionickey\",driverOrder:[\"sqlite\",\"indexeddb\",\"websql\",\"localstorage\"]})}let c=(()=>{class e{static forRoot(t=null){return{ngModule:e,providers:[{provide:a,useValue:t},{provide:s,useFactory:u,deps:[a]}]}}}return e})()},xgIS:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return a});var r=n(\"HDdC\"),i=n(\"DH7j\"),o=n(\"n6bG\"),s=n(\"lJxs\");function a(e,t,n,u){return Object(o.a)(n)&&(u=n,n=void 0),u?a(e,t,n).pipe(Object(s.a)(e=>Object(i.a)(e)?u(...e):u(e))):new r.a(r=>{!function e(t,n,r,i,o){let s;if(function(e){return e&&\"function\"==typeof e.addEventListener&&\"function\"==typeof e.removeEventListener}(t)){const e=t;t.addEventListener(n,r,o),s=()=>e.removeEventListener(n,r,o)}else if(function(e){return e&&\"function\"==typeof e.on&&\"function\"==typeof e.off}(t)){const e=t;t.on(n,r),s=()=>e.off(n,r)}else if(function(e){return e&&\"function\"==typeof e.addListener&&\"function\"==typeof e.removeListener}(t)){const e=t;t.addListener(n,r),s=()=>e.removeListener(n,r)}else{if(!t||!t.length)throw new TypeError(\"Invalid event target\");for(let s=0,a=t.length;s<a;s++)e(t[s],n,r,i,o)}i.add(s)}(e,t,function(e){r.next(arguments.length>1?Array.prototype.slice.call(arguments):e)},r,n)})}},xscH:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return o});var r=n(\"uPh+\"),i=n(\"lJxs\");function o(e){const t=Object(r.a)(e);return{task:e,then:e.then.bind(e),catch:e.catch.bind(e),pause:e.pause.bind(e),cancel:e.cancel.bind(e),resume:e.resume.bind(e),snapshotChanges:()=>t,percentageChanges:()=>t.pipe(Object(i.a)(e=>e.bytesTransferred/e.totalBytes*100))}}},y8r5:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return o});var r=n(\"xscH\"),i=n(\"Cfvw\");function o(e,t){return{getDownloadURL:()=>t.keepUnstableUntilFirst(t.runOutsideAngular(Object(i.a)(t.zone.runOutsideAngular(()=>e.getDownloadURL())))),getMetadata:()=>t.keepUnstableUntilFirst(t.runOutsideAngular(Object(i.a)(t.zone.runOutsideAngular(()=>e.getMetadata())))),delete:()=>Object(i.a)(e.delete()),child:n=>o(e.child(n),t),updateMetatdata:t=>Object(i.a)(e.updateMetadata(t)),updateMetadata:t=>Object(i.a)(e.updateMetadata(t)),put:(t,n)=>{const i=e.put(t,n);return Object(r.a)(i)},putString:(t,n,i)=>{const o=e.putString(t,n,i);return Object(r.a)(o)}}}},\"yA/v\":function(e,t,n){\"use strict\";n.d(t,\"d\",function(){return a}),n.d(t,\"c\",function(){return u}),n.d(t,\"b\",function(){return c}),n.d(t,\"e\",function(){return l}),n.d(t,\"a\",function(){return h}),n(\"mrSG\");var r,i=n(\"8Y7J\"),o=n(\"Wcq6\"),s=n.n(o);const a=new i.o(\"angularfire2.app.options\"),u=new i.o(\"angularfire2.app.nameOrConfig\");class c{}function l(e,t){const n=\"object\"==typeof t&&t||{};return n.name=n.name||\"string\"==typeof t&&t||\"[DEFAULT]\",s.a.apps.filter(e=>e&&e.name===n.name)[0]||s.a.initializeApp(e,n)}let h=(()=>r=class{static initializeApp(e,t){return{ngModule:r,providers:[{provide:a,useValue:e},{provide:u,useValue:t}]}}})()},yCtX:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return s});var r=n(\"HDdC\"),i=n(\"ngJS\"),o=n(\"jZKg\");function s(e,t){return t?Object(o.a)(e,t):new r.a(Object(i.a)(e))}},yLV6:function(e,t,n){var r;!function(i,o,s,a){\"use strict\";var u,c=[\"\",\"webkit\",\"Moz\",\"MS\",\"ms\",\"o\"],l=o.createElement(\"div\"),h=\"function\",d=Math.round,f=Math.abs,p=Date.now;function m(e,t,n){return setTimeout(E(e,n),t)}function g(e,t,n){return!!Array.isArray(e)&&(y(e,n[t],n),!0)}function y(e,t,n){var r;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==a)for(r=0;r<e.length;)t.call(n,e[r],r,e),r++;else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function v(e,t,n){var r=\"DEPRECATED METHOD: \"+t+\"\\n\"+n+\" AT \\n\";return function(){var t=new Error(\"get-stack-trace\"),n=t&&t.stack?t.stack.replace(/^[^\\(]+?[\\n$]/gm,\"\").replace(/^\\s+at\\s+/gm,\"\").replace(/^Object.<anonymous>\\s*\\(/gm,\"{anonymous}()@\"):\"Unknown Stack Trace\",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),e.apply(this,arguments)}}u=\"function\"!=typeof Object.assign?function(e){if(e===a||null===e)throw new TypeError(\"Cannot convert undefined or null to object\");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==a&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}return t}:Object.assign;var b=v(function(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;)(!n||n&&e[r[i]]===a)&&(e[r[i]]=t[r[i]]),i++;return e},\"extend\",\"Use `assign`.\"),_=v(function(e,t){return b(e,t,!0)},\"merge\",\"Use `assign`.\");function w(e,t,n){var r,i=t.prototype;(r=e.prototype=Object.create(i)).constructor=e,r._super=i,n&&u(r,n)}function E(e,t){return function(){return e.apply(t,arguments)}}function C(e,t){return typeof e==h?e.apply(t&&t[0]||a,t):e}function S(e,t){return e===a?t:e}function T(e,t,n){y(A(t),function(t){e.addEventListener(t,n,!1)})}function I(e,t,n){y(A(t),function(t){e.removeEventListener(t,n,!1)})}function O(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function N(e,t){return e.indexOf(t)>-1}function A(e){return e.trim().split(/\\s+/g)}function R(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function D(e){return Array.prototype.slice.call(e,0)}function k(e,t,n){for(var r=[],i=[],o=0;o<e.length;){var s=t?e[o][t]:e[o];R(i,s)<0&&r.push(e[o]),i[o]=s,o++}return n&&(r=t?r.sort(function(e,n){return e[t]>n[t]}):r.sort()),r}function x(e,t){for(var n,r,i=t[0].toUpperCase()+t.slice(1),o=0;o<c.length;){if((r=(n=c[o])?n+i:t)in e)return r;o++}return a}var P=1;function L(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||i}var M=\"ontouchstart\"in i,j=x(i,\"PointerEvent\")!==a,F=M&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),U=25,V=1,q=4,B=8,$=1,z=2,W=4,H=8,Q=16,G=z|W,K=H|Q,Y=G|K,X=[\"x\",\"y\"],J=[\"clientX\",\"clientY\"];function Z(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){C(e.options.enable,[e])&&n.handler(t)},this.init()}function ee(e,t,n){var r=n.pointers.length,i=n.changedPointers.length,o=t&V&&r-i==0,s=t&(q|B)&&r-i==0;n.isFirst=!!o,n.isFinal=!!s,o&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,r=t.pointers,i=r.length;n.firstInput||(n.firstInput=te(t)),i>1&&!n.firstMultiple?n.firstMultiple=te(t):1===i&&(n.firstMultiple=!1);var o=n.firstInput,s=n.firstMultiple,u=s?s.center:o.center,c=t.center=ne(r);t.timeStamp=p(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=se(u,c),t.distance=oe(u,c),function(e,t){var n=t.center,r=e.offsetDelta||{},i=e.prevDelta||{},o=e.prevInput||{};t.eventType!==V&&o.eventType!==q||(i=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=i.x+(n.x-r.x),t.deltaY=i.y+(n.y-r.y)}(n,t),t.offsetDirection=ie(t.deltaX,t.deltaY);var l,h,d=re(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=d.x,t.overallVelocityY=d.y,t.overallVelocity=f(d.x)>f(d.y)?d.x:d.y,t.scale=s?(l=s.pointers,oe((h=r)[0],h[1],J)/oe(l[0],l[1],J)):1,t.rotation=s?function(e,t){return se(r[1],r[0],J)+se(e[1],e[0],J)}(s.pointers):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,r,i,o,s=e.lastInterval||t,u=t.timeStamp-s.timeStamp;if(t.eventType!=B&&(u>U||s.velocity===a)){var c=t.deltaX-s.deltaX,l=t.deltaY-s.deltaY,h=re(u,c,l);r=h.x,i=h.y,n=f(h.x)>f(h.y)?h.x:h.y,o=ie(c,l),e.lastInterval=t}else n=s.velocity,r=s.velocityX,i=s.velocityY,o=s.direction;t.velocity=n,t.velocityX=r,t.velocityY=i,t.direction=o}(n,t);var m=e.element;O(t.srcEvent.target,m)&&(m=t.srcEvent.target),t.target=m}(e,n),e.emit(\"hammer.input\",n),e.recognize(n),e.session.prevInput=n}function te(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:d(e.pointers[n].clientX),clientY:d(e.pointers[n].clientY)},n++;return{timeStamp:p(),pointers:t,center:ne(t),deltaX:e.deltaX,deltaY:e.deltaY}}function ne(e){var t=e.length;if(1===t)return{x:d(e[0].clientX),y:d(e[0].clientY)};for(var n=0,r=0,i=0;i<t;)n+=e[i].clientX,r+=e[i].clientY,i++;return{x:d(n/t),y:d(r/t)}}function re(e,t,n){return{x:t/e||0,y:n/e||0}}function ie(e,t){return e===t?$:f(e)>=f(t)?e<0?z:W:t<0?H:Q}function oe(e,t,n){n||(n=X);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.sqrt(r*r+i*i)}function se(e,t,n){return n||(n=X),180*Math.atan2(t[n[1]]-e[n[1]],t[n[0]]-e[n[0]])/Math.PI}Z.prototype={handler:function(){},init:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(L(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&I(this.element,this.evEl,this.domHandler),this.evTarget&&I(this.target,this.evTarget,this.domHandler),this.evWin&&I(L(this.element),this.evWin,this.domHandler)}};var ae={mousedown:V,mousemove:2,mouseup:q},ue=\"mousedown\",ce=\"mousemove mouseup\";function le(){this.evEl=ue,this.evWin=ce,this.pressed=!1,Z.apply(this,arguments)}w(le,Z,{handler:function(e){var t=ae[e.type];t&V&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=q),this.pressed&&(t&q&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:\"mouse\",srcEvent:e}))}});var he={pointerdown:V,pointermove:2,pointerup:q,pointercancel:B,pointerout:B},de={2:\"touch\",3:\"pen\",4:\"mouse\",5:\"kinect\"},fe=\"pointerdown\",pe=\"pointermove pointerup pointercancel\";function me(){this.evEl=fe,this.evWin=pe,Z.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(fe=\"MSPointerDown\",pe=\"MSPointerMove MSPointerUp MSPointerCancel\"),w(me,Z,{handler:function(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace(\"ms\",\"\"),i=he[r],o=de[e.pointerType]||e.pointerType,s=\"touch\"==o,a=R(t,e.pointerId,\"pointerId\");i&V&&(0===e.button||s)?a<0&&(t.push(e),a=t.length-1):i&(q|B)&&(n=!0),a<0||(t[a]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(a,1))}});var ge={touchstart:V,touchmove:2,touchend:q,touchcancel:B},ye=\"touchstart\",ve=\"touchstart touchmove touchend touchcancel\";function be(){this.evTarget=ye,this.evWin=ve,this.started=!1,Z.apply(this,arguments)}w(be,Z,{handler:function(e){var t=ge[e.type];if(t===V&&(this.started=!0),this.started){var n=(function(e,t){var n=D(e.touches),r=D(e.changedTouches);return t&(q|B)&&(n=k(n.concat(r),\"identifier\",!0)),[n,r]}).call(this,e,t);t&(q|B)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:\"touch\",srcEvent:e})}}});var _e={touchstart:V,touchmove:2,touchend:q,touchcancel:B},we=\"touchstart touchmove touchend touchcancel\";function Ee(){this.evTarget=we,this.targetIds={},Z.apply(this,arguments)}w(Ee,Z,{handler:function(e){var t=_e[e.type],n=(function(e,t){var n=D(e.touches),r=this.targetIds;if(t&(2|V)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,s=D(e.changedTouches),a=[],u=this.target;if(o=n.filter(function(e){return O(e.target,u)}),t===V)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<s.length;)r[s[i].identifier]&&a.push(s[i]),t&(q|B)&&delete r[s[i].identifier],i++;return a.length?[k(o.concat(a),\"identifier\",!0),a]:void 0}).call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:\"touch\",srcEvent:e})}});var Ce=2500;function Se(){Z.apply(this,arguments);var e=E(this.handler,this);this.touch=new Ee(this.manager,e),this.mouse=new le(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function Te(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout(function(){var e=r.indexOf(n);e>-1&&r.splice(e,1)},Ce)}}w(Se,Z,{handler:function(e,t,n){var r=\"mouse\"==n.pointerType;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(\"touch\"==n.pointerType)(function(e,t){e&V?(this.primaryTouch=t.changedPointers[0].identifier,Te.call(this,t)):e&(q|B)&&Te.call(this,t)}).call(this,t,n);else if(r&&(function(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(t-i.x),s=Math.abs(n-i.y);if(o<=25&&s<=25)return!0}return!1}).call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ie=x(l.style,\"touchAction\"),Oe=Ie!==a,Ne=function(){if(!Oe)return!1;var e={},t=i.CSS&&i.CSS.supports;return[\"auto\",\"manipulation\",\"pan-y\",\"pan-x\",\"pan-x pan-y\",\"none\"].forEach(function(n){e[n]=!t||i.CSS.supports(\"touch-action\",n)}),e}();function Ae(e,t){this.manager=e,this.set(t)}Ae.prototype={set:function(e){\"compute\"==e&&(e=this.compute()),Oe&&this.manager.element.style&&Ne[e]&&(this.manager.element.style[Ie]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return y(this.manager.recognizers,function(t){C(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),function(e){if(N(e,\"none\"))return\"none\";var t=N(e,\"pan-x\"),n=N(e,\"pan-y\");return t&&n?\"none\":t||n?t?\"pan-x\":\"pan-y\":N(e,\"manipulation\")?\"manipulation\":\"auto\"}(e.join(\" \"))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var r=this.actions,i=N(r,\"none\")&&!Ne.none,o=N(r,\"pan-y\")&&!Ne[\"pan-y\"],s=N(r,\"pan-x\")&&!Ne[\"pan-x\"];if(i&&1===e.pointers.length&&e.distance<2&&e.deltaTime<250)return;if(!s||!o)return i||o&&n&G||s&&n&K?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var Re=1,De=2,ke=4,xe=8,Pe=xe,Le=16;function Me(e){this.options=u({},this.defaults,e||{}),this.id=P++,this.manager=null,this.options.enable=S(this.options.enable,!0),this.state=Re,this.simultaneous={},this.requireFail=[]}function je(e){return e&Le?\"cancel\":e&xe?\"end\":e&ke?\"move\":e&De?\"start\":\"\"}function Fe(e){return e==Q?\"down\":e==H?\"up\":e==z?\"left\":e==W?\"right\":\"\"}function Ue(e,t){var n=t.manager;return n?n.get(e):e}function Ve(){Me.apply(this,arguments)}function qe(){Ve.apply(this,arguments),this.pX=null,this.pY=null}function Be(){Ve.apply(this,arguments)}function $e(){Me.apply(this,arguments),this._timer=null,this._input=null}function ze(){Ve.apply(this,arguments)}function We(){Ve.apply(this,arguments)}function He(){Me.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Qe(e,t){return(t=t||{}).recognizers=S(t.recognizers,Qe.defaults.preset),new Ge(e,t)}function Ge(e,t){var n;this.options=u({},Qe.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((n=this).options.inputClass||(j?me:F?Ee:M?Se:le))(n,ee),this.touchAction=new Ae(this,this.options.touchAction),Ke(this,!0),y(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function Ke(e,t){var n,r=e.element;r.style&&(y(e.options.cssProps,function(i,o){n=x(r.style,o),t?(e.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=e.oldCssProps[n]||\"\"}),t||(e.oldCssProps={}))}Me.prototype={defaults:{},set:function(e){return u(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(g(e,\"recognizeWith\",this))return this;var t=this.simultaneous;return t[(e=Ue(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return g(e,\"dropRecognizeWith\",this)?this:(e=Ue(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(g(e,\"requireFailure\",this))return this;var t=this.requireFail;return-1===R(t,e=Ue(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(g(e,\"dropRequireFailure\",this))return this;e=Ue(e,this);var t=R(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,n=this.state;function r(n){t.manager.emit(n,e)}n<xe&&r(t.options.event+je(n)),r(t.options.event),e.additionalEvent&&r(e.additionalEvent),n>=xe&&r(t.options.event+je(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|Re)))return!1;e++}return!0},recognize:function(e){var t=u({},e);if(!C(this.options.enable,[this,t]))return this.reset(),void(this.state=32);this.state&(Pe|Le|32)&&(this.state=Re),this.state=this.process(t),this.state&(De|ke|xe|Le)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},w(Ve,Me,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=t&(De|ke),i=this.attrTest(e);return r&&(n&B||!i)?t|Le:r||i?n&q?t|xe:t&De?t|ke:De:32}}),w(qe,Ve,{defaults:{event:\"pan\",threshold:10,pointers:1,direction:Y},getTouchAction:function(){var e=this.options.direction,t=[];return e&G&&t.push(\"pan-y\"),e&K&&t.push(\"pan-x\"),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,i=e.direction,o=e.deltaX,s=e.deltaY;return i&t.direction||(t.direction&G?(i=0===o?$:o<0?z:W,n=o!=this.pX,r=Math.abs(e.deltaX)):(i=0===s?$:s<0?H:Q,n=s!=this.pY,r=Math.abs(e.deltaY))),e.direction=i,n&&r>t.threshold&&i&t.direction},attrTest:function(e){return Ve.prototype.attrTest.call(this,e)&&(this.state&De||!(this.state&De)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Fe(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),w(Be,Ve,{defaults:{event:\"pinch\",threshold:0,pointers:2},getTouchAction:function(){return[\"none\"]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&De)},emit:function(e){1!==e.scale&&(e.additionalEvent=this.options.event+(e.scale<1?\"in\":\"out\")),this._super.emit.call(this,e)}}),w($e,Me,{defaults:{event:\"press\",pointers:1,time:251,threshold:9},getTouchAction:function(){return[\"auto\"]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime>t.time;if(this._input=e,!r||!n||e.eventType&(q|B)&&!i)this.reset();else if(e.eventType&V)this.reset(),this._timer=m(function(){this.state=Pe,this.tryEmit()},t.time,this);else if(e.eventType&q)return Pe;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===Pe&&(e&&e.eventType&q?this.manager.emit(this.options.event+\"up\",e):(this._input.timeStamp=p(),this.manager.emit(this.options.event,this._input)))}}),w(ze,Ve,{defaults:{event:\"rotate\",threshold:0,pointers:2},getTouchAction:function(){return[\"none\"]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&De)}}),w(We,Ve,{defaults:{event:\"swipe\",threshold:10,velocity:.3,direction:G|K,pointers:1},getTouchAction:function(){return qe.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(G|K)?t=e.overallVelocity:n&G?t=e.overallVelocityX:n&K&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&f(t)>this.options.velocity&&e.eventType&q},emit:function(e){var t=Fe(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),w(He,Me,{defaults:{event:\"tap\",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[\"manipulation\"]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),e.eventType&V&&0===this.count)return this.failTimeout();if(r&&i&&n){if(e.eventType!=q)return this.failTimeout();var o=!this.pTime||e.timeStamp-this.pTime<t.interval,s=!this.pCenter||oe(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,s&&o?this.count+=1:this.count=1,this._input=e,0==this.count%t.taps)return this.hasRequireFailures()?(this._timer=m(function(){this.state=Pe,this.tryEmit()},t.interval,this),De):Pe}return 32},failTimeout:function(){return this._timer=m(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Pe&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Qe.VERSION=\"2.0.7\",Qe.defaults={domEvents:!1,touchAction:\"compute\",enable:!0,inputTarget:null,inputClass:null,preset:[[ze,{enable:!1}],[Be,{enable:!1},[\"rotate\"]],[We,{direction:G}],[qe,{direction:G},[\"swipe\"]],[He],[He,{event:\"doubletap\",taps:2},[\"tap\"]],[$e]],cssProps:{userSelect:\"none\",touchSelect:\"none\",touchCallout:\"none\",contentZooming:\"none\",userDrag:\"none\",tapHighlightColor:\"rgba(0,0,0,0)\"}},Ge.prototype={set:function(e){return u(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var r=this.recognizers,i=t.curRecognizer;(!i||i&&i.state&Pe)&&(i=t.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===t.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(e),!i&&n.state&(De|ke|xe)&&(i=t.curRecognizer=n),o++}},get:function(e){if(e instanceof Me)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(g(e,\"add\",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(g(e,\"remove\",this))return this;if(e=this.get(e)){var t=this.recognizers,n=R(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==a&&t!==a){var n=this.handlers;return y(A(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==a){var n=this.handlers;return y(A(e),function(e){t?n[e]&&n[e].splice(R(n[e],t),1):delete n[e]}),this}},emit:function(e,t){this.options.domEvents&&function(e,t){var n=o.createEvent(\"Event\");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](t),r++}},destroy:function(){this.element&&Ke(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},u(Qe,{INPUT_START:V,INPUT_MOVE:2,INPUT_END:q,INPUT_CANCEL:B,STATE_POSSIBLE:Re,STATE_BEGAN:De,STATE_CHANGED:ke,STATE_ENDED:xe,STATE_RECOGNIZED:Pe,STATE_CANCELLED:Le,STATE_FAILED:32,DIRECTION_NONE:$,DIRECTION_LEFT:z,DIRECTION_RIGHT:W,DIRECTION_UP:H,DIRECTION_DOWN:Q,DIRECTION_HORIZONTAL:G,DIRECTION_VERTICAL:K,DIRECTION_ALL:Y,Manager:Ge,Input:Z,TouchAction:Ae,TouchInput:Ee,MouseInput:le,PointerEventInput:me,TouchMouseInput:Se,SingleTouchInput:be,Recognizer:Me,AttrRecognizer:Ve,Tap:He,Pan:qe,Swipe:We,Pinch:Be,Rotate:ze,Press:$e,on:T,off:I,each:y,merge:_,extend:b,assign:u,inherit:w,bindFn:E,prefixed:x}),(void 0!==i?i:\"undefined\"!=typeof self?self:{}).Hammer=Qe,(r=(function(){return Qe}).call(t,n,t,e))===a||(e.exports=r)}(window,document)},\"z+Ro\":function(e,t,n){\"use strict\";function r(e){return e&&\"function\"==typeof e.schedule}n.d(t,\"a\",function(){return r})},z5t0:function(e,t,n){\"use strict\";n(\"mrSG\"),n(\"NSPt\"),n.d(t,\"a\",function(){return r});let r=(()=>(class{}))()},zUnb:function(e,t,n){\"use strict\";n.r(t);var r=n(\"8Y7J\"),i=n(\"yLV6\"),o=n(\"cUpR\");class s extends o.g{constructor(){super(...arguments),this.overrides={swipe:{direction:i.DIRECTION_ALL}}}}class a{}var u=n(\"mrSG\"),c=n(\"ZZ/e\"),l=n(\"a3Cf\"),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(u.__extends)(t,e),t.prototype.show=function(){return Object(l.cordova)(this,\"show\",{sync:!0},arguments)},t.prototype.hide=function(){return Object(l.cordova)(this,\"hide\",{sync:!0},arguments)},t.pluginName=\"SplashScreen\",t.plugin=\"cordova-plugin-splashscreen\",t.pluginRef=\"navigator.splashscreen\",t.repo=\"https://github.com/apache/cordova-plugin-splashscreen\",t.platforms=[\"Amazon Fire OS\",\"Android\",\"iOS\",\"Windows\"],t}(l.IonicNativePlugin),d=n(\"p74H\"),f=n(\"1JF4\");n(\"6233\");class p{constructor(e,t,n,r,i,o,s,a){this.platform=e,this.splashScreen=t,this.statusBar=n,this.oneSignal=r,this.alertController=i,this.route=o,this.database=s,this.storage=a,this.initializeApp()}initializeApp(){this.platform.ready().then(()=>{this.statusBar.styleDefault(),this.splashScreen.hide(),this.setupPush()})}setupPush(){this.oneSignal.startInit(\"213117e1-5258-44df-9de4-7206c18669b9\",\"929396145480\"),this.oneSignal.inFocusDisplaying(this.oneSignal.OSInFocusDisplayOption.Notification),this.oneSignal.handleNotificationOpened().subscribe(()=>{this.route.navigate([\"/home/tabs/tab3\"])}),this.oneSignal.handleNotificationReceived().subscribe(()=>{this.storage.get(\"current_userID\").then(e=>{this.database.object(\"userReceivedNotification/\"+e).set(!0)})}),this.oneSignal.endInit()}presentAlert(e,t,n){return u.__awaiter(this,void 0,void 0,function*(){const r=yield this.alertController.create({header:e,subHeader:t,message:n,buttons:[\"OK\"]});yield r.present()})}}var m=n(\"pMnS\"),g=n(\"oBZk\"),y=n(\"iInd\"),v=n(\"SVse\"),b=n(\"PVcy\"),_=n(\"xgBC\"),w=r.pb({encapsulation:0,styles:[[\"\"]],data:{}});function E(e){return r.Lb(0,[(e()(),r.rb(0,0,null,null,3,\"ion-app\",[],null,null,null,g.H,g.a)),r.qb(1,49152,null,0,c.f,[r.h,r.k,r.x],null,null),(e()(),r.rb(2,16777216,null,0,1,\"ion-router-outlet\",[],null,null,null,null,null)),r.qb(3,212992,null,0,c.hb,[y.b,r.M,r.j,[8,null],[8,null],c.e,c.Hb,v.g,r.k,y.m,r.x,y.a,[3,c.hb]],null,null)],function(e,t){e(t,3,0)},null)}function C(e){return r.Lb(0,[(e()(),r.rb(0,0,null,null,1,\"app-root\",[],null,null,null,E,w)),r.qb(1,49152,null,0,p,[c.Ib,h,d.a,f.a,c.b,y.m,b.a,_.b],null,null)],null,null)}var S=r.nb(\"app-root\",p,C,{},{},[]),T=n(\"IheW\"),I=n(\"yA/v\"),O=n(\"1XSQ\"),N=n(\"z5t0\"),A=n(\"Xr7G\"),R=n(\"m7gy\"),D=n(\"gJ2e\"),k=n(\"NhF+\"),x=n(\"8aff\"),P=n(\"DJEK\"),L=n(\"Ioyb\"),M=n(\"Zr1d\"),j=n(\"CjQN\"),F=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(u.__extends)(t,e),t.prototype.getBasicAuthHeader=function(e,t){return Object(l.cordova)(this,\"getBasicAuthHeader\",{sync:!0},arguments)},t.prototype.useBasicAuth=function(e,t){return Object(l.cordova)(this,\"useBasicAuth\",{sync:!0},arguments)},t.prototype.getHeaders=function(e){return Object(l.cordova)(this,\"getHeaders\",{sync:!0},arguments)},t.prototype.setHeader=function(e,t,n){return Object(l.cordova)(this,\"setHeader\",{sync:!0},arguments)},t.prototype.getDataSerializer=function(){return Object(l.cordova)(this,\"getDataSerializer\",{sync:!0},arguments)},t.prototype.setDataSerializer=function(e){return Object(l.cordova)(this,\"setDataSerializer\",{sync:!0},arguments)},t.prototype.setCookie=function(e,t){return Object(l.cordova)(this,\"setCookie\",{sync:!0},arguments)},t.prototype.clearCookies=function(){return Object(l.cordova)(this,\"clearCookies\",{sync:!0},arguments)},t.prototype.removeCookies=function(e,t){return Object(l.cordova)(this,\"removeCookies\",{sync:!0},arguments)},t.prototype.getCookieString=function(e){return Object(l.cordova)(this,\"getCookieString\",{sync:!0},arguments)},t.prototype.getRequestTimeout=function(){return Object(l.cordova)(this,\"getRequestTimeout\",{sync:!0},arguments)},t.prototype.setRequestTimeout=function(e){return Object(l.cordova)(this,\"setRequestTimeout\",{sync:!0},arguments)},t.prototype.setSSLCertMode=function(e){return Object(l.cordova)(this,\"setSSLCertMode\",{},arguments)},t.prototype.disableRedirect=function(e){return Object(l.cordova)(this,\"disableRedirect\",{},arguments)},t.prototype.post=function(e,t,n){return Object(l.cordova)(this,\"post\",{},arguments)},t.prototype.get=function(e,t,n){return Object(l.cordova)(this,\"get\",{},arguments)},t.prototype.put=function(e,t,n){return Object(l.cordova)(this,\"put\",{},arguments)},t.prototype.patch=function(e,t,n){return Object(l.cordova)(this,\"patch\",{},arguments)},t.prototype.delete=function(e,t,n){return Object(l.cordova)(this,\"delete\",{},arguments)},t.prototype.head=function(e,t,n){return Object(l.cordova)(this,\"head\",{},arguments)},t.prototype.uploadFile=function(e,t,n,r,i){return Object(l.cordova)(this,\"uploadFile\",{},arguments)},t.prototype.downloadFile=function(e,t,n,r){return Object(l.cordova)(this,\"downloadFile\",{},arguments)},t.prototype.sendRequest=function(e,t){return Object(l.cordova)(this,\"sendRequest\",{},arguments)},t.pluginName=\"HTTP\",t.plugin=\"cordova-plugin-advanced-http\",t.pluginRef=\"cordova.plugin.http\",t.repo=\"https://github.com/silkimen/cordova-plugin-advanced-http\",t.platforms=[\"Android\",\"iOS\"],t}(l.IonicNativePlugin),U=n(\"LG6+\"),V=n(\"01F9\"),q=n(\"Yttj\"),B=n(\"iWj2\");const $=()=>Promise.all([n.e(2),n.e(0),n.e(27)]).then(n.bind(null,\"pZl2\")).then(e=>e.TabsPageModuleNgFactory);class z{}var W=r.ob(a,[p],function(e){return r.Ab([r.Bb(512,r.j,r.Z,[[8,[m.a,S]],[3,r.j],r.v]),r.Bb(5120,r.s,r.lb,[[3,r.s]]),r.Bb(4608,v.l,v.k,[r.s,[2,v.u]]),r.Bb(5120,r.hb,r.mb,[r.x]),r.Bb(5120,r.c,r.ib,[]),r.Bb(5120,r.q,r.jb,[]),r.Bb(5120,r.r,r.kb,[]),r.Bb(4608,o.b,o.k,[v.d]),r.Bb(6144,r.E,null,[o.b]),r.Bb(4608,o.e,s,[]),r.Bb(5120,o.c,function(e,t,n,r,i,s,a,u){return[new o.i(e,t,n),new o.n(r),new o.m(i,s,a,u)]},[v.d,r.x,r.z,v.d,v.d,o.e,r.ab,[2,o.f]]),r.Bb(4608,o.d,o.d,[o.c,r.x]),r.Bb(135680,o.l,o.l,[v.d]),r.Bb(4608,o.j,o.j,[o.d,o.l,r.c]),r.Bb(6144,r.C,null,[o.j]),r.Bb(6144,o.o,null,[o.l]),r.Bb(4608,r.K,r.K,[r.x]),r.Bb(4608,c.c,c.c,[r.x,r.g]),r.Bb(4608,c.Gb,c.Gb,[c.c,r.j,r.p]),r.Bb(4608,c.Jb,c.Jb,[c.c,r.j,r.p]),r.Bb(5120,y.a,y.y,[y.m]),r.Bb(4608,y.g,y.g,[]),r.Bb(6144,y.h,null,[y.g]),r.Bb(135680,y.p,y.p,[y.m,r.u,r.i,r.p,y.h]),r.Bb(4608,y.e,y.e,[]),r.Bb(5120,y.D,y.u,[y.m,v.p,y.i]),r.Bb(5120,y.j,y.B,[y.z]),r.Bb(5120,r.b,function(e){return[e]},[y.j]),r.Bb(4608,T.h,T.n,[v.d,r.z,T.l]),r.Bb(4608,T.o,T.o,[T.h,T.m]),r.Bb(5120,T.a,function(e){return[e]},[T.o]),r.Bb(4608,T.k,T.k,[]),r.Bb(6144,T.i,null,[T.k]),r.Bb(4608,T.g,T.g,[T.i]),r.Bb(6144,T.b,null,[T.g]),r.Bb(4608,T.f,T.j,[T.b,r.p]),r.Bb(4608,T.c,T.c,[T.f]),r.Bb(5120,I.b,I.e,[I.d,[2,I.c]]),r.Bb(4608,b.a,b.a,[I.d,[2,I.c],[2,O.b],r.z,r.x]),r.Bb(4608,A.a,A.a,[I.d,[2,I.c],[2,A.c],[2,A.d],r.z,r.x,[2,A.e]]),r.Bb(4608,D.a,D.a,[I.d,[2,I.c],[2,D.b],r.z,r.x]),r.Bb(5120,_.b,_.d,[_.c]),r.Bb(4608,d.a,d.a,[]),r.Bb(4608,h,h,[]),r.Bb(4608,x.a,x.a,[_.b,c.Mb,T.c,A.a,c.Ib]),r.Bb(4608,P.a,P.a,[]),r.Bb(4608,L.a,L.a,[]),r.Bb(4608,M.a,M.a,[]),r.Bb(4608,f.a,f.a,[]),r.Bb(4608,j.a,j.a,[]),r.Bb(4608,F,F,[]),r.Bb(4608,U.a,U.a,[]),r.Bb(4608,V.a,V.a,[]),r.Bb(4608,q.a,q.a,[]),r.Bb(4608,B.a,B.a,[]),r.Bb(1073742336,v.c,v.c,[]),r.Bb(1024,r.l,o.p,[]),r.Bb(1024,r.w,function(){return[y.t()]},[]),r.Bb(512,y.z,y.z,[r.p]),r.Bb(256,c.Nb,void 0,[]),r.Bb(1024,r.d,function(e,t,n,r,i){return[o.q(e),y.A(t),c.Ob(n,r,i)]},[[2,r.w],y.z,c.Nb,v.d,r.x]),r.Bb(512,r.e,r.e,[[2,r.d]]),r.Bb(131584,r.g,r.g,[r.x,r.ab,r.p,r.l,r.j,r.e]),r.Bb(1073742336,r.f,r.f,[r.g]),r.Bb(1073742336,o.a,o.a,[[3,o.a]]),r.Bb(1073742336,c.Db,c.Db,[]),r.Bb(1024,y.s,y.w,[[3,y.m]]),r.Bb(512,y.r,y.c,[]),r.Bb(512,y.b,y.b,[]),r.Bb(256,y.i,{preloadingStrategy:y.g},[]),r.Bb(1024,v.h,y.v,[v.o,[2,v.a],y.i]),r.Bb(512,v.g,v.g,[v.h,v.o]),r.Bb(512,r.i,r.i,[]),r.Bb(512,r.u,r.H,[r.i,[2,r.I]]),r.Bb(1024,y.k,function(){return[[{path:\"\",loadChildren:\"./login/login.module#LoginPageModule\"},{path:\"home\",loadChildren:$},{path:\"tab4\",loadChildren:\"./tab4/tab4.module#Tab4PageModule\"},{path:\"login\",loadChildren:\"./login/login.module#LoginPageModule\"},{path:\"profile\",loadChildren:\"./profile/profile.module#ProfilePageModule\"},{path:\"upload\",loadChildren:\"./upload/upload.module#UploadPageModule\"},{path:\"post-view\",loadChildren:\"./post-view/post-view.module#PostViewPageModule\"},{path:\"settings\",loadChildren:\"./settings/settings.module#SettingsPageModule\"},{path:\"messaging\",loadChildren:\"./messaging/messaging.module#MessagingPageModule\"},{path:\"messaging-list\",loadChildren:\"./messaging-list/messaging-list.module#MessagingListPageModule\"},{path:\"userfeed\",loadChildren:\"./userfeed/userfeed.module#UserfeedPageModule\"},{path:\"notifications\",loadChildren:\"./notifications/notifications.module#NotificationsPageModule\"},{path:\"notifyme\",loadChildren:\"./notifyme/notifyme.module#NotifymePageModule\"},{path:\"following\",loadChildren:\"./following/following.module#FollowingPageModule\"}]]},[]),r.Bb(512,y.l,c.Eb,[]),r.Bb(1024,y.m,y.x,[r.g,y.r,y.b,v.g,r.p,r.u,r.i,y.k,y.i,[2,y.q],[2,y.l]]),r.Bb(1073742336,y.n,y.n,[[2,y.s],[2,y.m]]),r.Bb(1073742336,z,z,[]),r.Bb(1073742336,T.e,T.e,[]),r.Bb(1073742336,T.d,T.d,[]),r.Bb(1073742336,I.a,I.a,[]),r.Bb(1073742336,N.a,N.a,[]),r.Bb(1073742336,R.a,R.a,[]),r.Bb(1073742336,k.a,k.a,[]),r.Bb(1073742336,_.a,_.a,[]),r.Bb(1073742336,a,a,[]),r.Bb(256,r.Y,!0,[]),r.Bb(256,T.l,\"XSRF-TOKEN\",[]),r.Bb(256,T.m,\"X-XSRF-TOKEN\",[]),r.Bb(256,I.d,{apiKey:\"AIzaSyDnQA3dMGr6-LK2qoDk7L7Ltvm9W9L6vXE\",authDomain:\"uploaded-9719b.firebaseapp.com\",databaseURL:\"https://uploaded-9719b.firebaseio.com\",projectId:\"uploaded-9719b\",storageBucket:\"\",messagingSenderId:\"929396145480\",appId:\"1:929396145480:web:78172aa827a9b94ed2477d\",measurementId:\"G-13TJN9E9VM\"},[]),r.Bb(256,I.c,void 0,[]),r.Bb(256,D.b,\"gs://uploaded-9719b.appspot.com/\",[]),r.Bb(256,_.c,null,[])])});Object(r.R)(),o.h().bootstrapModuleFactory(W).catch(e=>console.log(e))},zVF4:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(\"mrSG\"),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:\"${JSCORE_VERSION}\"},o=function(e,t){if(!e)throw s(t)},s=function(e){return new Error(\"Firebase Database (\"+i.SDK_VERSION+\") INTERNAL ASSERT FAILED: \"+e)},a=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+\"+/=\"},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+\"-_.\"},HAS_NATIVE_SUPPORT:\"function\"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error(\"encodeByteArray takes an array as a parameter\");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],s=i+1<e.length,a=s?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join(\"\")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(a(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(a=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{o=e[n++];var a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join(\"\")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0,a=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},c=function(e){try{return u.decodeString(e,!0)}catch(t){console.error(\"base64Decode failed: \",t)}return null};function l(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&(e[n]=l(e[n],t[n]));return e}var h=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),\"function\"==typeof e&&(t.promise.catch(function(){}),1===e.length?e(n):e(n,r))}},e}();function d(){return\"undefined\"!=typeof navigator&&\"string\"==typeof navigator.userAgent?navigator.userAgent:\"\"}var f=\"FirebaseError\",p=function(e){function t(n,r){var i=e.call(this,r)||this;return i.code=n,i.name=f,Object.setPrototypeOf(i,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,m.prototype.create),i}return r.__extends(t,e),t}(Error),m=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=t[0]||{},i=this.service+\"/\"+e,o=this.errors[e],s=o?g(o,r):\"Error\",a=this.serviceName+\": \"+s+\" (\"+i+\").\",u=new p(i,a),c=0,l=Object.keys(r);c<l.length;c++){var h=l[c];\"_\"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field \"'+h+'\" can cause unexpected behavior.'),u[h]=r[h])}return u},e}();function g(e,t){return e.replace(y,function(e,n){var r=t[n];return null!=r?r.toString():\"<\"+n+\"?>\"})}var y=/\\{\\$([^}]+)}/g;function v(e){return JSON.parse(e)}var b=function(e){var t={},n={},r={},i=\"\";try{var o=e.split(\".\");t=v(c(o[0])||\"\"),n=v(c(o[1])||\"\"),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:t,claims:n,data:r,signature:i}},_=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if(\"string\"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if(\"string\"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}(),w=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(n)}).catch(function(e){n.error(e)})}return e.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},e.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},e.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error(\"Missing Observer.\");void 0===(r=function(e,t){if(\"object\"!=typeof e||null===e)return!1;for(var n=0,r=[\"next\",\"error\",\"complete\"];n<r.length;n++){var i=r[n];if(i in e&&\"function\"==typeof e[i])return!0}return!1}(e)?e:{next:e,error:t,complete:n}).next&&(r.next=E),void 0===r.error&&(r.error=E),void 0===r.complete&&(r.complete=E);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){\"undefined\"!=typeof console&&console.error&&console.error(r)}})},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},e}();function E(){}function C(e,t,n){var r=\"\";switch(t){case 1:r=n?\"first\":\"First\";break;case 2:r=n?\"second\":\"Second\";break;case 3:r=n?\"third\":\"Third\";break;case 4:r=n?\"fourth\":\"Fourth\";break;default:throw new Error(\"errorPrefix called with argumentNumber > 4.  Need to update it?\")}return e+\" failed: \"+r+\" argument \"}t.CONSTANTS=i,t.Deferred=h,t.ErrorFactory=m,t.FirebaseError=p,t.Sha1=_,t.assert=o,t.assertionError=s,t.async=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){e.apply(void 0,n)}).catch(function(e){t&&t(e)})}},t.base64=u,t.base64Decode=c,t.base64Encode=function(e){var t=a(e);return u.encodeByteArray(t,!0)},t.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.createSubscribe=function(e,t){var n=new w(e,t);return n.subscribe.bind(n)},t.decode=b,t.deepCopy=function(e){return l(void 0,e)},t.deepExtend=l,t.errorPrefix=C,t.getUA=d,t.isAdmin=function(e){var t=b(e).claims;return\"object\"==typeof t&&!0===t.admin},t.isBrowser=function(){return\"object\"==typeof self&&self.self===self},t.isEmpty=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},t.isMobileCordova=function(){return\"undefined\"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())},t.isNode=function(){try{return\"[object process]\"===Object.prototype.toString.call(global.process)}catch(e){return!1}},t.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},t.isReactNative=function(){return\"object\"==typeof navigator&&\"ReactNative\"===navigator.product},t.isValidFormat=function(e){var t=b(e).claims;return!!t&&\"object\"==typeof t&&t.hasOwnProperty(\"iat\")},t.isValidTimestamp=function(e){var t=b(e).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return\"object\"==typeof t&&(t.hasOwnProperty(\"nbf\")?r=t.nbf:t.hasOwnProperty(\"iat\")&&(r=t.iat),i=t.hasOwnProperty(\"exp\")?t.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},t.issuedAtTime=function(e){var t=b(e).claims;return\"object\"==typeof t&&t.hasOwnProperty(\"iat\")?t.iat:null},t.jsonEval=v,t.map=function(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r},t.querystring=function(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach(function(n){t.push(encodeURIComponent(e)+\"=\"+encodeURIComponent(n))}):t.push(encodeURIComponent(e)+\"=\"+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];n(o[0],o[1])}return t.length?\"&\"+t.join(\"&\"):\"\"},t.querystringDecode=function(e){var t={};return e.replace(/^\\?/,\"\").split(\"&\").forEach(function(e){if(e){var n=e.split(\"=\");t[n[0]]=n[1]}}),t},t.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},t.stringLength=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},t.stringToByteArray=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var s=i-55296;o(++r<e.length,\"Surrogate pair missing trail surrogate.\"),i=65536+(s<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},t.stringify=function(e){return JSON.stringify(e)},t.validateArgCount=function(e,t,n,r){var i;if(r<t?i=\"at least \"+t:r>n&&(i=0===n?\"none\":\"no more than \"+n),i)throw new Error(e+\" failed: Was called with \"+r+(1===r?\" argument.\":\" arguments.\")+\" Expects \"+i+\".\")},t.validateCallback=function(e,t,n,r){if((!r||n)&&\"function\"!=typeof n)throw new Error(C(e,t,r)+\"must be a valid function.\")},t.validateContextObject=function(e,t,n,r){if((!r||n)&&(\"object\"!=typeof n||null===n))throw new Error(C(e,t,r)+\"must be a valid context object.\")},t.validateNamespace=function(e,t,n,r){if((!r||n)&&\"string\"!=typeof n)throw new Error(C(e,t,r)+\"must be a valid firebase namespace.\")}},zn8P:function(e,t,n){var r={\"./following/following.module.ngfactory\":[\"XC3y\",2,0],\"./login/login.module.ngfactory\":[\"f+ep\",1,2,23],\"./messaging-list/messaging-list.module.ngfactory\":[\"SSJV\",2,0],\"./messaging/messaging.module.ngfactory\":[\"EcmL\",1,2,0],\"./notifications/notifications.module.ngfactory\":[\"4/Id\",2,0],\"./notifyme/notifyme.module.ngfactory\":[\"bJ4j\",2,6],\"./post-view/post-view.module.ngfactory\":[\"cTL/\",1,2,3,7,0],\"./profile/profile.module.ngfactory\":[\"UIoA\",2,8,0],\"./settings/settings.module.ngfactory\":[\"3F3D\",1,2,9,0],\"./tab4/tab4.module.ngfactory\":[\"t68Q\",1,2,10,0],\"./upload/upload.module.ngfactory\":[\"SKLK\",1,2,11,0],\"./userfeed/userfeed.module.ngfactory\":[\"c9HY\",1,2,3,12,0]};function i(e){if(!n.o(r,e))return Promise.resolve().then(function(){var t=new Error(\"Cannot find module '\"+e+\"'\");throw t.code=\"MODULE_NOT_FOUND\",t});var t=r[e],i=t[0];return Promise.all(t.slice(1).map(n.e)).then(function(){return n(i)})}i.keys=function(){return Object.keys(r)},i.id=\"zn8P\",e.exports=i}},[[0,4]]]);","extractedComments":[]}